import{c as S,F as c,e as r,X as t,U as g,aj as I,H as j,S as d,O as E,a1 as tt,r as $,A as Ce,w as de,am as at,b as C,l as n,k as y,f as o,u as i,d as st,D as O,Y,G as Se,N as nt,ai as ot}from"./vendor-nqffDiqV.js";import{x as le,g as rt,W as q}from"./vendor-vue-DlqTWUnc.js";import{_ as lt}from"./Badge.vue_vue_type_script_setup_true_lang-BY3vkOC_.js";import{_ as U}from"./Icon.vue_vue_type_script_setup_true_lang-_tpEHn8d.js";import{_ as ie}from"./Input.vue_vue_type_script_setup_true_lang-CI2uedvx.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-BcWvTmkm.js";import{_ as it}from"./Checkbox.vue_vue_type_script_setup_true_lang-n-ubUn22.js";import{_ as V}from"./Label.vue_vue_type_script_setup_true_lang-Dcjf2cgk.js";import{_ as dt,a as ut,b as ve,c as pe,d as ct,e as te}from"./TableRow.vue_vue_type_script_setup_true_lang-CT6WD3rC.js";import{_ as ge}from"./Card.vue_vue_type_script_setup_true_lang-DXX1LUuu.js";import{_ as mt}from"./CardHeader.vue_vue_type_script_setup_true_lang-DzPsrEyP.js";import{_ as pt}from"./CardTitle.vue_vue_type_script_setup_true_lang-Pyy0js-2.js";import{_ as xe}from"./CardContent.vue_vue_type_script_setup_true_lang-B-Qm-reU.js";import{b as ae,_ as se,a as ne}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BubjEd6N.js";import{_ as oe,a as re}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CYrdtuEj.js";import{_ as fe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DnuQ4cl-.js";import{b as we,_ as he,a as je}from"./AlertDescription.vue_vue_type_script_setup_true_lang-C25dbfP3.js";import{_ as ft}from"./AppLayout.vue_vue_type_script_setup_true_lang-CSF-Jcxa.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-DLhl0SSS.js";import"./vendor-icons-Bz_7KChj.js";import"./vendor-ui-CX4lpbuH.js";import"./useInitials-DzeGKvtI.js";import"./app-BPnMQBia.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DnlBU1RD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const vt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 flex flex-col items-center justify-center"},gt={class:"text-sm font-semibold mb-2 text-foreground"},xt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(f){const a=f,b=S(()=>a.value===null||a.value===void 0||a.value===""?"No Data":a.value),z=S(()=>{const p=Number(a.value);return a.title.toLowerCase().includes("total")&&p>0});return(p,F)=>(r(),c("div",vt,[t("h3",gt,g(f.title),1),t("p",{class:I(["text-2xl font-bold",z.value?"text-red-600":"text-primary"])},g(b.value),3)]))}},yt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},bt={class:"text-base text-center font-semibold mb-4"},_t={key:0,class:"text-center text-sm py-4 text-primary font-medium"},kt={class:"space-y-3"},wt={class:"text-sm"},ht={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},totalRejections:{type:Number,default:0},rejectionType:{type:String,default:""}},setup(f){const a=f;S(()=>a.rejectionType==="load"?"No load rejections recorded. You're on track for Fantastic+ !":a.rejectionType==="block"?"No block rejections recorded. You're on track for Fantastic+ !":"No rejections recorded. You're on track for Fantastic+ !");const b=z=>{const p=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],R=[...a.drivers].sort((T,D)=>D.total_penalty-T.total_penalty).map(T=>T.total_penalty).indexOf(z);return p[R]||"#6b7280"};return(z,p)=>(r(),c("div",yt,[t("h3",bt,g(f.title),1),f.drivers.length===0?(r(),c("div",_t,[f.totalRejections===0?(r(),c(j,{key:0},[f.rejectionType==="block"?(r(),c(j,{key:0},[d(" No block rejections recorded. You're on track for Fantastic+ ! ")],64)):f.rejectionType==="load"?(r(),c(j,{key:1},[d(" No load rejections recorded. You're on track for Fantastic+ ! ")],64)):(r(),c(j,{key:2},[d(" No rejections recorded. You're on track for Fantastic+ ! ")],64))],64)):(r(),c(j,{key:1},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(r(),c(j,{key:1},[p[0]||(p[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",kt,[(r(!0),c(j,null,E(f.drivers,(F,R)=>(r(),c("div",{key:R,class:"flex justify-between items-center"},[t("span",wt,g(F.driver_name),1),t("span",{class:"text-sm font-medium",style:tt({color:b(F.total_penalty)})},g(F.total_penalty),5)]))),128))])],64))]))}},jt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Ct={class:"text-base text-center font-semibold mb-4"},St={class:"h-64"},Dt={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(f){const a=f,b=$(null);let z=null;const p=()=>{if(z&&z.destroy(),!b.value)return;const F=b.value.getContext("2d"),R=[];a.chartData.datasets.forEach(_=>{_.data&&_.data.length&&R.push(..._.data)});const T=R.length>0?Math.min(...R):0,D=R.length>0?Math.max(...R):100;z=new at(F,{type:"line",data:a.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(_){const B=_.raw||0,N=a.averageAcceptance||0,L=a.chartData.dateRangeLabel||"selected period",H=Number(N).toFixed(2);return[`Acceptance Score: ${B}`,`Average Score Over ${L}: ${H}`]}}}},scales:{y:{beginAtZero:!(T>10),min:Math.max(Math.floor(T-5),0),max:Math.min(102.5,Math.ceil(D+5)),ticks:{stepSize:2.5,padding:10,font:{size:11},callback:function(_){return _<=100?_:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return Ce(()=>{p()}),de(()=>a.chartData,()=>{p()},{deep:!0}),(F,R)=>(r(),c("div",jt,[t("h3",Ct,g(f.title),1),t("div",St,[t("canvas",{ref_key:"chartCanvas",ref:b},null,512)])]))}},$t={class:"space-y-2 md:space-y-4 lg:space-y-6 mb-2 md:mb-4 lg:mb-6"},At={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4"},Rt={class:"grid grid-cols-1 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-6"},Tt={key:1,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center"},Nt={class:"flex flex-col sm:flex-row items-center justify-center sm:justify-around gap-3 mb-4"},Ft={class:"text-xs text-muted-foreground text-center mt-2"},Mt={key:2,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center items-center"},Bt={class:"flex flex-col items-center justify-center gap-3 mb-4"},Ut={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null},currentDateFilter:{type:String,default:null},currentFilters:{type:Object,default:()=>({})}},setup(f){const a=f,b=S(()=>{var A;if(!a.metricsData||!a.metricsData.totalRejections)return[];const u=(A=a.currentFilters)==null?void 0:A.rejectionType;return!u||u===""?[{title:"Total Rejected Stops",value:a.metricsData.totalRejections||0},{title:"Rejected In Advance",value:a.metricsData.advancedRejectionCount||0},{title:"Rejected +24 Hours Before Start Time",value:a.metricsData.moreThan24Count||0},{title:"Rejected Within 24 Hours Before Start Time",value:a.metricsData.within24Count||0},{title:"Rejected +6 Hours Before Start Time",value:a.metricsData.moreThan6Count||0},{title:"Rejected Within 6 Hours Before Start Time",value:a.metricsData.within6Count||0},{title:"Rejected After Start Time",value:a.metricsData.afterStartCount||0}]:u==="block"?[{title:"Total Block Rejections",value:a.metricsData.totalRejections||0},{title:"Rejected In Advance",value:a.metricsData.advancedRejectionCount||0},{title:"Rejected +24 Hours Before Start Time",value:a.metricsData.moreThan24Count||0},{title:"Rejected Within 24 Hours Before Start Time",value:a.metricsData.within24Count||0},{title:"Rejected After Start Time",value:a.metricsData.afterStartCount||0}]:u==="load"?[{title:"Total Load Rejections",value:a.metricsData.totalRejections||0},{title:"Rejected +6 Hours Before Start Time",value:a.metricsData.moreThan6Count||0},{title:"Rejected Within 6 Hours Before Start Time",value:a.metricsData.within6Count||0},{title:"Rejected After Start Time",value:a.metricsData.afterStartCount||0}]:[]}),z=S(()=>a.driversData&&a.driversData.length?a.driversData:[]),p=S(()=>a.chartData&&Object.keys(a.chartData).length?a.chartData:{}),F=S(()=>{var u;return((u=a.metricsData)==null?void 0:u.totalRejections)||0}),R=S(()=>{var u;return((u=a.currentFilters)==null?void 0:u.rejectionType)||null}),T=S(()=>!a.chartData||!a.chartData.labels?!1:a.chartData.labels.length>1),D=S(()=>{var u,A,M,P;return((P=(M=(A=(u=a.chartData)==null?void 0:u.datasets)==null?void 0:A[0])==null?void 0:M.data)==null?void 0:P.length)>0}),_=S(()=>D.value?a.chartData.datasets[0].data[0]:0),B=S(()=>{const u=_.value;return u>=98?"fantastic_plus":u>=95?"fantastic":u>=90?"good":u>=85?"fair":"poor"}),N=u=>u==null?"0%":`${Math.round(parseFloat(u))}%`,L=u=>{if(!u)return"Not Available";switch(u){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return u}},H=u=>{if(!u)return"outline";switch(u){case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},h=u=>{if(!u)return"text-gray-600";switch(u){case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}},m=u=>{if(!u)return"";switch(u){case"fantastic_plus":return"Outstanding performance with exceptional acceptance rate";case"fantastic":return"Excellent performance with very high acceptance rate";case"good":return"Solid performance with good acceptance rate";case"fair":return"Acceptable performance with room for improvement";case"poor":return"Performance needs significant improvement";default:return""}};return(u,A)=>(r(),c("div",$t,[t("div",At,[(r(!0),c(j,null,E(b.value,(M,P)=>(r(),C(xt,{key:P,title:M.title,value:M.value,class:"transition-all duration-300 hover:shadow-md"},null,8,["title","value"]))),128))]),t("div",Rt,[n(ht,{title:"Bottom 5 Drivers",drivers:z.value,"total-rejections":F.value,"rejection-type":R.value,class:I({"lg:col-span-1":T.value,"lg:col-span-1 md:col-span-1":!T.value,"transition-all duration-300 hover:shadow-md":!0})},null,8,["drivers","total-rejections","rejection-type","class"]),a.currentDateFilter!="Yesterday"&&T.value?(r(),C(Dt,{key:0,title:"Acceptance Score",chartData:p.value,averageAcceptance:f.averageAcceptance,class:"lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md"},null,8,["chartData","averageAcceptance"])):y("",!0),!T.value&&D.value?(r(),c("div",Tt,[A[0]||(A[0]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",Nt,[t("div",{class:I(["text-4xl md:text-5xl font-bold text-center",h(B.value)])},g(N(_.value)),3),n(i(lt),{variant:H(B.value),class:"text-xs md:text-sm px-3 py-1"},{default:o(()=>[d(g(L(B.value)),1)]),_:1},8,["variant"])]),t("p",Ft,g(m(B.value)),1)])):y("",!0),D.value?y("",!0):(r(),c("div",Mt,[A[3]||(A[3]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",Bt,[n(U,{name:"chart_bar",class:"h-16 w-16 text-muted-foreground/50"}),A[1]||(A[1]=t("div",{class:"text-lg font-medium text-center text-primary"}," No data available ",-1)),A[2]||(A[2]=t("p",{class:"text-sm text-primary/70 text-center max-w-md"}," There is no acceptance data available for the selected time period. Try selecting a different date range or check back later. ",-1))])]))])]))}},Vt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},zt={key:0,class:"col-span-full"},Pt={class:"relative"},Lt=["value"],Wt={class:"col-span-full"},Et={class:"relative"},Ot={class:"relative"},Yt=["value"],Ht={class:"relative"},qt=["value"],It={class:"relative"},Gt={class:"flex items-center space-x-2"},Qt={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},Xt=st({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(f,{emit:a}){var T,D,_,B,N,L,H;const b=f,z=a,p=le({id:(T=b.rejection)==null?void 0:T.id,tenant_id:b.isSuperAdmin?(D=b.rejection)==null?void 0:D.tenant_id:null,date:((_=b.rejection)==null?void 0:_.date)||"",driver_name:((B=b.rejection)==null?void 0:B.driver_name)||"",rejection_type:((N=b.rejection)==null?void 0:N.rejection_type)||"block",rejection_category:((L=b.rejection)==null?void 0:L.rejection_category)||"more_than_24",reason_code_id:((H=b.rejection)==null?void 0:H.reason_code_id)||null,disputed:b.rejection&&b.rejection.disputed!==null?parseInt(b.rejection.disputed)===1:!1,driver_controllable:b.rejection&&b.rejection.driver_controllable!==null?parseInt(b.rejection.driver_controllable)===1:null}),F=S(()=>p.rejection_type==="block"?[{value:"advanced_rejection",label:"Advanced Rejection"},{value:"more_than_24",label:"More than 24 hrs"},{value:"within_24",label:"Within 24 hrs"},{value:"after_start",label:"After start"}]:p.rejection_type==="load"?[{value:"more_than_6",label:"More than 6 hrs"},{value:"within_6",label:"Within 6 hrs"},{value:"after_start",label:"After start"}]:[]);de(()=>p.rejection_type,h=>{const m=F.value.map(u=>u.value);m.includes(p.rejection_category)||(p.rejection_category=m[0]||"")}),de(()=>b.rejection,h=>{h?(p.id=h.id,p.tenant_id=h.tenant_id,p.date=h.date,p.driver_name=h.driver_name,p.rejection_type=h.rejection_type,p.rejection_category=h.rejection_category,p.reason_code_id=h.reason_code_id,p.disputed=h.disputed!==null?parseInt(h.disputed)===1:!1,p.driver_controllable=h.driver_controllable!==null?parseInt(h.driver_controllable)===1:null):p.reset()},{immediate:!0});const R=()=>{const h=!!p.id,m=b.isSuperAdmin?h?"acceptance.update.admin":"acceptance.store.admin":h?"acceptance.update":"acceptance.store",u=b.isSuperAdmin?h?{rejection:p.id}:{}:h?{tenantSlug:b.tenantSlug,rejection:p.id}:{tenantSlug:b.tenantSlug};p[h?"put":"post"](route(m,u),{onSuccess:()=>z("close")})};return(h,m)=>(r(),c("form",{onSubmit:Se(R,["prevent"]),class:"space-y-6"},[t("div",Vt,[f.isSuperAdmin?(r(),c("div",zt,[n(V,null,{default:o(()=>m[9]||(m[9]=[d("Company Name")])),_:1}),t("div",Pt,[O(t("select",{"onUpdate:modelValue":m[0]||(m[0]=u=>i(p).tenant_id=u),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[m[10]||(m[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(r(!0),c(j,null,E(f.tenants,u=>(r(),c("option",{key:u.id,value:u.id},g(u.name),9,Lt))),128))],512),[[Y,i(p).tenant_id]]),m[11]||(m[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):y("",!0),t("div",Wt,[n(V,null,{default:o(()=>m[12]||(m[12]=[d("Date")])),_:1}),n(ie,{type:"date",modelValue:i(p).date,"onUpdate:modelValue":m[1]||(m[1]=u=>i(p).date=u),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(V,null,{default:o(()=>m[13]||(m[13]=[d("Driver Name")])),_:1}),n(ie,{modelValue:i(p).driver_name,"onUpdate:modelValue":m[2]||(m[2]=u=>i(p).driver_name=u),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(V,null,{default:o(()=>m[14]||(m[14]=[d("Rejection Type")])),_:1}),t("div",Et,[O(t("select",{"onUpdate:modelValue":m[3]||(m[3]=u=>i(p).rejection_type=u),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[15]||(m[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[Y,i(p).rejection_type]]),m[16]||(m[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(V,null,{default:o(()=>m[17]||(m[17]=[d("Rejection Category")])),_:1}),t("div",Ot,[O(t("select",{"onUpdate:modelValue":m[4]||(m[4]=u=>i(p).rejection_category=u),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(r(!0),c(j,null,E(F.value,u=>(r(),c("option",{key:u.value,value:u.value},g(u.label),9,Yt))),128))],512),[[Y,i(p).rejection_category]]),m[18]||(m[18]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(V,null,{default:o(()=>m[19]||(m[19]=[d("Reason Code")])),_:1}),t("div",Ht,[O(t("select",{"onUpdate:modelValue":m[5]||(m[5]=u=>i(p).reason_code_id=u),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(r(!0),c(j,null,E(f.reasons,u=>(r(),c("option",{key:u.id,value:u.id},g(u.reason_code),9,qt))),128))],512),[[Y,i(p).reason_code_id]]),m[20]||(m[20]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(V,null,{default:o(()=>m[21]||(m[21]=[d("Driver Controllable")])),_:1}),t("div",It,[O(t("select",{"onUpdate:modelValue":m[6]||(m[6]=u=>i(p).driver_controllable=u),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[22]||(m[22]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[Y,i(p).driver_controllable]]),m[23]||(m[23]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",Gt,[n(it,{checked:i(p).disputed,"onUpdate:checked":m[7]||(m[7]=u=>i(p).disputed=u),id:"disputed"},null,8,["checked"]),n(V,{for:"disputed"},{default:o(()=>m[24]||(m[24]=[d("Disputed")])),_:1})])]),t("div",Qt,[n(w,{type:"button",onClick:m[8]||(m[8]=u=>z("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>m[25]||(m[25]=[d(" Cancel ")])),_:1}),n(w,{type:"submit",disabled:i(p).processing,class:"w-full sm:w-auto"},{default:o(()=>[d(g(i(p).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Zt={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Jt={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},Kt={class:"flex flex-wrap gap-3 ml-3"},ea={class:"relative"},ta={key:1,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},aa={class:"py-1"},sa={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},na=["href"],oa=["action"],ra={class:"flex flex-col items-center gap-2 md:items-start"},la={class:"flex flex-wrap gap-1 md:gap-2"},ia={key:0,class:"text-sm text-muted-foreground"},da={key:0},ua={key:1},ca={key:2},ma={key:3,class:"ml-1"},pa={class:"flex items-center justify-between"},fa={class:"flex items-center gap-2"},va={key:0,class:"ml-4 flex flex-wrap gap-2"},ga={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},xa={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ya={class:"capitalize"},ba={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},_a={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ka={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},wa={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ha={class:"flex flex-col gap-1 md:gap-4"},ja={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},Ca={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-3"},Sa=["value"],Da={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},$a={class:"flex justify-end space-x-2"},Aa={class:"overflow-x-auto"},Ra={class:"flex items-center justify-center"},Ta=["checked"],Na={class:"flex items-center"},Fa={key:0},Ma={key:1},Ba={key:2,class:"ml-2"},Ua={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Va={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},za={key:3,class:"ml-2 opacity-50"},Pa=["value"],La={key:1,class:"capitalize"},Wa={key:0,class:"ml-1 text-xs text-red-500"},Ea={class:"flex space-x-2"},Oa={key:0,class:"border-t bg-muted/20 px-4 py-3"},Ya={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Ha={class:"flex items-center gap-4 text-sm text-muted-foreground"},qa={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},Ia=["value"],Ga={class:"flex flex-wrap"},Qa=["innerHTML"],Xa={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},Za={class:"flex items-center justify-between"},Ja={class:"max-h-[400px] overflow-y-auto rounded-md border"},Ka={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},es={key:1,class:"divide-y"},ts=["onClick"],as={class:"text-xs font-medium sm:text-sm"},ss={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},ns={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},os={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},rs={key:0,class:"space-y-4 rounded-md border p-4"},ls={class:"text-sm font-medium sm:text-base"},is={class:"space-y-3"},ds={class:"flex justify-end space-x-2"},Us={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number},filters:{type:Object,default:()=>({search:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""})},permissions:Array},setup(f){const a=f,b=S(()=>(_.value==="yesterday"||_.value==="current-week")&&a.weekNumber&&a.year?`Week ${a.weekNumber}, ${a.year}`:(_.value==="6w"||_.value==="quarterly")&&a.startWeekNumber&&a.endWeekNumber&&a.year?`Weeks ${a.startWeekNumber}-${a.endWeekNumber}, ${a.year}`:""),z=[{title:a.tenantSlug?"Dashboard":"Admin Dashboard",href:a.tenantSlug?route("dashboard",{tenantSlug:a.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:a.tenantSlug?route("acceptance.index",{tenantSlug:a.tenantSlug}):route("acceptance.index.admin")}],p=$(!1),F=$(!1),R=$(null),T=$(""),D=$(""),_=$(a.dateFilter||"full"),B=$(a.perPage||10),N=$([]),L=$(!1),H=$(null),h=$(!1),m=$(!1),u=$(null),A=$(!1),M=$(null),P=$({reason_code:"",description:""}),Z=$(!1),ye=$(null),ue=["date","driver_name","rejection_type","reason_code","rejection_category","disputed","driver_controllable"],Q=$("date"),X=$("desc"),v=$({...a.filters});de(()=>v.value.rejectionType,(l,e)=>{if(l!==e&&v.value.rejectionCategory){const k=["advanced_rejection","more_than_24","within_24","after_start"],s=["more_than_6","within_6","after_start"];l==="block"&&!k.includes(v.value.rejectionCategory)&&(v.value.rejectionCategory=""),l==="load"&&!s.includes(v.value.rejectionCategory)&&(v.value.rejectionCategory="")}});const G=S(()=>{let l=[...a.rejections.data];return l.sort((e,k)=>{var K,ee;let s=e[Q.value],x=k[Q.value];return Q.value==="reason_code"&&(s=((K=e.reason_code)==null?void 0:K.reason_code)||"",x=((ee=k.reason_code)==null?void 0:ee.reason_code)||""),s===null?1:x===null?-1:(typeof s=="string"&&(s=s.toLowerCase(),x=x.toLowerCase()),s<x?X.value==="asc"?-1:1:s>x?X.value==="asc"?1:-1:0)}),l});function De(l){Q.value===l?X.value=X.value==="asc"?"desc":"asc":(Q.value=l,X.value="asc")}function be(){const l=a.tenantSlug?route("acceptance.index",{tenantSlug:a.tenantSlug}):route("acceptance.index.admin");q.get(l,{...v.value,perPage:B.value,dateFilter:_.value})}function $e(){v.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""},be()}const _e=(l=null)=>{R.value=l,p.value=!0},Ae=()=>{F.value=!0,A.value=!1,M.value=null},Re=()=>{P.value={reason_code:"",description:""},M.value=null,A.value=!0},Te=l=>{P.value={reason_code:l.reason_code,description:l.description||""},M.value=l.id,A.value=!0},Ne=()=>{A.value=!1,M.value=null},Fe=l=>{ye.value=l,Z.value=!0},Me=()=>{const l=le({reason_code:P.value.reason_code,description:P.value.description}),e=M.value?a.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":a.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",k=M.value?a.isSuperAdmin?{code:M.value}:{tenantSlug:a.tenantSlug,code:M.value}:a.isSuperAdmin?{}:{tenantSlug:a.tenantSlug};(M.value?l.put:l.post).call(l,route(e,k),{onSuccess:()=>{D.value=M.value?"Reason code updated successfully.":"Reason code created successfully.",A.value=!1,M.value=null,q.reload({only:["rejection_reason_codes"]})},onError:x=>{console.error(x)}})},Be=l=>{const e=le({}),k=a.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",s=a.isSuperAdmin?{id:l}:{tenantSlug:a.tenantSlug,code:l};e.delete(route(k,s),{onSuccess:()=>{D.value="Reason code deleted successfully.",Z.value=!1,q.reload({only:["rejection_reason_codes"]})}})},Ue=l=>{u.value=l,m.value=!0},Ve=l=>{const e=le({}),k=a.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",s=a.isSuperAdmin?{rejection:l}:{tenantSlug:a.tenantSlug,rejection:l};e.delete(route(k,s),{preserveScroll:!0,onSuccess:()=>{D.value="Rejection deleted successfully.",m.value=!1}})},ze=l=>{if(l){const e=new URL(l),k=e.origin+e.pathname;q.get(k,{...v.value,perPage:B.value,dateFilter:_.value,page:e.searchParams.get("page")||1})}};function ce(l){_.value=l;const e=a.tenantSlug?route("acceptance.index",{tenantSlug:a.tenantSlug}):route("acceptance.index.admin");q.get(e,{...v.value,perPage:B.value,dateFilter:l})}function Pe(){const l=a.tenantSlug?route("acceptance.index",{tenantSlug:a.tenantSlug}):route("acceptance.index.admin");q.get(l,{...v.value,perPage:B.value,dateFilter:_.value})}function me(l){if(!l)return"";const e=l.split("-");if(e.length!==3)return l;const[k,s,x]=e;return`${Number(s)}/${Number(x)}/${k}`}de(D,l=>{l&&setTimeout(()=>{D.value=""},5e3)});const Le=S(()=>{var k,s;if(!((k=a.rejection_breakdown)!=null&&k.by_category)||!((s=a.rejection_breakdown)!=null&&s.by_category.total_rejections))return null;const l=a.rejection_breakdown.by_category,e=a.filters.rejectionType;return e?{totalRejections:l[`total_${e}_rejections`]||0,afterStartCount:l[`after_start_${e}_count`]||0,moreThan24Count:l[`more_than_24_${e}_count`]||0,within24Count:l[`within_24_${e}_count`]||0,advancedRejectionCount:l[`advanced_rejection_${e}_count`]||0,moreThan6Count:l[`more_than_6_${e}_count`]||0,within6Count:l[`within_6_${e}_count`]||0,by_category:!0}:{totalRejections:l.total_rejections||0,afterStartCount:l.after_start_count||0,moreThan24Count:l.more_than_24_count||0,within24Count:l.within_24_count||0,advancedRejectionCount:l.advanced_rejection_count||0,moreThan6Count:l.more_than_6_count||0,within6Count:l.within_6_count||0,by_category:!0}}),We=S(()=>{var l,e,k;return a.filters.rejectionType=="load"?((l=a.rejection_breakdown)==null?void 0:l.bottom_five_drivers.load)||[]:a.filters.rejectionType=="block"?((e=a.rejection_breakdown)==null?void 0:e.bottom_five_drivers.block)||[]:((k=a.rejection_breakdown)==null?void 0:k.bottom_five_drivers.total)||[]}),Ee=S(()=>!a.line_chart_data||a.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:a.line_chart_data.map(l=>l.date),datasets:[{label:"Acceptance Performance",data:a.line_chart_data.map(l=>l.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function Oe(l){q.post(route("rejection_reason_codes.restore.admin",{id:l}),{},{onSuccess:()=>{D.value="Reason code restored successfully",setTimeout(()=>D.value="",3e3)}})}function Ye(l){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&q.delete(route("rejection_reason_codes.forceDelete.admin",{id:l}),{onSuccess:()=>{D.value="Reason code permanently deleted",setTimeout(()=>D.value="",3e3)}})}S(()=>a.rejection_reason_codes.filter(l=>!l.deleted_at));const He=S(()=>G.value.length>0&&N.value.length===G.value.length);function qe(l){l.target.checked?N.value=G.value.map(e=>e.id):N.value=[]}function Ie(){N.value.length>0&&(L.value=!0)}function Ge(){const l=le({ids:N.value}),e=a.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",k=a.isSuperAdmin?{}:{tenantSlug:a.tenantSlug};l.delete(route(e,k),{preserveScroll:!0,onSuccess:()=>{D.value=`${N.value.length} rejection records deleted successfully.`,N.value=[],L.value=!1},onError:s=>{console.error(s)}})}function Qe(l){const e=l.target.files[0];if(!e)return;const k=new FormData;k.append("csv_file",e);const s=a.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:a.tenantSlug});q.post(s,k,{onSuccess:()=>{D.value="Rejections imported successfully",l.target.value=""},onError:x=>{console.error(x),l.target.value=""}})}function Xe(){if(G.value.length===0){T.value="No data available to export",setTimeout(()=>{T.value=""},3e3);return}H.value&&H.value.submit()}const Ze=S(()=>a.tenantSlug?route("acceptance.export",{tenantSlug:a.tenantSlug}):route("acceptance.export.admin"));S(()=>_.value==="yesterday"||_.value==="current-week"||_.value==="6w"||_.value==="quarterly"?a.rejections&&a.rejections.data&&a.rejections.data.length>0:!0);const J=$(!1),Je=S(()=>"/storage/upload-data-temps/Rejections Template.csv");Ce(()=>{const l=e=>{J.value&&!e.target.closest(".relative")&&(J.value=!1)};document.addEventListener("click",l),nt(()=>{document.removeEventListener("click",l)})});const Ke=S(()=>v.value.search||v.value.dateFrom||v.value.dateTo||v.value.rejectionType||v.value.reasonCode||v.value.rejectionCategory||v.value.disputed||v.value.driverControllable);function et(l){if(!l)return"";const e=a.rejection_reason_codes.find(k=>k.id==l);return e?e.reason_code:""}function ke(l){return l?{more_than_6:"More than 6 hrs",within_6:"Within 6 hrs",after_start:"After start",more_than_24:"More than 24 hrs",within_24:"Within 24 hrs",advanced_rejection:"Advanced Rejection"}[l]||l:"—"}const W=S(()=>a.permissions.map(l=>l.name));return(l,e)=>(r(),C(ft,{breadcrumbs:z,tenantSlug:f.tenantSlug,permissions:a.permissions},{default:o(()=>{var k;return[n(i(rt),{title:"Acceptance"}),t("div",Zt,[D.value?(r(),C(i(we),{key:0,variant:"success"},{default:o(()=>[n(i(he),null,{default:o(()=>e[32]||(e[32]=[d("Success")])),_:1}),n(i(je),null,{default:o(()=>[d(g(D.value),1)]),_:1})]),_:1})):y("",!0),T.value?(r(),C(i(we),{key:1,variant:"destructive"},{default:o(()=>[n(i(he),null,{default:o(()=>e[33]||(e[33]=[d("Error")])),_:1}),n(i(je),null,{default:o(()=>[d(g(T.value),1)]),_:1})]),_:1})):y("",!0),t("div",Jt,[e[39]||(e[39]=t("h1",{class:"text-lg font-bold text-gray-800 dark:text-gray-200 md:text-xl lg:text-2xl"},"Acceptance",-1)),t("div",Kt,[W.value.includes("acceptance.create")?(r(),C(w,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=s=>_e()),variant:"default"},{default:o(()=>[n(U,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[34]||(e[34]=d(" Add Rejection "))]),_:1})):y("",!0),N.value.length>0&&W.value.includes("acceptance.delete")?(r(),C(w,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=s=>Ie()),variant:"destructive"},{default:o(()=>[n(U,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+g(N.value.length)+") ",1)]),_:1})):y("",!0),t("div",ea,[W.value.includes("acceptance.import")?(r(),C(w,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[2]||(e[2]=s=>J.value=!J.value),variant:"secondary"},{default:o(()=>[n(U,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Upload CSV ")),n(U,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1})):y("",!0),J.value?(r(),c("div",ta,[t("div",aa,[t("label",sa,[e[36]||(e[36]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:Qe,accept:".csv"},null,32)]),t("a",{href:Je.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,na)])])):y("",!0)]),W.value.includes("acceptance.export")?(r(),C(w,{key:2,class:"px-2 py-0 md:px-4 md:py-2",onClick:Se(Xe,["prevent"]),variant:"outline"},{default:o(()=>[n(U,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[37]||(e[37]=d(" Download CSV "))]),_:1})):y("",!0),f.isSuperAdmin?(r(),C(w,{key:3,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=s=>Ae()),variant:"outline"},{default:o(()=>[n(U,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[38]||(e[38]=d(" Manage Reason Codes "))]),_:1})):y("",!0)])]),t("form",{ref_key:"exportForm",ref:H,action:Ze.value,method:"GET",class:"hidden"},null,8,oa),n(i(ge),null,{default:o(()=>[n(i(xe),{class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",ra,[t("div",la,[n(w,{onClick:e[4]||(e[4]=s=>ce("yesterday")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":_.value==="yesterday"})},{default:o(()=>e[40]||(e[40]=[d(" Yesterday ")])),_:1},8,["class"]),n(w,{onClick:e[5]||(e[5]=s=>ce("current-week")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":_.value==="current-week"})},{default:o(()=>e[41]||(e[41]=[d(" WTD ")])),_:1},8,["class"]),n(w,{onClick:e[6]||(e[6]=s=>ce("6w")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":_.value==="6w"})},{default:o(()=>e[42]||(e[42]=[d(" T6W ")])),_:1},8,["class"]),n(w,{onClick:e[7]||(e[7]=s=>ce("quarterly")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":_.value==="quarterly"})},{default:o(()=>e[43]||(e[43]=[d(" Quarterly ")])),_:1},8,["class"])]),f.dateRange?(r(),c("div",ia,[_.value==="yesterday"&&f.dateRange.start?(r(),c("span",da," Showing data from "+g(me(f.dateRange.start)),1)):f.dateRange.start&&f.dateRange.end?(r(),c("span",ua," Showing data from "+g(me(f.dateRange.start))+" to "+g(me(f.dateRange.end)),1)):(r(),c("span",ca,g(f.dateRange.label),1)),b.value?(r(),c("span",ma,"("+g(b.value)+")",1)):y("",!0)])):y("",!0)])]),_:1})]),_:1}),n(i(ge),{class:"mb-6"},{default:o(()=>[n(i(mt),{class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",pa,[t("div",fa,[n(i(pt),{class:"text-lg md:text-xl lg:text-2xl"},{default:o(()=>e[44]||(e[44]=[d("Filters")])),_:1}),!h.value&&Ke.value?(r(),c("div",va,[v.value.search?(r(),c("div",ga," Search: "+g(v.value.search),1)):y("",!0),v.value.rejectionType?(r(),c("div",xa,[e[45]||(e[45]=d(" Type: ")),t("span",ya,g(v.value.rejectionType),1)])):y("",!0),v.value.reasonCode?(r(),c("div",ba," Reason: "+g(et(v.value.reasonCode)),1)):y("",!0),v.value.rejectionCategory?(r(),c("div",_a," Category: "+g(ke(v.value.rejectionCategory)),1)):y("",!0),v.value.disputed?(r(),c("div",ka," Disputed: "+g(v.value.disputed==="true"?"Yes":"No"),1)):y("",!0),v.value.driverControllable?(r(),c("div",wa," Driver Controllable: "+g(v.value.driverControllable==="true"?"Yes":v.value.driverControllable==="false"?"No":"N/A"),1)):y("",!0)])):y("",!0)]),n(w,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=s=>h.value=!h.value)},{default:o(()=>[d(g(h.value?"Hide Filters":"Show Filters")+" ",1),n(U,{name:h.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),h.value?(r(),C(i(xe),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",ha,[t("div",ja,[t("div",null,[n(i(V),{for:"search"},{default:o(()=>e[46]||(e[46]=[d("Search")])),_:1}),n(i(ie),{class:"h-9 w-full px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:v.value.search,"onUpdate:modelValue":e[9]||(e[9]=s=>v.value.search=s),type:"text",placeholder:"Search by driver name..."},null,8,["modelValue"])])]),t("div",Ca,[t("div",null,[n(i(V),{for:"rejectionType"},{default:o(()=>e[47]||(e[47]=[d("Rejection Type")])),_:1}),O(t("select",{id:"rejectionType","onUpdate:modelValue":e[10]||(e[10]=s=>v.value.rejectionType=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[48]||(e[48]=[t("option",{value:""},"All Types",-1),t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[Y,v.value.rejectionType]])]),t("div",null,[n(i(V),{for:"reasonCode"},{default:o(()=>e[49]||(e[49]=[d("Reason Code")])),_:1}),O(t("select",{id:"reasonCode","onUpdate:modelValue":e[11]||(e[11]=s=>v.value.reasonCode=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[50]||(e[50]=t("option",{value:""},"All Reason Codes",-1)),(r(!0),c(j,null,E(f.rejection_reason_codes,s=>(r(),c("option",{key:s.id,value:s.id},g(s.reason_code),9,Sa))),128))],512),[[Y,v.value.reasonCode]])]),t("div",null,[n(i(V),{for:"rejectionCategory"},{default:o(()=>e[51]||(e[51]=[d("Rejection From Start Time")])),_:1}),O(t("select",{id:"rejectionCategory","onUpdate:modelValue":e[12]||(e[12]=s=>v.value.rejectionCategory=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[57]||(e[57]=t("option",{value:""},"All Categories",-1)),!v.value.rejectionType||v.value.rejectionType==="block"?(r(),c(j,{key:0},[e[52]||(e[52]=t("option",{value:"advanced_rejection"},"Advanced Rejection",-1)),e[53]||(e[53]=t("option",{value:"more_than_24"},"More than 24 hours",-1)),e[54]||(e[54]=t("option",{value:"within_24"},"Within 24 hours",-1))],64)):y("",!0),!v.value.rejectionType||v.value.rejectionType==="load"?(r(),c(j,{key:1},[e[55]||(e[55]=t("option",{value:"more_than_6"},"More than 6 hours",-1)),e[56]||(e[56]=t("option",{value:"within_6"},"Within 6 hours",-1))],64)):y("",!0),e[58]||(e[58]=t("option",{value:"after_start"},"After start time",-1))],512),[[Y,v.value.rejectionCategory]])])]),t("div",Da,[t("div",null,[n(i(V),{for:"disputed"},{default:o(()=>e[59]||(e[59]=[d("Disputed")])),_:1}),O(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=s=>v.value.disputed=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[60]||(e[60]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),512),[[Y,v.value.disputed]])]),t("div",null,[n(i(V),{for:"driverControllable"},{default:o(()=>e[61]||(e[61]=[d("Driver Controllable")])),_:1}),O(t("select",{id:"driverControllable","onUpdate:modelValue":e[14]||(e[14]=s=>v.value.driverControllable=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[62]||(e[62]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"NA"},"N/A",-1)]),512),[[Y,v.value.driverControllable]])])]),t("div",$a,[n(w,{onClick:$e,variant:"ghost",size:"sm"},{default:o(()=>[n(U,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[63]||(e[63]=d(" Reset Filters "))]),_:1}),n(w,{onClick:be,variant:"default",size:"sm"},{default:o(()=>[n(U,{name:"filter",class:"mr-2 h-4 w-4"}),e[64]||(e[64]=d(" Apply Filters "))]),_:1})])])]),_:1})):y("",!0)]),_:1}),f.isSuperAdmin?y("",!0):(r(),C(Ut,{key:2,metricsData:Le.value||{},driversData:We.value||[],chartData:Ee.value||{},averageAcceptance:f.average_acceptance||null,currentDateFilter:((k=a.dateRange)==null?void 0:k.label)||"",currentFilters:v.value||{}},null,8,["metricsData","driversData","chartData","averageAcceptance","currentDateFilter","currentFilters"])),n(i(ge),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:o(()=>[n(i(xe),{class:"p-0"},{default:o(()=>[t("div",Aa,[n(i(dt),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[n(i(ut),null,{default:o(()=>[n(i(ve),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:o(()=>[W.value.includes("acceptance.delete")?(r(),C(i(pe),{key:0,class:"w-[50px]"},{default:o(()=>[t("div",Ra,[t("input",{type:"checkbox",onChange:qe,checked:He.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ta)])]),_:1})):y("",!0),f.isSuperAdmin?(r(),C(i(pe),{key:1},{default:o(()=>e[65]||(e[65]=[d("Company Name")])),_:1})):y("",!0),(r(),c(j,null,E(ue,s=>n(i(pe),{key:s,class:"cursor-pointer",onClick:x=>De(s)},{default:o(()=>[t("div",Na,[s=="rejection_category"?(r(),c("div",Fa,"Rejection From Start")):(r(),c("div",Ma,g(s.replace(/_/g," ").split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ")),1)),Q.value===s?(r(),c("div",Ba,[X.value==="asc"?(r(),c("svg",Ua,e[66]||(e[66]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(r(),c("svg",Va,e[67]||(e[67]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(r(),c("div",za,e[68]||(e[68]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),W.value.includes("acceptance.update")||W.value.includes("acceptance.delete")?(r(),C(i(pe),{key:2},{default:o(()=>e[69]||(e[69]=[d("Actions")])),_:1})):y("",!0)]),_:1})]),_:1}),n(i(ct),null,{default:o(()=>[G.value.length===0?(r(),C(i(ve),{key:0},{default:o(()=>[n(i(te),{colspan:f.isSuperAdmin?ue.length+3:ue.length+2,class:"py-8 text-center text-primary font-medium"},{default:o(()=>e[70]||(e[70]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):y("",!0),(r(!0),c(j,null,E(G.value,s=>(r(),C(i(ve),{key:s.id,class:"hover:bg-muted/50"},{default:o(()=>[W.value.includes("acceptance.delete")?(r(),C(i(te),{key:0,class:"text-center"},{default:o(()=>[O(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[15]||(e[15]=x=>N.value=x),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Pa),[[ot,N.value]])]),_:2},1024)):y("",!0),f.isSuperAdmin?(r(),C(i(te),{key:1},{default:o(()=>{var x;return[d(g(((x=s.tenant)==null?void 0:x.name)||"—"),1)]}),_:2},1024)):y("",!0),(r(),c(j,null,E(ue,x=>n(i(te),{key:x,class:"whitespace-nowrap"},{default:o(()=>{var K,ee;return[x==="date"?(r(),c(j,{key:0},[d(g(me(s[x])),1)],64)):x==="rejection_type"?(r(),c("span",La,g(s[x]),1)):x==="reason_code"?(r(),c(j,{key:2},[d(g(((K=s.reason_code)==null?void 0:K.reason_code)||"—")+" ",1),(ee=s.reason_code)!=null&&ee.deleted_at?(r(),c("span",Wa,"(Deleted)")):y("",!0)],64)):x==="disputed"?(r(),c(j,{key:3},[d(g(s[x]?"Yes":"No"),1)],64)):x==="driver_controllable"?(r(),c(j,{key:4},[d(g(s[x]===null?"N/A":s[x]?"Yes":"No"),1)],64)):x==="rejection_category"?(r(),c(j,{key:5},[d(g(ke(s[x])),1)],64)):(r(),c(j,{key:6},[d(g(s[x]),1)],64))]}),_:2},1024)),64)),W.value.includes("acceptance.delete")||W.value.includes("acceptance.update")?(r(),C(i(te),{key:2},{default:o(()=>[t("div",Ea,[W.value.includes("acceptance.update")?(r(),C(w,{key:0,size:"sm",onClick:x=>_e(s),variant:"warning"},{default:o(()=>[n(U,{name:"pencil",class:"mr-1 h-4 w-4"}),e[71]||(e[71]=d(" Edit "))]),_:2},1032,["onClick"])):y("",!0),W.value.includes("acceptance.delete")?(r(),C(w,{key:1,size:"sm",variant:"destructive",onClick:x=>Ue(s.id)},{default:o(()=>[n(U,{name:"trash",class:"mr-1 h-4 w-4"}),e[72]||(e[72]=d(" Delete "))]),_:2},1032,["onClick"])):y("",!0)])]),_:2},1024)):y("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),f.rejections.links?(r(),c("div",Oa,[t("div",Ya,[t("div",Ha,[t("span",null,"Showing "+g(G.value.length)+" of "+g(f.rejections.data.length)+" entries",1),t("div",qa,[e[73]||(e[73]=t("span",{class:"text-sm"},"Show:",-1)),O(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>B.value=s),onChange:Pe,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(r(),c(j,null,E([10,25,50,100],s=>t("option",{key:s,value:s},g(s),9,Ia)),64))],544),[[Y,B.value]])])]),t("div",Ga,[(r(!0),c(j,null,E(f.rejections.links,s=>(r(),C(w,{key:s.label,onClick:x=>ze(s.url),disabled:!s.url,variant:"ghost",size:"sm",class:I(["mx-1",{"border-primary bg-primary/10 text-primary":s.active}])},{default:o(()=>[t("span",{innerHTML:s.label},null,8,Qa)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):y("",!0)]),_:1})]),_:1}),n(i(ae),{open:p.value,"onUpdate:open":e[18]||(e[18]=s=>p.value=s)},{default:o(()=>[n(i(se),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:o(()=>[n(i(oe),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(re),{class:"text-lg sm:text-xl"},{default:o(()=>[d(g(R.value?"Edit":"Add")+" Rejection",1)]),_:1}),n(i(ne),{class:"text-xs sm:text-sm"},{default:o(()=>[d(" Fill in the details to "+g(R.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),n(Xt,{rejection:R.value,reasons:f.rejection_reason_codes,tenants:f.tenants,"is-super-admin":f.isSuperAdmin,"tenant-slug":f.tenantSlug,onClose:e[17]||(e[17]=s=>p.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),f.isSuperAdmin?(r(),C(i(ae),{key:3,open:F.value,"onUpdate:open":e[22]||(e[22]=s=>F.value=s)},{default:o(()=>[n(i(se),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:o(()=>[n(i(oe),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(re),{class:"text-lg sm:text-xl"},{default:o(()=>e[74]||(e[74]=[d("Manage Reason Codes")])),_:1}),n(i(ne),{class:"text-xs sm:text-sm"},{default:o(()=>e[75]||(e[75]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",Xa,[t("div",Za,[e[77]||(e[77]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Reason Codes",-1)),n(w,{onClick:Re,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>[n(U,{name:"plus",class:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e[76]||(e[76]=d(" Add New Code "))]),_:1})]),t("div",Ja,[!f.rejection_reason_codes||f.rejection_reason_codes.length===0?(r(),c("div",Ka," No reason codes found ")):(r(),c("div",es,[(r(!0),c(j,null,E(f.rejection_reason_codes,s=>(r(),c("div",{key:s.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:x=>Te(s)},[t("div",as,[d(g(s.reason_code)+" ",1),s.deleted_at?(r(),c("span",ss,"(Deleted)")):y("",!0)]),s.description?(r(),c("div",ns,g(s.description),1)):y("",!0)],8,ts),t("div",os,[f.isSuperAdmin?(r(),c(j,{key:0},[s.deleted_at?(r(),c(j,{key:0},[n(w,{onClick:x=>Oe(s.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[n(U,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[78]||(e[78]=d(" Restore "))]),_:2},1032,["onClick"]),n(w,{onClick:x=>Ye(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[n(U,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[79]||(e[79]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(r(),C(w,{key:1,onClick:x=>Fe(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[n(U,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[80]||(e[80]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):y("",!0)])]))),128))]))]),A.value?(r(),c("div",rs,[t("h3",ls,g(M.value?"Edit":"Add")+" Reason Code",1),t("div",is,[t("div",null,[n(i(V),{for:"reason_code",class:"text-xs sm:text-sm"},{default:o(()=>e[81]||(e[81]=[d("Code")])),_:1}),n(i(ie),{id:"reason_code",modelValue:P.value.reason_code,"onUpdate:modelValue":e[19]||(e[19]=s=>P.value.reason_code=s),placeholder:"Enter reason code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[n(i(V),{for:"description",class:"text-xs sm:text-sm"},{default:o(()=>e[82]||(e[82]=[d("Description")])),_:1}),n(i(ie),{id:"description",modelValue:P.value.description,"onUpdate:modelValue":e[20]||(e[20]=s=>P.value.description=s),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",ds,[n(w,{onClick:Ne,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>e[83]||(e[83]=[d("Cancel")])),_:1}),n(w,{onClick:Me,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>e[84]||(e[84]=[d("Save")])),_:1})])])])):y("",!0)]),n(i(fe),{class:"px-4 sm:px-6"},{default:o(()=>[n(w,{onClick:e[21]||(e[21]=s=>F.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[85]||(e[85]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):y("",!0),n(i(ae),{open:Z.value,"onUpdate:open":e[25]||(e[25]=s=>Z.value=s)},{default:o(()=>[n(i(se),{class:"max-w-[95vw] sm:max-w-md"},{default:o(()=>[n(i(oe),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(re),{class:"text-lg sm:text-xl"},{default:o(()=>e[86]||(e[86]=[d("Confirm Deletion")])),_:1}),n(i(ne),{class:"text-xs sm:text-sm"},{default:o(()=>e[87]||(e[87]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),n(i(fe),{class:"px-4 sm:px-6"},{default:o(()=>[n(w,{type:"button",onClick:e[23]||(e[23]=s=>Z.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[88]||(e[88]=[d(" Cancel ")])),_:1}),n(w,{type:"button",onClick:e[24]||(e[24]=s=>Be(ye.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[89]||(e[89]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n(i(ae),{open:L.value,"onUpdate:open":e[28]||(e[28]=s=>L.value=s)},{default:o(()=>[n(i(se),{class:"max-w-[95vw] sm:max-w-md"},{default:o(()=>[n(i(oe),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(re),{class:"text-lg sm:text-xl"},{default:o(()=>e[90]||(e[90]=[d("Confirm Bulk Deletion")])),_:1}),n(i(ne),{class:"text-xs sm:text-sm"},{default:o(()=>[d(" Are you sure you want to delete "+g(N.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),n(i(fe),{class:"px-4 sm:px-6"},{default:o(()=>[n(w,{type:"button",onClick:e[26]||(e[26]=s=>L.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[91]||(e[91]=[d(" Cancel ")])),_:1}),n(w,{type:"button",onClick:e[27]||(e[27]=s=>Ge()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[92]||(e[92]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),n(i(ae),{open:m.value,"onUpdate:open":e[31]||(e[31]=s=>m.value=s)},{default:o(()=>[n(i(se),{class:"max-w-[95vw] sm:max-w-md"},{default:o(()=>[n(i(oe),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(re),{class:"text-lg sm:text-xl"},{default:o(()=>e[93]||(e[93]=[d("Confirm Deletion")])),_:1}),n(i(ne),{class:"text-xs sm:text-sm"},{default:o(()=>e[94]||(e[94]=[d(" Are you sure you want to delete this rejection record? This action cannot be undone. ")])),_:1})]),_:1}),n(i(fe),{class:"px-4 sm:px-6"},{default:o(()=>[n(w,{type:"button",onClick:e[29]||(e[29]=s=>m.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[95]||(e[95]=[d(" Cancel ")])),_:1}),n(w,{type:"button",onClick:e[30]||(e[30]=s=>Ve(u.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[96]||(e[96]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]}),_:1},8,["tenantSlug","permissions"]))}};export{Us as default};
