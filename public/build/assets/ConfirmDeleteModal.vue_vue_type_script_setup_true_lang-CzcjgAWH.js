import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{S as W,W as R,x as D}from"./vendor-vue-BInP8APy.js";import{F as f,e as d,X as t,E as h,H as C,O as S,U as _,z as l,b as w,f as u,S as v,u as s,d as T,r as V,c as P,w as B,G as H,C as q,Y as G,ak as O}from"./vendor-DrR5RGOb.js";import{_ as L}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as k}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{_ as N}from"./Checkbox.vue_vue_type_script_setup_true_lang-DYsZx5V7.js";import{_ as U}from"./InputError.vue_vue_type_script_setup_true_lang-DJFUZLlW.js";import{X as M,E as Y,d as I,L as F}from"./vendor-icons-CZvmGlJ0.js";const J={class:"w-full overflow-x-auto"},K={class:"rounded-md border"},Q={class:"w-full caption-bottom text-sm"},Z={class:"[&_tr:last-child]:border-0"},ee={class:"p-4 align-middle font-medium"},se={class:"p-4 align-middle"},te={class:"p-4 align-middle text-right"},oe={class:"flex justify-end space-x-2"},ne={key:0,class:"mt-6 flex justify-center"},le={class:"flex flex-wrap items-center gap-1 justify-center"},zs={__name:"UserList",props:{users:Object,isSuperAdmin:{type:Boolean,default:!1}},setup(g){const y=o=>{o&&R.get(o,{},{only:["users"]})};return(o,a)=>(d(),f("div",J,[t("div",K,[t("table",Q,[a[3]||(a[3]=t("thead",{class:"[&_tr]:border-b"},[t("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Name"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Email"),t("th",{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},"Actions")])],-1)),t("tbody",Z,[(d(!0),f(C,null,S(g.users.data,e=>(d(),f("tr",{key:e.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("td",ee,_(e.name),1),t("td",se,_(e.email),1),t("td",te,[t("div",oe,[l(s(x),{onClick:r=>o.$emit("edit",e),variant:"outline",size:"sm"},{default:u(()=>a[0]||(a[0]=[v(" Edit ")])),_:2},1032,["onClick"]),l(s(x),{onClick:r=>o.$emit("delete",e),variant:"destructive",size:"sm"},{default:u(()=>a[1]||(a[1]=[v(" Delete ")])),_:2},1032,["onClick"]),g.isSuperAdmin?(d(),w(s(W),{key:0,href:o.route("impersonate.start",e.id),as:"button"},{default:u(()=>[l(s(x),{variant:"secondary",size:"sm"},{default:u(()=>a[2]||(a[2]=[v(" Impersonate ")])),_:1})]),_:2},1032,["href"])):h("",!0)])])]))),128))])])]),g.users.links?(d(),f("div",ne,[t("nav",le,[(d(!0),f(C,null,S(g.users.links,e=>(d(),w(s(x),{key:e.label,onClick:r=>y(e.url),disabled:!e.url,variant:e.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:e.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):h("",!0)]))}},ie={class:"w-full overflow-x-auto"},ae={class:"rounded-md border"},re={class:"w-full caption-bottom text-sm"},de={class:"[&_tr:last-child]:border-0"},ue={class:"p-4 align-middle font-medium"},me={class:"p-4 align-middle"},ce={class:"flex flex-wrap gap-1"},fe={class:"p-4 align-middle text-right"},pe={class:"flex justify-end space-x-2"},ve={key:0,class:"mt-6 flex justify-center"},ge={class:"flex flex-wrap items-center gap-1 justify-center"},Us={__name:"RoleList",props:{roles:Object},setup(g){const y=o=>{o&&R.get(o,{},{only:["roles"]})};return(o,a)=>(d(),f("div",ie,[t("div",ae,[t("table",re,[a[2]||(a[2]=t("thead",{class:"[&_tr]:border-b"},[t("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Role Name"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Permissions"),t("th",{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},"Actions")])],-1)),t("tbody",de,[(d(!0),f(C,null,S(g.roles.data,e=>(d(),f("tr",{key:e.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("td",ue,_(e.name),1),t("td",me,[t("div",ce,[(d(!0),f(C,null,S(e.permissions,r=>(d(),f("span",{key:r.id,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground"},_(r.name),1))),128))])]),t("td",fe,[t("div",pe,[l(s(x),{onClick:r=>o.$emit("edit",e),variant:"outline",size:"sm"},{default:u(()=>a[0]||(a[0]=[v(" Edit ")])),_:2},1032,["onClick"]),l(s(x),{onClick:r=>o.$emit("delete",e),variant:"destructive",size:"sm"},{default:u(()=>a[1]||(a[1]=[v(" Delete ")])),_:2},1032,["onClick"])])])]))),128))])])]),g.roles.links?(d(),f("div",ve,[t("nav",ge,[(d(!0),f(C,null,S(g.roles.links,e=>(d(),w(s(x),{key:e.label,onClick:r=>y(e.url),disabled:!e.url,variant:e.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:e.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):h("",!0)]))}},be={class:"fixed inset-0 z-[100]"},xe={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},_e={class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-lg md:max-w-2xl lg:max-w-4xl overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},ye={class:"flex justify-between items-center mb-4"},he={class:"text-xl sm:text-2xl font-bold text-foreground"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ke={class:"space-y-2"},we={class:"space-y-2"},Ce={class:"space-y-2 md:col-span-2"},Se={class:"relative"},je={key:0,class:"space-y-2 md:col-span-2"},ze=["value"],Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2"},Le={class:"space-y-2"},Ee={class:"relative"},Ae={class:"flex items-center space-x-2"},Ve={class:"h-60 border rounded-md p-2 overflow-y-auto"},Pe={class:"space-y-2"},Oe={class:"relative"},De={class:"flex items-center space-x-2"},Te={class:"h-60 border rounded-md p-2 overflow-y-auto"},Me={key:0,class:"ml-2 text-xs px-2 py-0.5 rounded-full border border-gray-200 bg-gray-100 dark:border-gray-700 dark:bg-gray-800 text-gray-600 dark:text-gray-300"},Ne={class:"flex justify-end space-x-3 pt-4"},Ls=T({__name:"UserForm",props:{user:{type:Object,default:null},tenants:{type:Array,default:()=>[]},roles:{type:Array,default:()=>[]},permissions:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close","saved"],setup(g,{emit:y}){const o=g,a=y,e=D({name:o.user?o.user.name:"",email:o.user?o.user.email:"",password:o.user?o.user.password:"",tenant_id:o.user?o.user.tenant_id:o.tenants.length?o.tenants[0].id:null,roles:o.user&&o.user.roles?o.user.roles.map(m=>m.id):[],user_permissions:o.user&&o.user.permissions?o.user.permissions.map(m=>m.name):[]}),r=V(""),c=V(""),b=V(!1),j=P(()=>{if(!r.value.trim())return o.roles;const m=r.value.toLowerCase();return o.roles.filter(n=>n.name.toLowerCase().includes(m))}),E=P(()=>{if(!c.value.trim())return o.permissions;const m=c.value.toLowerCase();return o.permissions.filter(n=>n.name.toLowerCase().includes(m))}),z=P(()=>{const m=new Set;return o.roles.forEach(n=>{e.roles.includes(n.id)&&n.permissions&&n.permissions.forEach(i=>{m.add(i.name)})}),Array.from(m)});B(()=>o.user,m=>{m?(e.name=m.name,e.email=m.email,e.password=m.password,e.tenant_id=m.tenant_id,e.roles=m.roles?m.roles.map(n=>n.id):[],e.user_permissions=m.permissions?m.permissions.map(n=>n.name):[]):(e.name="",e.email="",e.password="",e.tenant_id=o.tenants.length?o.tenants[0].id:null,e.roles=[],e.user_permissions=[])},{immediate:!0});const A=()=>{o.user?o.isSuperAdmin?e.put(route("admin.users.update",o.user),{onSuccess:()=>{a("saved")}}):e.put(route("users.update",[o.tenantSlug,o.user]),{onSuccess:()=>{a("saved")}}):o.isSuperAdmin?e.post(route("admin.users.store"),{onSuccess:()=>{a("saved")}}):e.post(route("users.store",o.tenantSlug),{onSuccess:()=>{a("saved")}})},$=m=>{const n=e.roles.indexOf(m);n===-1?e.roles.push(m):e.roles.splice(n,1)},p=m=>{if(z.value.includes(m))return;const n=e.user_permissions.indexOf(m);n===-1?e.user_permissions.push(m):e.user_permissions.splice(n,1)};return(m,n)=>(d(),f("div",be,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:n[0]||(n[0]=()=>a("close"))}),t("div",xe,[t("div",_e,[t("div",ye,[t("h2",he,_(g.user?"Edit User":"Create User"),1),l(s(x),{variant:"ghost",size:"icon",onClick:n[1]||(n[1]=()=>a("close"))},{default:u(()=>[l(s(M),{class:"h-5 w-5"})]),_:1})]),t("form",{onSubmit:H(A,["prevent"]),class:"space-y-4"},[t("div",$e,[t("div",ke,[l(s(k),{for:"name"},{default:u(()=>n[12]||(n[12]=[v("Name")])),_:1}),l(s(L),{id:"name",modelValue:s(e).name,"onUpdate:modelValue":n[2]||(n[2]=i=>s(e).name=i),placeholder:"Enter name",class:"w-full"},null,8,["modelValue"]),l(U,{message:s(e).errors.name},null,8,["message"])]),t("div",we,[l(s(k),{for:"email"},{default:u(()=>n[13]||(n[13]=[v("Email")])),_:1}),l(s(L),{id:"email",modelValue:s(e).email,"onUpdate:modelValue":n[3]||(n[3]=i=>s(e).email=i),type:"email",placeholder:"Enter email",class:"w-full"},null,8,["modelValue"]),l(U,{message:s(e).errors.email},null,8,["message"])]),t("div",Ce,[l(s(k),{for:"password"},{default:u(()=>n[14]||(n[14]=[v("Password")])),_:1}),t("div",Se,[l(s(L),{id:"password",modelValue:s(e).password,"onUpdate:modelValue":n[4]||(n[4]=i=>s(e).password=i),type:b.value?"text":"password",placeholder:"Enter password",class:"w-full pr-10"},null,8,["modelValue","type"]),t("button",{type:"button",onClick:n[5]||(n[5]=i=>b.value=!b.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[b.value?(d(),w(s(I),{key:1,class:"h-5 w-5"})):(d(),w(s(Y),{key:0,class:"h-5 w-5"}))])]),l(U,{message:s(e).errors.password},null,8,["message"])]),g.isSuperAdmin?(d(),f("div",je,[l(s(k),{for:"tenant"},{default:u(()=>n[15]||(n[15]=[v("Company Name")])),_:1}),q(t("select",{id:"tenant","onUpdate:modelValue":n[6]||(n[6]=i=>s(e).tenant_id=i),class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[n[16]||(n[16]=t("option",{value:null},"None",-1)),(d(!0),f(C,null,S(g.tenants,i=>(d(),f("option",{value:i.id,key:i.id},_(i.name),9,ze))),128))],512),[[G,s(e).tenant_id]]),l(U,{message:s(e).errors.tenant_id},null,8,["message"])])):h("",!0)]),t("div",Ue,[t("div",Le,[l(s(k),null,{default:u(()=>n[17]||(n[17]=[v("Roles")])),_:1}),t("div",Ee,[t("div",Ae,[l(s(L),{modelValue:r.value,"onUpdate:modelValue":n[7]||(n[7]=i=>r.value=i),placeholder:"Search roles...",class:"w-full"},null,8,["modelValue"]),r.value?(d(),w(s(x),{key:0,type:"button",variant:"ghost",size:"icon",onClick:n[8]||(n[8]=i=>r.value=""),class:"absolute right-2"},{default:u(()=>[l(s(M),{class:"h-4 w-4"})]),_:1})):h("",!0)])]),t("div",Ve,[(d(!0),f(C,null,S(j.value,i=>(d(),f("div",{key:i.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[l(s(N),{id:`role-${i.id}`,checked:s(e).roles.includes(i.id),"onUpdate:checked":X=>$(i.id),class:"mr-2"},null,8,["id","checked","onUpdate:checked"]),l(s(k),{for:`role-${i.id}`,class:"cursor-pointer"},{default:u(()=>[v(_(i.name),1)]),_:2},1032,["for"])]))),128))]),l(U,{message:s(e).errors.roles},null,8,["message"])]),t("div",Pe,[l(s(k),null,{default:u(()=>n[18]||(n[18]=[v("Permissions")])),_:1}),t("div",Oe,[t("div",De,[l(s(L),{modelValue:c.value,"onUpdate:modelValue":n[9]||(n[9]=i=>c.value=i),placeholder:"Search permissions...",class:"w-full"},null,8,["modelValue"]),c.value?(d(),w(s(x),{key:0,type:"button",variant:"ghost",size:"icon",onClick:n[10]||(n[10]=i=>c.value=""),class:"absolute right-2"},{default:u(()=>[l(s(M),{class:"h-4 w-4"})]),_:1})):h("",!0)])]),t("div",Te,[(d(!0),f(C,null,S(E.value,i=>(d(),f("div",{key:i.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[l(s(N),{id:`permission-${i.name}`,checked:s(e).user_permissions.includes(i.name),"onUpdate:checked":X=>p(i.name),disabled:z.value.includes(i.name),class:"mr-2"},null,8,["id","checked","onUpdate:checked","disabled"]),l(s(k),{for:`permission-${i.name}`,class:"cursor-pointer"},{default:u(()=>[v(_(i.name)+" ",1),z.value.includes(i.name)?(d(),f("span",Me," inherited ")):h("",!0)]),_:2},1032,["for"])]))),128))]),l(U,{message:s(e).errors.user_permissions},null,8,["message"])])]),t("div",Ne,[l(s(x),{type:"button",onClick:n[11]||(n[11]=()=>a("close")),variant:"outline"},{default:u(()=>n[19]||(n[19]=[v(" Cancel ")])),_:1}),l(s(x),{type:"submit",disabled:s(e).processing},{default:u(()=>[s(e).processing?(d(),w(s(F),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):h("",!0),v(" "+_(s(e).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])])]))}}),Re={class:"w-full overflow-x-auto"},Be={class:"rounded-md border"},He={class:"w-full caption-bottom text-sm"},Xe={class:"[&_tr:last-child]:border-0"},Fe={class:"p-4 align-middle font-medium"},We={class:"p-4 align-middle"},qe={class:"p-4 align-middle text-right"},Ge={class:"flex justify-end space-x-2"},Ye={key:0,class:"mt-6 flex justify-center"},Ie={class:"flex flex-wrap items-center gap-1 justify-center"},Es={__name:"TenantList",props:{tenants:{type:Object,default:()=>({data:[],links:[]})}},setup(g){const y=g,o=Array.isArray(y.tenants)?y.tenants:y.tenants.data||[],a=e=>{e&&R.get(e,{},{only:["tenants"]})};return(e,r)=>(d(),f("div",Re,[t("div",Be,[t("table",He,[r[2]||(r[2]=t("thead",{class:"[&_tr]:border-b"},[t("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Company Name"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Slug"),t("th",{class:"h-12 px-4 text-right pr-16 align-middle font-medium text-muted-foreground"},"Actions")])],-1)),t("tbody",Xe,[(d(!0),f(C,null,S(s(o),c=>(d(),f("tr",{key:c.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("td",Fe,_(c.name),1),t("td",We,_(c.slug),1),t("td",qe,[t("div",Ge,[l(s(x),{onClick:b=>e.$emit("edit",c),variant:"outline",size:"sm"},{default:u(()=>r[0]||(r[0]=[v(" Edit ")])),_:2},1032,["onClick"]),l(s(x),{onClick:b=>e.$emit("delete",c),variant:"destructive",size:"sm"},{default:u(()=>r[1]||(r[1]=[v(" Delete ")])),_:2},1032,["onClick"])])])]))),128))])])]),g.tenants.links?(d(),f("div",Ye,[t("nav",Ie,[(d(!0),f(C,null,S(g.tenants.links,c=>(d(),w(s(x),{key:c.label,onClick:b=>a(c.url),disabled:!c.url,variant:c.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:c.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):h("",!0)]))}},Je={class:"fixed inset-0 z-50"},Ke={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Qe={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md overflow-y-auto max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},Ze={class:"flex justify-between items-center mb-4"},es={class:"text-2xl font-bold text-foreground"},ss={class:"space-y-2"},ts={key:0,class:"space-y-2"},os={class:"flex justify-end space-x-3 pt-4"},As=T({__name:"TenantForm",props:{tenant:{type:Object,default:null}},emits:["close","saved"],setup(g,{emit:y}){const o=g,a=y,e=D({name:o.tenant?o.tenant.name:"",slug:o.tenant?o.tenant.slug:""});B(()=>o.tenant,c=>{c?(e.name=c.name,e.slug=c.slug):(e.name="",e.slug="")},{immediate:!0});const r=()=>{o.tenant?e.put(route("admin.tenants.update",o.tenant),{onSuccess:()=>{a("saved")}}):e.post(route("admin.tenants.store"),{onSuccess:()=>{a("saved")}})};return(c,b)=>{const j=O("X"),E=O("Loader2");return d(),f("div",Je,[b[7]||(b[7]=t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),t("div",Ke,[t("div",Qe,[t("div",Ze,[t("h2",es,_(g.tenant?"Edit Company":"Create Company"),1),l(s(x),{variant:"ghost",size:"icon",onClick:b[0]||(b[0]=()=>a("close"))},{default:u(()=>[l(j,{class:"h-5 w-5"})]),_:1})]),t("form",{onSubmit:H(r,["prevent"]),class:"space-y-4"},[t("div",ss,[l(s(k),{for:"name"},{default:u(()=>b[4]||(b[4]=[v("Company Name")])),_:1}),l(s(L),{id:"name",modelValue:s(e).name,"onUpdate:modelValue":b[1]||(b[1]=z=>s(e).name=z),placeholder:"Enter company name",class:"w-full"},null,8,["modelValue"]),l(U,{message:s(e).errors.name},null,8,["message"])]),g.tenant?(d(),f("div",ts,[l(s(k),{for:"slug"},{default:u(()=>b[5]||(b[5]=[v("Slug")])),_:1}),l(s(L),{id:"slug",modelValue:s(e).slug,"onUpdate:modelValue":b[2]||(b[2]=z=>s(e).slug=z),placeholder:"Enter company slug",class:"w-full"},null,8,["modelValue"]),l(U,{message:s(e).errors.slug},null,8,["message"])])):h("",!0),t("div",os,[l(s(x),{type:"button",onClick:b[3]||(b[3]=()=>a("close")),variant:"outline"},{default:u(()=>b[6]||(b[6]=[v(" Cancel ")])),_:1}),l(s(x),{type:"submit",disabled:s(e).processing},{default:u(()=>[s(e).processing?(d(),w(E,{key:0,class:"mr-2 h-4 w-4 animate-spin"})):h("",!0),v(" "+_(s(e).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])])])}}}),ns={class:"fixed inset-0 z-50"},ls={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},is={class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full max-w-sm sm:max-w-md md:max-w-lg overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},as={class:"flex justify-between items-center mb-4"},rs={class:"text-xl sm:text-2xl font-bold text-foreground"},ds={class:"space-y-2"},us={class:"space-y-2"},ms={class:"relative"},cs={class:"flex items-center space-x-2"},fs={class:"h-48 sm:h-56 md:h-64 border rounded-md p-2 overflow-y-auto"},ps={class:"flex justify-end space-x-3 pt-4"},Vs=T({__name:"RoleForm",props:{role:{type:Object,default:null},permissions:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["saved","close"],setup(g,{emit:y}){var z,A;const o=y,a=g,{tenantSlug:e}=a,r=D({name:a.role?a.role.name:"",permissions:((A=(z=a.role)==null?void 0:z.permissions)==null?void 0:A.map($=>$.name))||[]}),c=V(""),b=P(()=>{if(!c.value.trim())return a.permissions;const $=c.value.toLowerCase();return a.permissions.filter(p=>p.name.toLowerCase().includes($))});B(()=>a.role,$=>{var p;$?(r.name=$.name,r.permissions=((p=$.permissions)==null?void 0:p.map(m=>m.name))||[]):(r.name="",r.permissions=[])},{immediate:!0});const j=()=>{a.role?a.isSuperAdmin?r.put(route("admin.roles.update",a.role.id),{onSuccess:()=>{o("saved")}}):r.put(route("roles.update",[e,a.role.id]),{onSuccess:()=>{o("saved")}}):a.isSuperAdmin?r.post(route("admin.roles.store"),{onSuccess:()=>{o("saved")}}):r.post(route("roles.store",e),{onSuccess:()=>{o("saved")}})},E=$=>{const p=r.permissions.indexOf($);p===-1?r.permissions.push($):r.permissions.splice(p,1)};return($,p)=>{const m=O("X"),n=O("Loader2");return d(),f("div",ns,[p[8]||(p[8]=t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),t("div",ls,[t("div",is,[t("div",as,[t("h2",rs,_(g.role?"Edit Role":"Create Role"),1),l(s(x),{variant:"ghost",size:"icon",onClick:p[0]||(p[0]=()=>o("close"))},{default:u(()=>[l(m,{class:"h-5 w-5"})]),_:1})]),t("form",{onSubmit:H(j,["prevent"]),class:"space-y-4"},[t("div",ds,[l(s(k),{for:"name"},{default:u(()=>p[5]||(p[5]=[v("Role Name")])),_:1}),l(s(L),{id:"name",modelValue:s(r).name,"onUpdate:modelValue":p[1]||(p[1]=i=>s(r).name=i),placeholder:"Enter role name",class:"w-full"},null,8,["modelValue"]),l(U,{message:s(r).errors.name},null,8,["message"])]),t("div",us,[l(s(k),null,{default:u(()=>p[6]||(p[6]=[v("Permissions")])),_:1}),t("div",ms,[t("div",cs,[l(s(L),{modelValue:c.value,"onUpdate:modelValue":p[2]||(p[2]=i=>c.value=i),placeholder:"Search permissions...",class:"w-full"},null,8,["modelValue"]),c.value?(d(),w(s(x),{key:0,type:"button",variant:"ghost",size:"icon",onClick:p[3]||(p[3]=i=>c.value=""),class:"absolute right-2"},{default:u(()=>[l(m,{class:"h-4 w-4"})]),_:1})):h("",!0)])]),t("div",fs,[(d(!0),f(C,null,S(b.value,i=>(d(),f("div",{key:i.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[l(s(N),{id:`permission-${i.name}`,checked:s(r).permissions.includes(i.name),"onUpdate:checked":X=>E(i.name),class:"mr-2"},null,8,["id","checked","onUpdate:checked"]),l(s(k),{for:`permission-${i.name}`,class:"cursor-pointer"},{default:u(()=>[v(_(i.name),1)]),_:2},1032,["for"])]))),128))]),l(U,{message:s(r).errors.permissions},null,8,["message"])]),t("div",ps,[l(s(x),{type:"button",onClick:p[4]||(p[4]=()=>o("close")),variant:"outline"},{default:u(()=>p[7]||(p[7]=[v(" Cancel ")])),_:1}),l(s(x),{type:"submit",disabled:s(r).processing},{default:u(()=>[s(r).processing?(d(),w(n,{key:0,class:"mr-2 h-4 w-4 animate-spin"})):h("",!0),v(" "+_(s(r).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])])])}}}),vs={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},gs={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md animate-in fade-in zoom-in-95 duration-200 border border-border"},bs={class:"flex flex-col space-y-4"},xs={class:"text-muted-foreground"},_s={class:"flex justify-end space-x-3 pt-2"},Ps=T({__name:"ConfirmDeleteModal",props:{message:{type:String,default:"Are you sure you want to delete this item?"},deleteUrl:{type:String,required:!0},tenantSlug:{type:String,default:null}},emits:["cancel","confirmed"],setup(g,{emit:y}){const o=g,a=y,e=D({}),r=()=>{e.delete(o.deleteUrl,{onSuccess:()=>{a("confirmed")}})},c=()=>{a("cancel")};return(b,j)=>(d(),f("div",vs,[t("div",gs,[t("div",bs,[j[1]||(j[1]=t("h2",{class:"text-xl font-bold text-foreground"},"Confirm Deletion",-1)),t("p",xs,_(g.message),1),t("div",_s,[l(s(x),{type:"button",onClick:c,variant:"outline"},{default:u(()=>j[0]||(j[0]=[v(" Cancel ")])),_:1}),l(s(x),{type:"button",variant:"destructive",onClick:r,disabled:s(e).processing},{default:u(()=>[s(e).processing?(d(),w(s(F),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):h("",!0),v(" "+_(s(e).processing?"Deleting...":"Delete"),1)]),_:1},8,["disabled"])])])])]))}});export{zs as _,Us as a,Es as b,Ls as c,As as d,Vs as e,Ps as f};
