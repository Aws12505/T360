import{c as S,L as u,e as o,X as t,U as p,b2 as te,M as _,S as d,N as M,a1 as vt,r as C,A as Be,w as pe,bW as xt,b as j,l as a,k as g,f as s,u as l,d as gt,D as I,Y as H,P as Ue,K as yt,bF as bt}from"./vendor-C-CW143M.js";import{x as ge,a as _t,g as wt,W as q}from"./vendor-vue-o4TX1eGc.js";import{_ as ht}from"./Badge.vue_vue_type_script_setup_true_lang-Cb4j4dNt.js";import{_ as D}from"./Icon.vue_vue_type_script_setup_true_lang-B7IfTNIf.js";import{_ as ye}from"./Input.vue_vue_type_script_setup_true_lang-taOxs2kk.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-B-CPTRto.js";import{_ as kt}from"./Checkbox.vue_vue_type_script_setup_true_lang-ChpjAJsN.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-CZjK18aI.js";import{_ as ke,a as je,b as se,c as X,d as Ce,e as G}from"./TableRow.vue_vue_type_script_setup_true_lang-D19AmMrD.js";import{_ as oe}from"./Card.vue_vue_type_script_setup_true_lang-Cp4wUgFE.js";import{_ as jt}from"./CardHeader.vue_vue_type_script_setup_true_lang-CNgbOXgy.js";import{_ as Ct}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcA2pWrU.js";import{_ as ie}from"./CardContent.vue_vue_type_script_setup_true_lang-DxPj8Tg7.js";import{b as de,_ as ue,a as ce}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DjSCH9m8.js";import{_ as me,a as fe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BSj40beh.js";import{_ as he}from"./DialogFooter.vue_vue_type_script_setup_true_lang-RSN6g_4k.js";import{b as Se,_ as De,a as $e}from"./AlertDescription.vue_vue_type_script_setup_true_lang-Bni7FoRm.js";import{_ as St}from"./AppLayout.vue_vue_type_script_setup_true_lang-V4zpPShI.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-CmSxFldp.js";import"./vendor-icons-Dyo-jBRF.js";import"./vendor-ui-DUlj4Wsf.js";import"./useInitials-DzeGKvtI.js";import"./app-DirluZ9d.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C-8K70bD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Dt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 flex flex-col items-center justify-center"},$t={class:"text-sm font-semibold mb-2 text-foreground"},At={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(v){const n=v,k=S(()=>n.value===null||n.value===void 0||n.value===""?"No Data":n.value),F=S(()=>{const m=Number(n.value);return n.title.toLowerCase().includes("total")&&m>0});return(m,R)=>(o(),u("div",Dt,[t("h3",$t,p(v.title),1),t("p",{class:te(["text-2xl font-bold",F.value?"text-red-600":"text-primary"])},p(k.value),3)]))}},Rt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Tt={class:"text-base text-center font-semibold mb-4"},Nt={key:0,class:"text-center text-sm py-4 text-primary font-medium"},Ft={class:"space-y-3"},Vt={class:"text-sm"},Mt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},totalRejections:{type:Number,default:0},rejectionType:{type:String,default:""}},setup(v){const n=v;S(()=>n.rejectionType==="load"?"No load rejections recorded. You're on track for Fantastic+ !":n.rejectionType==="block"?"No block rejections recorded. You're on track for Fantastic+ !":"No rejections recorded. You're on track for Fantastic+ !");const k=F=>{const m=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],$=[...n.drivers].sort((B,E)=>E.total_penalty-B.total_penalty).map(B=>B.total_penalty).indexOf(F);return m[$]||"#6b7280"};return(F,m)=>(o(),u("div",Rt,[t("h3",Tt,p(v.title),1),v.drivers.length===0?(o(),u("div",Nt,[v.totalRejections===0?(o(),u(_,{key:0},[v.rejectionType==="block"?(o(),u(_,{key:0},[d(" No block rejections recorded. You're on track for Fantastic+ ! ")],64)):v.rejectionType==="load"?(o(),u(_,{key:1},[d(" No load rejections recorded. You're on track for Fantastic+ ! ")],64)):(o(),u(_,{key:2},[d(" No rejections recorded. You're on track for Fantastic+ ! ")],64))],64)):(o(),u(_,{key:1},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(o(),u(_,{key:1},[m[0]||(m[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",Ft,[(o(!0),u(_,null,M(v.drivers,(R,$)=>(o(),u("div",{key:$,class:"flex justify-between items-center"},[t("span",Vt,p(R.driver_name),1),t("span",{class:"text-sm font-medium",style:vt({color:k(R.total_penalty)})},p(R.total_penalty),5)]))),128))])],64))]))}},Bt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Ut={class:"text-base text-center font-semibold mb-4"},zt={class:"h-64"},Pt={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(v){const n=v,k=C(null);let F=null;const m=()=>{if(F&&F.destroy(),!k.value)return;const R=k.value.getContext("2d"),$=[];n.chartData.datasets.forEach(V=>{V.data&&V.data.length&&$.push(...V.data)});const B=$.length>0?Math.min(...$):0,E=$.length>0?Math.max(...$):100;F=new xt(R,{type:"line",data:n.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(V){const z=V.raw||0,O=n.averageAcceptance||0,P=n.chartData.dateRangeLabel||"selected period",T=Number(O).toFixed(2);return[`Acceptance Score: ${z}`,`Average Score Over ${P}: ${T}`]}}}},scales:{y:{beginAtZero:!(B>10),min:Math.max(Math.floor(B-5),0),max:Math.min(102.5,Math.ceil(E+5)),ticks:{stepSize:2.5,padding:10,font:{size:11},callback:function(V){return V<=100?V:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return Be(()=>{m()}),pe(()=>n.chartData,()=>{m()},{deep:!0}),(R,$)=>(o(),u("div",Bt,[t("h3",Ut,p(v.title),1),t("div",zt,[t("canvas",{ref_key:"chartCanvas",ref:k},null,512)])]))}},Et={class:"space-y-2 md:space-y-4 lg:space-y-6 mb-2 md:mb-4 lg:mb-6"},Lt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4"},Wt={class:"grid grid-cols-1 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-6"},It={key:1,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center"},Ot={class:"flex flex-col sm:flex-row items-center justify-center sm:justify-around gap-3 mb-4"},Yt={class:"text-xs text-muted-foreground text-center mt-2"},Ht={key:2,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center items-center"},qt={class:"flex flex-col items-center justify-center gap-3 mb-4"},Gt={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null},currentDateFilter:{type:String,default:null},currentFilters:{type:Object,default:()=>({})}},setup(v){const n=v,k=S(()=>{var A;if(!n.metricsData||!n.metricsData.totalRejections)return[];const c=(A=n.currentFilters)==null?void 0:A.rejectionType;return!c||c===""?[{title:"Total Rejected Stops",value:n.metricsData.totalRejections||0},{title:"Rejected In Advance",value:n.metricsData.advancedRejectionCount||0},{title:"Rejected +24 Hours Before Start Time",value:n.metricsData.moreThan24Count||0},{title:"Rejected Within 24 Hours Before Start Time",value:n.metricsData.within24Count||0},{title:"Rejected +6 Hours Before Start Time",value:n.metricsData.moreThan6Count||0},{title:"Rejected Within 6 Hours Before Start Time",value:n.metricsData.within6Count||0},{title:"Rejected After Start Time",value:n.metricsData.afterStartCount||0}]:c==="block"?[{title:"Total Block Rejections",value:n.metricsData.totalRejections||0},{title:"Rejected In Advance",value:n.metricsData.advancedRejectionCount||0},{title:"Rejected +24 Hours Before Start Time",value:n.metricsData.moreThan24Count||0},{title:"Rejected Within 24 Hours Before Start Time",value:n.metricsData.within24Count||0},{title:"Rejected After Start Time",value:n.metricsData.afterStartCount||0}]:c==="load"?[{title:"Total Load Rejections",value:n.metricsData.totalRejections||0},{title:"Rejected +6 Hours Before Start Time",value:n.metricsData.moreThan6Count||0},{title:"Rejected Within 6 Hours Before Start Time",value:n.metricsData.within6Count||0},{title:"Rejected After Start Time",value:n.metricsData.afterStartCount||0}]:[]}),F=S(()=>n.driversData&&n.driversData.length?n.driversData:[]),m=S(()=>n.chartData&&Object.keys(n.chartData).length?n.chartData:{}),R=S(()=>{var c;return((c=n.metricsData)==null?void 0:c.totalRejections)||0}),$=S(()=>{var c;return((c=n.currentFilters)==null?void 0:c.rejectionType)||null}),B=S(()=>!n.chartData||!n.chartData.labels?!1:n.chartData.labels.length>1),E=S(()=>{var c,A,K,Y;return((Y=(K=(A=(c=n.chartData)==null?void 0:c.datasets)==null?void 0:A[0])==null?void 0:K.data)==null?void 0:Y.length)>0}),V=S(()=>E.value?n.chartData.datasets[0].data[0]:0),z=S(()=>{const c=V.value;return c>=98?"fantastic_plus":c>=95?"fantastic":c>=90?"good":c>=85?"fair":"poor"}),O=c=>c==null?"0%":`${Math.round(parseFloat(c))}%`,P=c=>{if(!c)return"Not Available";switch(c){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return c}},T=c=>{if(!c)return"outline";switch(c){case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},b=c=>{if(!c)return"text-gray-600";switch(c){case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}},f=c=>{if(!c)return"";switch(c){case"fantastic_plus":return"Outstanding performance with exceptional acceptance rate";case"fantastic":return"Excellent performance with very high acceptance rate";case"good":return"Solid performance with good acceptance rate";case"fair":return"Acceptable performance with room for improvement";case"poor":return"Performance needs significant improvement";default:return""}};return(c,A)=>(o(),u("div",Et,[t("div",Lt,[(o(!0),u(_,null,M(k.value,(K,Y)=>(o(),j(At,{key:Y,title:K.title,value:K.value,class:"transition-all duration-300 hover:shadow-md"},null,8,["title","value"]))),128))]),t("div",Wt,[a(Mt,{title:"Bottom 5 Drivers",drivers:F.value,"total-rejections":R.value,"rejection-type":$.value,class:te({"lg:col-span-1":B.value,"lg:col-span-1 md:col-span-1":!B.value,"transition-all duration-300 hover:shadow-md":!0})},null,8,["drivers","total-rejections","rejection-type","class"]),n.currentDateFilter!="Yesterday"&&B.value?(o(),j(Pt,{key:0,title:"Acceptance Score",chartData:m.value,averageAcceptance:v.averageAcceptance,class:"lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md"},null,8,["chartData","averageAcceptance"])):g("",!0),!B.value&&E.value?(o(),u("div",It,[A[0]||(A[0]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",Ot,[t("div",{class:te(["text-4xl md:text-5xl font-bold text-center",b(z.value)])},p(O(V.value)),3),a(l(ht),{variant:T(z.value),class:"text-xs md:text-sm px-3 py-1"},{default:s(()=>[d(p(P(z.value)),1)]),_:1},8,["variant"])]),t("p",Yt,p(f(z.value)),1)])):g("",!0),E.value?g("",!0):(o(),u("div",Ht,[A[3]||(A[3]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",qt,[a(D,{name:"chart_bar",class:"h-16 w-16 text-muted-foreground/50"}),A[1]||(A[1]=t("div",{class:"text-lg font-medium text-center text-primary"}," No data available ",-1)),A[2]||(A[2]=t("p",{class:"text-sm text-primary/70 text-center max-w-md"}," There is no acceptance data available for the selected time period. Try selecting a different date range or check back later. ",-1))])]))])]))}},Kt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Qt={key:0,class:"col-span-full"},Xt={class:"relative"},Zt=["value"],Jt={class:"col-span-full"},ea={class:"relative"},ta={class:"relative"},aa=["value"],sa={class:"relative"},la=["value"],na={class:"relative"},ra={class:"flex items-center space-x-2"},oa={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},ia=gt({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(v,{emit:n}){var B,E,V,z,O,P,T;const k=v,F=n,m=ge({id:(B=k.rejection)==null?void 0:B.id,tenant_id:k.isSuperAdmin?(E=k.rejection)==null?void 0:E.tenant_id:null,date:((V=k.rejection)==null?void 0:V.date)||"",driver_name:((z=k.rejection)==null?void 0:z.driver_name)||"",rejection_type:((O=k.rejection)==null?void 0:O.rejection_type)||"block",rejection_category:((P=k.rejection)==null?void 0:P.rejection_category)||"more_than_24",reason_code_id:((T=k.rejection)==null?void 0:T.reason_code_id)||null,disputed:k.rejection&&k.rejection.disputed!==null?parseInt(k.rejection.disputed)===1:!1,driver_controllable:k.rejection&&k.rejection.driver_controllable!==null?parseInt(k.rejection.driver_controllable)===1:null}),R=S(()=>m.rejection_type==="block"?[{value:"advanced_rejection",label:"Advanced Rejection"},{value:"more_than_24",label:"More than 24 hrs"},{value:"within_24",label:"Within 24 hrs"},{value:"after_start",label:"After start"}]:m.rejection_type==="load"?[{value:"more_than_6",label:"More than 6 hrs"},{value:"within_6",label:"Within 6 hrs"},{value:"after_start",label:"After start"}]:[]);pe(()=>m.rejection_type,b=>{const f=R.value.map(c=>c.value);f.includes(m.rejection_category)||(m.rejection_category=f[0]||"")}),pe(()=>k.rejection,b=>{b?(m.id=b.id,m.tenant_id=b.tenant_id,m.date=b.date,m.driver_name=b.driver_name,m.rejection_type=b.rejection_type,m.rejection_category=b.rejection_category,m.reason_code_id=b.reason_code_id,m.disputed=b.disputed!==null?parseInt(b.disputed)===1:!1,m.driver_controllable=b.driver_controllable!==null?parseInt(b.driver_controllable)===1:null):m.reset()},{immediate:!0});const $=()=>{const b=!!m.id,f=k.isSuperAdmin?b?"acceptance.update.admin":"acceptance.store.admin":b?"acceptance.update":"acceptance.store",c=k.isSuperAdmin?b?{rejection:m.id}:{}:b?{tenantSlug:k.tenantSlug,rejection:m.id}:{tenantSlug:k.tenantSlug};m[b?"put":"post"](route(f,c),{onSuccess:()=>F("close")})};return(b,f)=>(o(),u("form",{onSubmit:Ue($,["prevent"]),class:"space-y-6"},[t("div",Kt,[v.isSuperAdmin?(o(),u("div",Qt,[a(U,null,{default:s(()=>f[9]||(f[9]=[d("Company Name")])),_:1}),t("div",Xt,[I(t("select",{"onUpdate:modelValue":f[0]||(f[0]=c=>l(m).tenant_id=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[f[10]||(f[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(o(!0),u(_,null,M(v.tenants,c=>(o(),u("option",{key:c.id,value:c.id},p(c.name),9,Zt))),128))],512),[[H,l(m).tenant_id]]),f[11]||(f[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):g("",!0),t("div",Jt,[a(U,null,{default:s(()=>f[12]||(f[12]=[d("Date")])),_:1}),a(ye,{type:"date",modelValue:l(m).date,"onUpdate:modelValue":f[1]||(f[1]=c=>l(m).date=c),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(U,null,{default:s(()=>f[13]||(f[13]=[d("Driver Name")])),_:1}),a(ye,{modelValue:l(m).driver_name,"onUpdate:modelValue":f[2]||(f[2]=c=>l(m).driver_name=c),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(U,null,{default:s(()=>f[14]||(f[14]=[d("Rejection Type")])),_:1}),t("div",ea,[I(t("select",{"onUpdate:modelValue":f[3]||(f[3]=c=>l(m).rejection_type=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},f[15]||(f[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[H,l(m).rejection_type]]),f[16]||(f[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(U,null,{default:s(()=>f[17]||(f[17]=[d("Rejection Category")])),_:1}),t("div",ta,[I(t("select",{"onUpdate:modelValue":f[4]||(f[4]=c=>l(m).rejection_category=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(o(!0),u(_,null,M(R.value,c=>(o(),u("option",{key:c.value,value:c.value},p(c.label),9,aa))),128))],512),[[H,l(m).rejection_category]]),f[18]||(f[18]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(U,null,{default:s(()=>f[19]||(f[19]=[d("Reason Code")])),_:1}),t("div",sa,[I(t("select",{"onUpdate:modelValue":f[5]||(f[5]=c=>l(m).reason_code_id=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(o(!0),u(_,null,M(v.reasons,c=>(o(),u("option",{key:c.id,value:c.id},p(c.reason_code),9,la))),128))],512),[[H,l(m).reason_code_id]]),f[20]||(f[20]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(U,null,{default:s(()=>f[21]||(f[21]=[d("Driver Controllable")])),_:1}),t("div",na,[I(t("select",{"onUpdate:modelValue":f[6]||(f[6]=c=>l(m).driver_controllable=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},f[22]||(f[22]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[H,l(m).driver_controllable]]),f[23]||(f[23]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",ra,[a(kt,{checked:l(m).disputed,"onUpdate:checked":f[7]||(f[7]=c=>l(m).disputed=c),id:"disputed"},null,8,["checked"]),a(U,{for:"disputed"},{default:s(()=>f[24]||(f[24]=[d("Disputed")])),_:1})])]),t("div",oa,[a(h,{type:"button",onClick:f[8]||(f[8]=c=>F("close")),variant:"outline",class:"w-full sm:w-auto"},{default:s(()=>f[25]||(f[25]=[d(" Cancel ")])),_:1}),a(h,{type:"submit",disabled:l(m).processing,class:"w-full sm:w-auto"},{default:s(()=>[d(p(l(m).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),da={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},ua={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},ca={class:"flex flex-wrap gap-3 ml-3"},ma=["action"],fa={class:"flex flex-col items-center gap-2 md:items-start"},pa={class:"flex flex-wrap gap-1 md:gap-2"},va={key:0,class:"text-sm text-muted-foreground"},xa={key:0},ga={key:1},ya={key:2},ba={key:3,class:"ml-1"},_a={class:"flex items-center justify-between"},wa={class:"flex items-center gap-2"},ha={key:0,class:"ml-4 flex flex-wrap gap-2"},ka={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ja={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Ca={class:"capitalize"},Sa={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Da={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},$a={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Aa={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Ra={class:"flex flex-col gap-1 md:gap-4"},Ta={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},Na={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-3"},Fa=["value"],Va={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},Ma={class:"flex justify-end space-x-2"},Ba={class:"overflow-x-auto"},Ua={class:"flex items-center justify-center"},za=["checked"],Pa={class:"flex items-center"},Ea={key:0},La={key:1},Wa={key:2,class:"ml-2"},Ia={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Oa={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ya={key:3,class:"ml-2 opacity-50"},Ha=["value"],qa={key:1,class:"capitalize"},Ga={key:0,class:"ml-1 text-xs text-red-500"},Ka={class:"flex space-x-2"},Qa={key:0,class:"border-t bg-muted/20 px-4 py-3"},Xa={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Za={class:"flex items-center gap-4 text-sm text-muted-foreground"},Ja={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},es=["value"],ts={class:"flex flex-wrap"},as=["innerHTML"],ss={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},ls={class:"flex items-center justify-between"},ns={class:"max-h-[400px] overflow-y-auto rounded-md border"},rs={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},os={key:1,class:"divide-y"},is=["onClick"],ds={class:"text-xs font-medium sm:text-sm"},us={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},cs={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},ms={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},fs={key:0,class:"space-y-4 rounded-md border p-4"},ps={class:"text-sm font-medium sm:text-base"},vs={class:"space-y-3"},xs={class:"flex justify-end space-x-2"},gs={class:"flex items-center gap-2"},ys={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},bs={key:0},_s={class:"space-y-4"},ws={class:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20"},hs={class:"cursor-pointer"},ks=["disabled"],js={class:"flex items-center gap-2 text-sm text-muted-foreground"},Cs=["href"],Ss={key:0,class:"flex items-center justify-center gap-2 p-4"},Ds={key:1,class:"space-y-4"},$s={key:0,class:"rounded-lg border p-3"},As={class:"flex items-center justify-between"},Rs={class:"text-xs text-muted-foreground"},Ts={class:"mt-2 flex flex-wrap gap-2"},Ns={class:"grid grid-cols-3 gap-4"},Fs={class:"text-2xl font-bold"},Vs={class:"text-2xl font-bold text-green-600"},Ms={class:"text-2xl font-bold text-red-600"},Bs={key:2},Us={class:"flex items-center justify-between mb-3"},zs={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},Ps={class:"border rounded-lg overflow-hidden"},Es={class:"max-h-96 overflow-y-auto"},Ls={class:"flex flex-wrap gap-x-3 gap-y-1"},Ws={class:"font-medium text-foreground"},Is={key:0,class:"italic text-muted-foreground"},Os={class:"space-y-1"},Ys={key:0,class:"text-xs text-muted-foreground"},Hs={key:3},qs={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},Gs={class:"border rounded-lg overflow-hidden"},Ks={class:"flex flex-wrap gap-x-3 gap-y-1"},Qs={class:"font-medium"},Xs={key:0,class:"italic text-muted-foreground"},Zs={class:"border-t p-4 flex justify-end gap-3"},Js={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Sl={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number},filters:{type:Object,default:()=>({search:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""})},permissions:Array},setup(v){const n=v,k=_t(),F=C(!1),m=C(null),R=C(!1),$=C(!1),B=S(()=>(b.value==="yesterday"||b.value==="current-week")&&n.weekNumber&&n.year?`Week ${n.weekNumber}, ${n.year}`:(b.value==="6w"||b.value==="quarterly")&&n.startWeekNumber&&n.endWeekNumber&&n.year?`Weeks ${n.startWeekNumber}-${n.endWeekNumber}, ${n.year}`:""),E=[{title:n.tenantSlug?"Dashboard":"Admin Dashboard",href:n.tenantSlug?route("dashboard",{tenantSlug:n.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:n.tenantSlug?route("acceptance.index",{tenantSlug:n.tenantSlug}):route("acceptance.index.admin")}],V=C(!1),z=C(!1),O=C(null),P=C(""),T=C(""),b=C(n.dateFilter||"full"),f=C(n.perPage||10),c=C([]),A=C(!1),K=C(null),Y=C(!1),ve=C(!1),Ae=C(null),le=C(!1),L=C(null),Z=C({reason_code:"",description:""}),xe=C(!1),Re=C(null),be=["date","driver_name","rejection_type","reason_code","rejection_category","disputed","driver_controllable"],ne=C("date"),re=C("desc"),x=C({...n.filters});pe(()=>x.value.rejectionType,(i,e)=>{if(i!==e&&x.value.rejectionCategory){const w=["advanced_rejection","more_than_24","within_24","after_start"],r=["more_than_6","within_6","after_start"];i==="block"&&!w.includes(x.value.rejectionCategory)&&(x.value.rejectionCategory=""),i==="load"&&!r.includes(x.value.rejectionCategory)&&(x.value.rejectionCategory="")}});const ae=S(()=>{let i=[...n.rejections.data];return i.sort((e,w)=>{var J,N;let r=e[ne.value],y=w[ne.value];return ne.value==="reason_code"&&(r=((J=e.reason_code)==null?void 0:J.reason_code)||"",y=((N=w.reason_code)==null?void 0:N.reason_code)||""),r===null?1:y===null?-1:(typeof r=="string"&&(r=r.toLowerCase(),y=y.toLowerCase()),r<y?re.value==="asc"?-1:1:r>y?re.value==="asc"?1:-1:0)}),i});function ze(i){ne.value===i?re.value=re.value==="asc"?"desc":"asc":(ne.value=i,re.value="asc")}function Te(){const i=n.tenantSlug?route("acceptance.index",{tenantSlug:n.tenantSlug}):route("acceptance.index.admin");q.get(i,{...x.value,perPage:f.value,dateFilter:b.value})}function Pe(){x.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""},Te()}const Ne=(i=null)=>{O.value=i,V.value=!0},Ee=()=>{z.value=!0,le.value=!1,L.value=null},Le=()=>{Z.value={reason_code:"",description:""},L.value=null,le.value=!0},We=i=>{Z.value={reason_code:i.reason_code,description:i.description||""},L.value=i.id,le.value=!0},Ie=()=>{le.value=!1,L.value=null},Oe=i=>{Re.value=i,xe.value=!0},Ye=()=>{const i=ge({reason_code:Z.value.reason_code,description:Z.value.description}),e=L.value?n.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":n.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",w=L.value?n.isSuperAdmin?{code:L.value}:{tenantSlug:n.tenantSlug,code:L.value}:n.isSuperAdmin?{}:{tenantSlug:n.tenantSlug};(L.value?i.put:i.post).call(i,route(e,w),{onSuccess:()=>{T.value=L.value?"Reason code updated successfully.":"Reason code created successfully.",le.value=!1,L.value=null,q.reload({only:["rejection_reason_codes"]})},onError:y=>{console.error(y)}})},He=i=>{const e=ge({}),w=n.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",r=n.isSuperAdmin?{id:i}:{tenantSlug:n.tenantSlug,code:i};e.delete(route(w,r),{onSuccess:()=>{T.value="Reason code deleted successfully.",xe.value=!1,q.reload({only:["rejection_reason_codes"]})}})},qe=i=>{Ae.value=i,ve.value=!0},Ge=i=>{const e=ge({}),w=n.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",r=n.isSuperAdmin?{rejection:i}:{tenantSlug:n.tenantSlug,rejection:i};e.delete(route(w,r),{preserveScroll:!0,onSuccess:()=>{T.value="Rejection deleted successfully.",ve.value=!1}})},Ke=i=>{if(i){const e=new URL(i),w=e.origin+e.pathname;q.get(w,{...x.value,perPage:f.value,dateFilter:b.value,page:e.searchParams.get("page")||1})}};function _e(i){b.value=i;const e=n.tenantSlug?route("acceptance.index",{tenantSlug:n.tenantSlug}):route("acceptance.index.admin");q.get(e,{...x.value,perPage:f.value,dateFilter:i})}function Qe(){const i=n.tenantSlug?route("acceptance.index",{tenantSlug:n.tenantSlug}):route("acceptance.index.admin");q.get(i,{...x.value,perPage:f.value,dateFilter:b.value})}function we(i){if(!i)return"";const e=i.split("-");if(e.length!==3)return i;const[w,r,y]=e;return`${Number(r)}/${Number(y)}/${w}`}pe(T,i=>{i&&setTimeout(()=>{T.value=""},5e3)});const Xe=S(()=>{var w,r;if(!((w=n.rejection_breakdown)!=null&&w.by_category)||!((r=n.rejection_breakdown)!=null&&r.by_category.total_rejections))return null;const i=n.rejection_breakdown.by_category,e=n.filters.rejectionType;return e?{totalRejections:i[`total_${e}_rejections`]||0,afterStartCount:i[`after_start_${e}_count`]||0,moreThan24Count:i[`more_than_24_${e}_count`]||0,within24Count:i[`within_24_${e}_count`]||0,advancedRejectionCount:i[`advanced_rejection_${e}_count`]||0,moreThan6Count:i[`more_than_6_${e}_count`]||0,within6Count:i[`within_6_${e}_count`]||0,by_category:!0}:{totalRejections:i.total_rejections||0,afterStartCount:i.after_start_count||0,moreThan24Count:i.more_than_24_count||0,within24Count:i.within_24_count||0,advancedRejectionCount:i.advanced_rejection_count||0,moreThan6Count:i.more_than_6_count||0,within6Count:i.within_6_count||0,by_category:!0}}),Ze=S(()=>{var i,e,w;return n.filters.rejectionType=="load"?((i=n.rejection_breakdown)==null?void 0:i.bottom_five_drivers.load)||[]:n.filters.rejectionType=="block"?((e=n.rejection_breakdown)==null?void 0:e.bottom_five_drivers.block)||[]:((w=n.rejection_breakdown)==null?void 0:w.bottom_five_drivers.total)||[]}),Je=S(()=>!n.line_chart_data||n.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:n.line_chart_data.map(i=>i.date),datasets:[{label:"Acceptance Performance",data:n.line_chart_data.map(i=>i.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function et(i){q.post(route("rejection_reason_codes.restore.admin",{id:i}),{},{onSuccess:()=>{T.value="Reason code restored successfully",setTimeout(()=>T.value="",3e3)}})}function tt(i){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&q.delete(route("rejection_reason_codes.forceDelete.admin",{id:i}),{onSuccess:()=>{T.value="Reason code permanently deleted",setTimeout(()=>T.value="",3e3)}})}S(()=>n.rejection_reason_codes.filter(i=>!i.deleted_at));const at=S(()=>ae.value.length>0&&c.value.length===ae.value.length);function st(i){i.target.checked?c.value=ae.value.map(e=>e.id):c.value=[]}function lt(){c.value.length>0&&(A.value=!0)}function nt(){const i=ge({ids:c.value}),e=n.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",w=n.isSuperAdmin?{}:{tenantSlug:n.tenantSlug};i.delete(route(e,w),{preserveScroll:!0,onSuccess:()=>{T.value=`${c.value.length} rejection records deleted successfully.`,c.value=[],A.value=!1},onError:r=>{console.error(r)}})}function rt(i){var y;const e=(y=i.target.files)==null?void 0:y[0];if(!e)return;R.value=!0;const w=new FormData;w.append("file",e);const r=n.isSuperAdmin?route("acceptance.validateImport.admin"):route("acceptance.validateImport",{tenantSlug:n.tenantSlug});q.post(r,w,{forceFormData:!0,preserveScroll:!0,only:["flash"],onFinish:()=>{R.value=!1,i.target.value=""},onError:()=>{R.value=!1,P.value="Failed to validate CSV file",i.target.value=""}})}function ot(){var e;if(!m.value||(((e=m.value.summary)==null?void 0:e.invalid)??0)>0||m.value.header_error)return;$.value=!0;const i=n.isSuperAdmin?route("acceptance.confirmImport.admin"):route("acceptance.confirmImport",{tenantSlug:n.tenantSlug});q.post(i,{},{preserveScroll:!0,onSuccess:()=>{var w;T.value=`Successfully imported ${((w=m.value.summary)==null?void 0:w.valid)??0} rejections`,Fe()},onError:()=>{P.value="Failed to import rejections"},onFinish:()=>{$.value=!1}})}function it(){const i=n.isSuperAdmin?route("acceptance.downloadErrorReport.admin"):route("acceptance.downloadErrorReport",{tenantSlug:n.tenantSlug});window.location.href=i}function Fe(){F.value=!1,m.value=null,R.value=!1,$.value=!1}function dt(){if(ae.value.length===0){P.value="No data available to export",setTimeout(()=>{P.value=""},3e3);return}K.value&&K.value.submit()}const ut=S(()=>n.tenantSlug?route("acceptance.export",{tenantSlug:n.tenantSlug}):route("acceptance.export.admin"));S(()=>b.value==="yesterday"||b.value==="current-week"||b.value==="6w"||b.value==="quarterly"?n.rejections&&n.rejections.data&&n.rejections.data.length>0:!0);const Ve=C(!1),ct=S(()=>"/storage/upload-data-temps/Rejections Template.csv");Be(()=>{const i=e=>{Ve.value&&!e.target.closest(".relative")&&(Ve.value=!1)};document.addEventListener("click",i),yt(()=>{document.removeEventListener("click",i)})});const mt=S(()=>x.value.search||x.value.dateFrom||x.value.dateTo||x.value.rejectionType||x.value.reasonCode||x.value.rejectionCategory||x.value.disputed||x.value.driverControllable);function ft(i){if(!i)return"";const e=n.rejection_reason_codes.find(w=>w.id==i);return e?e.reason_code:""}function Me(i){return i?{more_than_6:"More than 6 hrs",within_6:"Within 6 hrs",after_start:"After start",more_than_24:"More than 24 hrs",within_24:"Within 24 hrs",advanced_rejection:"Advanced Rejection"}[i]||i:"—"}const W=S(()=>n.permissions.map(i=>i.name));return pe(()=>{var i;return(i=k.props.flash)==null?void 0:i.importValidation},i=>{if(i){if(i.results){m.value=i.results,i.header_error&&(m.value.header_error=i.header_error),F.value=!0;return}i.message&&(P.value=i.message)}},{immediate:!0}),(i,e)=>(o(),j(St,{breadcrumbs:E,tenantSlug:v.tenantSlug,permissions:n.permissions},{default:s(()=>{var w;return[a(l(wt),{title:"Acceptance"}),t("div",da,[T.value?(o(),j(l(Se),{key:0,variant:"success"},{default:s(()=>[a(l(De),null,{default:s(()=>e[33]||(e[33]=[d("Success")])),_:1}),a(l($e),null,{default:s(()=>[d(p(T.value),1)]),_:1})]),_:1})):g("",!0),P.value?(o(),j(l(Se),{key:1,variant:"destructive"},{default:s(()=>[a(l(De),null,{default:s(()=>e[34]||(e[34]=[d("Error")])),_:1}),a(l($e),null,{default:s(()=>[d(p(P.value),1)]),_:1})]),_:1})):g("",!0),t("div",ua,[e[39]||(e[39]=t("h1",{class:"text-lg font-bold text-gray-800 dark:text-gray-200 md:text-xl lg:text-2xl"}," Acceptance ",-1)),t("div",ca,[W.value.includes("acceptance.create")?(o(),j(h,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=r=>Ne()),variant:"default"},{default:s(()=>[a(D,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Add Rejection "))]),_:1})):g("",!0),c.value.length>0&&W.value.includes("acceptance.delete")?(o(),j(h,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=r=>lt()),variant:"destructive"},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+p(c.value.length)+") ",1)]),_:1})):g("",!0),W.value.includes("acceptance.import")?(o(),j(h,{key:2,onClick:e[2]||(e[2]=r=>F.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:s(()=>[a(D,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[36]||(e[36]=d(" Import CSV "))]),_:1})):g("",!0),W.value.includes("acceptance.export")?(o(),j(h,{key:3,class:"px-2 py-0 md:px-4 md:py-2",onClick:Ue(dt,["prevent"]),variant:"outline"},{default:s(()=>[a(D,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[37]||(e[37]=d(" Download CSV "))]),_:1})):g("",!0),v.isSuperAdmin?(o(),j(h,{key:4,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=r=>Ee()),variant:"outline"},{default:s(()=>[a(D,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[38]||(e[38]=d(" Manage Reason Codes "))]),_:1})):g("",!0)])]),t("form",{ref_key:"exportForm",ref:K,action:ut.value,method:"GET",class:"hidden"},null,8,ma),a(l(oe),null,{default:s(()=>[a(l(ie),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",fa,[t("div",pa,[a(h,{onClick:e[4]||(e[4]=r=>_e("yesterday")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":b.value==="yesterday"})},{default:s(()=>e[40]||(e[40]=[d(" Yesterday ")])),_:1},8,["class"]),a(h,{onClick:e[5]||(e[5]=r=>_e("current-week")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":b.value==="current-week"})},{default:s(()=>e[41]||(e[41]=[d(" WTD ")])),_:1},8,["class"]),a(h,{onClick:e[6]||(e[6]=r=>_e("6w")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":b.value==="6w"})},{default:s(()=>e[42]||(e[42]=[d(" T6W ")])),_:1},8,["class"]),a(h,{onClick:e[7]||(e[7]=r=>_e("quarterly")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":b.value==="quarterly"})},{default:s(()=>e[43]||(e[43]=[d(" Quarterly ")])),_:1},8,["class"])]),v.dateRange?(o(),u("div",va,[b.value==="yesterday"&&v.dateRange.start?(o(),u("span",xa," Showing data from "+p(we(v.dateRange.start)),1)):v.dateRange.start&&v.dateRange.end?(o(),u("span",ga," Showing data from "+p(we(v.dateRange.start))+" to "+p(we(v.dateRange.end)),1)):(o(),u("span",ya,p(v.dateRange.label),1)),B.value?(o(),u("span",ba,"("+p(B.value)+")",1)):g("",!0)])):g("",!0)])]),_:1})]),_:1}),a(l(oe),{class:"mb-6"},{default:s(()=>[a(l(jt),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",_a,[t("div",wa,[a(l(Ct),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[44]||(e[44]=[d("Filters")])),_:1}),!Y.value&&mt.value?(o(),u("div",ha,[x.value.search?(o(),u("div",ka," Search: "+p(x.value.search),1)):g("",!0),x.value.rejectionType?(o(),u("div",ja,[e[45]||(e[45]=d(" Type: ")),t("span",Ca,p(x.value.rejectionType),1)])):g("",!0),x.value.reasonCode?(o(),u("div",Sa," Reason: "+p(ft(x.value.reasonCode)),1)):g("",!0),x.value.rejectionCategory?(o(),u("div",Da," Category: "+p(Me(x.value.rejectionCategory)),1)):g("",!0),x.value.disputed?(o(),u("div",$a," Disputed: "+p(x.value.disputed==="true"?"Yes":"No"),1)):g("",!0),x.value.driverControllable?(o(),u("div",Aa," Driver Controllable: "+p(x.value.driverControllable==="true"?"Yes":x.value.driverControllable==="false"?"No":"N/A"),1)):g("",!0)])):g("",!0)]),a(h,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=r=>Y.value=!Y.value)},{default:s(()=>[d(p(Y.value?"Hide Filters":"Show Filters")+" ",1),a(D,{name:Y.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),Y.value?(o(),j(l(ie),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",Ra,[t("div",Ta,[t("div",null,[a(l(U),{for:"search"},{default:s(()=>e[46]||(e[46]=[d("Search")])),_:1}),a(l(ye),{class:"h-9 w-full px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:x.value.search,"onUpdate:modelValue":e[9]||(e[9]=r=>x.value.search=r),type:"text",placeholder:"Search by driver name..."},null,8,["modelValue"])])]),t("div",Na,[t("div",null,[a(l(U),{for:"rejectionType"},{default:s(()=>e[47]||(e[47]=[d("Rejection Type")])),_:1}),I(t("select",{id:"rejectionType","onUpdate:modelValue":e[10]||(e[10]=r=>x.value.rejectionType=r),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[48]||(e[48]=[t("option",{value:""},"All Types",-1),t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[H,x.value.rejectionType]])]),t("div",null,[a(l(U),{for:"reasonCode"},{default:s(()=>e[49]||(e[49]=[d("Reason Code")])),_:1}),I(t("select",{id:"reasonCode","onUpdate:modelValue":e[11]||(e[11]=r=>x.value.reasonCode=r),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[50]||(e[50]=t("option",{value:""},"All Reason Codes",-1)),(o(!0),u(_,null,M(v.rejection_reason_codes,r=>(o(),u("option",{key:r.id,value:r.id},p(r.reason_code),9,Fa))),128))],512),[[H,x.value.reasonCode]])]),t("div",null,[a(l(U),{for:"rejectionCategory"},{default:s(()=>e[51]||(e[51]=[d("Rejection From Start Time")])),_:1}),I(t("select",{id:"rejectionCategory","onUpdate:modelValue":e[12]||(e[12]=r=>x.value.rejectionCategory=r),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[57]||(e[57]=t("option",{value:""},"All Categories",-1)),!x.value.rejectionType||x.value.rejectionType==="block"?(o(),u(_,{key:0},[e[52]||(e[52]=t("option",{value:"advanced_rejection"},"Advanced Rejection",-1)),e[53]||(e[53]=t("option",{value:"more_than_24"},"More than 24 hours",-1)),e[54]||(e[54]=t("option",{value:"within_24"},"Within 24 hours",-1))],64)):g("",!0),!x.value.rejectionType||x.value.rejectionType==="load"?(o(),u(_,{key:1},[e[55]||(e[55]=t("option",{value:"more_than_6"},"More than 6 hours",-1)),e[56]||(e[56]=t("option",{value:"within_6"},"Within 6 hours",-1))],64)):g("",!0),e[58]||(e[58]=t("option",{value:"after_start"},"After start time",-1))],512),[[H,x.value.rejectionCategory]])])]),t("div",Va,[t("div",null,[a(l(U),{for:"disputed"},{default:s(()=>e[59]||(e[59]=[d("Disputed")])),_:1}),I(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=r=>x.value.disputed=r),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[60]||(e[60]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),512),[[H,x.value.disputed]])]),t("div",null,[a(l(U),{for:"driverControllable"},{default:s(()=>e[61]||(e[61]=[d("Driver Controllable")])),_:1}),I(t("select",{id:"driverControllable","onUpdate:modelValue":e[14]||(e[14]=r=>x.value.driverControllable=r),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[62]||(e[62]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"NA"},"N/A",-1)]),512),[[H,x.value.driverControllable]])])]),t("div",Ma,[a(h,{onClick:Pe,variant:"ghost",size:"sm"},{default:s(()=>[a(D,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[63]||(e[63]=d(" Reset Filters "))]),_:1}),a(h,{onClick:Te,variant:"default",size:"sm"},{default:s(()=>[a(D,{name:"filter",class:"mr-2 h-4 w-4"}),e[64]||(e[64]=d(" Apply Filters "))]),_:1})])])]),_:1})):g("",!0)]),_:1}),v.isSuperAdmin?g("",!0):(o(),j(Gt,{key:2,metricsData:Xe.value||{},driversData:Ze.value||[],chartData:Je.value||{},averageAcceptance:v.average_acceptance||null,currentDateFilter:((w=n.dateRange)==null?void 0:w.label)||"",currentFilters:x.value||{}},null,8,["metricsData","driversData","chartData","averageAcceptance","currentDateFilter","currentFilters"])),a(l(oe),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:s(()=>[a(l(ie),{class:"p-0"},{default:s(()=>[t("div",Ba,[a(l(ke),{class:"relative h-[500px] overflow-auto"},{default:s(()=>[a(l(je),null,{default:s(()=>[a(l(se),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:s(()=>[W.value.includes("acceptance.delete")?(o(),j(l(X),{key:0,class:"w-[50px]"},{default:s(()=>[t("div",Ua,[t("input",{type:"checkbox",onChange:st,checked:at.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,za)])]),_:1})):g("",!0),v.isSuperAdmin?(o(),j(l(X),{key:1},{default:s(()=>e[65]||(e[65]=[d("Company Name")])),_:1})):g("",!0),(o(),u(_,null,M(be,r=>a(l(X),{key:r,class:"cursor-pointer",onClick:y=>ze(r)},{default:s(()=>[t("div",Pa,[r=="rejection_category"?(o(),u("div",Ea,"Rejection From Start")):(o(),u("div",La,p(r.replace(/_/g," ").split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" ")),1)),ne.value===r?(o(),u("div",Wa,[re.value==="asc"?(o(),u("svg",Ia,e[66]||(e[66]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(o(),u("svg",Oa,e[67]||(e[67]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(o(),u("div",Ya,e[68]||(e[68]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),W.value.includes("acceptance.update")||W.value.includes("acceptance.delete")?(o(),j(l(X),{key:2},{default:s(()=>e[69]||(e[69]=[d("Actions")])),_:1})):g("",!0)]),_:1})]),_:1}),a(l(Ce),null,{default:s(()=>[ae.value.length===0?(o(),j(l(se),{key:0},{default:s(()=>[a(l(G),{colspan:v.isSuperAdmin?be.length+3:be.length+2,class:"py-8 text-center text-primary font-medium"},{default:s(()=>e[70]||(e[70]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):g("",!0),(o(!0),u(_,null,M(ae.value,r=>(o(),j(l(se),{key:r.id,class:"hover:bg-muted/50"},{default:s(()=>[W.value.includes("acceptance.delete")?(o(),j(l(G),{key:0,class:"text-center"},{default:s(()=>[I(t("input",{type:"checkbox",value:r.id,"onUpdate:modelValue":e[15]||(e[15]=y=>c.value=y),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Ha),[[bt,c.value]])]),_:2},1024)):g("",!0),v.isSuperAdmin?(o(),j(l(G),{key:1},{default:s(()=>{var y;return[d(p(((y=r.tenant)==null?void 0:y.name)||"—"),1)]}),_:2},1024)):g("",!0),(o(),u(_,null,M(be,y=>a(l(G),{key:y,class:"whitespace-nowrap"},{default:s(()=>{var J,N;return[y==="date"?(o(),u(_,{key:0},[d(p(we(r[y])),1)],64)):y==="rejection_type"?(o(),u("span",qa,p(r[y]),1)):y==="reason_code"?(o(),u(_,{key:2},[d(p(((J=r.reason_code)==null?void 0:J.reason_code)||"—")+" ",1),(N=r.reason_code)!=null&&N.deleted_at?(o(),u("span",Ga,"(Deleted)")):g("",!0)],64)):y==="disputed"?(o(),u(_,{key:3},[d(p(r[y]?"Yes":"No"),1)],64)):y==="driver_controllable"?(o(),u(_,{key:4},[d(p(r[y]===null?"N/A":r[y]?"Yes":"No"),1)],64)):y==="rejection_category"?(o(),u(_,{key:5},[d(p(Me(r[y])),1)],64)):(o(),u(_,{key:6},[d(p(r[y]),1)],64))]}),_:2},1024)),64)),W.value.includes("acceptance.delete")||W.value.includes("acceptance.update")?(o(),j(l(G),{key:2},{default:s(()=>[t("div",Ka,[W.value.includes("acceptance.update")?(o(),j(h,{key:0,size:"sm",onClick:y=>Ne(r),variant:"warning"},{default:s(()=>[a(D,{name:"pencil",class:"mr-1 h-4 w-4"}),e[71]||(e[71]=d(" Edit "))]),_:2},1032,["onClick"])):g("",!0),W.value.includes("acceptance.delete")?(o(),j(h,{key:1,size:"sm",variant:"destructive",onClick:y=>qe(r.id)},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-4 w-4"}),e[72]||(e[72]=d(" Delete "))]),_:2},1032,["onClick"])):g("",!0)])]),_:2},1024)):g("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),v.rejections.links?(o(),u("div",Qa,[t("div",Xa,[t("div",Za,[t("span",null,"Showing "+p(ae.value.length)+" of "+p(v.rejections.data.length)+" entries",1),t("div",Ja,[e[73]||(e[73]=t("span",{class:"text-sm"},"Show:",-1)),I(t("select",{"onUpdate:modelValue":e[16]||(e[16]=r=>f.value=r),onChange:Qe,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(o(),u(_,null,M([10,25,50,100],r=>t("option",{key:r,value:r},p(r),9,es)),64))],544),[[H,f.value]])])]),t("div",ts,[(o(!0),u(_,null,M(v.rejections.links,r=>(o(),j(h,{key:r.label,onClick:y=>Ke(r.url),disabled:!r.url,variant:"ghost",size:"sm",class:te(["mx-1",{"border-primary bg-primary/10 text-primary":r.active}])},{default:s(()=>[t("span",{innerHTML:r.label},null,8,as)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):g("",!0)]),_:1})]),_:1}),a(l(de),{open:V.value,"onUpdate:open":e[18]||(e[18]=r=>V.value=r)},{default:s(()=>[a(l(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:s(()=>[a(l(me),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(fe),{class:"text-lg sm:text-xl"},{default:s(()=>[d(p(O.value?"Edit":"Add")+" Rejection",1)]),_:1}),a(l(ce),{class:"text-xs sm:text-sm"},{default:s(()=>[d(" Fill in the details to "+p(O.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),a(ia,{rejection:O.value,reasons:v.rejection_reason_codes,tenants:v.tenants,"is-super-admin":v.isSuperAdmin,"tenant-slug":v.tenantSlug,onClose:e[17]||(e[17]=r=>V.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),v.isSuperAdmin?(o(),j(l(de),{key:3,open:z.value,"onUpdate:open":e[22]||(e[22]=r=>z.value=r)},{default:s(()=>[a(l(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:s(()=>[a(l(me),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(fe),{class:"text-lg sm:text-xl"},{default:s(()=>e[74]||(e[74]=[d("Manage Reason Codes")])),_:1}),a(l(ce),{class:"text-xs sm:text-sm"},{default:s(()=>e[75]||(e[75]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",ss,[t("div",ls,[e[77]||(e[77]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Reason Codes",-1)),a(h,{onClick:Le,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>[a(D,{name:"plus",class:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e[76]||(e[76]=d(" Add New Code "))]),_:1})]),t("div",ns,[!v.rejection_reason_codes||v.rejection_reason_codes.length===0?(o(),u("div",rs," No reason codes found ")):(o(),u("div",os,[(o(!0),u(_,null,M(v.rejection_reason_codes,r=>(o(),u("div",{key:r.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:y=>We(r)},[t("div",ds,[d(p(r.reason_code)+" ",1),r.deleted_at?(o(),u("span",us,"(Deleted)")):g("",!0)]),r.description?(o(),u("div",cs,p(r.description),1)):g("",!0)],8,is),t("div",ms,[v.isSuperAdmin?(o(),u(_,{key:0},[r.deleted_at?(o(),u(_,{key:0},[a(h,{onClick:y=>et(r.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(D,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[78]||(e[78]=d(" Restore "))]),_:2},1032,["onClick"]),a(h,{onClick:y=>tt(r.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[79]||(e[79]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(o(),j(h,{key:1,onClick:y=>Oe(r.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[80]||(e[80]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):g("",!0)])]))),128))]))]),le.value?(o(),u("div",fs,[t("h3",ps,p(L.value?"Edit":"Add")+" Reason Code ",1),t("div",vs,[t("div",null,[a(l(U),{for:"reason_code",class:"text-xs sm:text-sm"},{default:s(()=>e[81]||(e[81]=[d("Code")])),_:1}),a(l(ye),{id:"reason_code",modelValue:Z.value.reason_code,"onUpdate:modelValue":e[19]||(e[19]=r=>Z.value.reason_code=r),placeholder:"Enter reason code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[a(l(U),{for:"description",class:"text-xs sm:text-sm"},{default:s(()=>e[82]||(e[82]=[d("Description")])),_:1}),a(l(ye),{id:"description",modelValue:Z.value.description,"onUpdate:modelValue":e[20]||(e[20]=r=>Z.value.description=r),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",xs,[a(h,{onClick:Ie,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>e[83]||(e[83]=[d("Cancel")])),_:1}),a(h,{onClick:Ye,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>e[84]||(e[84]=[d("Save")])),_:1})])])])):g("",!0)]),a(l(he),{class:"px-4 sm:px-6"},{default:s(()=>[a(h,{onClick:e[21]||(e[21]=r=>z.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[85]||(e[85]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):g("",!0),a(l(de),{open:xe.value,"onUpdate:open":e[25]||(e[25]=r=>xe.value=r)},{default:s(()=>[a(l(ue),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(l(me),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(fe),{class:"text-lg sm:text-xl"},{default:s(()=>e[86]||(e[86]=[d("Confirm Deletion")])),_:1}),a(l(ce),{class:"text-xs sm:text-sm"},{default:s(()=>e[87]||(e[87]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),a(l(he),{class:"px-4 sm:px-6"},{default:s(()=>[a(h,{type:"button",onClick:e[23]||(e[23]=r=>xe.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[88]||(e[88]=[d(" Cancel ")])),_:1}),a(h,{type:"button",onClick:e[24]||(e[24]=r=>He(Re.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[89]||(e[89]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(l(de),{open:A.value,"onUpdate:open":e[28]||(e[28]=r=>A.value=r)},{default:s(()=>[a(l(ue),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(l(me),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(fe),{class:"text-lg sm:text-xl"},{default:s(()=>e[90]||(e[90]=[d("Confirm Bulk Deletion")])),_:1}),a(l(ce),{class:"text-xs sm:text-sm"},{default:s(()=>[d(" Are you sure you want to delete "+p(c.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),a(l(he),{class:"px-4 sm:px-6"},{default:s(()=>[a(h,{type:"button",onClick:e[26]||(e[26]=r=>A.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[91]||(e[91]=[d(" Cancel ")])),_:1}),a(h,{type:"button",onClick:e[27]||(e[27]=r=>nt()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[92]||(e[92]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),a(l(de),{open:ve.value,"onUpdate:open":e[31]||(e[31]=r=>ve.value=r)},{default:s(()=>[a(l(ue),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(l(me),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(fe),{class:"text-lg sm:text-xl"},{default:s(()=>e[93]||(e[93]=[d("Confirm Deletion")])),_:1}),a(l(ce),{class:"text-xs sm:text-sm"},{default:s(()=>e[94]||(e[94]=[d(" Are you sure you want to delete this rejection record? This action cannot be undone. ")])),_:1})]),_:1}),a(l(he),{class:"px-4 sm:px-6"},{default:s(()=>[a(h,{type:"button",onClick:e[29]||(e[29]=r=>ve.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[95]||(e[95]=[d(" Cancel ")])),_:1}),a(h,{type:"button",onClick:e[30]||(e[30]=r=>Ge(Ae.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[96]||(e[96]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(l(de),{open:F.value,"onUpdate:open":e[32]||(e[32]=r=>F.value=r)},{default:s(()=>[a(l(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:s(()=>{var r,y,J;return[a(l(me),{class:"px-4 sm:px-6 border-b pb-3"},{default:s(()=>[t("div",gs,[a(D,{name:"upload",class:"h-5 w-5 text-primary"}),a(l(fe),{class:"text-lg sm:text-xl font-semibold"},{default:s(()=>e[97]||(e[97]=[d(" Import Rejections ")])),_:1})]),a(l(ce),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:s(()=>e[98]||(e[98]=[d(" Upload a CSV file to import rejections. The file will be validated before import. ")])),_:1})]),_:1}),t("div",ys,[m.value?(o(),u("div",Ds,[(r=m.value.headers)!=null&&r.length?(o(),u("div",$s,[t("div",As,[e[102]||(e[102]=t("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),t("div",Rs,p(m.value.headers.length)+" columns ",1)]),t("div",Ts,[(o(!0),u(_,null,M(m.value.headers,N=>(o(),u("span",{key:N,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},p(N),1))),128))])])):g("",!0),t("div",Ns,[a(l(oe),{class:"border-2"},{default:s(()=>[a(l(ie),{class:"p-4 text-center"},{default:s(()=>[t("div",Fs,p(m.value.summary.total),1),e[103]||(e[103]=t("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),a(l(oe),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:s(()=>[a(l(ie),{class:"p-4 text-center"},{default:s(()=>[t("div",Vs,p(m.value.summary.valid),1),e[104]||(e[104]=t("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),a(l(oe),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:s(()=>[a(l(ie),{class:"p-4 text-center"},{default:s(()=>[t("div",Ms,p(m.value.summary.invalid),1),e[105]||(e[105]=t("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),m.value.header_error?(o(),j(l(Se),{key:1,variant:"destructive"},{default:s(()=>[a(l(De),{class:"flex items-center gap-2"},{default:s(()=>[a(D,{name:"alert_circle",class:"h-5 w-5"}),e[106]||(e[106]=d(" Header Error "))]),_:1}),a(l($e),null,{default:s(()=>[d(p(m.value.header_error),1)]),_:1})]),_:1})):g("",!0),(y=m.value.invalid)!=null&&y.length?(o(),u("div",Bs,[t("div",Us,[t("h3",zs,[a(D,{name:"alert-triangle",class:"h-5 w-5"}),d(" Validation Errors ("+p(m.value.invalid.length)+") ",1)]),a(h,{onClick:it,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:s(()=>[a(D,{name:"download",class:"h-4 w-4"}),e[107]||(e[107]=d(" Download Error Report "))]),_:1})]),t("div",Ps,[t("div",Es,[a(l(ke),null,{default:s(()=>[a(l(je),{class:"sticky top-0 bg-background"},{default:s(()=>[a(l(se),null,{default:s(()=>[a(l(X),{class:"w-20"},{default:s(()=>e[108]||(e[108]=[d("Row #")])),_:1}),a(l(X),null,{default:s(()=>e[109]||(e[109]=[d("Preview")])),_:1}),a(l(X),null,{default:s(()=>e[110]||(e[110]=[d("Errors")])),_:1})]),_:1})]),_:1}),a(l(Ce),null,{default:s(()=>[(o(!0),u(_,null,M(m.value.invalid,N=>(o(),j(l(se),{key:N.rowNumber,class:"hover:bg-muted/50"},{default:s(()=>[a(l(G),{class:"font-medium"},{default:s(()=>[d(p(N.rowNumber),1)]),_:2},1024),a(l(G),{class:"text-sm text-muted-foreground"},{default:s(()=>{var ee;return[t("div",Ls,[(o(!0),u(_,null,M(N.preview||[],Q=>(o(),u("span",{key:Q.key,class:"whitespace-nowrap"},[t("span",Ws,p(Q.label)+": ",1),d(" "+p(Q.value),1)]))),128)),(ee=N.preview)!=null&&ee.length?g("",!0):(o(),u("span",Is," — "))])]}),_:2},1024),a(l(G),null,{default:s(()=>{var ee;return[t("div",Os,[(o(!0),u(_,null,M(N.errors||[],(Q,pt)=>(o(),u("div",{key:pt,class:"text-xs text-red-600 flex items-start gap-1"},[a(D,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),t("span",null,p(Q),1)]))),128)),(ee=N.errors)!=null&&ee.length?g("",!0):(o(),u("div",Ys," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):g("",!0),(J=m.value.valid)!=null&&J.length?(o(),u("div",Hs,[t("h3",qs,[a(D,{name:"check-circle",class:"h-5 w-5"}),d(" Valid Rows ("+p(m.value.valid.length)+") ",1)]),e[113]||(e[113]=t("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),t("div",Gs,[a(l(ke),null,{default:s(()=>[a(l(je),null,{default:s(()=>[a(l(se),null,{default:s(()=>[a(l(X),null,{default:s(()=>e[111]||(e[111]=[d("Row #")])),_:1}),a(l(X),null,{default:s(()=>e[112]||(e[112]=[d("Preview")])),_:1})]),_:1})]),_:1}),a(l(Ce),null,{default:s(()=>[(o(!0),u(_,null,M(m.value.valid.slice(0,5),N=>(o(),j(l(se),{key:N.rowNumber},{default:s(()=>[a(l(G),{class:"font-medium"},{default:s(()=>[d(p(N.rowNumber),1)]),_:2},1024),a(l(G),{class:"text-sm"},{default:s(()=>{var ee;return[t("div",Ks,[(o(!0),u(_,null,M(N.preview||[],Q=>(o(),u("span",{key:Q.key,class:"whitespace-nowrap"},[t("span",Qs,p(Q.label)+":",1),d(" "+p(Q.value),1)]))),128)),(ee=N.preview)!=null&&ee.length?g("",!0):(o(),u("span",Xs," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):g("",!0)])):(o(),u("div",bs,[t("div",_s,[t("div",ws,[a(D,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),t("label",hs,[e[99]||(e[99]=t("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),t("input",{type:"file",class:"hidden",onChange:rt,accept:".csv",disabled:R.value},null,40,ks)]),e[100]||(e[100]=t("p",{class:"text-xs text-muted-foreground mt-2"},"or drag and drop",-1))]),t("div",js,[a(D,{name:"info",class:"h-4 w-4"}),t("a",{href:ct.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,Cs)]),R.value?(o(),u("div",Ss,e[101]||(e[101]=[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),t("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):g("",!0)])]))]),t("div",Zs,[a(h,{onClick:Fe,variant:"outline",disabled:$.value},{default:s(()=>e[114]||(e[114]=[d(" Close ")])),_:1},8,["disabled"]),m.value&&m.value.summary.valid>0?(o(),j(h,{key:0,onClick:ot,variant:"default",disabled:$.value||m.value.summary.invalid>0||!!m.value.header_error,class:"flex items-center gap-2"},{default:s(()=>[$.value?(o(),u("div",Js)):(o(),j(D,{key:1,name:"check",class:"h-4 w-4"})),d(" "+p($.value?"Importing...":`Import ${m.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):g("",!0)])]}),_:1})]),_:1},8,["open"])]}),_:1},8,["tenantSlug","permissions"]))}};export{Sl as default};
