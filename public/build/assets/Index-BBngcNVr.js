import{c as $,L as u,e as r,X as t,U as p,b2 as X,M as _,S as d,N as B,a1 as jt,r as C,A as Fe,w as xe,bW as Ct,b as k,l as a,k as x,f as s,u as l,d as St,D as W,Y as H,P as ve,K as Ie,bF as Dt}from"./vendor-C-CW143M.js";import{x as _e,a as $t,g as At,W as q}from"./vendor-vue-o4TX1eGc.js";import{_ as Rt}from"./Badge.vue_vue_type_script_setup_true_lang-Cb4j4dNt.js";import{_ as D}from"./Icon.vue_vue_type_script_setup_true_lang-B7IfTNIf.js";import{_ as we}from"./Input.vue_vue_type_script_setup_true_lang-taOxs2kk.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-B-CPTRto.js";import{_ as Tt}from"./Checkbox.vue_vue_type_script_setup_true_lang-ChpjAJsN.js";import{_ as E}from"./Label.vue_vue_type_script_setup_true_lang-CZjK18aI.js";import{_ as De,a as $e,b as se,c as Q,d as Ae,e as G}from"./TableRow.vue_vue_type_script_setup_true_lang-D19AmMrD.js";import{_ as ie}from"./Card.vue_vue_type_script_setup_true_lang-Cp4wUgFE.js";import{_ as Nt}from"./CardHeader.vue_vue_type_script_setup_true_lang-CNgbOXgy.js";import{_ as Ft}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcA2pWrU.js";import{_ as de}from"./CardContent.vue_vue_type_script_setup_true_lang-DxPj8Tg7.js";import{b as ue,_ as ce,a as me}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DjSCH9m8.js";import{_ as fe,a as pe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BSj40beh.js";import{_ as Ce}from"./DialogFooter.vue_vue_type_script_setup_true_lang-RSN6g_4k.js";import{b as Re,_ as Te,a as Ne}from"./AlertDescription.vue_vue_type_script_setup_true_lang-Bni7FoRm.js";import{_ as Vt}from"./AppLayout.vue_vue_type_script_setup_true_lang-D6CqwD6B.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-CmSxFldp.js";import"./vendor-icons-Dyo-jBRF.js";import"./vendor-ui-DUlj4Wsf.js";import"./useInitials-DzeGKvtI.js";import"./app-B_vN6s90.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C-8K70bD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Mt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 flex flex-col items-center justify-center"},Bt={class:"text-sm font-semibold mb-2 text-foreground"},Ut={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(v){const i=v,h=$(()=>i.value===null||i.value===void 0||i.value===""?"No Data":i.value),F=$(()=>{const m=Number(i.value);return i.title.toLowerCase().includes("total")&&m>0});return(m,R)=>(r(),u("div",Mt,[t("h3",Bt,p(v.title),1),t("p",{class:X(["text-2xl font-bold",F.value?"text-red-600":"text-primary"])},p(h.value),3)]))}},Et={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Lt={class:"text-base text-center font-semibold mb-4"},Pt={key:0,class:"text-center text-sm py-4 text-primary font-medium"},zt={class:"space-y-3"},It={class:"text-sm"},Wt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},totalRejections:{type:Number,default:0},rejectionType:{type:String,default:""}},setup(v){const i=v;$(()=>i.rejectionType==="load"?"No load rejections recorded. You're on track for Fantastic+ !":i.rejectionType==="block"?"No block rejections recorded. You're on track for Fantastic+ !":"No rejections recorded. You're on track for Fantastic+ !");const h=F=>{const m=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],A=[...i.drivers].sort((V,M)=>M.total_penalty-V.total_penalty).map(V=>V.total_penalty).indexOf(F);return m[A]||"#6b7280"};return(F,m)=>(r(),u("div",Et,[t("h3",Lt,p(v.title),1),v.drivers.length===0?(r(),u("div",Pt,[v.totalRejections===0?(r(),u(_,{key:0},[v.rejectionType==="block"?(r(),u(_,{key:0},[d(" No block rejections recorded. You're on track for Fantastic+ ! ")],64)):v.rejectionType==="load"?(r(),u(_,{key:1},[d(" No load rejections recorded. You're on track for Fantastic+ ! ")],64)):(r(),u(_,{key:2},[d(" No rejections recorded. You're on track for Fantastic+ ! ")],64))],64)):(r(),u(_,{key:1},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(r(),u(_,{key:1},[m[0]||(m[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",zt,[(r(!0),u(_,null,B(v.drivers,(R,A)=>(r(),u("div",{key:A,class:"flex justify-between items-center"},[t("span",It,p(R.driver_name),1),t("span",{class:"text-sm font-medium",style:jt({color:h(R.total_penalty)})},p(R.total_penalty),5)]))),128))])],64))]))}},Ot={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Yt={class:"text-base text-center font-semibold mb-4"},Ht={class:"h-64"},qt={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(v){const i=v,h=C(null);let F=null;const m=()=>{if(F&&F.destroy(),!h.value)return;const R=h.value.getContext("2d"),A=[];i.chartData.datasets.forEach(T=>{T.data&&T.data.length&&A.push(...T.data)});const V=A.length>0?Math.min(...A):0,M=A.length>0?Math.max(...A):100;F=new Ct(R,{type:"line",data:i.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(T){const L=T.raw||0,Z=i.averageAcceptance||0,O=i.chartData.dateRangeLabel||"selected period",Y=Number(Z).toFixed(2);return[`Acceptance Score: ${L}`,`Average Score Over ${O}: ${Y}`]}}}},scales:{y:{beginAtZero:!(V>10),min:Math.max(Math.floor(V-5),0),max:Math.min(102.5,Math.ceil(M+5)),ticks:{stepSize:2.5,padding:10,font:{size:11},callback:function(T){return T<=100?T:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return Fe(()=>{m()}),xe(()=>i.chartData,()=>{m()},{deep:!0}),(R,A)=>(r(),u("div",Ot,[t("h3",Yt,p(v.title),1),t("div",Ht,[t("canvas",{ref_key:"chartCanvas",ref:h},null,512)])]))}},Gt={class:"space-y-2 md:space-y-4 lg:space-y-6 mb-2 md:mb-4 lg:mb-6"},Kt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4"},Qt={class:"grid grid-cols-1 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-6"},Xt={key:1,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center"},Zt={class:"flex flex-col sm:flex-row items-center justify-center sm:justify-around gap-3 mb-4"},Jt={class:"text-xs text-muted-foreground text-center mt-2"},ea={key:2,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center items-center"},ta={class:"flex flex-col items-center justify-center gap-3 mb-4"},aa={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null},currentDateFilter:{type:String,default:null},currentFilters:{type:Object,default:()=>({})}},setup(v){const i=v,h=$(()=>{var j;if(!i.metricsData||!i.metricsData.totalRejections)return[];const c=(j=i.currentFilters)==null?void 0:j.rejectionType;return!c||c===""?[{title:"Total Rejected Stops",value:i.metricsData.totalRejections||0},{title:"Rejected In Advance",value:i.metricsData.advancedRejectionCount||0},{title:"Rejected +24 Hours Before Start Time",value:i.metricsData.moreThan24Count||0},{title:"Rejected Within 24 Hours Before Start Time",value:i.metricsData.within24Count||0},{title:"Rejected +6 Hours Before Start Time",value:i.metricsData.moreThan6Count||0},{title:"Rejected Within 6 Hours Before Start Time",value:i.metricsData.within6Count||0},{title:"Rejected After Start Time",value:i.metricsData.afterStartCount||0}]:c==="block"?[{title:"Total Block Rejections",value:i.metricsData.totalRejections||0},{title:"Rejected In Advance",value:i.metricsData.advancedRejectionCount||0},{title:"Rejected +24 Hours Before Start Time",value:i.metricsData.moreThan24Count||0},{title:"Rejected Within 24 Hours Before Start Time",value:i.metricsData.within24Count||0},{title:"Rejected After Start Time",value:i.metricsData.afterStartCount||0}]:c==="load"?[{title:"Total Load Rejections",value:i.metricsData.totalRejections||0},{title:"Rejected +6 Hours Before Start Time",value:i.metricsData.moreThan6Count||0},{title:"Rejected Within 6 Hours Before Start Time",value:i.metricsData.within6Count||0},{title:"Rejected After Start Time",value:i.metricsData.afterStartCount||0}]:[]}),F=$(()=>i.driversData&&i.driversData.length?i.driversData:[]),m=$(()=>i.chartData&&Object.keys(i.chartData).length?i.chartData:{}),R=$(()=>{var c;return((c=i.metricsData)==null?void 0:c.totalRejections)||0}),A=$(()=>{var c;return((c=i.currentFilters)==null?void 0:c.rejectionType)||null}),V=$(()=>!i.chartData||!i.chartData.labels?!1:i.chartData.labels.length>1),M=$(()=>{var c,j,P,U;return((U=(P=(j=(c=i.chartData)==null?void 0:c.datasets)==null?void 0:j[0])==null?void 0:P.data)==null?void 0:U.length)>0}),T=$(()=>M.value?i.chartData.datasets[0].data[0]:0),L=$(()=>{const c=T.value;return c>=98?"fantastic_plus":c>=95?"fantastic":c>=90?"good":c>=85?"fair":"poor"}),Z=c=>c==null?"0%":`${Math.round(parseFloat(c))}%`,O=c=>{if(!c)return"Not Available";switch(c){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return c}},Y=c=>{if(!c)return"outline";switch(c){case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},S=c=>{if(!c)return"text-gray-600";switch(c){case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}},f=c=>{if(!c)return"";switch(c){case"fantastic_plus":return"Outstanding performance with exceptional acceptance rate";case"fantastic":return"Excellent performance with very high acceptance rate";case"good":return"Solid performance with good acceptance rate";case"fair":return"Acceptable performance with room for improvement";case"poor":return"Performance needs significant improvement";default:return""}};return(c,j)=>(r(),u("div",Gt,[t("div",Kt,[(r(!0),u(_,null,B(h.value,(P,U)=>(r(),k(Ut,{key:U,title:P.title,value:P.value,class:"transition-all duration-300 hover:shadow-md"},null,8,["title","value"]))),128))]),t("div",Qt,[a(Wt,{title:"Bottom 5 Drivers",drivers:F.value,"total-rejections":R.value,"rejection-type":A.value,class:X({"lg:col-span-1":V.value,"lg:col-span-1 md:col-span-1":!V.value,"transition-all duration-300 hover:shadow-md":!0})},null,8,["drivers","total-rejections","rejection-type","class"]),i.currentDateFilter!="Yesterday"&&V.value?(r(),k(qt,{key:0,title:"Acceptance Score",chartData:m.value,averageAcceptance:v.averageAcceptance,class:"lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md"},null,8,["chartData","averageAcceptance"])):x("",!0),!V.value&&M.value?(r(),u("div",Xt,[j[0]||(j[0]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",Zt,[t("div",{class:X(["text-4xl md:text-5xl font-bold text-center",S(L.value)])},p(Z(T.value)),3),a(l(Rt),{variant:Y(L.value),class:"text-xs md:text-sm px-3 py-1"},{default:s(()=>[d(p(O(L.value)),1)]),_:1},8,["variant"])]),t("p",Jt,p(f(L.value)),1)])):x("",!0),M.value?x("",!0):(r(),u("div",ea,[j[3]||(j[3]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",ta,[a(D,{name:"chart_bar",class:"h-16 w-16 text-muted-foreground/50"}),j[1]||(j[1]=t("div",{class:"text-lg font-medium text-center text-primary"}," No data available ",-1)),j[2]||(j[2]=t("p",{class:"text-sm text-primary/70 text-center max-w-md"}," There is no acceptance data available for the selected time period. Try selecting a different date range or check back later. ",-1))])]))])]))}},sa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},la={key:0,class:"col-span-full"},na={class:"relative"},ra=["value"],oa={class:"col-span-full"},ia={class:"relative"},da={class:"relative"},ua=["value"],ca={class:"relative"},ma=["value"],fa={class:"relative"},pa={class:"flex items-center space-x-2"},va={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},xa=St({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(v,{emit:i}){var V,M,T,L,Z,O,Y;const h=v,F=i,m=_e({id:(V=h.rejection)==null?void 0:V.id,tenant_id:h.isSuperAdmin?(M=h.rejection)==null?void 0:M.tenant_id:null,date:((T=h.rejection)==null?void 0:T.date)||"",driver_name:((L=h.rejection)==null?void 0:L.driver_name)||"",rejection_type:((Z=h.rejection)==null?void 0:Z.rejection_type)||"block",rejection_category:((O=h.rejection)==null?void 0:O.rejection_category)||"more_than_24",reason_code_id:((Y=h.rejection)==null?void 0:Y.reason_code_id)||null,disputed:h.rejection&&h.rejection.disputed!==null?parseInt(h.rejection.disputed)===1:!1,driver_controllable:h.rejection&&h.rejection.driver_controllable!==null?parseInt(h.rejection.driver_controllable)===1:null}),R=$(()=>m.rejection_type==="block"?[{value:"advanced_rejection",label:"Advanced Rejection"},{value:"more_than_24",label:"More than 24 hrs"},{value:"within_24",label:"Within 24 hrs"},{value:"after_start",label:"After start"}]:m.rejection_type==="load"?[{value:"more_than_6",label:"More than 6 hrs"},{value:"within_6",label:"Within 6 hrs"},{value:"after_start",label:"After start"}]:[]);xe(()=>m.rejection_type,S=>{const f=R.value.map(c=>c.value);f.includes(m.rejection_category)||(m.rejection_category=f[0]||"")}),xe(()=>h.rejection,S=>{S?(m.id=S.id,m.tenant_id=S.tenant_id,m.date=S.date,m.driver_name=S.driver_name,m.rejection_type=S.rejection_type,m.rejection_category=S.rejection_category,m.reason_code_id=S.reason_code_id,m.disputed=S.disputed!==null?parseInt(S.disputed)===1:!1,m.driver_controllable=S.driver_controllable!==null?parseInt(S.driver_controllable)===1:null):m.reset()},{immediate:!0});const A=()=>{const S=!!m.id,f=h.isSuperAdmin?S?"acceptance.update.admin":"acceptance.store.admin":S?"acceptance.update":"acceptance.store",c=h.isSuperAdmin?S?{rejection:m.id}:{}:S?{tenantSlug:h.tenantSlug,rejection:m.id}:{tenantSlug:h.tenantSlug};m[S?"put":"post"](route(f,c),{onSuccess:()=>F("close")})};return(S,f)=>(r(),u("form",{onSubmit:ve(A,["prevent"]),class:"space-y-6"},[t("div",sa,[v.isSuperAdmin?(r(),u("div",la,[a(E,null,{default:s(()=>f[9]||(f[9]=[d("Company Name")])),_:1}),t("div",na,[W(t("select",{"onUpdate:modelValue":f[0]||(f[0]=c=>l(m).tenant_id=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[f[10]||(f[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(r(!0),u(_,null,B(v.tenants,c=>(r(),u("option",{key:c.id,value:c.id},p(c.name),9,ra))),128))],512),[[H,l(m).tenant_id]]),f[11]||(f[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),t("div",oa,[a(E,null,{default:s(()=>f[12]||(f[12]=[d("Date")])),_:1}),a(we,{type:"date",modelValue:l(m).date,"onUpdate:modelValue":f[1]||(f[1]=c=>l(m).date=c),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(E,null,{default:s(()=>f[13]||(f[13]=[d("Driver Name")])),_:1}),a(we,{modelValue:l(m).driver_name,"onUpdate:modelValue":f[2]||(f[2]=c=>l(m).driver_name=c),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(E,null,{default:s(()=>f[14]||(f[14]=[d("Rejection Type")])),_:1}),t("div",ia,[W(t("select",{"onUpdate:modelValue":f[3]||(f[3]=c=>l(m).rejection_type=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},f[15]||(f[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[H,l(m).rejection_type]]),f[16]||(f[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(E,null,{default:s(()=>f[17]||(f[17]=[d("Rejection Category")])),_:1}),t("div",da,[W(t("select",{"onUpdate:modelValue":f[4]||(f[4]=c=>l(m).rejection_category=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(r(!0),u(_,null,B(R.value,c=>(r(),u("option",{key:c.value,value:c.value},p(c.label),9,ua))),128))],512),[[H,l(m).rejection_category]]),f[18]||(f[18]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(E,null,{default:s(()=>f[19]||(f[19]=[d("Reason Code")])),_:1}),t("div",ca,[W(t("select",{"onUpdate:modelValue":f[5]||(f[5]=c=>l(m).reason_code_id=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(r(!0),u(_,null,B(v.reasons,c=>(r(),u("option",{key:c.id,value:c.id},p(c.reason_code),9,ma))),128))],512),[[H,l(m).reason_code_id]]),f[20]||(f[20]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(E,null,{default:s(()=>f[21]||(f[21]=[d("Driver Controllable")])),_:1}),t("div",fa,[W(t("select",{"onUpdate:modelValue":f[6]||(f[6]=c=>l(m).driver_controllable=c),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},f[22]||(f[22]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[H,l(m).driver_controllable]]),f[23]||(f[23]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",pa,[a(Tt,{modelValue:l(m).disputed,"onUpdate:modelValue":f[7]||(f[7]=c=>l(m).disputed=c),id:"disputed"},null,8,["modelValue"]),a(E,{for:"disputed"},{default:s(()=>f[24]||(f[24]=[d("Disputed")])),_:1})])]),t("div",va,[a(w,{type:"button",onClick:f[8]||(f[8]=c=>F("close")),variant:"outline",class:"w-full sm:w-auto"},{default:s(()=>f[25]||(f[25]=[d(" Cancel ")])),_:1}),a(w,{type:"submit",disabled:l(m).processing,class:"w-full sm:w-auto"},{default:s(()=>[d(p(l(m).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),ga={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},ya={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},ba={class:"flex flex-wrap gap-3 ml-3"},_a=["action"],wa={class:"flex flex-col items-center gap-2 md:items-start"},ha={class:"flex flex-wrap gap-1 md:gap-2"},ka={key:0,class:"text-sm text-muted-foreground"},ja={key:0},Ca={key:1},Sa={key:2},Da={key:3,class:"ml-1"},$a={class:"flex items-center justify-between"},Aa={class:"flex items-center gap-2"},Ra={key:0,class:"ml-4 flex flex-wrap gap-2"},Ta={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Na={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Fa={class:"capitalize"},Va={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Ma={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Ba={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Ua={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},Ea={class:"flex flex-col gap-1 md:gap-4"},La={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},Pa={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-3"},za=["value"],Ia={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},Wa={class:"flex justify-end space-x-2"},Oa={class:"overflow-x-auto"},Ya={class:"flex items-center justify-center"},Ha=["checked"],qa={class:"flex items-center"},Ga={key:0},Ka={key:1},Qa={key:2,class:"ml-2"},Xa={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Za={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ja={key:3,class:"ml-2 opacity-50"},es=["value"],ts={key:1,class:"capitalize"},as={key:0,class:"ml-1 text-xs text-red-500"},ss={class:"flex space-x-2"},ls={key:0,class:"border-t bg-muted/20 px-4 py-3"},ns={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},rs={class:"flex items-center gap-4 text-sm text-muted-foreground"},os={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},is=["value"],ds={class:"flex flex-wrap"},us=["innerHTML"],cs={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},ms={class:"flex items-center justify-between"},fs={class:"max-h-[400px] overflow-y-auto rounded-md border"},ps={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},vs={key:1,class:"divide-y"},xs=["onClick"],gs={class:"text-xs font-medium sm:text-sm"},ys={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},bs={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},_s={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},ws={key:0,class:"space-y-4 rounded-md border p-4"},hs={class:"text-sm font-medium sm:text-base"},ks={class:"space-y-3"},js={class:"flex justify-end space-x-2"},Cs={class:"flex items-center gap-2"},Ss={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},Ds={key:0},$s={class:"space-y-4"},As={class:"cursor-pointer mt-3"},Rs=["disabled"],Ts={key:0,class:"mt-3 text-xs text-primary font-medium"},Ns={class:"flex items-center gap-2 text-sm text-muted-foreground"},Fs=["href"],Vs={key:0,class:"flex items-center justify-center gap-2 p-4"},Ms={key:1,class:"space-y-4"},Bs={key:0,class:"rounded-lg border p-3"},Us={class:"flex items-center justify-between"},Es={class:"text-xs text-muted-foreground"},Ls={class:"mt-2 flex flex-wrap gap-2"},Ps={class:"grid grid-cols-3 gap-4"},zs={class:"text-2xl font-bold"},Is={class:"text-2xl font-bold text-green-600"},Ws={class:"text-2xl font-bold text-red-600"},Os={key:2},Ys={class:"flex items-center justify-between mb-3"},Hs={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},qs={class:"border rounded-lg overflow-hidden"},Gs={class:"max-h-96 overflow-y-auto"},Ks={class:"flex flex-wrap gap-x-3 gap-y-1"},Qs={class:"font-medium text-foreground"},Xs={key:0,class:"italic text-muted-foreground"},Zs={class:"space-y-1"},Js={key:0,class:"text-xs text-muted-foreground"},el={key:3},tl={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},al={class:"border rounded-lg overflow-hidden"},sl={class:"flex flex-wrap gap-x-3 gap-y-1"},ll={class:"font-medium"},nl={key:0,class:"italic text-muted-foreground"},rl={class:"border-t p-4 flex justify-end gap-3"},ol={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Vl={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number},filters:{type:Object,default:()=>({search:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""})},permissions:Array},setup(v){const i=v,h=$t(),F=C(!1),m=C(null),R=C(!1),A=C(!1),V=C(null),M=C(!1);let T=0;Fe(()=>{const o=e=>e.preventDefault();window.addEventListener("dragover",o),window.addEventListener("drop",o),Ie(()=>{window.removeEventListener("dragover",o),window.removeEventListener("drop",o)})});const L=$(()=>(j.value==="yesterday"||j.value==="current-week")&&i.weekNumber&&i.year?`Week ${i.weekNumber}, ${i.year}`:(j.value==="6w"||j.value==="quarterly")&&i.startWeekNumber&&i.endWeekNumber&&i.year?`Weeks ${i.startWeekNumber}-${i.endWeekNumber}, ${i.year}`:""),Z=[{title:i.tenantSlug?"Dashboard":"Admin Dashboard",href:i.tenantSlug?route("dashboard",{tenantSlug:i.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:i.tenantSlug?route("acceptance.index",{tenantSlug:i.tenantSlug}):route("acceptance.index.admin")}],O=C(!1),Y=C(!1),S=C(null),f=C(""),c=C(""),j=C(i.dateFilter||"full"),P=C(i.perPage||10),U=C([]),ge=C(!1),Se=C(null),le=C(!1),ye=C(!1),Ve=C(null),ne=C(!1),z=C(null),J=C({reason_code:"",description:""}),be=C(!1),Me=C(null),he=["date","driver_name","rejection_type","reason_code","rejection_category","disputed","driver_controllable"],re=C("date"),oe=C("desc"),g=C({...i.filters});xe(()=>g.value.rejectionType,(o,e)=>{if(o!==e&&g.value.rejectionCategory){const b=["advanced_rejection","more_than_24","within_24","after_start"],n=["more_than_6","within_6","after_start"];o==="block"&&!b.includes(g.value.rejectionCategory)&&(g.value.rejectionCategory=""),o==="load"&&!n.includes(g.value.rejectionCategory)&&(g.value.rejectionCategory="")}});const ae=$(()=>{let o=[...i.rejections.data];return o.sort((e,b)=>{var ee,N;let n=e[re.value],y=b[re.value];return re.value==="reason_code"&&(n=((ee=e.reason_code)==null?void 0:ee.reason_code)||"",y=((N=b.reason_code)==null?void 0:N.reason_code)||""),n===null?1:y===null?-1:(typeof n=="string"&&(n=n.toLowerCase(),y=y.toLowerCase()),n<y?oe.value==="asc"?-1:1:n>y?oe.value==="asc"?1:-1:0)}),o});function We(o){re.value===o?oe.value=oe.value==="asc"?"desc":"asc":(re.value=o,oe.value="asc")}function Be(){const o=i.tenantSlug?route("acceptance.index",{tenantSlug:i.tenantSlug}):route("acceptance.index.admin");q.get(o,{...g.value,perPage:P.value,dateFilter:j.value})}function Oe(){g.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""},Be()}const Ue=(o=null)=>{S.value=o,O.value=!0},Ye=()=>{Y.value=!0,ne.value=!1,z.value=null},He=()=>{J.value={reason_code:"",description:""},z.value=null,ne.value=!0},qe=o=>{J.value={reason_code:o.reason_code,description:o.description||""},z.value=o.id,ne.value=!0},Ge=()=>{ne.value=!1,z.value=null},Ke=o=>{Me.value=o,be.value=!0},Qe=()=>{const o=_e({reason_code:J.value.reason_code,description:J.value.description}),e=z.value?i.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":i.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",b=z.value?i.isSuperAdmin?{code:z.value}:{tenantSlug:i.tenantSlug,code:z.value}:i.isSuperAdmin?{}:{tenantSlug:i.tenantSlug};(z.value?o.put:o.post).call(o,route(e,b),{onSuccess:()=>{c.value=z.value?"Reason code updated successfully.":"Reason code created successfully.",ne.value=!1,z.value=null,q.reload({only:["rejection_reason_codes"]})},onError:y=>{console.error(y)}})},Xe=o=>{const e=_e({}),b=i.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",n=i.isSuperAdmin?{id:o}:{tenantSlug:i.tenantSlug,code:o};e.delete(route(b,n),{onSuccess:()=>{c.value="Reason code deleted successfully.",be.value=!1,q.reload({only:["rejection_reason_codes"]})}})},Ze=o=>{Ve.value=o,ye.value=!0},Je=o=>{const e=_e({}),b=i.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",n=i.isSuperAdmin?{rejection:o}:{tenantSlug:i.tenantSlug,rejection:o};e.delete(route(b,n),{preserveScroll:!0,onSuccess:()=>{c.value="Rejection deleted successfully.",ye.value=!1}})},et=o=>{if(o){const e=new URL(o),b=e.origin+e.pathname;q.get(b,{...g.value,perPage:P.value,dateFilter:j.value,page:e.searchParams.get("page")||1})}};function ke(o){j.value=o;const e=i.tenantSlug?route("acceptance.index",{tenantSlug:i.tenantSlug}):route("acceptance.index.admin");q.get(e,{...g.value,perPage:P.value,dateFilter:o})}function tt(){const o=i.tenantSlug?route("acceptance.index",{tenantSlug:i.tenantSlug}):route("acceptance.index.admin");q.get(o,{...g.value,perPage:P.value,dateFilter:j.value})}function je(o){if(!o)return"";const e=o.split("-");if(e.length!==3)return o;const[b,n,y]=e;return`${Number(n)}/${Number(y)}/${b}`}xe(c,o=>{o&&setTimeout(()=>{c.value=""},5e3)});const at=$(()=>{var b,n;if(!((b=i.rejection_breakdown)!=null&&b.by_category)||!((n=i.rejection_breakdown)!=null&&n.by_category.total_rejections))return null;const o=i.rejection_breakdown.by_category,e=i.filters.rejectionType;return e?{totalRejections:o[`total_${e}_rejections`]||0,afterStartCount:o[`after_start_${e}_count`]||0,moreThan24Count:o[`more_than_24_${e}_count`]||0,within24Count:o[`within_24_${e}_count`]||0,advancedRejectionCount:o[`advanced_rejection_${e}_count`]||0,moreThan6Count:o[`more_than_6_${e}_count`]||0,within6Count:o[`within_6_${e}_count`]||0,by_category:!0}:{totalRejections:o.total_rejections||0,afterStartCount:o.after_start_count||0,moreThan24Count:o.more_than_24_count||0,within24Count:o.within_24_count||0,advancedRejectionCount:o.advanced_rejection_count||0,moreThan6Count:o.more_than_6_count||0,within6Count:o.within_6_count||0,by_category:!0}}),st=$(()=>{var o,e,b;return i.filters.rejectionType=="load"?((o=i.rejection_breakdown)==null?void 0:o.bottom_five_drivers.load)||[]:i.filters.rejectionType=="block"?((e=i.rejection_breakdown)==null?void 0:e.bottom_five_drivers.block)||[]:((b=i.rejection_breakdown)==null?void 0:b.bottom_five_drivers.total)||[]}),lt=$(()=>!i.line_chart_data||i.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:i.line_chart_data.map(o=>o.date),datasets:[{label:"Acceptance Performance",data:i.line_chart_data.map(o=>o.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function nt(o){q.post(route("rejection_reason_codes.restore.admin",{id:o}),{},{onSuccess:()=>{c.value="Reason code restored successfully",setTimeout(()=>c.value="",3e3)}})}function rt(o){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&q.delete(route("rejection_reason_codes.forceDelete.admin",{id:o}),{onSuccess:()=>{c.value="Reason code permanently deleted",setTimeout(()=>c.value="",3e3)}})}const ot=$(()=>ae.value.length>0&&U.value.length===ae.value.length);function it(o){o.target.checked?U.value=ae.value.map(e=>e.id):U.value=[]}function dt(){U.value.length>0&&(ge.value=!0)}function ut(){const o=_e({ids:U.value}),e=i.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",b=i.isSuperAdmin?{}:{tenantSlug:i.tenantSlug};o.delete(route(e,b),{preserveScroll:!0,onSuccess:()=>{c.value=`${U.value.length} rejection records deleted successfully.`,U.value=[],ge.value=!1},onError:n=>{console.error(n)}})}function ct(o){var b;const e=(b=o.target.files)==null?void 0:b[0];e&&(Ee(e),o.target.value="")}function Ee(o){if(!o)return;if(!(o.type==="text/csv"||o.name.toLowerCase().endsWith(".csv")||o.type==="")){f.value="Please upload a valid CSV file.",setTimeout(()=>f.value="",4e3);return}R.value=!0;const b=new FormData;b.append("file",o);const n=i.isSuperAdmin?route("acceptance.validateImport.admin"):route("acceptance.validateImport",{tenantSlug:i.tenantSlug});q.post(n,b,{forceFormData:!0,preserveScroll:!0,only:["flash"],onFinish:()=>{R.value=!1},onError:()=>{R.value=!1,f.value="Failed to validate CSV file"}})}function mt(){T+=1,M.value=!0}function ft(){M.value=!0}function pt(){T-=1,T<=0&&(T=0,M.value=!1)}function vt(o){var b,n;T=0,M.value=!1;const e=(n=(b=o.dataTransfer)==null?void 0:b.files)==null?void 0:n[0];e&&Ee(e)}function xt(){var e;if(!m.value||(((e=m.value.summary)==null?void 0:e.invalid)??0)>0||m.value.header_error)return;A.value=!0;const o=i.isSuperAdmin?route("acceptance.confirmImport.admin"):route("acceptance.confirmImport",{tenantSlug:i.tenantSlug});q.post(o,{},{preserveScroll:!0,onSuccess:()=>{var b;c.value=`Successfully imported ${((b=m.value.summary)==null?void 0:b.valid)??0} rejections`,Le()},onError:()=>{f.value="Failed to import rejections"},onFinish:()=>{A.value=!1}})}function gt(){const o=i.isSuperAdmin?route("acceptance.downloadErrorReport.admin"):route("acceptance.downloadErrorReport",{tenantSlug:i.tenantSlug});window.location.href=o}function Le(){F.value=!1,m.value=null,R.value=!1,A.value=!1,M.value=!1,T=0,V.value&&(V.value.value="")}function yt(){if(ae.value.length===0){f.value="No data available to export",setTimeout(()=>{f.value=""},3e3);return}Se.value&&Se.value.submit()}const bt=$(()=>i.tenantSlug?route("acceptance.export",{tenantSlug:i.tenantSlug}):route("acceptance.export.admin")),_t=$(()=>"/storage/upload-data-temps/Rejections Template.csv"),Pe=C(!1);Fe(()=>{const o=e=>{Pe.value&&!e.target.closest(".relative")&&(Pe.value=!1)};document.addEventListener("click",o),Ie(()=>{document.removeEventListener("click",o)})});const wt=$(()=>g.value.search||g.value.dateFrom||g.value.dateTo||g.value.rejectionType||g.value.reasonCode||g.value.rejectionCategory||g.value.disputed||g.value.driverControllable);function ht(o){if(!o)return"";const e=i.rejection_reason_codes.find(b=>b.id==o);return e?e.reason_code:""}function ze(o){return o?{more_than_6:"More than 6 hrs",within_6:"Within 6 hrs",after_start:"After start",more_than_24:"More than 24 hrs",within_24:"Within 24 hrs",advanced_rejection:"Advanced Rejection"}[o]||o:"—"}const I=$(()=>i.permissions.map(o=>o.name));return xe(()=>{var o;return(o=h.props.flash)==null?void 0:o.importValidation},o=>{if(o){if(o.results){m.value=o.results,o.header_error&&(m.value.header_error=o.header_error),F.value=!0;return}o.message&&(f.value=o.message)}},{immediate:!0}),(o,e)=>(r(),k(Vt,{breadcrumbs:Z,tenantSlug:v.tenantSlug,permissions:i.permissions},{default:s(()=>{var b;return[a(l(At),{title:"Acceptance"}),t("div",ga,[c.value?(r(),k(l(Re),{key:0,variant:"success"},{default:s(()=>[a(l(Te),null,{default:s(()=>e[33]||(e[33]=[d("Success")])),_:1}),a(l(Ne),null,{default:s(()=>[d(p(c.value),1)]),_:1})]),_:1})):x("",!0),f.value?(r(),k(l(Re),{key:1,variant:"destructive"},{default:s(()=>[a(l(Te),null,{default:s(()=>e[34]||(e[34]=[d("Error")])),_:1}),a(l(Ne),null,{default:s(()=>[d(p(f.value),1)]),_:1})]),_:1})):x("",!0),t("div",ya,[e[39]||(e[39]=t("h1",{class:"text-lg font-bold text-gray-800 dark:text-gray-200 md:text-xl lg:text-2xl"}," Acceptance ",-1)),t("div",ba,[I.value.includes("acceptance.create")?(r(),k(w,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=n=>Ue()),variant:"default"},{default:s(()=>[a(D,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Add Rejection "))]),_:1})):x("",!0),U.value.length>0&&I.value.includes("acceptance.delete")?(r(),k(w,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=n=>dt()),variant:"destructive"},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+p(U.value.length)+") ",1)]),_:1})):x("",!0),I.value.includes("acceptance.import")?(r(),k(w,{key:2,onClick:e[2]||(e[2]=n=>F.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:s(()=>[a(D,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[36]||(e[36]=d(" Import CSV "))]),_:1})):x("",!0),I.value.includes("acceptance.export")?(r(),k(w,{key:3,class:"px-2 py-0 md:px-4 md:py-2",onClick:ve(yt,["prevent"]),variant:"outline"},{default:s(()=>[a(D,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[37]||(e[37]=d(" Download CSV "))]),_:1})):x("",!0),v.isSuperAdmin?(r(),k(w,{key:4,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=n=>Ye()),variant:"outline"},{default:s(()=>[a(D,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[38]||(e[38]=d(" Manage Reason Codes "))]),_:1})):x("",!0)])]),t("form",{ref_key:"exportForm",ref:Se,action:bt.value,method:"GET",class:"hidden"},null,8,_a),a(l(ie),null,{default:s(()=>[a(l(de),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",wa,[t("div",ha,[a(w,{onClick:e[4]||(e[4]=n=>ke("yesterday")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":j.value==="yesterday"})},{default:s(()=>e[40]||(e[40]=[d(" Yesterday ")])),_:1},8,["class"]),a(w,{onClick:e[5]||(e[5]=n=>ke("current-week")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":j.value==="current-week"})},{default:s(()=>e[41]||(e[41]=[d(" WTD ")])),_:1},8,["class"]),a(w,{onClick:e[6]||(e[6]=n=>ke("6w")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":j.value==="6w"})},{default:s(()=>e[42]||(e[42]=[d(" T6W ")])),_:1},8,["class"]),a(w,{onClick:e[7]||(e[7]=n=>ke("quarterly")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":j.value==="quarterly"})},{default:s(()=>e[43]||(e[43]=[d(" Quarterly ")])),_:1},8,["class"])]),v.dateRange?(r(),u("div",ka,[j.value==="yesterday"&&v.dateRange.start?(r(),u("span",ja," Showing data from "+p(je(v.dateRange.start)),1)):v.dateRange.start&&v.dateRange.end?(r(),u("span",Ca," Showing data from "+p(je(v.dateRange.start))+" to "+p(je(v.dateRange.end)),1)):(r(),u("span",Sa,p(v.dateRange.label),1)),L.value?(r(),u("span",Da,"("+p(L.value)+")",1)):x("",!0)])):x("",!0)])]),_:1})]),_:1}),a(l(ie),{class:"mb-6"},{default:s(()=>[a(l(Nt),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",$a,[t("div",Aa,[a(l(Ft),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[44]||(e[44]=[d("Filters")])),_:1}),!le.value&&wt.value?(r(),u("div",Ra,[g.value.search?(r(),u("div",Ta," Search: "+p(g.value.search),1)):x("",!0),g.value.rejectionType?(r(),u("div",Na,[e[45]||(e[45]=d(" Type: ")),t("span",Fa,p(g.value.rejectionType),1)])):x("",!0),g.value.reasonCode?(r(),u("div",Va," Reason: "+p(ht(g.value.reasonCode)),1)):x("",!0),g.value.rejectionCategory?(r(),u("div",Ma," Category: "+p(ze(g.value.rejectionCategory)),1)):x("",!0),g.value.disputed?(r(),u("div",Ba," Disputed: "+p(g.value.disputed==="true"?"Yes":"No"),1)):x("",!0),g.value.driverControllable?(r(),u("div",Ua," Driver Controllable: "+p(g.value.driverControllable==="true"?"Yes":g.value.driverControllable==="false"?"No":"N/A"),1)):x("",!0)])):x("",!0)]),a(w,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=n=>le.value=!le.value)},{default:s(()=>[d(p(le.value?"Hide Filters":"Show Filters")+" ",1),a(D,{name:le.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),le.value?(r(),k(l(de),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",Ea,[t("div",La,[t("div",null,[a(l(E),{for:"search"},{default:s(()=>e[46]||(e[46]=[d("Search")])),_:1}),a(l(we),{class:"h-9 w-full px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:g.value.search,"onUpdate:modelValue":e[9]||(e[9]=n=>g.value.search=n),type:"text",placeholder:"Search by driver name..."},null,8,["modelValue"])])]),t("div",Pa,[t("div",null,[a(l(E),{for:"rejectionType"},{default:s(()=>e[47]||(e[47]=[d("Rejection Type")])),_:1}),W(t("select",{id:"rejectionType","onUpdate:modelValue":e[10]||(e[10]=n=>g.value.rejectionType=n),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[48]||(e[48]=[t("option",{value:""},"All Types",-1),t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[H,g.value.rejectionType]])]),t("div",null,[a(l(E),{for:"reasonCode"},{default:s(()=>e[49]||(e[49]=[d("Reason Code")])),_:1}),W(t("select",{id:"reasonCode","onUpdate:modelValue":e[11]||(e[11]=n=>g.value.reasonCode=n),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[50]||(e[50]=t("option",{value:""},"All Reason Codes",-1)),(r(!0),u(_,null,B(v.rejection_reason_codes,n=>(r(),u("option",{key:n.id,value:n.id},p(n.reason_code),9,za))),128))],512),[[H,g.value.reasonCode]])]),t("div",null,[a(l(E),{for:"rejectionCategory"},{default:s(()=>e[51]||(e[51]=[d("Rejection From Start Time")])),_:1}),W(t("select",{id:"rejectionCategory","onUpdate:modelValue":e[12]||(e[12]=n=>g.value.rejectionCategory=n),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[57]||(e[57]=t("option",{value:""},"All Categories",-1)),!g.value.rejectionType||g.value.rejectionType==="block"?(r(),u(_,{key:0},[e[52]||(e[52]=t("option",{value:"advanced_rejection"},"Advanced Rejection",-1)),e[53]||(e[53]=t("option",{value:"more_than_24"},"More than 24 hours",-1)),e[54]||(e[54]=t("option",{value:"within_24"},"Within 24 hours",-1))],64)):x("",!0),!g.value.rejectionType||g.value.rejectionType==="load"?(r(),u(_,{key:1},[e[55]||(e[55]=t("option",{value:"more_than_6"},"More than 6 hours",-1)),e[56]||(e[56]=t("option",{value:"within_6"},"Within 6 hours",-1))],64)):x("",!0),e[58]||(e[58]=t("option",{value:"after_start"},"After start time",-1))],512),[[H,g.value.rejectionCategory]])])]),t("div",Ia,[t("div",null,[a(l(E),{for:"disputed"},{default:s(()=>e[59]||(e[59]=[d("Disputed")])),_:1}),W(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=n=>g.value.disputed=n),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[60]||(e[60]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),512),[[H,g.value.disputed]])]),t("div",null,[a(l(E),{for:"driverControllable"},{default:s(()=>e[61]||(e[61]=[d("Driver Controllable")])),_:1}),W(t("select",{id:"driverControllable","onUpdate:modelValue":e[14]||(e[14]=n=>g.value.driverControllable=n),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[62]||(e[62]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"NA"},"N/A",-1)]),512),[[H,g.value.driverControllable]])])]),t("div",Wa,[a(w,{onClick:Oe,variant:"ghost",size:"sm"},{default:s(()=>[a(D,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[63]||(e[63]=d(" Reset Filters "))]),_:1}),a(w,{onClick:Be,variant:"default",size:"sm"},{default:s(()=>[a(D,{name:"filter",class:"mr-2 h-4 w-4"}),e[64]||(e[64]=d(" Apply Filters "))]),_:1})])])]),_:1})):x("",!0)]),_:1}),v.isSuperAdmin?x("",!0):(r(),k(aa,{key:2,metricsData:at.value||{},driversData:st.value||[],chartData:lt.value||{},averageAcceptance:v.average_acceptance||null,currentDateFilter:((b=i.dateRange)==null?void 0:b.label)||"",currentFilters:g.value||{}},null,8,["metricsData","driversData","chartData","averageAcceptance","currentDateFilter","currentFilters"])),a(l(ie),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:s(()=>[a(l(de),{class:"p-0"},{default:s(()=>[t("div",Oa,[a(l(De),{class:"relative h-[500px] overflow-auto"},{default:s(()=>[a(l($e),null,{default:s(()=>[a(l(se),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:s(()=>[I.value.includes("acceptance.delete")?(r(),k(l(Q),{key:0,class:"w-[50px]"},{default:s(()=>[t("div",Ya,[t("input",{type:"checkbox",onChange:it,checked:ot.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ha)])]),_:1})):x("",!0),v.isSuperAdmin?(r(),k(l(Q),{key:1},{default:s(()=>e[65]||(e[65]=[d("Company Name")])),_:1})):x("",!0),(r(),u(_,null,B(he,n=>a(l(Q),{key:n,class:"cursor-pointer",onClick:y=>We(n)},{default:s(()=>[t("div",qa,[n=="rejection_category"?(r(),u("div",Ga,"Rejection From Start")):(r(),u("div",Ka,p(n.replace(/_/g," ").split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" ")),1)),re.value===n?(r(),u("div",Qa,[oe.value==="asc"?(r(),u("svg",Xa,e[66]||(e[66]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(r(),u("svg",Za,e[67]||(e[67]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(r(),u("div",Ja,e[68]||(e[68]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),I.value.includes("acceptance.update")||I.value.includes("acceptance.delete")?(r(),k(l(Q),{key:2},{default:s(()=>e[69]||(e[69]=[d(" Actions ")])),_:1})):x("",!0)]),_:1})]),_:1}),a(l(Ae),null,{default:s(()=>[ae.value.length===0?(r(),k(l(se),{key:0},{default:s(()=>[a(l(G),{colspan:v.isSuperAdmin?he.length+3:he.length+2,class:"py-8 text-center text-primary font-medium"},{default:s(()=>e[70]||(e[70]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):x("",!0),(r(!0),u(_,null,B(ae.value,n=>(r(),k(l(se),{key:n.id,class:"hover:bg-muted/50"},{default:s(()=>[I.value.includes("acceptance.delete")?(r(),k(l(G),{key:0,class:"text-center"},{default:s(()=>[W(t("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":e[15]||(e[15]=y=>U.value=y),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,es),[[Dt,U.value]])]),_:2},1024)):x("",!0),v.isSuperAdmin?(r(),k(l(G),{key:1},{default:s(()=>{var y;return[d(p(((y=n.tenant)==null?void 0:y.name)||"—"),1)]}),_:2},1024)):x("",!0),(r(),u(_,null,B(he,y=>a(l(G),{key:y,class:"whitespace-nowrap"},{default:s(()=>{var ee,N;return[y==="date"?(r(),u(_,{key:0},[d(p(je(n[y])),1)],64)):y==="rejection_type"?(r(),u("span",ts,p(n[y]),1)):y==="reason_code"?(r(),u(_,{key:2},[d(p(((ee=n.reason_code)==null?void 0:ee.reason_code)||"—")+" ",1),(N=n.reason_code)!=null&&N.deleted_at?(r(),u("span",as," (Deleted) ")):x("",!0)],64)):y==="disputed"?(r(),u(_,{key:3},[d(p(n[y]?"Yes":"No"),1)],64)):y==="driver_controllable"?(r(),u(_,{key:4},[d(p(n[y]===null?"N/A":n[y]?"Yes":"No"),1)],64)):y==="rejection_category"?(r(),u(_,{key:5},[d(p(ze(n[y])),1)],64)):(r(),u(_,{key:6},[d(p(n[y]),1)],64))]}),_:2},1024)),64)),I.value.includes("acceptance.delete")||I.value.includes("acceptance.update")?(r(),k(l(G),{key:2},{default:s(()=>[t("div",ss,[I.value.includes("acceptance.update")?(r(),k(w,{key:0,size:"sm",onClick:y=>Ue(n),variant:"warning"},{default:s(()=>[a(D,{name:"pencil",class:"mr-1 h-4 w-4"}),e[71]||(e[71]=d(" Edit "))]),_:2},1032,["onClick"])):x("",!0),I.value.includes("acceptance.delete")?(r(),k(w,{key:1,size:"sm",variant:"destructive",onClick:y=>Ze(n.id)},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-4 w-4"}),e[72]||(e[72]=d(" Delete "))]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),v.rejections.links?(r(),u("div",ls,[t("div",ns,[t("div",rs,[t("span",null,"Showing "+p(ae.value.length)+" of "+p(v.rejections.data.length)+" entries",1),t("div",os,[e[73]||(e[73]=t("span",{class:"text-sm"},"Show:",-1)),W(t("select",{"onUpdate:modelValue":e[16]||(e[16]=n=>P.value=n),onChange:tt,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(r(),u(_,null,B([10,25,50,100],n=>t("option",{key:n,value:n},p(n),9,is)),64))],544),[[H,P.value]])])]),t("div",ds,[(r(!0),u(_,null,B(v.rejections.links,n=>(r(),k(w,{key:n.label,onClick:y=>et(n.url),disabled:!n.url,variant:"ghost",size:"sm",class:X(["mx-1",{"border-primary bg-primary/10 text-primary":n.active}])},{default:s(()=>[t("span",{innerHTML:n.label},null,8,us)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):x("",!0)]),_:1})]),_:1}),a(l(ue),{open:O.value,"onUpdate:open":e[18]||(e[18]=n=>O.value=n)},{default:s(()=>[a(l(ce),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:s(()=>[a(l(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(pe),{class:"text-lg sm:text-xl"},{default:s(()=>[d(p(S.value?"Edit":"Add")+" Rejection",1)]),_:1}),a(l(me),{class:"text-xs sm:text-sm"},{default:s(()=>[d(" Fill in the details to "+p(S.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),a(xa,{rejection:S.value,reasons:v.rejection_reason_codes,tenants:v.tenants,"is-super-admin":v.isSuperAdmin,"tenant-slug":v.tenantSlug,onClose:e[17]||(e[17]=n=>O.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),v.isSuperAdmin?(r(),k(l(ue),{key:3,open:Y.value,"onUpdate:open":e[22]||(e[22]=n=>Y.value=n)},{default:s(()=>[a(l(ce),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:s(()=>[a(l(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(pe),{class:"text-lg sm:text-xl"},{default:s(()=>e[74]||(e[74]=[d("Manage Reason Codes")])),_:1}),a(l(me),{class:"text-xs sm:text-sm"},{default:s(()=>e[75]||(e[75]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",cs,[t("div",ms,[e[77]||(e[77]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Reason Codes",-1)),a(w,{onClick:He,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>[a(D,{name:"plus",class:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e[76]||(e[76]=d(" Add New Code "))]),_:1})]),t("div",fs,[!v.rejection_reason_codes||v.rejection_reason_codes.length===0?(r(),u("div",ps," No reason codes found ")):(r(),u("div",vs,[(r(!0),u(_,null,B(v.rejection_reason_codes,n=>(r(),u("div",{key:n.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:y=>qe(n)},[t("div",gs,[d(p(n.reason_code)+" ",1),n.deleted_at?(r(),u("span",ys," (Deleted) ")):x("",!0)]),n.description?(r(),u("div",bs,p(n.description),1)):x("",!0)],8,xs),t("div",_s,[v.isSuperAdmin?(r(),u(_,{key:0},[n.deleted_at?(r(),u(_,{key:0},[a(w,{onClick:y=>nt(n.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(D,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[78]||(e[78]=d(" Restore "))]),_:2},1032,["onClick"]),a(w,{onClick:y=>rt(n.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[79]||(e[79]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(r(),k(w,{key:1,onClick:y=>Ke(n.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(D,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[80]||(e[80]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):x("",!0)])]))),128))]))]),ne.value?(r(),u("div",ws,[t("h3",hs,p(z.value?"Edit":"Add")+" Reason Code ",1),t("div",ks,[t("div",null,[a(l(E),{for:"reason_code",class:"text-xs sm:text-sm"},{default:s(()=>e[81]||(e[81]=[d("Code")])),_:1}),a(l(we),{id:"reason_code",modelValue:J.value.reason_code,"onUpdate:modelValue":e[19]||(e[19]=n=>J.value.reason_code=n),placeholder:"Enter reason code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[a(l(E),{for:"description",class:"text-xs sm:text-sm"},{default:s(()=>e[82]||(e[82]=[d("Description")])),_:1}),a(l(we),{id:"description",modelValue:J.value.description,"onUpdate:modelValue":e[20]||(e[20]=n=>J.value.description=n),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",js,[a(w,{onClick:Ge,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>e[83]||(e[83]=[d("Cancel")])),_:1}),a(w,{onClick:Qe,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>e[84]||(e[84]=[d("Save")])),_:1})])])])):x("",!0)]),a(l(Ce),{class:"px-4 sm:px-6"},{default:s(()=>[a(w,{onClick:e[21]||(e[21]=n=>Y.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[85]||(e[85]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):x("",!0),a(l(ue),{open:be.value,"onUpdate:open":e[25]||(e[25]=n=>be.value=n)},{default:s(()=>[a(l(ce),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(l(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(pe),{class:"text-lg sm:text-xl"},{default:s(()=>e[86]||(e[86]=[d("Confirm Deletion")])),_:1}),a(l(me),{class:"text-xs sm:text-sm"},{default:s(()=>e[87]||(e[87]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),a(l(Ce),{class:"px-4 sm:px-6"},{default:s(()=>[a(w,{type:"button",onClick:e[23]||(e[23]=n=>be.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[88]||(e[88]=[d(" Cancel ")])),_:1}),a(w,{type:"button",onClick:e[24]||(e[24]=n=>Xe(Me.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[89]||(e[89]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(l(ue),{open:ge.value,"onUpdate:open":e[28]||(e[28]=n=>ge.value=n)},{default:s(()=>[a(l(ce),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(l(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(pe),{class:"text-lg sm:text-xl"},{default:s(()=>e[90]||(e[90]=[d("Confirm Bulk Deletion")])),_:1}),a(l(me),{class:"text-xs sm:text-sm"},{default:s(()=>[d(" Are you sure you want to delete "+p(U.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),a(l(Ce),{class:"px-4 sm:px-6"},{default:s(()=>[a(w,{type:"button",onClick:e[26]||(e[26]=n=>ge.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[91]||(e[91]=[d(" Cancel ")])),_:1}),a(w,{type:"button",onClick:e[27]||(e[27]=n=>ut()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[92]||(e[92]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),a(l(ue),{open:ye.value,"onUpdate:open":e[31]||(e[31]=n=>ye.value=n)},{default:s(()=>[a(l(ce),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(l(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(l(pe),{class:"text-lg sm:text-xl"},{default:s(()=>e[93]||(e[93]=[d("Confirm Deletion")])),_:1}),a(l(me),{class:"text-xs sm:text-sm"},{default:s(()=>e[94]||(e[94]=[d(" Are you sure you want to delete this rejection record? This action cannot be undone. ")])),_:1})]),_:1}),a(l(Ce),{class:"px-4 sm:px-6"},{default:s(()=>[a(w,{type:"button",onClick:e[29]||(e[29]=n=>ye.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[95]||(e[95]=[d(" Cancel ")])),_:1}),a(w,{type:"button",onClick:e[30]||(e[30]=n=>Je(Ve.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[96]||(e[96]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(l(ue),{open:F.value,"onUpdate:open":e[32]||(e[32]=n=>F.value=n)},{default:s(()=>[a(l(ce),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:s(()=>{var n,y,ee;return[a(l(fe),{class:"px-4 sm:px-6 border-b pb-3"},{default:s(()=>[t("div",Cs,[a(D,{name:"upload",class:"h-5 w-5 text-primary"}),a(l(pe),{class:"text-lg sm:text-xl font-semibold"},{default:s(()=>e[97]||(e[97]=[d(" Import Rejections ")])),_:1})]),a(l(me),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:s(()=>e[98]||(e[98]=[d(" Upload a CSV file to import rejections. The file will be validated before import. ")])),_:1})]),_:1}),t("div",Ss,[m.value?(r(),u("div",Ms,[(n=m.value.headers)!=null&&n.length?(r(),u("div",Bs,[t("div",Us,[e[103]||(e[103]=t("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),t("div",Es,p(m.value.headers.length)+" columns ",1)]),t("div",Ls,[(r(!0),u(_,null,B(m.value.headers,N=>(r(),u("span",{key:N,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},p(N),1))),128))])])):x("",!0),t("div",Ps,[a(l(ie),{class:"border-2"},{default:s(()=>[a(l(de),{class:"p-4 text-center"},{default:s(()=>[t("div",zs,p(m.value.summary.total),1),e[104]||(e[104]=t("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),a(l(ie),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:s(()=>[a(l(de),{class:"p-4 text-center"},{default:s(()=>[t("div",Is,p(m.value.summary.valid),1),e[105]||(e[105]=t("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),a(l(ie),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:s(()=>[a(l(de),{class:"p-4 text-center"},{default:s(()=>[t("div",Ws,p(m.value.summary.invalid),1),e[106]||(e[106]=t("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),m.value.header_error?(r(),k(l(Re),{key:1,variant:"destructive"},{default:s(()=>[a(l(Te),{class:"flex items-center gap-2"},{default:s(()=>[a(D,{name:"alert_circle",class:"h-5 w-5"}),e[107]||(e[107]=d(" Header Error "))]),_:1}),a(l(Ne),null,{default:s(()=>[d(p(m.value.header_error),1)]),_:1})]),_:1})):x("",!0),(y=m.value.invalid)!=null&&y.length?(r(),u("div",Os,[t("div",Ys,[t("h3",Hs,[a(D,{name:"alert-triangle",class:"h-5 w-5"}),d(" Validation Errors ("+p(m.value.invalid.length)+") ",1)]),a(w,{onClick:gt,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:s(()=>[a(D,{name:"download",class:"h-4 w-4"}),e[108]||(e[108]=d(" Download Error Report "))]),_:1})]),t("div",qs,[t("div",Gs,[a(l(De),null,{default:s(()=>[a(l($e),{class:"sticky top-0 bg-background"},{default:s(()=>[a(l(se),null,{default:s(()=>[a(l(Q),{class:"w-20"},{default:s(()=>e[109]||(e[109]=[d("Row #")])),_:1}),a(l(Q),null,{default:s(()=>e[110]||(e[110]=[d("Preview")])),_:1}),a(l(Q),null,{default:s(()=>e[111]||(e[111]=[d("Errors")])),_:1})]),_:1})]),_:1}),a(l(Ae),null,{default:s(()=>[(r(!0),u(_,null,B(m.value.invalid,N=>(r(),k(l(se),{key:N.rowNumber,class:"hover:bg-muted/50"},{default:s(()=>[a(l(G),{class:"font-medium"},{default:s(()=>[d(p(N.rowNumber),1)]),_:2},1024),a(l(G),{class:"text-sm text-muted-foreground"},{default:s(()=>{var te;return[t("div",Ks,[(r(!0),u(_,null,B(N.preview||[],K=>(r(),u("span",{key:K.key,class:"whitespace-nowrap"},[t("span",Qs,p(K.label)+": ",1),d(" "+p(K.value),1)]))),128)),(te=N.preview)!=null&&te.length?x("",!0):(r(),u("span",Xs," — "))])]}),_:2},1024),a(l(G),null,{default:s(()=>{var te;return[t("div",Zs,[(r(!0),u(_,null,B(N.errors||[],(K,kt)=>(r(),u("div",{key:kt,class:"text-xs text-red-600 flex items-start gap-1"},[a(D,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),t("span",null,p(K),1)]))),128)),(te=N.errors)!=null&&te.length?x("",!0):(r(),u("div",Js," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):x("",!0),(ee=m.value.valid)!=null&&ee.length?(r(),u("div",el,[t("h3",tl,[a(D,{name:"check-circle",class:"h-5 w-5"}),d(" Valid Rows ("+p(m.value.valid.length)+") ",1)]),e[114]||(e[114]=t("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),t("div",al,[a(l(De),null,{default:s(()=>[a(l($e),null,{default:s(()=>[a(l(se),null,{default:s(()=>[a(l(Q),null,{default:s(()=>e[112]||(e[112]=[d("Row #")])),_:1}),a(l(Q),null,{default:s(()=>e[113]||(e[113]=[d("Preview")])),_:1})]),_:1})]),_:1}),a(l(Ae),null,{default:s(()=>[(r(!0),u(_,null,B(m.value.valid.slice(0,5),N=>(r(),k(l(se),{key:N.rowNumber},{default:s(()=>[a(l(G),{class:"font-medium"},{default:s(()=>[d(p(N.rowNumber),1)]),_:2},1024),a(l(G),{class:"text-sm"},{default:s(()=>{var te;return[t("div",sl,[(r(!0),u(_,null,B(N.preview||[],K=>(r(),u("span",{key:K.key,class:"whitespace-nowrap"},[t("span",ll,p(K.label)+":",1),d(" "+p(K.value),1)]))),128)),(te=N.preview)!=null&&te.length?x("",!0):(r(),u("span",nl," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):x("",!0)])):(r(),u("div",Ds,[t("div",$s,[t("div",{class:X(["flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20 transition-colors",{"border-primary bg-primary/5":M.value,"opacity-60 pointer-events-none":R.value}]),onDragenter:ve(mt,["prevent"]),onDragover:ve(ft,["prevent"]),onDragleave:ve(pt,["prevent"]),onDrop:ve(vt,["prevent"])},[a(D,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),e[100]||(e[100]=t("div",{class:"text-center"},[t("div",{class:"text-sm font-medium"},[t("span",{class:"text-primary"},"Drag & drop"),d(" your CSV here ")]),t("p",{class:"text-xs text-muted-foreground mt-1"},"or")],-1)),t("label",As,[e[99]||(e[99]=t("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),t("input",{ref_key:"importFileInput",ref:V,type:"file",class:"hidden",onChange:ct,accept:".csv,text/csv",disabled:R.value},null,40,Rs)]),e[101]||(e[101]=t("p",{class:"text-xs text-muted-foreground mt-2"},"CSV only",-1)),M.value?(r(),u("div",Ts," Drop file to validate ")):x("",!0)],34),t("div",Ns,[a(D,{name:"info",class:"h-4 w-4"}),t("a",{href:_t.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,Fs)]),R.value?(r(),u("div",Vs,e[102]||(e[102]=[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),t("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):x("",!0)])]))]),t("div",rl,[a(w,{onClick:Le,variant:"outline",disabled:A.value},{default:s(()=>e[115]||(e[115]=[d(" Close ")])),_:1},8,["disabled"]),m.value&&m.value.summary.valid>0?(r(),k(w,{key:0,onClick:xt,variant:"default",disabled:A.value||m.value.summary.invalid>0||!!m.value.header_error,class:"flex items-center gap-2"},{default:s(()=>[A.value?(r(),u("div",ol)):(r(),k(D,{key:1,name:"check",class:"h-4 w-4"})),d(" "+p(A.value?"Importing...":`Import ${m.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):x("",!0)])]}),_:1})]),_:1},8,["open"])]}),_:1},8,["tenantSlug","permissions"]))}};export{Vl as default};
