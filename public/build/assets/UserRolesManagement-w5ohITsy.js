import{d as Y,r,c as U,F as w,e as f,z as e,u as s,f as n,X as t,b as V,E as _,ah as h,H as Z}from"./vendor-DrR5RGOb.js";import{g as ee}from"./vendor-vue-BInP8APy.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-gxA0SNFW.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as A}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as te,a as le,b as ne,c as oe,d as re,e as de,f as ue}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CzcjgAWH.js";import{_ as M}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as R}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{_ as z}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";import{_ as ie}from"./Separator.vue_vue_type_script_setup_true_lang-mktRl8Mw.js";import{S as me,U as ce,P as D,c as fe,B as pe}from"./vendor-icons-CZvmGlJ0.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./Icon.vue_vue_type_script_setup_true_lang-C19RfzLR.js";import"./app-CDY29HFh.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-DYsZx5V7.js";import"./InputError.vue_vue_type_script_setup_true_lang-DJFUZLlW.js";const xe={class:"container w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},_e={class:"relative max-w-md"},ge={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},be={class:"flex items-center space-x-2"},ye={class:"flex items-center space-x-2"},we={class:"flex items-center space-x-2"},he={key:0,class:"fixed inset-0 z-[100]"},ke={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Se={key:0,class:"fixed inset-0 z-[100]"},$e={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Ce={key:0,class:"fixed inset-0 z-[100]"},Ue={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Ae=Y({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(i){const d=i,{tenantSlug:o}=d,E=[{title:o?"Dashboard":"Admin Dashboard",href:o?`/${o}/dashboard`:"/dashboard"},{title:"User Management",href:o?`/${o}/admin/user-management`:"/admin/user-management"}],g=r(d.search||""),p=r(!1),v=r(!1),x=r(!1),k=r(null),S=r(null),$=r(null),m=d.SuperAdmin,u=r(!1),b=r(""),y=r(""),L=U(()=>{if(!g.value.trim())return d.users;const l=g.value.toLowerCase(),a=d.users.data.filter(c=>c.name.toLowerCase().includes(l)||c.email.toLowerCase().includes(l));return{...d.users,data:a}}),N=()=>{k.value=null,p.value=!0},O=()=>{p.value=!1},F=()=>{$.value=null,x.value=!0},B=()=>{x.value=!1},P=()=>{S.value=null,v.value=!0},T=()=>{v.value=!1},H=l=>{k.value=l,p.value=!0},I=l=>{$.value=l,x.value=!0},X=l=>{S.value=l,v.value=!0},q=l=>{b.value=m?route("admin.users.destroy",l):route("users.destroy",[o,l]),y.value=`Are you sure you want to delete user ${l.name}?`,u.value=!0},G=l=>{b.value=m?route("admin.roles.destroy",l):route("roles.destroy",[o,l]),y.value=`Are you sure you want to delete role ${l.name}?`,u.value=!0},J=l=>{b.value=route("admin.tenants.destroy",l),y.value=`Are you sure you want to delete tenant ${l.name}?`,u.value=!0},K=()=>{u.value=!1},C=()=>{v.value=!1,p.value=!1,x.value=!1},Q=U(()=>d.roles.data),W=U(()=>d.tenants.data);return(l,a)=>(f(),w(Z,null,[e(s(ee),{title:"Users Management"}),e(se,{breadcrumbs:E,tenantSlug:s(o)},{default:n(()=>[t("div",xe,[a[9]||(a[9]=t("div",{class:"space-y-2"},[t("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100"}," User and Role Management "),t("p",{class:"text-gray-500 dark:text-gray-400"}," Manage users, roles, and permissions for your application. ")],-1)),e(s(ie)),t("div",_e,[t("div",ge,[e(s(me),{class:"h-5 w-5 text-gray-400"})]),e(ae,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=c=>g.value=c),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])]),e(s(M),null,{default:n(()=>[e(s(z),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:n(()=>[e(s(j),{class:"text-xl font-semibold"},{default:n(()=>[t("div",be,[e(s(ce),{class:"h-5 w-5"}),a[3]||(a[3]=t("span",null,"Users",-1))])]),_:1}),e(A,{onClick:N,variant:"default",size:"sm",class:"gap-1"},{default:n(()=>[e(s(D),{class:"h-4 w-4"}),a[4]||(a[4]=t("span",null,"Add User",-1))]),_:1})]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:n(()=>[e(te,{users:L.value,isSuperAdmin:s(m),onEdit:H,onDelete:q},null,8,["users","isSuperAdmin"])]),_:1})]),_:1}),e(s(M),null,{default:n(()=>[e(s(z),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:n(()=>[e(s(j),{class:"text-xl font-semibold"},{default:n(()=>[t("div",ye,[e(s(fe),{class:"h-5 w-5"}),a[5]||(a[5]=t("span",null,"Roles",-1))])]),_:1}),e(A,{onClick:P,variant:"default",size:"sm",class:"gap-1"},{default:n(()=>[e(s(D),{class:"h-4 w-4"}),a[6]||(a[6]=t("span",null,"Add Role",-1))]),_:1})]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:n(()=>[e(le,{roles:i.roles,onEdit:X,onDelete:G},null,8,["roles"])]),_:1})]),_:1}),s(m)?(f(),V(s(M),{key:0},{default:n(()=>[e(s(z),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:n(()=>[e(s(j),{class:"text-xl font-semibold"},{default:n(()=>[t("div",we,[e(s(pe),{class:"h-5 w-5"}),a[7]||(a[7]=t("span",null,"Companies",-1))])]),_:1}),e(A,{onClick:F,variant:"default",size:"sm",class:"gap-1"},{default:n(()=>[e(s(D),{class:"h-4 w-4"}),a[8]||(a[8]=t("span",null,"Add Company",-1))]),_:1})]),_:1}),e(s(R),null,{default:n(()=>[e(ne,{tenants:i.tenants,onEdit:I,onDelete:J},null,8,["tenants"])]),_:1})]),_:1})):_("",!0),e(h,{name:"fade"},{default:n(()=>[p.value?(f(),V(oe,{key:0,user:k.value,roles:Q.value,permissions:i.permissions,tenants:W.value,isSuperAdmin:s(m),tenantSlug:s(o),onClose:O,onSaved:C},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])):_("",!0)]),_:1}),e(h,{name:"fade"},{default:n(()=>[x.value?(f(),w("div",he,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:B}),t("div",ke,[e(re,{tenants:i.tenants,tenant:$.value,onClose:B,onSaved:C,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-lg md:max-w-xl overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["tenants","tenant"])])])):_("",!0)]),_:1}),e(h,{name:"fade"},{default:n(()=>[v.value?(f(),w("div",Se,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:T}),t("div",$e,[e(de,{role:S.value,permissions:i.permissions,isSuperAdmin:s(m),tenantSlug:s(o),onClose:T,onSaved:C,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-lg md:max-w-xl overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["role","permissions","isSuperAdmin","tenantSlug"])])])):_("",!0)]),_:1}),e(h,{name:"fade"},{default:n(()=>[u.value?(f(),w("div",Ce,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:a[1]||(a[1]=c=>u.value=!1)}),t("div",Ue,[e(ue,{deleteUrl:b.value,message:y.value,tenantSlug:s(o),onCancel:a[2]||(a[2]=c=>u.value=!1),onConfirmed:K,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-md overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["deleteUrl","message","tenantSlug"])])])):_("",!0)]),_:1})])]),_:1},8,["tenantSlug"])],64))}}),We=ve(Ae,[["__scopeId","data-v-28f311a2"]]);export{We as default};
