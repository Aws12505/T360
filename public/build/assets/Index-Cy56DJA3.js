import{g as M,S as x,W as B}from"./vendor-vue-CegDyOO_.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-DvtjhaUB.js";import{_ as O}from"./Layout.vue_vue_type_script_setup_true_lang-ar4AaGNi.js";import{D as V}from"./DeleteConfirmation-CbKFDCe-.js";import{_ as E,a as G,b as S,c as h,d as P,e as g}from"./TableRow.vue_vue_type_script_setup_true_lang-KQhoIeb8.js";import{_ as I}from"./Card.vue_vue_type_script_setup_true_lang-1bmPyW_M.js";import{_ as Z}from"./CardContent.vue_vue_type_script_setup_true_lang-OyO0HbpV.js";import{_ as w}from"./Badge.vue_vue_type_script_setup_true_lang-DAxI-zSb.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as A,E as U,i as W,j as q,F as H}from"./vendor-icons-coAGW0bc.js";import{c as $,r as C,b as u,e as m,f as s,z as a,u as t,X as n,U as f,S as d,E as c,F as k,H as X,O as J}from"./vendor-Bl7QtHDZ.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-DnnPsXYS.js";import"./vendor-ui-B_LrUle4.js";import"./Icon.vue_vue_type_script_setup_true_lang-BJi62zlW.js";import"./useInitials-DzeGKvtI.js";import"./app-DSBC6pvU.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BGaPs1OX.js";import"./Button.vue_vue_type_script_setup_true_lang-CmY1RpaM.js";import"./Separator.vue_vue_type_script_setup_true_lang-xzyxXuy0.js";const K={class:"p-4 bg-muted/10 rounded-md"},Q={class:"text-sm font-medium text-foreground/90 line-clamp-2"},R={class:"space-y-6"},Y={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3"},ee={class:"overflow-x-auto"},te={class:"text-sm font-medium text-foreground line-clamp-2"},se={class:"flex justify-end space-x-3"},ae=["onClick"],ne={class:"flex flex-col items-center justify-center space-y-4"},le={class:"bg-muted/20 p-4 rounded-full"},re={key:0,class:"bg-muted/20 px-4 py-3 border-t flex flex-col sm:flex-row items-center justify-between gap-4"},ie={class:"text-sm text-muted-foreground"},oe={class:"font-medium"},de={class:"font-medium"},me={class:"font-medium"},ue={class:"flex space-x-2"},ce={__name:"Index",props:{templates:{type:Object,required:!0,default:()=>({data:[],meta:{},links:{}})},tenantSlug:String,permissions:Array},setup(l){const p=l,D=$(()=>[{title:p.tenantSlug?"Dashboard":"Admin Dashboard",href:p.tenantSlug?route("dashboard",{tenantSlug:p.tenantSlug}):route("admin.dashboard")},{title:"SMS Templates",href:route("sms-coaching-templates.index",{tenantSlug:p.tenantSlug})}]),y=i=>i?i.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"",b=i=>{switch(i){case"good":return"success";case"bad":return"destructive";case"minor_improvement":return"warning";default:return"default"}},_=C(!1),v=C(null),N=i=>{v.value=i,_.value=!0},j=()=>{v.value&&B.delete(route("sms-coaching-templates.destroy",{tenantSlug:p.tenantSlug,id:v.value.id}),{preserveScroll:!0,onSuccess:()=>{_.value=!1}})},z={"{driver_first_name}":"First Name","{driver_last_name}":"Last Name","{driver_ontime_score}":"On-Time %","{driver_acceptance_score}":"Acceptance %","{driver_greenzone_score}":"Green Zone","{driver_severe_alerts}":"Severe Alerts","{company_avg_ontime}":"Avg On-Time %","{company_avg_acceptance}":"Avg Acceptance %","{company_avg_greenzone}":"Avg Green Zone"},T=i=>i?i.replace(/{[^}]+}/g,e=>`<${z[e]||e}>`):"",r=$(()=>Array.isArray(p.permissions)?p.permissions.map(i=>i==null?void 0:i.name).filter(Boolean):[]);return(i,e)=>(m(),u(F,{breadcrumbs:D.value,tenantSlug:l.tenantSlug,permissions:l.permissions},{default:s(()=>[a(t(M),{title:"SMS Coaching Templates"}),a(O,{permissions:l.permissions},{default:s(()=>[a(V,{show:_.value,template:v.value,onClose:e[0]||(e[0]=o=>_.value=!1),onConfirm:j},{title:s(()=>e[1]||(e[1]=[d("Delete Template")])),content:s(()=>{var o;return[e[2]||(e[2]=n("p",{class:"text-sm text-muted-foreground mb-4"}," Are you sure you want to delete this template? This action cannot be undone. ",-1)),n("div",K,[n("p",Q,f((o=v.value)!=null&&o.coaching_message?T(v.value.coaching_message):"No message"),1)])]}),_:1},8,["show","template"]),n("div",R,[n("div",Y,[e[4]||(e[4]=n("div",null,[n("h1",{class:"text-xl sm:text-2xl font-bold tracking-tight text-foreground"},"SMS Coaching Templates"),n("p",{class:"mt-1 text-sm text-muted-foreground max-w-3xl"}," Manage templates for performance feedback SMS coaching. Create templates for different driver performance scenarios. ")],-1)),r.value&&r.value.includes("sms-coaching-templates.create")?(m(),u(t(x),{key:0,href:i.route("sms-coaching-templates.create",{tenantSlug:l.tenantSlug}),class:"inline-flex items-center gap-2 px-4 py-2.5 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 text-sm font-medium shadow-sm transition-all h-10"},{default:s(()=>[a(t(A),{class:"h-7.5 w-7.5"}),e[3]||(e[3]=n("span",{class:"whitespace-nowrap"},"New Template",-1))]),_:1},8,["href"])):c("",!0)]),a(t(I),{class:"overflow-hidden border rounded-xl shadow-sm"},{default:s(()=>[a(t(Z),{class:"p-0"},{default:s(()=>[n("div",ee,[a(t(E),null,{default:s(()=>[a(t(G),{class:"bg-muted/30"},{default:s(()=>[a(t(S),null,{default:s(()=>[a(t(h),{class:"min-w-[160px]"},{default:s(()=>e[5]||(e[5]=[d("Message Preview")])),_:1}),a(t(h),{class:"hidden sm:table-cell"},{default:s(()=>e[6]||(e[6]=[d("Acceptance")])),_:1}),a(t(h),{class:"hidden sm:table-cell"},{default:s(()=>e[7]||(e[7]=[d("On-Time")])),_:1}),a(t(h),{class:"hidden md:table-cell"},{default:s(()=>e[8]||(e[8]=[d("Green Zone")])),_:1}),a(t(h),{class:"hidden md:table-cell"},{default:s(()=>e[9]||(e[9]=[d("Severe Alerts")])),_:1}),r.value&&(r.value.includes("sms-coaching-templates.update")||r.value.includes("sms-coaching-templates.delete")||r.value.includes("sms-coaching-templates.view"))?(m(),u(t(h),{key:0,class:"text-right min-w-[120px]"},{default:s(()=>e[10]||(e[10]=[d("Actions")])),_:1})):c("",!0)]),_:1})]),_:1}),a(t(P),null,{default:s(()=>[(m(!0),k(X,null,J(l.templates.data,o=>(m(),u(t(S),{key:o.id,class:"hover:bg-muted/10 transition-colors duration-150"},{default:s(()=>[a(t(g),{class:"max-w-[160px] lg:max-w-[240px] py-3"},{default:s(()=>[n("div",te,f(o.coaching_message?T(o.coaching_message):"No message"),1)]),_:2},1024),a(t(g),{class:"hidden sm:table-cell py-3"},{default:s(()=>[a(t(w),{variant:b(o.acceptance),class:"whitespace-nowrap capitalize text-xs"},{default:s(()=>[d(f(y(o.acceptance)),1)]),_:2},1032,["variant"])]),_:2},1024),a(t(g),{class:"hidden sm:table-cell py-3"},{default:s(()=>[a(t(w),{variant:b(o.ontime),class:"whitespace-nowrap capitalize text-xs"},{default:s(()=>[d(f(y(o.ontime)),1)]),_:2},1032,["variant"])]),_:2},1024),a(t(g),{class:"hidden md:table-cell py-3"},{default:s(()=>[a(t(w),{variant:b(o.greenzone),class:"whitespace-nowrap capitalize text-xs"},{default:s(()=>[d(f(y(o.greenzone)),1)]),_:2},1032,["variant"])]),_:2},1024),a(t(g),{class:"hidden md:table-cell py-3"},{default:s(()=>[a(t(w),{variant:b(o.severe_alerts),class:"whitespace-nowrap capitalize text-xs"},{default:s(()=>[d(f(y(o.severe_alerts)),1)]),_:2},1032,["variant"])]),_:2},1024),r.value&&(r.value.includes("sms-coaching-templates.update")||r.value.includes("sms-coaching-templates.delete")||r.value.includes("sms-coaching-templates.view"))?(m(),u(t(g),{key:0,class:"py-3"},{default:s(()=>[n("div",se,[r.value&&r.value.includes("sms-coaching-templates.view")?(m(),u(t(x),{key:0,href:i.route("sms-coaching-templates.show",{tenantSlug:l.tenantSlug,id:o.id}),class:"inline-flex items-center justify-center p-1 rounded-lg text-primary hover:bg-primary/10 transition-colors",title:"View Details"},{default:s(()=>[a(t(U),{class:"h-7.5 w-7.5"})]),_:2},1032,["href"])):c("",!0),r.value&&r.value.includes("sms-coaching-templates.update")?(m(),u(t(x),{key:1,href:i.route("sms-coaching-templates.edit",{tenantSlug:l.tenantSlug,id:o.id}),class:"inline-flex items-center justify-center p-1 rounded-lg text-primary hover:bg-primary/10 transition-colors",title:"Edit Template"},{default:s(()=>[a(t(W),{class:"h-7.5 w-7.5"})]),_:2},1032,["href"])):c("",!0),r.value&&r.value.includes("sms-coaching-templates.delete")?(m(),k("button",{key:2,onClick:fe=>N(o),class:"inline-flex items-center justify-center p-1 rounded-lg text-destructive hover:bg-destructive/10 transition-colors",title:"Delete Template"},[a(t(q),{class:"h-7.5 w-7.5"})],8,ae)):c("",!0)])]),_:2},1024)):c("",!0)]),_:2},1024))),128)),l.templates.data.length===0?(m(),u(t(S),{key:0},{default:s(()=>[a(t(g),{colspan:6,class:"py-12 text-center"},{default:s(()=>[n("div",ne,[n("div",le,[a(t(H),{class:"h-10 w-10 text-muted-foreground"})]),e[12]||(e[12]=n("div",{class:"space-y-1.5"},[n("h3",{class:"text-lg font-medium text-foreground"},"No templates found"),n("p",{class:"text-sm text-muted-foreground max-w-md"}," Get started by creating a new SMS coaching template for your drivers. ")],-1)),r.value&&r.value.includes("sms-coaching-templates.create")?(m(),u(t(x),{key:0,href:i.route("sms-coaching-templates.create",{tenantSlug:l.tenantSlug}),class:"inline-flex items-center gap-2 px-4 py-2.5 text-sm rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 h-10"},{default:s(()=>[a(t(A),{class:"h-5 w-5"}),e[11]||(e[11]=d(" Create Template "))]),_:1},8,["href"])):c("",!0)])]),_:1})]),_:1})):c("",!0)]),_:1})]),_:1})]),l.templates.meta&&l.templates.data.length>0?(m(),k("div",re,[n("div",ie,[e[13]||(e[13]=d(" Showing ")),n("span",oe,f(l.templates.meta.from),1),e[14]||(e[14]=d(" to ")),n("span",de,f(l.templates.meta.to),1),e[15]||(e[15]=d(" of ")),n("span",me,f(l.templates.meta.total),1),e[16]||(e[16]=d(" templates "))]),n("div",ue,[l.templates.links.prev?(m(),u(t(x),{key:0,href:l.templates.links.prev,class:"px-4 py-2 rounded-md text-sm font-medium text-foreground/80 hover:bg-muted/50 transition-colors border border-border h-10","preserve-scroll":""},{default:s(()=>e[17]||(e[17]=[d(" ← Previous ")])),_:1},8,["href"])):c("",!0),l.templates.links.next?(m(),u(t(x),{key:1,href:l.templates.links.next,class:"px-4 py-2 rounded-md text-sm font-medium text-foreground/80 hover:bg-muted/50 transition-colors border border-border h-10","preserve-scroll":""},{default:s(()=>e[18]||(e[18]=[d(" Next → ")])),_:1},8,["href"])):c("",!0)])])):c("",!0)]),_:1})]),_:1})])]),_:1},8,["permissions"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}},Be=L(ce,[["__scopeId","data-v-2cbd8876"]]);export{Be as default};
