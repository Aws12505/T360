import{e as Ke,w as ve,H as f,i,X as t,G as k,B as a,j as o,O as d,E as z,Y as W,u as s,J as S,K as L,P as g,I as we,a3 as Qe,r as C,A as Ce,aj as Xe,a as M,f as A,W as Ze,ak as X,al as et}from"./vendor-DwH8xScK.js";import{x as ae,g as tt,W as Y}from"./vendor-vue-b4KxZBNV.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-CzZBifQk.js";import{_ as ne,a as se,b as re,c as ie,d as de}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BpKl91iL.js";import{_ as ce}from"./DialogFooter.vue_vue_type_script_setup_true_lang-ortPbb9d.js";import{_ as $,a as H}from"./Label.vue_vue_type_script_setup_true_lang-DpSppbWv.js";import{_ as lt}from"./Checkbox.vue_vue_type_script_setup_true_lang-A8dIMjcl.js";import{_ as at}from"./AppLayout.vue_vue_type_script_setup_true_lang-BVQ_O_Pt.js";import{_ as R}from"./Icon.vue_vue_type_script_setup_true_lang-CCQAf4zh.js";import{_ as ot,a as nt,b as fe,c as ue,d as st,e as le}from"./TableRow.vue_vue_type_script_setup_true_lang-UcWElY6d.js";import{_ as pe}from"./Card.vue_vue_type_script_setup_true_lang-aMwvZFez.js";import{_ as rt,a as it}from"./CardTitle.vue_vue_type_script_setup_true_lang-Df2fSrYx.js";import{_ as me}from"./CardContent.vue_vue_type_script_setup_true_lang-Bj6hH48Z.js";import{_ as be,a as xe,b as ke}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BrLs6Pjq.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-BsI0tD0G.js";import"./vendor-ui-DoCXuQZy.js";import"./vendor-icons-BYt1eATw.js";import"./app-CxsajcKP.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BOjezWgd.js";const dt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ut={key:0,class:"col-span-full"},ct={class:"relative"},ft=["value"],pt={class:"col-span-full"},mt={class:"relative"},vt={class:"relative"},gt={class:"relative"},yt=["value"],_t={class:"relative"},bt={class:"flex items-center space-x-2"},xt={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},kt=Ke({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(m,{emit:r}){var T,F,w,j,B,D,P;const _=m,U=r,v=ae({id:(T=_.rejection)==null?void 0:T.id,tenant_id:_.isSuperAdmin?(F=_.rejection)==null?void 0:F.tenant_id:null,date:((w=_.rejection)==null?void 0:w.date)||"",driver_name:((j=_.rejection)==null?void 0:j.driver_name)||"",rejection_type:((B=_.rejection)==null?void 0:B.rejection_type)||"block",rejection_category:((D=_.rejection)==null?void 0:D.rejection_category)||"more_than_6",reason_code_id:((P=_.rejection)==null?void 0:P.reason_code_id)||null,disputed:_.rejection&&_.rejection.disputed!==null?parseInt(_.rejection.disputed)===1:!1,driver_controllable:_.rejection&&_.rejection.driver_controllable!==null?parseInt(_.rejection.driver_controllable)===1:null});ve(()=>_.rejection,b=>{b?(v.id=b.id,v.tenant_id=b.tenant_id,v.date=b.date,v.driver_name=b.driver_name,v.rejection_type=b.rejection_type,v.rejection_category=b.rejection_category,v.reason_code_id=b.reason_code_id,v.disputed=b.disputed!==null?parseInt(b.disputed)===1:!1,v.driver_controllable=b.driver_controllable!==null?parseInt(b.driver_controllable)===1:null):v.reset()},{immediate:!0});const V=()=>{const b=!!v.id,u=_.isSuperAdmin?b?"acceptance.update.admin":"acceptance.store.admin":b?"acceptance.update":"acceptance.store",y=_.isSuperAdmin?b?{rejection:v.id}:{}:b?{tenantSlug:_.tenantSlug,rejection:v.id}:{tenantSlug:_.tenantSlug};v[b?"put":"post"](route(u,y),{onSuccess:()=>U("close")})};return(b,u)=>(i(),f("form",{onSubmit:we(V,["prevent"]),class:"space-y-6"},[t("div",dt,[m.isSuperAdmin?(i(),f("div",ut,[a($,null,{default:o(()=>u[9]||(u[9]=[d("Company Name")])),_:1}),t("div",ct,[z(t("select",{"onUpdate:modelValue":u[0]||(u[0]=y=>s(v).tenant_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[u[10]||(u[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),f(S,null,L(m.tenants,y=>(i(),f("option",{key:y.id,value:y.id},g(y.name),9,ft))),128))],512),[[W,s(v).tenant_id]]),u[11]||(u[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):k("",!0),t("div",pt,[a($,null,{default:o(()=>u[12]||(u[12]=[d("Date")])),_:1}),a(H,{type:"date",modelValue:s(v).date,"onUpdate:modelValue":u[1]||(u[1]=y=>s(v).date=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a($,null,{default:o(()=>u[13]||(u[13]=[d("Driver Name")])),_:1}),a(H,{modelValue:s(v).driver_name,"onUpdate:modelValue":u[2]||(u[2]=y=>s(v).driver_name=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a($,null,{default:o(()=>u[14]||(u[14]=[d("Rejection Type")])),_:1}),t("div",mt,[z(t("select",{"onUpdate:modelValue":u[3]||(u[3]=y=>s(v).rejection_type=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[15]||(u[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[W,s(v).rejection_type]]),u[16]||(u[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a($,null,{default:o(()=>u[17]||(u[17]=[d("Rejection Category")])),_:1}),t("div",vt,[z(t("select",{"onUpdate:modelValue":u[4]||(u[4]=y=>s(v).rejection_category=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[18]||(u[18]=[t("option",{value:"more_than_6"},"More than 6 hrs",-1),t("option",{value:"within_6"},"Within 6 hrs",-1),t("option",{value:"after_start"},"After start",-1)]),512),[[W,s(v).rejection_category]]),u[19]||(u[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a($,null,{default:o(()=>u[20]||(u[20]=[d("Reason Code")])),_:1}),t("div",gt,[z(t("select",{"onUpdate:modelValue":u[5]||(u[5]=y=>s(v).reason_code_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),f(S,null,L(m.reasons,y=>(i(),f("option",{key:y.id,value:y.id},g(y.reason_code),9,yt))),128))],512),[[W,s(v).reason_code_id]]),u[21]||(u[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a($,null,{default:o(()=>u[22]||(u[22]=[d("Driver Controllable")])),_:1}),t("div",_t,[z(t("select",{"onUpdate:modelValue":u[6]||(u[6]=y=>s(v).driver_controllable=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[23]||(u[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[W,s(v).driver_controllable]]),u[24]||(u[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",bt,[a(lt,{checked:s(v).disputed,"onUpdate:checked":u[7]||(u[7]=y=>s(v).disputed=y),id:"disputed"},null,8,["checked"]),a($,{for:"disputed"},{default:o(()=>u[25]||(u[25]=[d("Disputed")])),_:1})])]),t("div",xt,[a(x,{type:"button",onClick:u[8]||(u[8]=y=>U("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>u[26]||(u[26]=[d(" Cancel ")])),_:1}),a(x,{type:"submit",disabled:s(v).processing,class:"w-full sm:w-auto"},{default:o(()=>[d(g(s(v).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),wt={class:"bg-background rounded-lg border shadow-sm p-4 flex flex-col items-center justify-center"},Ct={class:"text-sm font-semibold mb-2 text-foreground"},jt={class:"text-2xl font-bold text-primary"},ht={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(m){return(r,_)=>(i(),f("div",wt,[t("h3",Ct,g(m.title),1),t("p",jt,g(m.value),1)]))}},St={class:"bg-background rounded-lg border shadow-sm p-4"},$t={class:"text-base font-semibold mb-4"},Dt={class:"space-y-3"},At={class:"text-sm"},Tt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]}},setup(m){const r=_=>["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"][_]||"#6b7280";return(_,U)=>(i(),f("div",St,[t("h3",$t,g(m.title),1),t("div",Dt,[(i(!0),f(S,null,L(m.drivers,(v,V)=>(i(),f("div",{key:V,class:"flex justify-between items-center"},[t("span",At,g(v.driver_name),1),t("span",{class:"text-sm font-medium",style:Qe({color:r(V)})},g(v.total_penalty),5)]))),128))])]))}},Nt={class:"bg-background rounded-lg border shadow-sm p-4"},Rt={class:"text-base font-semibold mb-4"},Ft={class:"h-64"},Vt={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(m){const r=m,_=C(null);let U=null;const v=()=>{if(U&&U.destroy(),!_.value)return;const V=_.value.getContext("2d"),T=[];r.chartData.datasets.forEach(b=>{b.data&&b.data.length&&T.push(...b.data)});const F=T.length>0?Math.min(...T):0,w=T.length>0?Math.max(...T):100,j=w-F,B=j*.1,D=Math.max(0,F-B),P=w+B;U=new Xe(V,{type:"line",data:r.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(b){const u=b.raw||0,y=r.averageAcceptance||0,N=r.chartData.dateRangeLabel||"selected period",E=Number(y).toFixed(2);return[`Acceptance Score: ${u}`,`Average Score Over ${N}: ${E}`]}}}},scales:{y:{beginAtZero:!(F>10),min:Math.floor(D-2.5),max:Math.ceil(P+2.5),ticks:{stepSize:Math.ceil(j/5)}}}}})};return Ce(()=>{v()}),ve(()=>r.chartData,()=>{v()},{deep:!0}),(V,T)=>(i(),f("div",Nt,[t("h3",Rt,g(m.title),1),t("div",Ft,[t("canvas",{ref_key:"chartCanvas",ref:_},null,512)])]))}},Mt={class:"space-y-6"},Ut={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Bt={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},Lt={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null}},setup(m){const r=m,_=M(()=>r.metricsData&&r.metricsData.by_category?[{title:"Rejected Loads More Than 6 Hours",value:r.metricsData.category_more_than_6_load_count||"0"},{title:"Rejected Blocks More Than 6 Hours",value:r.metricsData.category_more_than_6_block_count||"0"},{title:"Rejected Loads Within 6 Hours",value:r.metricsData.category_within_6_load_count||"0"},{title:"Rejected Blocks Within 6 Hours",value:r.metricsData.category_within_6_block_count||"0"},{title:"Rejected Loads After Start",value:r.metricsData.category_after_start_load_count||"0"},{title:"Rejected Blocks After Start",value:r.metricsData.category_after_start_block_count||"0"},{title:"Total Load Rejections",value:r.metricsData.total_load_rejections||"0"},{title:"Total Block Rejections",value:r.metricsData.total_block_rejections||"0"},{title:"Total Load Penalty",value:r.metricsData.total_load_penalty||"0"},{title:"Total Block Penalty",value:r.metricsData.total_block_penalty||"0"}]:[]),U=M(()=>r.driversData&&r.driversData.length?r.driversData:[]),v=M(()=>r.chartData&&Object.keys(r.chartData).length?r.chartData:{});return(V,T)=>(i(),f("div",Mt,[t("div",Ut,[(i(!0),f(S,null,L(_.value,(F,w)=>(i(),A(ht,{key:w,title:F.title,value:F.value},null,8,["title","value"]))),128))]),t("div",Bt,[a(Tt,{title:"Bottom 5 Drivers",drivers:U.value,class:"lg:col-span-1"},null,8,["drivers"]),a(Vt,{title:"Acceptance Score","chart-data":v.value,"average-acceptance":m.averageAcceptance,class:"lg:col-span-3"},null,8,["chart-data","average-acceptance"])])]))}},zt={class:"max-w-7xl mx-auto p-6 space-y-8"},Pt={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},Et={class:"flex flex-wrap gap-3"},Wt={class:"relative"},Ot={key:0,class:"absolute right-0 mt-1 w-48 bg-background rounded-md shadow-lg border z-10"},It={class:"py-1"},Yt={class:"cursor-pointer block px-4 py-2 text-sm hover:bg-muted"},Ht=["href"],qt=["action"],Gt={class:"flex flex-col gap-2"},Jt={class:"flex flex-wrap gap-2"},Kt={key:0,class:"text-sm text-muted-foreground"},Qt={key:0},Xt={key:1},Zt={key:2},el={key:3,class:"ml-1"},tl={class:"flex justify-between items-center"},ll={class:"flex items-center gap-2"},al={key:0,class:"flex flex-wrap gap-2 ml-4"},ol={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},nl={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},sl={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},rl={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},il={class:"capitalize"},dl={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ul={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cl={key:6,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fl={key:7,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},pl={class:"flex flex-col gap-4"},ml={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},vl={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},gl=["value"],yl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full"},_l={class:"flex justify-end"},bl={class:"overflow-x-auto"},xl={class:"flex items-center justify-center"},kl=["checked"],wl={class:"flex items-center"},Cl={key:0,class:"ml-2"},jl={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},hl={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Sl={key:1,class:"ml-2 opacity-50"},$l=["value"],Dl={key:1,class:"capitalize"},Al={key:0,class:"ml-1 text-xs text-red-500"},Tl={class:"flex space-x-2"},Nl={key:0,class:"bg-muted/20 px-4 py-3 border-t"},Rl={class:"flex justify-between items-center"},Fl={class:"text-sm text-muted-foreground flex items-center gap-4"},Vl={class:"flex items-center gap-2"},Ml=["value"],Ul={class:"flex"},Bl=["innerHTML"],Ll={class:"mt-4 space-y-4"},zl={class:"flex items-center justify-between"},Pl={class:"max-h-[400px] overflow-y-auto"},El={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},Wl={key:1,class:"space-y-2"},Ol=["onClick"],Il={class:"font-medium"},Yl={key:0,class:"ml-2 text-xs text-red-500"},Hl={key:0,class:"text-sm text-muted-foreground mt-1"},ql={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Gl={key:0,class:"border rounded-md p-4 space-y-4"},Jl={class:"text-sm font-medium"},Kl={class:"space-y-3"},Ql={class:"flex justify-end space-x-2"},_a={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number}},setup(m){const r=m,_=M(()=>(j.value==="yesterday"||j.value==="current-week")&&r.weekNumber&&r.year?`Week ${r.weekNumber}, ${r.year}`:(j.value==="6w"||j.value==="quarterly")&&r.startWeekNumber&&r.endWeekNumber&&r.year?`Weeks ${r.startWeekNumber}-${r.endWeekNumber}, ${r.year}`:""),U=[{title:r.tenantSlug?"Dashboard":"Admin Dashboard",href:r.tenantSlug?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:r.tenantSlug?route("acceptance.index",{tenantSlug:r.tenantSlug}):route("acceptance.index.admin")}],v=C(!1),V=C(!1),T=C(null),F=C(""),w=C(""),j=C(r.dateFilter||"full"),B=C(r.perPage),D=C([]),P=C(!1),b=C(null),u=C(!1),y=C(!1),N=C(null),E=C({reason_code:"",description:""}),Z=C(!1),ge=C(null),oe=["date","rejection_type","driver_name","penalty","reason_code","disputed","driver_controllable"],G=C("date"),J=C("desc"),c=C({search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""}),q=M(()=>{let n=[...r.rejections.data];if(c.value.search){const e=c.value.search.toLowerCase();n=n.filter(l=>{var p,h,I,te;return((p=l.driver_name)==null?void 0:p.toLowerCase().includes(e))||((h=l.rejection_type)==null?void 0:h.toLowerCase().includes(e))||((te=(I=l.reason_code)==null?void 0:I.reason_code)==null?void 0:te.toLowerCase().includes(e))})}if(c.value.dateFrom&&(n=n.filter(e=>e.date&&e.date>=c.value.dateFrom)),c.value.dateTo&&(n=n.filter(e=>e.date&&e.date<=c.value.dateTo)),c.value.rejectionType&&(n=n.filter(e=>e.rejection_type===c.value.rejectionType)),c.value.reasonCode&&(n=n.filter(e=>e.reason_code&&e.reason_code.id===parseInt(c.value.reasonCode))),c.value.penalty){const e=c.value.penalty.toLowerCase();n=n.filter(l=>l.penalty&&l.penalty.toString().toLowerCase().includes(e))}if(c.value.disputed!==""){const e=c.value.disputed==="true";n=n.filter(l=>l.disputed===e)}if(c.value.driverControllable!=="")if(c.value.driverControllable==="null")n=n.filter(e=>e.driver_controllable===null);else{const e=c.value.driverControllable==="true";n=n.filter(l=>l.driver_controllable===e)}return n.sort((e,l)=>{var I,te;let p=e[G.value],h=l[G.value];return G.value==="reason_code"&&(p=((I=e.reason_code)==null?void 0:I.reason_code)||"",h=((te=l.reason_code)==null?void 0:te.reason_code)||""),p===null?1:h===null?-1:(typeof p=="string"&&(p=p.toLowerCase(),h=h.toLowerCase()),p<h?J.value==="asc"?-1:1:p>h?J.value==="asc"?1:-1:0)}),n});function je(n){G.value===n?J.value=J.value==="asc"?"desc":"asc":(G.value=n,J.value="asc")}function O(){}function he(){c.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""},K("full")}const ye=(n=null)=>{T.value=n,v.value=!0},Se=()=>{V.value=!0,y.value=!1,N.value=null},$e=()=>{E.value={reason_code:"",description:""},N.value=null,y.value=!0},De=n=>{E.value={reason_code:n.reason_code,description:n.description||""},N.value=n.id,y.value=!0},Ae=()=>{y.value=!1,N.value=null},_e=n=>{ge.value=n,Z.value=!0},Te=()=>{const n=ae({reason_code:E.value.reason_code,description:E.value.description}),e=N.value?r.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":r.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",l=N.value?r.isSuperAdmin?{code:N.value}:{tenantSlug:r.tenantSlug,code:N.value}:r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};(N.value?n.put:n.post).call(n,route(e,l),{onSuccess:()=>{w.value=N.value?"Reason code updated successfully.":"Reason code created successfully.",y.value=!1,N.value=null,Y.reload({only:["rejection_reason_codes"]})},onError:h=>{console.error(h)}})},Ne=n=>{const e=ae({}),l=r.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",p=r.isSuperAdmin?{id:n}:{tenantSlug:r.tenantSlug,code:n};e.delete(route(l,p),{onSuccess:()=>{w.value="Reason code deleted successfully.",Z.value=!1,Y.reload({only:["rejection_reason_codes"]})}})},Re=n=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=ae({}),l=r.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",p=r.isSuperAdmin?{rejection:n}:{tenantSlug:r.tenantSlug,rejection:n};e.delete(route(l,p),{preserveScroll:!0,onSuccess:()=>{w.value="Rejection deleted successfully."}})},Fe=n=>{if(n){const e=new URL(n);e.searchParams.set("perPage",B.value),Y.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["rejections"]})}};function K(n){j.value=n;const e=r.tenantSlug?route("acceptance.index",{tenantSlug:r.tenantSlug}):route("acceptance.index.admin");Y.get(e,{dateFilter:n,perPage:B.value},{preserveState:!0})}function Ve(){const n=r.tenantSlug?route("acceptance.index",{tenantSlug:r.tenantSlug}):route("acceptance.index.admin");Y.get(n,{dateFilter:j.value,perPage:B.value},{preserveState:!0})}function Q(n){if(!n)return"";const e=n.split("-");if(e.length!==3)return n;const[l,p,h]=e;return`${Number(p)}/${Number(h)}/${l}`}ve(w,n=>{n&&setTimeout(()=>{w.value=""},5e3)});const Me=M(()=>{var e;if(!((e=r.rejection_breakdown)!=null&&e.by_category))return null;const n=r.rejection_breakdown.by_category;return{category_more_than_6_load_count:n.category_more_than_6_load_count||"0",category_more_than_6_block_count:n.category_more_than_6_block_count||"0",category_within_6_load_count:n.category_within_6_load_count||"0",category_within_6_block_count:n.category_within_6_block_count||"0",category_after_start_load_count:n.category_after_start_load_count||"0",category_after_start_block_count:n.category_after_start_block_count||"0",total_load_rejections:n.total_load_rejections||"0",total_block_rejections:n.total_block_rejections||"0",total_load_penalty:n.total_load_penalty||"0",total_block_penalty:n.total_block_penalty||"0",by_category:!0}}),Ue=M(()=>{var n;return((n=r.rejection_breakdown)==null?void 0:n.bottom_five_drivers)||[]}),Be=M(()=>!r.line_chart_data||r.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:r.line_chart_data.map(n=>n.date),datasets:[{label:"Acceptance Performance",data:r.line_chart_data.map(n=>n.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function Le(n){Y.post(route("rejection_reason_codes.restore.admin",{id:n}),{},{onSuccess:()=>{w.value="Reason code restored successfully",setTimeout(()=>w.value="",3e3)}})}function ze(n){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&Y.delete(route("rejection_reason_codes.forceDelete.admin",{id:n}),{onSuccess:()=>{w.value="Reason code permanently deleted",setTimeout(()=>w.value="",3e3)}})}M(()=>r.rejection_reason_codes.filter(n=>!n.deleted_at));const Pe=M(()=>q.value.length>0&&D.value.length===q.value.length);function Ee(n){n.target.checked?D.value=q.value.map(e=>e.id):D.value=[]}function We(){D.value.length>0&&(P.value=!0)}function Oe(){const n=ae({ids:D.value}),e=r.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",l=r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};n.delete(route(e,l),{preserveScroll:!0,onSuccess:()=>{w.value=`${D.value.length} rejection records deleted successfully.`,D.value=[],P.value=!1},onError:p=>{console.error(p)}})}function Ie(n){const e=n.target.files[0];if(!e)return;const l=new FormData;l.append("csv_file",e);const p=r.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:r.tenantSlug});Y.post(p,l,{onSuccess:()=>{w.value="Delays imported successfully",n.target.value=""},onError:h=>{console.error(h),n.target.value=""}})}function Ye(){if(q.value.length===0){F.value="No data available to export",setTimeout(()=>{F.value=""},3e3);return}b.value&&b.value.submit()}const He=M(()=>r.tenantSlug?route("acceptance.export",{tenantSlug:r.tenantSlug}):route("acceptance.export.admin")),ee=C(!1),qe=M(()=>"/storage/upload-data-temps/Rejections Template.csv");Ce(()=>{const n=e=>{ee.value&&!e.target.closest(".relative")&&(ee.value=!1)};document.addEventListener("click",n),Ze(()=>{document.removeEventListener("click",n)})});const Ge=M(()=>c.value.search||c.value.dateFrom||c.value.dateTo||c.value.rejectionType||c.value.reasonCode||c.value.penalty||c.value.disputed||c.value.driverControllable);function Je(n){if(!n)return"";const e=r.rejection_reason_codes.find(l=>l.id==n);return e?e.reason_code:""}return(n,e)=>(i(),A(at,{breadcrumbs:U,tenantSlug:m.tenantSlug},{default:o(()=>[a(s(tt),{title:"Acceptance"}),t("div",zt,[w.value?(i(),A(s(be),{key:0,variant:"success"},{default:o(()=>[a(s(xe),null,{default:o(()=>e[32]||(e[32]=[d("Success")])),_:1}),a(s(ke),null,{default:o(()=>[d(g(w.value),1)]),_:1})]),_:1})):k("",!0),F.value?(i(),A(s(be),{key:1,variant:"destructive"},{default:o(()=>[a(s(xe),null,{default:o(()=>e[33]||(e[33]=[d("Error")])),_:1}),a(s(ke),null,{default:o(()=>[d(g(F.value),1)]),_:1})]),_:1})):k("",!0),t("div",Pt,[e[39]||(e[39]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Acceptance",-1)),t("div",Et,[a(x,{onClick:e[0]||(e[0]=l=>ye()),variant:"default"},{default:o(()=>[a(R,{name:"plus",class:"mr-2 h-4 w-4"}),e[34]||(e[34]=d(" Add Rejection "))]),_:1}),D.value.length>0?(i(),A(x,{key:0,onClick:e[1]||(e[1]=l=>We()),variant:"destructive"},{default:o(()=>[a(R,{name:"trash",class:"mr-2 h-4 w-4"}),d(" Delete Selected ("+g(D.value.length)+") ",1)]),_:1})):k("",!0),t("div",Wt,[a(x,{onClick:e[2]||(e[2]=l=>ee.value=!ee.value),variant:"secondary"},{default:o(()=>[a(R,{name:"upload",class:"mr-2 h-4 w-4"}),e[35]||(e[35]=d(" Upload CSV ")),a(R,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),ee.value?(i(),f("div",Ot,[t("div",It,[t("label",Yt,[e[36]||(e[36]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:Ie,accept:".csv"},null,32)]),t("a",{href:qe.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Ht)])])):k("",!0)]),a(x,{onClick:we(Ye,["prevent"]),variant:"outline"},{default:o(()=>[a(R,{name:"download",class:"mr-2 h-4 w-4"}),e[37]||(e[37]=d(" Download CSV "))]),_:1}),m.isSuperAdmin?(i(),A(x,{key:1,onClick:e[3]||(e[3]=l=>Se()),variant:"outline"},{default:o(()=>[a(R,{name:"settings",class:"mr-2 h-4 w-4"}),e[38]||(e[38]=d(" Manage Reason Codes "))]),_:1})):k("",!0)])]),t("form",{ref_key:"exportForm",ref:b,action:He.value,method:"GET",class:"hidden"},null,8,qt),a(s(pe),null,{default:o(()=>[a(s(me),{class:"p-4"},{default:o(()=>[t("div",Gt,[t("div",Jt,[a(x,{onClick:e[4]||(e[4]=l=>K("yesterday")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":j.value==="yesterday"})},{default:o(()=>e[40]||(e[40]=[d(" Yesterday ")])),_:1},8,["class"]),a(x,{onClick:e[5]||(e[5]=l=>K("current-week")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":j.value==="current-week"})},{default:o(()=>e[41]||(e[41]=[d(" WtD ")])),_:1},8,["class"]),a(x,{onClick:e[6]||(e[6]=l=>K("6w")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":j.value==="6w"})},{default:o(()=>e[42]||(e[42]=[d(" 6 Weeks ")])),_:1},8,["class"]),a(x,{onClick:e[7]||(e[7]=l=>K("quarterly")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":j.value==="quarterly"})},{default:o(()=>e[43]||(e[43]=[d(" Quarterly ")])),_:1},8,["class"]),a(x,{onClick:e[8]||(e[8]=l=>K("full")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":j.value==="full"})},{default:o(()=>e[44]||(e[44]=[d(" Full ")])),_:1},8,["class"])]),m.dateRange?(i(),f("div",Kt,[j.value==="yesterday"&&m.dateRange.start?(i(),f("span",Qt," Showing data from "+g(Q(m.dateRange.start)),1)):m.dateRange.start&&m.dateRange.end?(i(),f("span",Xt," Showing data from "+g(Q(m.dateRange.start))+" to "+g(Q(m.dateRange.end)),1)):(i(),f("span",Zt,g(m.dateRange.label),1)),_.value?(i(),f("span",el,"("+g(_.value)+")",1)):k("",!0)])):k("",!0)])]),_:1})]),_:1}),a(s(pe),null,{default:o(()=>[a(s(rt),{class:"pb-2"},{default:o(()=>[t("div",tl,[t("div",ll,[a(s(it),null,{default:o(()=>e[45]||(e[45]=[d("Filters")])),_:1}),!u.value&&Ge.value?(i(),f("div",al,[c.value.search?(i(),f("div",ol," Search: "+g(c.value.search),1)):k("",!0),c.value.dateFrom?(i(),f("div",nl," From: "+g(Q(c.value.dateFrom)),1)):k("",!0),c.value.dateTo?(i(),f("div",sl," To: "+g(Q(c.value.dateTo)),1)):k("",!0),c.value.rejectionType?(i(),f("div",rl,[e[46]||(e[46]=d(" Type: ")),t("span",il,g(c.value.rejectionType),1)])):k("",!0),c.value.reasonCode?(i(),f("div",dl," Reason: "+g(Je(c.value.reasonCode)),1)):k("",!0),c.value.penalty?(i(),f("div",ul," Penalty: "+g(c.value.penalty),1)):k("",!0),c.value.disputed?(i(),f("div",cl," Disputed: "+g(c.value.disputed==="true"?"Yes":"No"),1)):k("",!0),c.value.driverControllable?(i(),f("div",fl," Driver Controllable: "+g(c.value.driverControllable==="true"?"Yes":c.value.driverControllable==="false"?"No":"N/A"),1)):k("",!0)])):k("",!0)]),a(x,{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=l=>u.value=!u.value)},{default:o(()=>[d(g(u.value?"Hide Filters":"Show Filters")+" ",1),a(R,{name:u.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),u.value?(i(),A(s(me),{key:0,class:"pt-2"},{default:o(()=>[t("div",pl,[t("div",ml,[t("div",null,[a(s($),{for:"search"},{default:o(()=>e[47]||(e[47]=[d("Search")])),_:1}),a(s(H),{id:"search",modelValue:c.value.search,"onUpdate:modelValue":e[10]||(e[10]=l=>c.value.search=l),type:"text",placeholder:"Search by driver name...",onInput:O,class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(s($),{for:"dateFrom"},{default:o(()=>e[48]||(e[48]=[d("Date From")])),_:1}),a(s(H),{id:"dateFrom",modelValue:c.value.dateFrom,"onUpdate:modelValue":e[11]||(e[11]=l=>c.value.dateFrom=l),type:"date",onChange:O,class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(s($),{for:"dateTo"},{default:o(()=>e[49]||(e[49]=[d("Date To")])),_:1}),a(s(H),{id:"dateTo",modelValue:c.value.dateTo,"onUpdate:modelValue":e[12]||(e[12]=l=>c.value.dateTo=l),type:"date",onChange:O,class:"w-full"},null,8,["modelValue"])])]),t("div",vl,[t("div",null,[a(s($),{for:"rejectionType"},{default:o(()=>e[50]||(e[50]=[d("Rejection Type")])),_:1}),z(t("select",{id:"rejectionType","onUpdate:modelValue":e[13]||(e[13]=l=>c.value.rejectionType=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[51]||(e[51]=[t("option",{value:""},"All Types",-1),t("option",{value:"pickup"},"Pickup",-1),t("option",{value:"delivery"},"Delivery",-1)]),544),[[W,c.value.rejectionType]])]),t("div",null,[a(s($),{for:"reasonCode"},{default:o(()=>e[52]||(e[52]=[d("Reason Code")])),_:1}),z(t("select",{id:"reasonCode","onUpdate:modelValue":e[14]||(e[14]=l=>c.value.reasonCode=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[53]||(e[53]=t("option",{value:""},"All Reason Codes",-1)),(i(!0),f(S,null,L(m.rejection_reason_codes,l=>(i(),f("option",{key:l.id,value:l.id},g(l.reason_code),9,gl))),128))],544),[[W,c.value.reasonCode]])]),t("div",null,[a(s($),{for:"penalty"},{default:o(()=>e[54]||(e[54]=[d("Penalty")])),_:1}),a(s(H),{id:"penalty",modelValue:c.value.penalty,"onUpdate:modelValue":e[15]||(e[15]=l=>c.value.penalty=l),type:"text",placeholder:"Filter by penalty...",onInput:O,class:"w-full"},null,8,["modelValue"])])]),t("div",yl,[t("div",null,[a(s($),{for:"disputed"},{default:o(()=>e[55]||(e[55]=[d("Disputed")])),_:1}),z(t("select",{id:"disputed","onUpdate:modelValue":e[16]||(e[16]=l=>c.value.disputed=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[56]||(e[56]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),544),[[W,c.value.disputed]])]),t("div",null,[a(s($),{for:"driverControllable"},{default:o(()=>e[57]||(e[57]=[d("Driver Controllable")])),_:1}),z(t("select",{id:"driverControllable","onUpdate:modelValue":e[17]||(e[17]=l=>c.value.driverControllable=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[58]||(e[58]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"null"},"N/A",-1)]),544),[[W,c.value.driverControllable]])])]),t("div",_l,[a(x,{onClick:he,variant:"ghost",size:"sm"},{default:o(()=>[a(R,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[59]||(e[59]=d(" Reset Filters "))]),_:1})])])]),_:1})):k("",!0)]),_:1}),m.isSuperAdmin?k("",!0):(i(),A(Lt,{key:2,metricsData:Me.value,driversData:Ue.value,chartData:Be.value,averageAcceptance:m.average_acceptance},null,8,["metricsData","driversData","chartData","averageAcceptance"])),a(s(pe),null,{default:o(()=>[a(s(me),{class:"p-0"},{default:o(()=>[t("div",bl,[a(s(ot),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[a(s(nt),null,{default:o(()=>[a(s(fe),{class:"sticky top-0 bg-background border-b z-10 hover:bg-background"},{default:o(()=>[a(s(ue),{class:"w-[50px]"},{default:o(()=>[t("div",xl,[t("input",{type:"checkbox",onChange:Ee,checked:Pe.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,kl)])]),_:1}),m.isSuperAdmin?(i(),A(s(ue),{key:0},{default:o(()=>e[60]||(e[60]=[d("Company Name")])),_:1})):k("",!0),(i(),f(S,null,L(oe,l=>a(s(ue),{key:l,class:"cursor-pointer",onClick:p=>je(l)},{default:o(()=>[t("div",wl,[d(g(l.replace(/_/g," ").replace(/^./,p=>p.toUpperCase()))+" ",1),G.value===l?(i(),f("div",Cl,[J.value==="asc"?(i(),f("svg",jl,e[61]||(e[61]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),f("svg",hl,e[62]||(e[62]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),f("div",Sl,e[63]||(e[63]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),a(s(ue),null,{default:o(()=>e[64]||(e[64]=[d("Actions")])),_:1})]),_:1})]),_:1}),a(s(st),null,{default:o(()=>[q.value.length===0?(i(),A(s(fe),{key:0},{default:o(()=>[a(s(le),{colspan:m.isSuperAdmin?oe.length+3:oe.length+2,class:"text-center py-8"},{default:o(()=>e[65]||(e[65]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):k("",!0),(i(!0),f(S,null,L(q.value,l=>(i(),A(s(fe),{key:l.id,class:"hover:bg-muted/50"},{default:o(()=>[a(s(le),{class:"text-center"},{default:o(()=>[z(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[18]||(e[18]=p=>D.value=p),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,$l),[[et,D.value]])]),_:2},1024),m.isSuperAdmin?(i(),A(s(le),{key:0},{default:o(()=>{var p;return[d(g(((p=l.tenant)==null?void 0:p.name)||"—"),1)]}),_:2},1024)):k("",!0),(i(),f(S,null,L(oe,p=>a(s(le),{key:p,class:"whitespace-nowrap"},{default:o(()=>{var h,I;return[p==="date"?(i(),f(S,{key:0},[d(g(Q(l[p])),1)],64)):p==="rejection_type"?(i(),f("span",Dl,g(l[p]),1)):p==="reason_code"?(i(),f(S,{key:2},[d(g(((h=l.reason_code)==null?void 0:h.reason_code)||"—")+" ",1),(I=l.reason_code)!=null&&I.deleted_at?(i(),f("span",Al,"(Deleted)")):k("",!0)],64)):p==="disputed"?(i(),f(S,{key:3},[d(g(l[p]?"Yes":"No"),1)],64)):p==="driver_controllable"?(i(),f(S,{key:4},[d(g(l[p]===null?"N/A":l[p]?"Yes":"No"),1)],64)):(i(),f(S,{key:5},[d(g(l[p]),1)],64))]}),_:2},1024)),64)),a(s(le),null,{default:o(()=>[t("div",Tl,[a(x,{size:"sm",onClick:p=>ye(l),variant:"warning"},{default:o(()=>[a(R,{name:"pencil",class:"mr-1 h-4 w-4"}),e[66]||(e[66]=d(" Edit "))]),_:2},1032,["onClick"]),a(x,{size:"sm",variant:"destructive",onClick:p=>Re(l.id)},{default:o(()=>[a(R,{name:"trash",class:"mr-1 h-4 w-4"}),e[67]||(e[67]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),m.rejections.links?(i(),f("div",Nl,[t("div",Rl,[t("div",Fl,[t("span",null,"Showing "+g(q.value.length)+" of "+g(m.rejections.data.length)+" entries",1),t("div",Vl,[e[68]||(e[68]=t("span",{class:"text-sm"},"Show:",-1)),z(t("select",{"onUpdate:modelValue":e[19]||(e[19]=l=>B.value=l),onChange:Ve,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(i(),f(S,null,L([10,25,50,100],l=>t("option",{key:l,value:l},g(l),9,Ml)),64))],544),[[W,B.value]])])]),t("div",Ul,[(i(!0),f(S,null,L(m.rejections.links,l=>(i(),A(x,{key:l.label,onClick:p=>Fe(l.url),disabled:!l.url,variant:"ghost",size:"sm",class:X(["mx-1",{"bg-primary/10 text-primary border-primary":l.active}])},{default:o(()=>[t("span",{innerHTML:l.label},null,8,Bl)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):k("",!0)]),_:1})]),_:1}),a(s(ne),{open:v.value,"onUpdate:open":e[21]||(e[21]=l=>v.value=l)},{default:o(()=>[a(s(se),{class:"sm:max-w-2xl"},{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(ie),null,{default:o(()=>[d(g(T.value?"Edit":"Add")+" Rejection",1)]),_:1}),a(s(de),null,{default:o(()=>[d(" Fill in the details to "+g(T.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),a(kt,{rejection:T.value,reasons:m.rejection_reason_codes,tenants:m.tenants,"is-super-admin":m.isSuperAdmin,"tenant-slug":m.tenantSlug,onClose:e[20]||(e[20]=l=>v.value=!1)},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),m.isSuperAdmin?(i(),A(s(ne),{key:3,open:V.value,"onUpdate:open":e[25]||(e[25]=l=>V.value=l)},{default:o(()=>[a(s(se),{class:"sm:max-w-lg"},{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(ie),null,{default:o(()=>e[69]||(e[69]=[d("Manage Reason Codes")])),_:1}),a(s(de),null,{default:o(()=>e[70]||(e[70]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",Ll,[t("div",zl,[e[72]||(e[72]=t("h3",{class:"text-sm font-medium"},"Current Reason Codes",-1)),a(x,{onClick:$e,size:"sm",variant:"outline"},{default:o(()=>[a(R,{name:"plus",class:"mr-2 h-4 w-4"}),e[71]||(e[71]=d(" Add New Code "))]),_:1})]),t("div",Pl,[!m.rejection_reason_codes||m.rejection_reason_codes.length===0?(i(),f("div",El," No reason codes found ")):(i(),f("div",Wl,[(i(!0),f(S,null,L(m.rejection_reason_codes,l=>(i(),f("div",{key:l.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[t("div",{class:"flex-1 cursor-pointer",onClick:p=>De(l)},[t("div",Il,[d(g(l.reason_code)+" ",1),l.deleted_at?(i(),f("span",Yl,"(Deleted)")):k("",!0)]),l.description?(i(),f("div",Hl,g(l.description),1)):k("",!0)],8,Ol),t("div",ql,[m.isSuperAdmin?(i(),f(S,{key:0},[l.deleted_at?(i(),f(S,{key:0},[a(x,{onClick:p=>Le(l.id),size:"sm",variant:"outline"},{default:o(()=>[a(R,{name:"refresh",class:"mr-2 h-4 w-4"}),e[73]||(e[73]=d(" Restore "))]),_:2},1032,["onClick"]),a(x,{onClick:p=>ze(l.id),size:"sm",variant:"destructive"},{default:o(()=>[a(R,{name:"trash",class:"mr-2 h-4 w-4"}),e[74]||(e[74]=d(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(i(),A(x,{key:1,onClick:p=>_e(l.id),size:"sm",variant:"destructive"},{default:o(()=>[a(R,{name:"trash",class:"mr-2 h-4 w-4"}),e[75]||(e[75]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):(i(),A(x,{key:1,onClick:p=>_e(l.id),size:"sm",variant:"destructive"},{default:o(()=>[a(R,{name:"trash",class:"mr-2 h-4 w-4"}),e[76]||(e[76]=d(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))])]),y.value?(i(),f("div",Gl,[t("h3",Jl,g(N.value?"Edit":"Add")+" Reason Code",1),t("div",Kl,[t("div",null,[a(s($),{for:"reason_code"},{default:o(()=>e[77]||(e[77]=[d("Code")])),_:1}),a(s(H),{id:"reason_code",modelValue:E.value.reason_code,"onUpdate:modelValue":e[22]||(e[22]=l=>E.value.reason_code=l),placeholder:"Enter reason code"},null,8,["modelValue"])]),t("div",null,[a(s($),{for:"description"},{default:o(()=>e[78]||(e[78]=[d("Description")])),_:1}),a(s(H),{id:"description",modelValue:E.value.description,"onUpdate:modelValue":e[23]||(e[23]=l=>E.value.description=l),placeholder:"Enter description"},null,8,["modelValue"])]),t("div",Ql,[a(x,{onClick:Ae,variant:"ghost",size:"sm"},{default:o(()=>e[79]||(e[79]=[d("Cancel")])),_:1}),a(x,{onClick:Te,variant:"default",size:"sm"},{default:o(()=>e[80]||(e[80]=[d("Save")])),_:1})])])])):k("",!0),a(s(ce),{class:"mt-6"},{default:o(()=>[a(x,{onClick:e[24]||(e[24]=l=>V.value=!1),variant:"outline"},{default:o(()=>e[81]||(e[81]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):k("",!0),a(s(ne),{open:Z.value,"onUpdate:open":e[28]||(e[28]=l=>Z.value=l)},{default:o(()=>[a(s(se),null,{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(ie),null,{default:o(()=>e[82]||(e[82]=[d("Confirm Deletion")])),_:1}),a(s(de),null,{default:o(()=>e[83]||(e[83]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),a(s(ce),{class:"mt-4"},{default:o(()=>[a(x,{type:"button",onClick:e[26]||(e[26]=l=>Z.value=!1),variant:"outline"},{default:o(()=>e[84]||(e[84]=[d(" Cancel ")])),_:1}),a(x,{type:"button",onClick:e[27]||(e[27]=l=>Ne(ge.value)),variant:"destructive"},{default:o(()=>e[85]||(e[85]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(s(ne),{open:P.value,"onUpdate:open":e[31]||(e[31]=l=>P.value=l)},{default:o(()=>[a(s(se),null,{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(ie),null,{default:o(()=>e[86]||(e[86]=[d("Confirm Bulk Deletion")])),_:1}),a(s(de),null,{default:o(()=>[d(" Are you sure you want to delete "+g(D.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),a(s(ce),{class:"mt-4"},{default:o(()=>[a(x,{type:"button",onClick:e[29]||(e[29]=l=>P.value=!1),variant:"outline"},{default:o(()=>e[87]||(e[87]=[d(" Cancel ")])),_:1}),a(x,{type:"button",onClick:e[30]||(e[30]=l=>Oe()),variant:"destructive"},{default:o(()=>e[88]||(e[88]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{_a as default};
