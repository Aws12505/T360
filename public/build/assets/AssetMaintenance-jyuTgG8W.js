import{x as Me,a as Et,W as de,g as Xt}from"./vendor-vue-o4TX1eGc.js";import{_ as Jt}from"./AppLayout.vue_vue_type_script_setup_true_lang-D6CqwD6B.js";import{d as nt,r as h,A as lt,K as at,c as B,w as Ge,L as u,e as o,b as w,k as x,X as l,l as t,f as a,u as e,S as n,U as m,P as oe,ak as Rt,D as Q,Y as le,M as $,N,bF as st,b2 as ye,bI as Ut,bH as Tt,O as es,n as ts,j as ss}from"./vendor-C-CW143M.js";import{_ as f}from"./Icon.vue_vue_type_script_setup_true_lang-B7IfTNIf.js";import{_ as _e,a as he,b as L,c as S,d as Ce,e as C}from"./TableRow.vue_vue_type_script_setup_true_lang-D19AmMrD.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-B-CPTRto.js";import{_ as Se}from"./Card.vue_vue_type_script_setup_true_lang-Cp4wUgFE.js";import{_ as zt}from"./CardHeader.vue_vue_type_script_setup_true_lang-CNgbOXgy.js";import{_ as Bt}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcA2pWrU.js";import{_ as $e}from"./CardContent.vue_vue_type_script_setup_true_lang-DxPj8Tg7.js";import{_ as fe,a as pe,b as ve}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DjSCH9m8.js";import{_ as ce,a as xe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BSj40beh.js";import{_ as De}from"./DialogFooter.vue_vue_type_script_setup_true_lang-RSN6g_4k.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-CZjK18aI.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-taOxs2kk.js";import{_ as Ne,a as Ue,b as Te}from"./AlertDescription.vue_vue_type_script_setup_true_lang-Bni7FoRm.js";import{_ as Vt}from"./SortIndicator-DCv-tJVv.js";import{_ as je}from"./Badge.vue_vue_type_script_setup_true_lang-Cb4j4dNt.js";import{_ as ls}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as Ft}from"./app-B_vN6s90.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-CmSxFldp.js";import"./vendor-ui-DUlj4Wsf.js";import"./useInitials-DzeGKvtI.js";import"./vendor-icons-Dyo-jBRF.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C-8K70bD.js";const as={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},ns={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},rs={class:"flex items-center gap-3"},os={class:"flex flex-wrap gap-3"},ds={class:"flex justify-between items-center"},is={class:"text-sm hidden sm:inline"},us={class:"flex flex-col gap-6"},ms={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},fs={class:"relative"},ps={class:"relative"},vs={class:"overflow-x-auto"},cs={class:"flex items-center justify-center"},xs=["checked"],gs={class:"flex items-center space-x-1"},ws={key:4,class:"ml-2"},ys={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},bs={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ks={key:5,class:"ml-2 opacity-50"},_s={class:"flex flex-col items-center justify-center text-muted-foreground"},hs=["value"],Cs={class:"flex space-x-2"},Ss={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},$s={class:"flex items-center gap-4 text-sm text-muted-foreground"},Vs={class:"flex items-center gap-1"},Ds={class:"flex items-center gap-1"},As={class:"relative"},Is=["value"],Os={class:"flex space-x-1"},Ms={class:"flex items-center gap-2"},Ns={key:0,class:"col-span-2 sm:col-span-1"},Us={class:"relative"},Ts=["value"],Fs={class:"col-span-2 sm:col-span-1"},Es={class:"col-span-2 sm:col-span-1"},Rs={class:"relative"},zs={class:"col-span-2 sm:col-span-1"},Bs={class:"relative"},Ls={class:"col-span-2 sm:col-span-1"},Ps={class:"relative"},qs={class:"col-span-2 sm:col-span-1"},js={class:"col-span-2 sm:col-span-1"},Ws={class:"col-span-2 sm:col-span-1"},Qs={class:"relative"},Hs={class:"col-span-2 sm:col-span-1"},Ys={class:"relative"},Gs={class:"col-span-2 mt-4 flex justify-end gap-3"},Ks={class:"flex items-center gap-2"},Zs={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},Xs={key:0},Js={class:"space-y-4"},el={class:"cursor-pointer mt-3"},tl=["disabled"],sl={key:0,class:"mt-3 text-xs text-primary font-medium"},ll={class:"flex items-center gap-2 text-sm text-muted-foreground"},al=["href"],nl={key:0,class:"flex items-center justify-center gap-2 p-4"},rl={key:1,class:"space-y-4"},ol={key:0,class:"rounded-lg border p-3"},dl={class:"flex items-center justify-between"},il={class:"text-xs text-muted-foreground"},ul={class:"mt-2 flex flex-wrap gap-2"},ml={class:"grid grid-cols-3 gap-4"},fl={class:"text-2xl font-bold"},pl={class:"text-2xl font-bold text-green-600"},vl={class:"text-2xl font-bold text-red-600"},cl={key:2},xl={class:"flex items-center justify-between mb-3"},gl={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},wl={class:"border rounded-lg overflow-hidden"},yl={class:"max-h-96 overflow-y-auto"},bl={class:"flex flex-wrap gap-x-3 gap-y-1"},kl={class:"font-medium text-foreground"},_l={key:0,class:"italic text-muted-foreground"},hl={class:"space-y-1"},Cl={key:0,class:"text-xs text-muted-foreground"},Sl={key:3},$l={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},Vl={class:"border rounded-lg overflow-hidden"},Dl={class:"flex flex-wrap gap-x-3 gap-y-1"},Al={class:"font-medium"},Il={key:0,class:"italic text-muted-foreground"},Ol={class:"border-t p-4 flex justify-end gap-3"},Ml={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Nl=nt({__name:"TrucksComponent",props:{entries:{},tenantSlug:{},SuperAdmin:{type:Boolean},tenants:{},perPage:{},permissions:{}},emits:["update:perPage"],setup(O,{emit:g}){const V=O,E=h({search:"",type:"",make:""}),z=h("truckid"),R=h("asc"),q=h(1),H=h(10),I=h(10),j=h([]),Z=h(!1),K=h(""),T=h(""),te=h(!1),ie=h(!1),ue=h(!1),F=h(null),ae=h(!1),X=h(!1),b=Me({id:null,truckid:null,type:"daycab",make:"international",fuel:"diesel",license:null,vin:"",tenant_id:V.SuperAdmin?"":null,status:"active",inspection_status:"good",inspection_expiry_date:new Date().toISOString().split("T")[0]});Me({csv_file:null});const se=h(null),be=Et(),ne=h(!1),M=h(null),_=h(!1),i=h(!1),k=h(null),P=h(!1);let W=0;lt(()=>{const c=r=>r.preventDefault();window.addEventListener("dragover",c),window.addEventListener("drop",c),at(()=>{window.removeEventListener("dragover",c),window.removeEventListener("drop",c)})});const J=B(()=>V.entries.filter(c=>{var r,v;return!(E.value.search&&!String(c.truckid).includes(E.value.search)&&!(c.vin||"").toLowerCase().includes(E.value.search.toLowerCase())||E.value.type&&((r=c.type)==null?void 0:r.toLowerCase())!=E.value.type||E.value.make&&((v=c.make)==null?void 0:v.toLowerCase())!=E.value.make)})),ze=B(()=>[...J.value].sort((c,r)=>{let v=c[z.value],A=r[z.value];return v==null?1:A==null?-1:(typeof v=="string"&&(v=v.toLowerCase(),A=A.toLowerCase()),v<A?R.value==="asc"?-1:1:v>A?R.value==="asc"?1:-1:0)})),Ae=B(()=>Math.ceil(ze.value.length/H.value)),Ie=B(()=>{const c=(q.value-1)*H.value,r=c+H.value;return ze.value.slice(c,r)}),Fe=B(()=>Ie.value.length>0&&Ie.value.every(c=>j.value.includes(c.id))),Ee=["truckid","type","make","fuel","license","vin","inspection_status","inspection_expiry_date","status"];Ge(K,c=>c&&setTimeout(()=>K.value="",5e3)),Ge(H,c=>{I.value=c});function rt(c){return c.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase())}function Ke(c){return c?new Date(c+"T00:00:00").toLocaleDateString():"—"}function Re(c,r){if(r==="inspection_status")return c.inspection_status==="good"?"Good":"Expired";if(r==="inspection_expiry_date")return Ke(c[r]);if(r==="fuel"&&c.fuel==="cng")return"CNG";const v=c[r];return typeof v=="string"?v.charAt(0).toUpperCase()+v.slice(1):v}const Be=()=>{q.value=1};function Oe(){E.value={search:"",type:"",make:""},Be()}function We(c){z.value===c?R.value=R.value==="asc"?"desc":"asc":(z.value=c,R.value="asc")}const ot=()=>{H.value=I.value,Be()},Le=c=>{c>=1&&c<=Ae.value&&(q.value=c)};function dt(c){c.target.checked?Ie.value.forEach(v=>{j.value.includes(v.id)||j.value.push(v.id)}):j.value=j.value.filter(v=>!Ie.value.some(A=>A.id===v))}function it(){b.reset(),b.clearErrors(),b.id=null,te.value=!0}function ut(c){b.reset(),b.clearErrors(),b.id=c.id,b.truckid=c.truckid,b.type=c.type?c.type.toLowerCase():"",b.make=c.make?c.make.toLowerCase():"",b.fuel=c.fuel,b.license=c.license,b.vin=c.vin,b.status=c.status,b.tenant_id=c.tenant_id,b.inspection_status=c.inspection_status||"good",b.inspection_expiry_date=c.inspection_expiry_date||new Date().toISOString().split("T")[0],te.value=!0}function mt(){te.value=!1}function ft(){const c={...b.data(),truckid:Number(b.truckid),license:Number(b.license)},r=b.id?"put":"post",v=b.id?V.SuperAdmin?route("truck.update.admin",[b.id]):route("truck.update",[V.tenantSlug,b.id]):route(V.SuperAdmin?"truck.store.admin":"truck.store",{tenantSlug:V.tenantSlug});ae.value=!0,b[r](v,{data:c,onSuccess:()=>{K.value=b.id?"Truck updated.":"Truck created.",mt()},onError:()=>T.value="Save failed",onFinish:()=>ae.value=!1})}function pt(c){F.value=c,ie.value=!0}function vt(){if(!F.value)return;const c=V.SuperAdmin?route("truck.destroy.admin",[F.value.id]):route("truck.destroy",[V.tenantSlug,F.value.id]);b.delete(c,{onSuccess:()=>{K.value="Deleted successfully",ie.value=!1}})}function Ze(){j.value.length&&(ue.value=!0)}function Pe(){const c=route(V.SuperAdmin?"truck.destroyBulk.admin":"truck.destroyBulk",{tenantSlug:V.tenantSlug});Me({ids:j.value}).delete(c,{onSuccess:()=>{K.value=`${j.value.length} deleted`,j.value=[],ue.value=!1}})}function ct(){var c,r;if(!Ie.value.length){T.value="No data to export";return}(c=se.value)==null||c.setAttribute("action",route(V.SuperAdmin?"truck.export.admin":"truck.export",{tenantSlug:V.tenantSlug})),(r=se.value)==null||r.submit()}const xt=B(()=>"/storage/upload-data-temps/Trucks Template.csv");function gt(c){var A;const r=c.target,v=(A=r.files)==null?void 0:A[0];v&&(Xe(v),r.value="")}function Xe(c){if(!c)return;if(!(c.type==="text/csv"||c.name.toLowerCase().endsWith(".csv")||c.type==="")){T.value="Please upload a valid CSV file.",setTimeout(()=>T.value="",4e3);return}_.value=!0;const v=new FormData;v.append("file",c);const A=V.SuperAdmin?route("truck.validateImport.admin"):route("truck.validateImport",{tenantSlug:V.tenantSlug});de.post(A,v,{forceFormData:!0,preserveScroll:!0,onFinish:()=>{_.value=!1},onError:()=>{_.value=!1,T.value="Failed to validate CSV file"}})}function wt(){W+=1,P.value=!0}function yt(){P.value=!0}function bt(){W-=1,W<=0&&(W=0,P.value=!1)}function kt(c){var v,A;W=0,P.value=!1;const r=(A=(v=c.dataTransfer)==null?void 0:v.files)==null?void 0:A[0];r&&Xe(r)}function _t(){var r;if(!M.value||M.value.header_error||(((r=M.value.summary)==null?void 0:r.invalid)??0)>0)return;i.value=!0;const c=V.SuperAdmin?route("truck.confirmImport.admin"):route("truck.confirmImport",{tenantSlug:V.tenantSlug});de.post(c,{},{preserveScroll:!0,onSuccess:()=>{var v;K.value=`Successfully imported ${((v=M.value.summary)==null?void 0:v.valid)??0} rows`,Je()},onError:()=>{T.value="Import failed"},onFinish:()=>{i.value=!1}})}function ht(){const c=V.SuperAdmin?route("truck.downloadErrorReport.admin"):route("truck.downloadErrorReport",{tenantSlug:V.tenantSlug});window.location.href=c}function Je(){ne.value=!1,M.value=null,_.value=!1,i.value=!1,P.value=!1,W=0,k.value&&(k.value.value="")}Ge(()=>{var c;return(c=be.props.flash)==null?void 0:c.importValidation},c=>{if(c){if(c.results){M.value=c.results,c.header_error&&(M.value.header_error=c.header_error),ne.value=!0;return}c.message&&(T.value=c.message)}},{immediate:!1});const Ct=B(()=>{if(Ae.value<=7)return Array.from({length:Ae.value},(A,qe)=>qe+1);const c=[];c.push(1),q.value>3&&c.push("...");const r=Math.max(2,q.value-1),v=Math.min(Ae.value-1,q.value+1);for(let A=r;A<=v;A++)c.push(A);return q.value<Ae.value-2&&c.push("..."),Ae.value>1&&c.push(Ae.value),c}),me=B(()=>V.permissions.map(c=>c.name));return lt(()=>{const c=r=>{Z.value&&!r.target.closest(".relative")&&(Z.value=!1)};document.addEventListener("click",c),at(()=>document.removeEventListener("click",c))}),(c,r)=>(o(),u("div",as,[K.value?(o(),w(e(Te),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Ne),{class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"check_circle",class:"h-5 w-5 text-green-500"}),r[25]||(r[25]=n(" Success "))]),_:1}),t(e(Ue),null,{default:a(()=>[n(m(K.value),1)]),_:1})]),_:1})):x("",!0),T.value?(o(),w(e(Te),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Ne),{class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"alert_circle",class:"h-5 w-5"}),r[26]||(r[26]=n(" Error "))]),_:1}),t(e(Ue),null,{default:a(()=>[n(m(T.value),1)]),_:1})]),_:1})):x("",!0),l("div",ns,[l("div",rs,[t(f,{name:"truck",class:"h-6 w-6 text-primary hidden sm:block"}),r[27]||(r[27]=l("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Truck Management ",-1))]),l("div",os,[me.value.includes("trucks.create")?(o(),w(e(y),{key:0,onClick:it,variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),r[28]||(r[28]=n(" Create New Truck "))]),_:1})):x("",!0),j.value.length&&me.value.includes("trucks.delete")?(o(),w(e(y),{key:1,onClick:Ze,variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),n(" Delete Selected ("+m(j.value.length)+") ",1)]),_:1})):x("",!0),me.value.includes("trucks.import")?(o(),w(e(y),{key:2,onClick:r[0]||(r[0]=v=>ne.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),r[29]||(r[29]=n(" Import CSV "))]),_:1})):x("",!0),me.value.includes("trucks.export")?(o(),w(e(y),{key:3,onClick:oe(ct,["prevent"]),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),r[30]||(r[30]=n(" Download CSV "))]),_:1})):x("",!0)])]),t(e(Se),{class:"shadow-sm border"},{default:a(()=>[t(e(zt),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:a(()=>[l("div",ds,[t(e(Bt),{class:"text-lg md:text-xl lg:text-2xl flex items-center gap-2"},{default:a(()=>[t(f,{name:"filter",class:"h-5 w-5 text-muted-foreground"}),r[31]||(r[31]=n(" Filters "))]),_:1}),t(e(y),{variant:"ghost",size:"sm",onClick:r[1]||(r[1]=v=>X.value=!X.value),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:a(()=>[l("span",is,m(X.value?"Hide Filters":"Show Filters"),1),t(f,{name:X.value?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),t(Rt,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:a(()=>[X.value?(o(),w(e($e),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:a(()=>[l("div",us,[l("div",ms,[l("div",null,[t(e(U),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(f,{name:"search",class:"h-4 w-4 text-muted-foreground"}),r[32]||(r[32]=n(" Search "))]),_:1}),t(e(ee),{id:"search",type:"text",modelValue:E.value.search,"onUpdate:modelValue":r[2]||(r[2]=v=>E.value.search=v),placeholder:"Search by truck ID or VIN...",onInput:Be,class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),l("div",null,[t(e(U),{for:"type",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(f,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),r[33]||(r[33]=n(" Type "))]),_:1}),l("div",fs,[Q(l("select",{id:"type","onUpdate:modelValue":r[3]||(r[3]=v=>E.value.type=v),onChange:Be,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},r[34]||(r[34]=[l("option",{value:""},"All Types",-1),l("option",{value:"daycab"},"Daycab",-1),l("option",{value:"sleepercab"},"Sleepercab",-1)]),544),[[le,E.value.type]]),r[35]||(r[35]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(e(U),{for:"make",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(f,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),r[36]||(r[36]=n(" Make "))]),_:1}),l("div",ps,[Q(l("select",{id:"make","onUpdate:modelValue":r[4]||(r[4]=v=>E.value.make=v),onChange:Be,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},r[37]||(r[37]=[l("option",{value:""},"All Makes",-1),l("option",{value:"international"},"International",-1),l("option",{value:"kenworth"},"Kenworth",-1),l("option",{value:"peterbilt"},"Peterbilt",-1),l("option",{value:"volvo"},"Volvo",-1),l("option",{value:"freightliner"},"Freightliner",-1)]),544),[[le,E.value.make]]),r[38]||(r[38]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),t(e(y),{onClick:Oe,variant:"ghost",size:"sm",class:"self-start"},{default:a(()=>[t(f,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),r[39]||(r[39]=n(" Reset Filters "))]),_:1})])]),_:1})):x("",!0)]),_:1})]),_:1}),t(e(Se),{class:"mx-auto max-w-[90vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:a(()=>[t(e($e),{class:"p-0"},{default:a(()=>[l("div",vs,[t(e(_e),{class:"relative h-[500px] overflow-auto"},{default:a(()=>[t(e(he),null,{default:a(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:a(()=>[me.value.includes("trucks.delete")?(o(),w(e(S),{key:0,class:"w-12"},{default:a(()=>[l("div",cs,[l("input",{type:"checkbox",checked:Fe.value,onChange:dt,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,xs)])]),_:1})):x("",!0),c.SuperAdmin?(o(),w(e(S),{key:1,class:"font-semibold"},{default:a(()=>r[40]||(r[40]=[n("Company")])),_:1})):x("",!0),(o(),u($,null,N(Ee,v=>t(e(S),{key:v,onClick:A=>We(v),class:"cursor-pointer font-semibold"},{default:a(()=>[l("div",gs,[v==="inspection_status"?(o(),u($,{key:0},[n("Annual Inspection Status")],64)):v==="inspection_expiry_date"?(o(),u($,{key:1},[n(" Annual Inspection Expiration Date ")],64)):v==="status"?(o(),u($,{key:2},[n("Status")],64)):(o(),u($,{key:3},[n(m(rt(v)),1)],64)),z.value===v?(o(),u("div",ws,[R.value==="asc"?(o(),u("svg",ys,r[41]||(r[41]=[l("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(o(),u("svg",bs,r[42]||(r[42]=[l("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(o(),u("div",ks,r[43]||(r[43]=[l("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M8 10l4-4 4 4"}),l("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),me.value.includes("trucks.update")||me.value.includes("trucks.delete")?(o(),w(e(S),{key:2,class:"font-semibold"},{default:a(()=>r[44]||(r[44]=[n(" Actions ")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[Ie.value.length?x("",!0):(o(),w(e(L),{key:0},{default:a(()=>[t(e(C),{colspan:c.SuperAdmin?Ee.length+3:Ee.length+2,class:"py-8 text-center"},{default:a(()=>[l("div",_s,[t(f,{name:"search_x",class:"h-12 w-12 mb-2 opacity-30"}),r[45]||(r[45]=l("p",null,"No trucks found matching your criteria.",-1))])]),_:1},8,["colspan"])]),_:1})),(o(!0),u($,null,N(Ie.value,v=>(o(),w(e(L),{key:v.id,class:"hover:bg-muted/50"},{default:a(()=>[me.value.includes("trucks.delete")?(o(),w(e(C),{key:0,class:"text-center"},{default:a(()=>[Q(l("input",{type:"checkbox",value:v.id,"onUpdate:modelValue":r[5]||(r[5]=A=>j.value=A),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,hs),[[st,j.value]])]),_:2},1024)):x("",!0),c.SuperAdmin?(o(),w(e(C),{key:1},{default:a(()=>{var A;return[n(m(((A=v.tenant)==null?void 0:A.name)||"—"),1)]}),_:2},1024)):x("",!0),(o(),u($,null,N(Ee,A=>t(e(C),{key:A,class:"whitespace-nowrap"},{default:a(()=>[A==="status"?(o(),u("span",{key:0,class:ye({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":v[A]==="active","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":v[A]==="inactive","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":v[A]==="Returned to AMZ"})},m(Re(v,A)),3)):A==="inspection_status"?(o(),u("span",{key:1,class:ye({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":v[A]==="good","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":v[A]==="expired"})},m(v[A]==="good"?"Good":"Expired"),3)):(o(),u($,{key:2},[n(m(Re(v,A)),1)],64))]),_:2},1024)),64)),me.value.includes("trucks.delete")||me.value.includes("trucks.update")?(o(),w(e(C),{key:2},{default:a(()=>[l("div",Cs,[me.value.includes("trucks.update")?(o(),w(e(y),{key:0,variant:"warning",size:"sm",onClick:A=>ut(v),class:"shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"pencil",class:"mr-1 h-4 w-4"}),r[46]||(r[46]=n(" Edit "))]),_:2},1032,["onClick"])):x("",!0),me.value.includes("trucks.delete")?(o(),w(e(y),{key:1,variant:"destructive",size:"sm",onClick:A=>pt(v),class:"shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"trash",class:"mr-1 h-4 w-4"}),r[47]||(r[47]=n(" Delete "))]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",Ss,[l("div",$s,[l("span",Vs,[t(f,{name:"list",class:"h-4 w-4"}),n(" Showing "+m(Ie.value.length)+" of "+m(ze.value.length)+" entries ",1)]),l("span",Ds,[t(f,{name:"layout-grid",class:"h-4 w-4"}),r[48]||(r[48]=n(" Per page: "))]),l("div",As,[Q(l("select",{"onUpdate:modelValue":r[6]||(r[6]=v=>I.value=v),onChange:ot,class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(o(),u($,null,N([10,25,50,100],v=>l("option",{key:v,value:v},m(v),9,Is)),64))],544),[[le,I.value,void 0,{number:!0}]]),r[49]||(r[49]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",Os,[t(e(y),{size:"sm",variant:"ghost",onClick:r[7]||(r[7]=v=>Le(q.value-1)),disabled:q.value===1,class:"flex items-center gap-1"},{default:a(()=>[t(f,{name:"chevron-left",class:"h-4 w-4"}),r[50]||(r[50]=n(" Prev "))]),_:1},8,["disabled"]),(o(!0),u($,null,N(Ct.value,v=>(o(),w(e(y),{key:String(v),size:"sm",variant:"ghost",onClick:A=>typeof v=="number"?Le(v):null,disabled:typeof v!="number",class:ye({"border-primary bg-primary/10 text-primary font-medium":v===q.value,"opacity-60 cursor-default":typeof v!="number"})},{default:a(()=>[n(m(v),1)]),_:2},1032,["onClick","disabled","class"]))),128)),t(e(y),{size:"sm",variant:"ghost",onClick:r[8]||(r[8]=v=>Le(q.value+1)),disabled:q.value===Ae.value,class:"flex items-center gap-1"},{default:a(()=>[r[51]||(r[51]=n(" Next ")),t(f,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})]),_:1}),t(e(ve),{open:te.value,"onUpdate:open":r[19]||(r[19]=v=>te.value=v)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:a(()=>[t(e(ce),{class:"px-4 sm:px-6 border-b pb-4"},{default:a(()=>[l("div",Ms,[t(f,{name:e(b).id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),t(e(xe),{class:"text-lg sm:text-xl"},{default:a(()=>[n(m(e(b).id?"Edit Truck":"Create Truck"),1)]),_:1})]),t(e(pe),{class:"text-xs sm:text-sm mt-1"},{default:a(()=>[n(" Fill in the details to "+m(e(b).id?"update":"create")+" a truck. ",1)]),_:1})]),_:1}),l("form",{onSubmit:oe(ft,["prevent"]),class:"grid max-h-[75vh] grid-cols-1 gap-4 overflow-y-auto p-4 sm:grid-cols-2 sm:gap-5 sm:p-6"},[r[74]||(r[74]=l("div",{class:"col-span-2 mb-2 border-b pb-2"},[l("h3",{class:"text-sm font-medium text-muted-foreground"},"Basic Information")],-1)),c.SuperAdmin?(o(),u("div",Ns,[t(e(U),{for:"tenant",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),r[52]||(r[52]=n(" Company Name "))]),_:1}),l("div",Us,[Q(l("select",{id:"tenant","onUpdate:modelValue":r[9]||(r[9]=v=>e(b).tenant_id=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[r[53]||(r[53]=l("option",{value:""},"Select Company",-1)),(o(!0),u($,null,N(c.tenants,v=>(o(),u("option",{key:v.id,value:v.id},m(v.name),9,Ts))),128))],512),[[le,e(b).tenant_id]]),r[54]||(r[54]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),l("div",Fs,[t(e(U),{for:"truckid",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),r[55]||(r[55]=n(" Truck ID "))]),_:1}),t(e(ee),{id:"truckid",modelValue:e(b).truckid,"onUpdate:modelValue":r[10]||(r[10]=v=>e(b).truckid=v),modelModifiers:{number:!0},type:"number",required:"",placeholder:"Enter truck ID number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),l("div",Es,[t(e(U),{for:"type",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),r[56]||(r[56]=n(" Type "))]),_:1}),l("div",Rs,[Q(l("select",{id:"type","onUpdate:modelValue":r[11]||(r[11]=v=>e(b).type=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[57]||(r[57]=[l("option",{value:"daycab"},"Daycab",-1),l("option",{value:"sleepercab"},"Sleepercab",-1)]),512),[[le,e(b).type]]),r[58]||(r[58]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",zs,[t(e(U),{for:"make",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),r[59]||(r[59]=n(" Make "))]),_:1}),l("div",Bs,[Q(l("select",{id:"make","onUpdate:modelValue":r[12]||(r[12]=v=>e(b).make=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[60]||(r[60]=[l("option",{value:"international"},"International",-1),l("option",{value:"kenworth"},"Kenworth",-1),l("option",{value:"peterbilt"},"Peterbilt",-1),l("option",{value:"volvo"},"Volvo",-1),l("option",{value:"freightliner"},"Freightliner",-1)]),512),[[le,e(b).make]]),r[61]||(r[61]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),r[75]||(r[75]=l("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[l("h3",{class:"text-sm font-medium text-muted-foreground"}," Additional Information ")],-1)),l("div",Ls,[t(e(U),{for:"fuel",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"fuel",class:"h-4 w-4 text-muted-foreground"}),r[62]||(r[62]=n(" Fuel "))]),_:1}),l("div",Ps,[Q(l("select",{id:"fuel","onUpdate:modelValue":r[13]||(r[13]=v=>e(b).fuel=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[63]||(r[63]=[l("option",{value:"diesel"},"Diesel",-1),l("option",{value:"cng"},"CNG",-1)]),512),[[le,e(b).fuel]]),r[64]||(r[64]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",qs,[t(e(U),{for:"license",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"id_card",class:"h-4 w-4 text-muted-foreground"}),r[65]||(r[65]=n(" License "))]),_:1}),t(e(ee),{id:"license",modelValue:e(b).license,"onUpdate:modelValue":r[14]||(r[14]=v=>e(b).license=v),modelModifiers:{number:!0},type:"number",min:"0",required:"",placeholder:"Enter license number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),l("div",js,[t(e(U),{for:"vin",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"fingerprint",class:"h-4 w-4 text-muted-foreground"}),r[66]||(r[66]=n(" VIN "))]),_:1}),t(e(ee),{id:"vin",modelValue:e(b).vin,"onUpdate:modelValue":r[15]||(r[15]=v=>e(b).vin=v),type:"text",required:"",placeholder:"Enter vehicle identification number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),r[76]||(r[76]=l("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[l("h3",{class:"text-sm font-medium text-muted-foreground"},"Inspection Details")],-1)),l("div",Ws,[t(e(U),{for:"inspection_status",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"clipboard_check",class:"h-4 w-4 text-muted-foreground"}),r[67]||(r[67]=n(" Annual Inspection Status "))]),_:1}),l("div",Qs,[Q(l("select",{id:"inspection_status","onUpdate:modelValue":r[16]||(r[16]=v=>e(b).inspection_status=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[68]||(r[68]=[l("option",{value:"good"},"Good",-1),l("option",{value:"expired"},"Expired",-1)]),512),[[le,e(b).inspection_status]]),r[69]||(r[69]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",Hs,[t(e(U),{for:"status",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(f,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),r[70]||(r[70]=n(" Status "))]),_:1}),l("div",Ys,[Q(l("select",{id:"status","onUpdate:modelValue":r[17]||(r[17]=v=>e(b).status=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[71]||(r[71]=[l("option",{value:"active"},"Active",-1),l("option",{value:"inactive"},"Inactive",-1),l("option",{value:"Returned to AMZ"},"Returned to AMZ",-1)]),512),[[le,e(b).status]]),r[72]||(r[72]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",Gs,[t(e(y),{type:"button",variant:"outline",onClick:r[18]||(r[18]=v=>te.value=!1),class:"transition-all hover:shadow-sm"},{default:a(()=>[t(f,{name:"x",class:"mr-2 h-4 w-4"}),r[73]||(r[73]=n(" Cancel "))]),_:1}),t(e(y),{type:"submit",variant:"default",class:"transition-all hover:shadow-sm"},{default:a(()=>[t(f,{name:e(b).id?"pencil":"plus",class:"mr-2 h-4 w-4"},null,8,["name"]),n(" "+m(e(b).id?"Update":"Create"),1)]),_:1})])],32)]),_:1})]),_:1},8,["open"]),t(e(ve),{open:ie.value,"onUpdate:open":r[21]||(r[21]=v=>ie.value=v)},{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(ce),null,{default:a(()=>[t(e(xe),null,{default:a(()=>r[77]||(r[77]=[n("Confirm Deletion")])),_:1}),t(e(pe),null,{default:a(()=>r[78]||(r[78]=[n(" Are you sure you want to delete this truck? This action cannot be undone. ")])),_:1})]),_:1}),t(e(De),{class:"mt-4"},{default:a(()=>[t(e(y),{variant:"outline",onClick:r[20]||(r[20]=v=>ie.value=!1)},{default:a(()=>r[79]||(r[79]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:vt},{default:a(()=>r[80]||(r[80]=[n("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:ue.value,"onUpdate:open":r[23]||(r[23]=v=>ue.value=v)},{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(ce),null,{default:a(()=>[t(e(xe),null,{default:a(()=>r[81]||(r[81]=[n("Confirm Bulk Deletion")])),_:1}),t(e(pe),null,{default:a(()=>[n(" Are you sure you want to delete "+m(j.value.length)+" trucks? This action cannot be undone. ",1)]),_:1})]),_:1}),t(e(De),{class:"mt-4"},{default:a(()=>[t(e(y),{variant:"outline",onClick:r[22]||(r[22]=v=>ue.value=!1)},{default:a(()=>r[82]||(r[82]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:Pe},{default:a(()=>r[83]||(r[83]=[n("Delete Selected")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:ne.value,"onUpdate:open":r[24]||(r[24]=v=>ne.value=v)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:a(()=>{var v,A,qe;return[t(e(ce),{class:"px-4 sm:px-6 border-b pb-3"},{default:a(()=>[l("div",Ks,[t(f,{name:"upload",class:"h-5 w-5 text-primary"}),t(e(xe),{class:"text-lg sm:text-xl font-semibold"},{default:a(()=>r[84]||(r[84]=[n(" Import Trucks ")])),_:1})]),t(e(pe),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:a(()=>r[85]||(r[85]=[n(" Upload a CSV file to import trucks. The file will be validated before import. ")])),_:1})]),_:1}),l("div",Zs,[M.value?(o(),u("div",rl,[(v=M.value.headers)!=null&&v.length?(o(),u("div",ol,[l("div",dl,[r[90]||(r[90]=l("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),l("div",il,m(M.value.headers.length)+" columns ",1)]),l("div",ul,[(o(!0),u($,null,N(M.value.headers,re=>(o(),u("span",{key:re,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},m(re),1))),128))])])):x("",!0),l("div",ml,[t(e(Se),{class:"border-2"},{default:a(()=>[t(e($e),{class:"p-4 text-center"},{default:a(()=>[l("div",fl,m(M.value.summary.total),1),r[91]||(r[91]=l("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),t(e(Se),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:a(()=>[t(e($e),{class:"p-4 text-center"},{default:a(()=>[l("div",pl,m(M.value.summary.valid),1),r[92]||(r[92]=l("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),t(e(Se),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:a(()=>[t(e($e),{class:"p-4 text-center"},{default:a(()=>[l("div",vl,m(M.value.summary.invalid),1),r[93]||(r[93]=l("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),M.value.header_error?(o(),w(e(Te),{key:1,variant:"destructive"},{default:a(()=>[t(e(Ne),{class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"alert_circle",class:"h-5 w-5"}),r[94]||(r[94]=n(" Header Error "))]),_:1}),t(e(Ue),null,{default:a(()=>[n(m(M.value.header_error),1)]),_:1})]),_:1})):x("",!0),(A=M.value.invalid)!=null&&A.length?(o(),u("div",cl,[l("div",xl,[l("h3",gl,[t(f,{name:"alert-triangle",class:"h-5 w-5"}),n(" Validation Errors ("+m(M.value.invalid.length)+") ",1)]),t(e(y),{onClick:ht,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"download",class:"h-4 w-4"}),r[95]||(r[95]=n(" Download Error Report "))]),_:1})]),l("div",wl,[l("div",yl,[t(e(_e),null,{default:a(()=>[t(e(he),{class:"sticky top-0 bg-background"},{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(S),{class:"w-20"},{default:a(()=>r[96]||(r[96]=[n("Row #")])),_:1}),t(e(S),null,{default:a(()=>r[97]||(r[97]=[n("Preview")])),_:1}),t(e(S),null,{default:a(()=>r[98]||(r[98]=[n("Errors")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[(o(!0),u($,null,N(M.value.invalid,re=>(o(),w(e(L),{key:re.rowNumber,class:"hover:bg-muted/50"},{default:a(()=>[t(e(C),{class:"font-medium"},{default:a(()=>[n(m(re.rowNumber),1)]),_:2},1024),t(e(C),{class:"text-sm text-muted-foreground"},{default:a(()=>{var ge;return[l("div",bl,[(o(!0),u($,null,N(re.preview||[],Ve=>(o(),u("span",{key:Ve.key,class:"whitespace-nowrap"},[l("span",kl,m(Ve.label)+":",1),n(" "+m(Ve.value),1)]))),128)),(ge=re.preview)!=null&&ge.length?x("",!0):(o(),u("span",_l,"—"))])]}),_:2},1024),t(e(C),null,{default:a(()=>{var ge;return[l("div",hl,[(o(!0),u($,null,N(re.errors||[],(Ve,St)=>(o(),u("div",{key:St,class:"text-xs text-red-600 flex items-start gap-1"},[t(f,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),l("span",null,m(Ve),1)]))),128)),(ge=re.errors)!=null&&ge.length?x("",!0):(o(),u("div",Cl," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):x("",!0),(qe=M.value.valid)!=null&&qe.length?(o(),u("div",Sl,[l("h3",$l,[t(f,{name:"check-circle",class:"h-5 w-5"}),n(" Valid Rows ("+m(M.value.valid.length)+") ",1)]),r[101]||(r[101]=l("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),l("div",Vl,[t(e(_e),null,{default:a(()=>[t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(S),null,{default:a(()=>r[99]||(r[99]=[n("Row #")])),_:1}),t(e(S),null,{default:a(()=>r[100]||(r[100]=[n("Preview")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[(o(!0),u($,null,N(M.value.valid.slice(0,5),re=>(o(),w(e(L),{key:re.rowNumber},{default:a(()=>[t(e(C),{class:"font-medium"},{default:a(()=>[n(m(re.rowNumber),1)]),_:2},1024),t(e(C),{class:"text-sm"},{default:a(()=>{var ge;return[l("div",Dl,[(o(!0),u($,null,N(re.preview||[],Ve=>(o(),u("span",{key:Ve.key,class:"whitespace-nowrap"},[l("span",Al,m(Ve.label)+":",1),n(" "+m(Ve.value),1)]))),128)),(ge=re.preview)!=null&&ge.length?x("",!0):(o(),u("span",Il,"—"))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):x("",!0)])):(o(),u("div",Xs,[l("div",Js,[l("div",{class:ye(["flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20 transition-colors",{"border-primary bg-primary/5":P.value,"opacity-60 pointer-events-none":_.value}]),onDragenter:oe(wt,["prevent"]),onDragover:oe(yt,["prevent"]),onDragleave:oe(bt,["prevent"]),onDrop:oe(kt,["prevent"])},[t(f,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),r[87]||(r[87]=l("div",{class:"text-center"},[l("div",{class:"text-sm font-medium"},[l("span",{class:"text-primary"},"Drag & drop"),n(" your CSV here ")]),l("p",{class:"text-xs text-muted-foreground mt-1"},"or")],-1)),l("label",el,[r[86]||(r[86]=l("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),l("input",{ref_key:"importFileInput",ref:k,type:"file",class:"hidden",onChange:gt,accept:".csv,text/csv",disabled:_.value},null,40,tl)]),r[88]||(r[88]=l("p",{class:"text-xs text-muted-foreground mt-2"},"CSV only",-1)),P.value?(o(),u("div",sl," Drop file to validate ")):x("",!0)],34),l("div",ll,[t(f,{name:"info",class:"h-4 w-4"}),l("a",{href:xt.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,al)]),_.value?(o(),u("div",nl,r[89]||(r[89]=[l("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),l("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):x("",!0)])]))]),l("div",Ol,[t(e(y),{onClick:Je,variant:"outline",disabled:i.value},{default:a(()=>r[102]||(r[102]=[n(" Close ")])),_:1},8,["disabled"]),M.value&&M.value.summary.valid>0?(o(),w(e(y),{key:0,onClick:_t,variant:"default",disabled:i.value||M.value.summary.invalid>0||!!M.value.header_error,class:"flex items-center gap-2"},{default:a(()=>[i.value?(o(),u("div",Ml)):(o(),w(f,{key:1,name:"check",class:"h-4 w-4"})),n(" "+m(i.value?"Importing...":`Import ${M.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):x("",!0)])]}),_:1})]),_:1},8,["open"]),l("form",{ref_key:"exportForm",ref:se,method:"GET",class:"hidden"},null,512)]))}}),Ul={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},Tl={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},Fl={class:"flex items-center gap-3"},El={class:"flex flex-wrap gap-3"},Rl={key:2,class:"mb-6"},zl={class:"rounded-md border-l-4 border-red-500 bg-red-50 p-4 shadow-sm dark:border-red-400 dark:bg-red-900/30"},Bl={class:"flex items-center"},Ll={class:"flex-shrink-0"},Pl={class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100 dark:bg-red-800"},ql={class:"ml-3"},jl={class:"mt-1 text-sm text-red-700 dark:text-red-200"},Wl={class:"mt-2"},Ql={class:"flex flex-wrap gap-2"},Hl={key:0,class:"text-sm text-muted-foreground mt-2"},Yl={key:0},Gl={key:1},Kl={key:2},Zl={key:3,class:"ml-1"},Xl={key:3,class:"mx-auto mb-6 grid max-w-[95vw] grid-cols-1 gap-4 md:max-w-[64vw] md:grid-cols-2 lg:max-w-full"},Jl={class:"rounded-lg border bg-card shadow-sm"},ea={class:"p-4"},ta={class:"space-y-3"},sa={class:"text-sm"},la={key:0,class:"text-center text-muted-foreground"},aa={class:"rounded-lg border bg-card shadow-sm"},na={class:"p-4"},ra={class:"space-y-3"},oa={class:"text-sm"},da={key:0,class:"text-center text-muted-foreground"},ia={key:4,class:"mx-auto mb-6 max-w-[90vw] overflow-x-auto rounded-lg border bg-card p-4 shadow-sm md:max-w-[64vw] lg:max-w-full"},ua={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ma={key:5,class:"mx-auto mb-6 max-w-[95vw] overflow-x-auto rounded-lg border bg-card shadow-sm md:max-w-[64vw] lg:max-w-full"},fa={class:"flex items-center justify-between border-b p-4"},pa={class:"flex items-start justify-between"},va={class:"flex flex-col items-center space-y-1"},ca={key:0,class:"mb-6 rounded-lg border bg-card shadow-sm"},xa={class:"overflow-x-auto"},ga={class:"max-h-60 overflow-y-auto sm:max-h-80 md:max-h-96"},wa={key:6,class:"mb-6 rounded-lg border bg-card shadow-sm"},ya={class:"flex justify-between items-center"},ba={class:"flex items-center gap-2"},ka={key:0,class:"ml-4 flex flex-wrap gap-2"},_a={class:"text-sm hidden sm:inline"},ha={class:"flex flex-col gap-6"},Ca={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},Sa={class:"relative"},$a=["value"],Va={class:"relative"},Da=["value"],Aa={class:"flex justify-end space-x-2"},Ia={class:"overflow-x-auto"},Oa={class:"flex items-center justify-center"},Ma=["checked"],Na={class:"flex items-center space-x-1"},Ua={class:"flex items-center space-x-1"},Ta={class:"flex items-center space-x-1"},Fa={class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Ea=["value"],Ra={key:0},za={key:0},Ba={key:1},La={class:"flex space-x-2"},Pa={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},qa={class:"flex items-center gap-4 text-sm text-muted-foreground"},ja={class:"flex items-center gap-1"},Wa={class:"flex items-center gap-1"},Qa={class:"relative"},Ha=["value"],Ya={class:"flex space-x-1"},Ga=["innerHTML"],Ka={key:8,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Za={class:"flex items-center gap-2"},Xa={class:"max-h-[70vh] overflow-y-auto px-4 sm:px-6"},Ja={key:0,class:"col-span-2 mb-1"},en={class:"relative"},tn=["value"],sn={class:"col-span-2 border-b pb-1 mb-2 flex items-center gap-2"},ln={class:"grid grid-cols-2 gap-3 col-span-2"},an={class:"relative"},nn=["value"],rn={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},on={class:"col-span-2"},dn={class:"flex flex-wrap gap-1 mb-2 bg-muted/30 p-2 rounded-md min-h-[40px]"},un=["onClick"],mn={key:0,class:"text-muted-foreground text-sm italic"},fn={class:"relative"},pn=["value"],vn={class:"col-span-2"},cn={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},xn={class:"grid grid-cols-2 gap-3 col-span-2"},gn={class:"relative"},wn=["value"],yn={class:"relative"},bn=["value"],kn={class:"relative"},_n={class:"grid grid-cols-2 gap-3 col-span-2"},hn={class:"relative"},Cn={class:"flex items-center space-x-2"},Sn={key:1,class:"col-span-2"},$n={class:"border-b pb-1 mb-2 mt-1 flex items-center gap-2"},Vn={class:"flex items-center space-x-2"},Dn={key:0,class:"mt-2"},An={class:"space-y-4 sm:space-y-6"},In={class:"space-y-1 sm:space-y-2"},On={class:"rounded-md border"},Mn={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Nn={key:0,class:"ml-1 text-xs text-red-500"},Un={class:"flex space-x-1 sm:space-x-2"},Tn={class:"space-y-4 sm:space-y-6"},Fn={class:"space-y-1 sm:space-y-2"},En={class:"overflow-hidden rounded-md border"},Rn={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},zn={key:0,class:"ml-1 text-xs text-red-500"},Bn={class:"flex space-x-1 sm:space-x-2"},Ln={class:"space-y-4 sm:space-y-6"},Pn={class:"space-y-1 sm:space-y-2"},qn={class:"overflow-hidden rounded-md border"},jn={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Wn={key:0,class:"ml-1 text-xs text-red-500"},Qn={class:"flex space-x-1 sm:space-x-2"},Hn={class:"max-h-[60vh] overflow-x-auto overflow-y-auto"},Yn={class:"flex items-center gap-2"},Gn={key:1,class:"py-8 text-center text-muted-foreground"},Kn={class:"flex items-center gap-2"},Zn={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},Xn={key:0},Jn={class:"space-y-4"},er={class:"rounded-lg border p-4 bg-muted/10 space-y-3"},tr={class:"flex items-center gap-2"},sr={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},lr=["disabled"],ar=["disabled"],nr={key:0,class:"pt-2 border-t"},rr={class:"relative"},or=["disabled"],dr=["value"],ir={class:"cursor-pointer mt-3"},ur=["disabled"],mr={key:0,class:"mt-3 text-xs text-primary font-medium"},fr={key:0,class:"flex items-center gap-2 text-sm text-muted-foreground"},pr={key:1,class:"flex items-center justify-center gap-2 p-4"},vr={key:1,class:"space-y-4"},cr={class:"flex items-center justify-between"},xr={class:"flex items-center gap-2"},gr={key:0,class:"rounded-lg border p-3"},wr={class:"flex items-center justify-between"},yr={class:"text-xs text-muted-foreground"},br={class:"mt-2 flex flex-wrap gap-2"},kr={class:"grid grid-cols-3 gap-4"},_r={class:"text-2xl font-bold"},hr={class:"text-2xl font-bold text-green-600"},Cr={class:"text-2xl font-bold text-red-600"},Sr={key:2},$r={class:"flex items-center justify-between mb-3"},Vr={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},Dr={class:"border rounded-lg overflow-hidden"},Ar={class:"max-h-96 overflow-y-auto"},Ir={class:"flex flex-wrap gap-x-3 gap-y-1"},Or={class:"font-medium text-foreground"},Mr={class:"space-y-1"},Nr={class:"space-y-1"},Ur={key:0,class:"text-xs text-muted-foreground"},Tr={key:3},Fr={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},Er={class:"border rounded-lg overflow-hidden"},Rr={class:"flex flex-wrap gap-x-3 gap-y-1"},zr={class:"font-medium"},Br={class:"border-t p-4 flex justify-end gap-3"},Lr={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Pr="/storage/upload-data-temps/Repair Orders Template.csv",qr=nt({__name:"RepairOrdersComponent",props:{repairOrders:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},SuperAdmin:{type:Boolean,default:!1},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({search:"",vendor_id:"",status_id:""})},perPage:{type:Number,default:10},openedComponent:{type:String,default:"trucks"},permissions:{type:Array,default:()=>[]},importValidation:{type:Object,default:null}},setup(O){const g=O,V=h({...g.filters,dateFilter:g.dateFilter}),E=h(g.perPage),z=h([]),R=h(!1),q=h(""),H=h(""),I=h(!1),j=h(!1),Z=h(!1),K=h(!1),T=h(!1),te=h(!1),ie=h(!1),ue=h(!1),F=h(null),ae=h(!1),X=h(!1),b=h("template"),se=h(""),be=h(null),ne=h(!1);let M=0;lt(()=>{const p=s=>s.preventDefault();window.addEventListener("dragover",p),window.addEventListener("drop",p),at(()=>{window.removeEventListener("dragover",p),window.removeEventListener("drop",p)})});const _=h("Create"),i=Me({id:null,tenant_id:g.SuperAdmin?"":null,ro_number:"",ro_open_date:"",ro_close_date:"",truck_id:null,vendor_id:null,wo_number:"",wo_status_id:null,invoice:"",invoice_amount:"",invoice_received:!1,on_qs:"no",qs_invoice_date:"",disputed:!1,dispute_outcome:"",repairs_made:"",area_of_concerns:[]}),k=Me({concern:""}),P=Me({vendor_name:""}),W=Me({name:""}),J=B(()=>g.SuperAdmin),ze=B(()=>g.repairOrders.data.length>0),Ae=B(()=>ze.value&&g.repairOrders.data.every(p=>z.value.includes(p.id))),Ie=[{label:"Yesterday",value:"yesterday"},{label:"WTD",value:"current-week"},{label:"T6W",value:"6w"},{label:"Quarterly",value:"quarterly"}],Fe=p=>{if(!p)return"";const s=p.split("-");if(s.length!==3)return p;const[G,d,D]=s;return`${Number(d)}/${Number(D)}/${G}`};function Ee(p){return p?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p):"$0.00"}function rt(p){V.value.dateFilter=p,Re()}const Ke=B(()=>{const p=F.value;return p?(p.invalid||[]).some(s=>(s.warnings||[]).length>0):!1});function Re(){const p=g.SuperAdmin?"repair_orders.index.admin":"repair_orders.index",s={...g.SuperAdmin?{}:{tenantSlug:g.tenantSlug},...V.value,perPage:E.value,dateFilter:V.value.dateFilter,openedComponent:"repairOrders"};de.visit(route(p,s),{only:["repairOrders","filters","perPage","dateFilter","weekNumber","startWeekNumber","endWeekNumber","year","workOrdersByTruck","workOrderByAreasOfConcern","openedComponent","dateRange"]})}function Be(){V.value={...V.value,search:"",vendor_id:"",status_id:""},Re()}const Oe=h({column:"ro_number",direction:"asc"});function We(p){Oe.value.column===p?Oe.value.direction=Oe.value.direction==="asc"?"desc":"asc":Oe.value={column:p,direction:"asc"},Re()}function ot(){Re()}function Le(p){if(!p)return;const s=new URL(p),G=s.origin+s.pathname;de.get(G,{...V.value,perPage:E.value,dateFilter:V.value.dateFilter,openedComponent:"repairOrders",page:s.searchParams.get("page")||1},{preserveScroll:!0})}function dt(p){const s=p.target.checked;z.value=s?g.repairOrders.data.map(G=>G.id):[]}const it=Et();function ut(){if(!ze.value){H.value="No data";return}window.location.href=g.tenantSlug?route("repair_orders.export",{tenantSlug:g.tenantSlug}):route("repair_orders.export.admin")}function mt(){ue.value=!0,F.value=null,ae.value=!1,X.value=!1,b.value="template",se.value="",ne.value=!1,M=0,be.value&&(be.value.value="")}function ft(){i.reset(),_.value="Create",j.value=!0}function pt(p){i.reset(),i.id=p.id,i.tenant_id=p.tenant_id,i.ro_number=p.ro_number,i.ro_open_date=p.ro_open_date,i.ro_close_date=p.ro_close_date||"",i.truck_id=p.truck_id,i.vendor_id=p.vendor_id,i.wo_number=p.wo_number??"",i.wo_status_id=p.wo_status_id??null,i.invoice=p.invoice||"",i.invoice_amount=p.invoice_amount||"",i.invoice_received=!!p.invoice_received,i.on_qs=p.on_qs||"no",i.qs_invoice_date=p.qs_invoice_date||"",i.disputed=!!p.disputed,i.dispute_outcome=p.dispute_outcome||"",i.repairs_made=p.repairs_made||"",i.area_of_concerns=[],p.areas_of_concern&&Array.isArray(p.areas_of_concern)&&(i.area_of_concerns=p.areas_of_concern.map(s=>s.id)),_.value="Update",j.value=!0}function vt(){i.reset(),j.value=!1}function Ze(){i.wo_status_id===""&&(i.wo_status_id=null),i.wo_number===null&&(i.wo_number="");const p=_.value==="Update"?g.tenantSlug?route("repair_orders.update",[g.tenantSlug,i.id]):route("repair_orders.update.admin",i.id):g.tenantSlug?route("repair_orders.store",{tenantSlug:g.tenantSlug}):route("repair_orders.store.admin");i[_.value==="Update"?"put":"post"](p,{onSuccess:()=>{q.value=`${_.value}d!`,j.value=!1}})}let Pe=null;function ct(p){Pe=p,Z.value=!0}function xt(){if(Pe===null)return;const p=g.tenantSlug?route("repair_orders.destroy",[g.tenantSlug,Pe]):route("repair_orders.destroy.admin",Pe);de.delete(p,{onSuccess:()=>{q.value="Deleted",Z.value=!1}})}function gt(){K.value=!0}function Xe(){const p=g.tenantSlug?route("repair_orders.destroyBulk",{tenantSlug:g.tenantSlug}):route("repair_orders.destroyBulk.admin");Me({ids:z.value}).delete(p,{onSuccess:()=>{q.value=`${z.value.length} deleted`,z.value=[],K.value=!1}})}function wt(){k.reset(),T.value=!0}function yt(){k.post(route("area_of_concerns.store.admin"),{onSuccess:()=>k.reset()})}function bt(p){de.delete(route("area_of_concerns.destroy.admin",p))}function kt(p){de.post(route("area_of_concerns.restore.admin",p))}function _t(){P.reset(),te.value=!0}function ht(){P.post(route("vendors.store.admin"),{onSuccess:()=>P.reset()})}function Je(p){de.delete(route("vendors.destroy.admin",p))}function Ct(p){de.post(route("vendors.restore.admin",p))}function me(p){de.delete(route("vendors.forceDelete.admin",p))}function c(){W.reset(),ie.value=!0}function r(){W.post(route("wo_statuses.store.admin"),{onSuccess:()=>W.reset()})}function v(p){de.delete(route("wo_statuses.destroy.admin",p))}function A(p){de.post(route("wo_statuses.restore.admin",p))}function qe(p){de.delete(route("wo_statuses.forceDelete.admin",p))}const re=B(()=>g.canceledQSInvoices.length>0),ge=h(!1),Ve=B(()=>Object.fromEntries(g.areasOfConcern.map(p=>[p.id,p.concern]))),St=B(()=>g.areasOfConcern.filter(p=>!i.area_of_concerns.includes(p.id)));function Lt(p){const s=Number(p.target.value);s&&!i.area_of_concerns.includes(s)&&i.area_of_concerns.push(s),p.target.value=""}function Pt(p){i.area_of_concerns=i.area_of_concerns.filter(s=>s!==p)}const Dt=B(()=>(g.dateFilter==="yesterday"||g.dateFilter==="current-week")&&g.weekNumber&&g.year?`Week ${g.weekNumber}, ${g.year}`:(g.dateFilter==="6w"||g.dateFilter==="quarterly")&&g.startWeekNumber&&g.endWeekNumber&&g.year?`Weeks ${g.startWeekNumber}-${g.endWeekNumber}, ${g.year}`:"");lt(()=>{const p=s=>{I.value&&!s.target.closest(".relative")&&(I.value=!1)};document.addEventListener("click",p),at(()=>document.removeEventListener("click",p))}),Ge(q,p=>{p&&setTimeout(()=>q.value="",5e3)});const At=B(()=>(g.workOrderByAreasOfConcern||[]).slice(0,5)),It=B(()=>(g.workOrdersByTruck||[]).slice(0,5)),et=h(null),tt=h(null),Qe=h(!1),He=B(()=>g.outstandingInvoices.filter(p=>{const s=et.value!=null?Number(p.invoice_amount)>=et.value:!0,G=tt.value?new Date(p.qs_invoice_date)>new Date(tt.value):!0;return s&&G})),qt=B(()=>He.value.reduce((p,s)=>p+Number(s.invoice_amount||0),0)),we=B(()=>g.permissions.map(p=>p.name)),Ot=B(()=>{const p=[];V.value.search&&p.push(`Search: "${V.value.search}"`);const s=g.vendors.find(d=>d.id==V.value.vendor_id);s&&p.push(`Vendor: ${s.vendor_name}`);const G=g.woStatuses.find(d=>d.id==V.value.status_id);return G&&p.push(`Status: ${G.name}`),p});function Mt(){ue.value=!1,F.value=null,ae.value=!1,X.value=!1,b.value="template",se.value="",ne.value=!1,M=0,be.value&&(be.value.value="")}function jt(p){var d;const s=p.target,G=(d=s.files)==null?void 0:d[0];G&&(Nt(G),s.value="")}function Nt(p){if(!p)return;if(J.value&&b.value==="quicksight"&&!se.value){H.value="Please select a company before validating a QuickSight CSV.",setTimeout(()=>H.value="",4e3);return}if(!(p.type==="text/csv"||p.name.toLowerCase().endsWith(".csv")||p.type==="")){H.value="Please upload a valid CSV file.",setTimeout(()=>H.value="",4e3);return}ae.value=!0;const G=new FormData;G.append("file",p),G.append("importType",b.value),J.value&&b.value==="quicksight"&&G.append("tenant_id",String(se.value));const d=g.tenantSlug?route("repair_orders.validateImport",{tenantSlug:g.tenantSlug}):route("repair_orders.validateImport.admin");de.post(d,G,{forceFormData:!0,preserveScroll:!0,only:["flash"],onFinish:()=>{ae.value=!1},onError:()=>{ae.value=!1,H.value="Failed to validate CSV file"}})}function Wt(){M+=1,ne.value=!0}function Qt(){ne.value=!0}function Ht(){M-=1,M<=0&&(M=0,ne.value=!1)}function Yt(p){var G,d;M=0,ne.value=!1;const s=(d=(G=p.dataTransfer)==null?void 0:G.files)==null?void 0:d[0];s&&Nt(s)}function Gt(){if(!F.value||F.value.summary.invalid>0)return;if(J.value&&b.value==="quicksight"&&!se.value){H.value="Please select a company before importing a QuickSight CSV.";return}X.value=!0;const p=g.tenantSlug?route("repair_orders.confirmImport",{tenantSlug:g.tenantSlug}):route("repair_orders.confirmImport.admin");de.post(p,{importType:b.value,...J.value&&b.value==="quicksight"?{tenant_id:se.value}:{}},{preserveScroll:!0,onSuccess:()=>{X.value=!1,q.value=`Successfully imported ${F.value.summary.valid} repair orders`,Mt()},onError:()=>{X.value=!1,H.value="Failed to import repair orders"}})}function Kt(){const p=g.tenantSlug?route("repair_orders.downloadErrorReport",{tenantSlug:g.tenantSlug}):route("repair_orders.downloadErrorReport.admin");window.location.href=p}return Ge(()=>{var p;return(p=it.props.flash)==null?void 0:p.importValidation},p=>{if(p){if(p.results){F.value=p.results,p.header_error&&(F.value.header_error=p.header_error),ue.value=!0;return}p.message&&(H.value=p.message)}},{immediate:!1}),(p,s)=>{var G;return o(),u($,null,[l("div",Ul,[q.value?(o(),w(e(Te),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Ne),{class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"check_circle",class:"h-5 w-5 text-green-500"}),s[52]||(s[52]=n(" Success "))]),_:1}),t(e(Ue),null,{default:a(()=>[n(m(q.value),1)]),_:1})]),_:1})):x("",!0),H.value?(o(),w(e(Te),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Ne),{class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"alert_circle",class:"h-5 w-5"}),s[53]||(s[53]=n(" Error "))]),_:1}),t(e(Ue),null,{default:a(()=>[n(m(H.value),1)]),_:1})]),_:1})):x("",!0),l("div",Tl,[l("div",Fl,[t(f,{name:"clipboard-list",class:"h-6 w-6 text-primary hidden sm:block"}),s[54]||(s[54]=l("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Repair Orders ",-1))]),l("div",El,[we.value.includes("repair-orders.create")?(o(),w(e(y),{key:0,onClick:ft,variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),s[55]||(s[55]=n(" Create New "))]),_:1})):x("",!0),z.value.length&&we.value.includes("repair-orders.delete")?(o(),w(e(y),{key:1,onClick:gt,variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),n(" Delete Selected ("+m(z.value.length)+") ",1)]),_:1})):x("",!0),J.value?(o(),w(e(y),{key:2,onClick:wt,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),s[56]||(s[56]=n(" Areas "))]),_:1})):x("",!0),J.value?(o(),w(e(y),{key:3,onClick:_t,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),s[57]||(s[57]=n(" Vendors "))]),_:1})):x("",!0),J.value?(o(),w(e(y),{key:4,onClick:c,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),s[58]||(s[58]=n(" Statuses "))]),_:1})):x("",!0),we.value.includes("repair-orders.import")?(o(),w(e(y),{key:5,onClick:mt,variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),s[59]||(s[59]=n(" Import CSV "))]),_:1})):x("",!0),we.value.includes("repair-orders.export")?(o(),w(e(y),{key:6,onClick:oe(ut,["prevent"]),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(f,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),s[60]||(s[60]=n(" Download CSV "))]),_:1})):x("",!0)])]),re.value&&!O.SuperAdmin&&we.value.includes("repair-orders.update")?(o(),u("div",Rl,[l("div",zl,[l("div",Bl,[l("div",Ll,[l("div",Pl,[t(f,{name:"triangleAlert",class:"h-6 w-6 text-red-600 dark:text-red-300"})])]),l("div",ql,[s[62]||(s[62]=l("h3",{class:"text-lg font-medium text-red-800 dark:text-red-300"}," Attention Required ",-1)),l("div",jl,m(((G=g.canceledQSInvoices)==null?void 0:G.length)||0)+" invoices found with canceled WO status but still on QS. These need immediate attention. ",1),l("div",Wl,[t(e(y),{onClick:s[0]||(s[0]=d=>ge.value=!0),variant:"destructive",size:"sm"},{default:a(()=>s[61]||(s[61]=[n(" View Details ")])),_:1})])])])])])):x("",!0),t(e(Se),{class:"shadow-sm border bg-card"},{default:a(()=>[t(e($e),{class:"p-3 md:p-4"},{default:a(()=>[l("div",Ql,[(o(),u($,null,N(Ie,d=>t(e(y),{key:d.value,size:"sm",variant:"outline",class:ye({"border-primary bg-primary/10 text-primary":V.value.dateFilter===d.value}),onClick:D=>rt(d.value)},{default:a(()=>[n(m(d.label),1)]),_:2},1032,["class","onClick"])),64))]),O.dateRange?(o(),u("div",Hl,[O.dateFilter==="yesterday"&&O.dateRange.start?(o(),u("span",Yl," Showing data from "+m(Fe(O.dateRange.start)),1)):O.dateRange.start&&O.dateRange.end?(o(),u("span",Gl," Showing data from "+m(Fe(O.dateRange.start))+" to "+m(Fe(O.dateRange.end)),1)):(o(),u("span",Kl,m(O.dateRange.label),1)),Dt.value?(o(),u("span",Zl,"("+m(Dt.value)+")",1)):x("",!0)])):x("",!0)]),_:1})]),_:1}),(O.dateFilter==="quarterly"||O.dateFilter==="6w")&&!O.SuperAdmin?(o(),u("div",Xl,[l("div",Jl,[s[64]||(s[64]=l("div",{class:"border-b p-4"},[l("h3",{class:"text-lg font-semibold"},"Top 5 Frequent Repairs")],-1)),l("div",ea,[l("ul",ta,[s[63]||(s[63]=l("div",{class:"flex items-center justify-between"},[l("span",{class:"text-sm"},"Parts:"),l("span",{class:"text-sm"},"Work Orders:")],-1)),(o(!0),u($,null,N(At.value,(d,D)=>(o(),u("li",{key:D,class:"flex items-center justify-between pr-4"},[l("span",sa,m(d.concern),1),t(e(je),{variant:"outline"},{default:a(()=>[n(m(d.count),1)]),_:2},1024)]))),128)),At.value.length===0?(o(),u("li",la," No data available ")):x("",!0)])])]),l("div",aa,[s[66]||(s[66]=l("div",{class:"border-b p-4"},[l("h3",{class:"text-lg font-semibold"},"Top 5 Frequently Repaired Tractors")],-1)),l("div",na,[l("ul",ra,[s[65]||(s[65]=l("div",{class:"flex items-center justify-between"},[l("span",{class:"text-sm"},"Asset ID:"),l("span",{class:"text-sm"},"Work Orders:")],-1)),(o(!0),u($,null,N(It.value,(d,D)=>(o(),u("li",{key:D,class:"flex items-center justify-between pr-4"},[l("span",oa,m(d.truckid),1),t(e(je),{variant:"outline"},{default:a(()=>[n(m(d.work_order_count),1)]),_:2},1024)]))),128)),It.value.length===0?(o(),u("li",da," No data available ")):x("",!0)])])])])):x("",!0),O.SuperAdmin?x("",!0):(o(),u("div",ia,[s[69]||(s[69]=l("h3",{class:"mb-4 text-lg font-semibold"},"Outstanding Invoices Filter",-1)),l("div",ua,[l("div",null,[t(e(U),{for:"min-invoice-amount"},{default:a(()=>s[67]||(s[67]=[n("Minimum Invoice Amount ($)")])),_:1}),t(e(ee),{id:"min-invoice-amount",modelValue:et.value,"onUpdate:modelValue":s[1]||(s[1]=d=>et.value=d),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"Enter minimum amount",class:"mt-1"},null,8,["modelValue"])]),l("div",null,[t(e(U),{for:"outstanding-since"},{default:a(()=>s[68]||(s[68]=[n("Outstanding Since")])),_:1}),t(e(ee),{id:"outstanding-since",modelValue:tt.value,"onUpdate:modelValue":s[2]||(s[2]=d=>tt.value=d),type:"date",class:"mt-1"},null,8,["modelValue"])])])])),!O.SuperAdmin&&He.value.length>0?(o(),u("div",ma,[l("div",fa,[s[70]||(s[70]=l("h3",{class:"text-lg font-semibold"},"Outstanding Invoices",-1)),l("div",pa,[l("div",va,[t(e(je),{variant:"outline",class:"text-sm"},{default:a(()=>[n(m(He.value.length)+" invoices ",1)]),_:1}),t(e(je),{variant:"outline",class:"text-sm"},{default:a(()=>[n(" total: $"+m(qt.value.toFixed(2)),1)]),_:1})]),t(e(y),{variant:"ghost",size:"sm",onClick:s[3]||(s[3]=d=>Qe.value=!Qe.value),class:"ml-4 mt-1"},{default:a(()=>[n(m(Qe.value?"Hide Invoices":"Show Invoices")+" ",1),t(f,{name:Qe.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),Qe.value?(o(),u("div",ca,[l("div",xa,[l("div",ga,[t(e(_e),{class:"min-w-full"},{default:a(()=>[t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(S),null,{default:a(()=>s[71]||(s[71]=[n("RO Number")])),_:1}),t(e(S),null,{default:a(()=>s[72]||(s[72]=[n("Vendor")])),_:1}),t(e(S),null,{default:a(()=>s[73]||(s[73]=[n("Week")])),_:1}),t(e(S),{class:"text-right"},{default:a(()=>s[74]||(s[74]=[n("Amount")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[(o(!0),u($,null,N(He.value,d=>(o(),w(e(L),{key:d.ro_number},{default:a(()=>[t(e(C),null,{default:a(()=>[n(m(d.ro_number),1)]),_:2},1024),t(e(C),null,{default:a(()=>[n(m(d.vendor_name),1)]),_:2},1024),t(e(C),null,{default:a(()=>[n("W"+m(d.week_number)+"/"+m(d.year),1)]),_:2},1024),t(e(C),{class:"text-right"},{default:a(()=>[n(m(Ee(d.invoice_amount)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):x("",!0)])):x("",!0),!O.SuperAdmin&&He.value.length===0?(o(),u("div",wa,s[75]||(s[75]=[l("div",{class:"border-b p-4"},[l("h3",{class:"text-lg font-semibold"},"Outstanding Invoices")],-1),l("div",{class:"p-4 text-center text-muted-foreground"}," No outstanding invoices match the current criteria ",-1)]))):x("",!0),t(e(Se),{class:"shadow-sm border"},{default:a(()=>[t(e(zt),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:a(()=>[l("div",ya,[l("div",ba,[t(e(Bt),{class:"text-lg md:text-xl lg:text-2xl"},{default:a(()=>s[76]||(s[76]=[n("Filters")])),_:1}),!R.value&&Ot.value.length?(o(),u("div",ka,[(o(!0),u($,null,N(Ot.value,(d,D)=>(o(),u("div",{key:D,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},m(d),1))),128))])):x("",!0)]),t(e(y),{variant:"ghost",size:"sm",onClick:s[4]||(s[4]=d=>R.value=!R.value),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:a(()=>[l("span",_a,m(R.value?"Hide Filters":"Show Filters"),1),t(f,{name:R.value?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),t(Rt,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:a(()=>[R.value?(o(),w(e($e),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:a(()=>[l("div",ha,[l("div",Ca,[l("div",null,[t(e(U),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(f,{name:"search",class:"h-4 w-4 text-muted-foreground"}),s[77]||(s[77]=n(" Search "))]),_:1}),t(e(ee),{id:"search",type:"text",modelValue:V.value.search,"onUpdate:modelValue":s[5]||(s[5]=d=>V.value.search=d),placeholder:"RO#, Invoice...",class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),l("div",null,[t(e(U),{for:"vendor",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),s[78]||(s[78]=n(" Vendor "))]),_:1}),l("div",Sa,[Q(l("select",{id:"vendor","onUpdate:modelValue":s[6]||(s[6]=d=>V.value.vendor_id=d),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s[79]||(s[79]=l("option",{value:""},"All Vendors",-1)),(o(!0),u($,null,N(O.vendors,d=>(o(),u("option",{key:d.id,value:d.id},m(d.vendor_name),9,$a))),128))],512),[[le,V.value.vendor_id]]),s[80]||(s[80]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(e(U),{for:"status",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(f,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),s[81]||(s[81]=n(" Status "))]),_:1}),l("div",Va,[Q(l("select",{id:"status","onUpdate:modelValue":s[7]||(s[7]=d=>V.value.status_id=d),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s[82]||(s[82]=l("option",{value:""},"All Statuses",-1)),(o(!0),u($,null,N(O.woStatuses,d=>(o(),u("option",{key:d.id,value:d.id},m(d.name),9,Da))),128))],512),[[le,V.value.status_id]]),s[83]||(s[83]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),l("div",Aa,[t(e(y),{onClick:Be,variant:"ghost",size:"sm"},{default:a(()=>[t(f,{name:"rotate-ccw",class:"mr-2 h-4 w-4"}),s[84]||(s[84]=n(" Reset Filters "))]),_:1}),t(e(y),{onClick:Re,variant:"default",size:"sm"},{default:a(()=>[t(f,{name:"filter",class:"mr-2 h-4 w-4"}),s[85]||(s[85]=n(" Apply Filters "))]),_:1})])])]),_:1})):x("",!0)]),_:1})]),_:1}),ze.value?(o(),w(e(Se),{key:7,class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:a(()=>[t(e($e),{class:"p-0"},{default:a(()=>[l("div",Ia,[t(e(_e),{class:"relative h-[500px] overflow-auto"},{default:a(()=>[t(e(he),null,{default:a(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:a(()=>[we.value.includes("repair-orders.delete")?(o(),w(e(S),{key:0,class:"w-12"},{default:a(()=>[l("div",Oa,[l("input",{type:"checkbox",checked:Ae.value,onChange:dt,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ma)])]),_:1})):x("",!0),t(e(S),{onClick:s[8]||(s[8]=d=>We("ro_number")),class:"cursor-pointer font-semibold"},{default:a(()=>[l("div",Na,[s[86]||(s[86]=n(" RO# ")),t(Vt,{column:"ro_number",sortState:Oe.value},null,8,["sortState"])])]),_:1}),J.value?(o(),w(e(S),{key:1,class:"font-semibold"},{default:a(()=>s[87]||(s[87]=[n("Company")])),_:1})):x("",!0),t(e(S),{onClick:s[9]||(s[9]=d=>We("ro_open_date")),class:"cursor-pointer font-semibold"},{default:a(()=>[l("div",Ua,[s[88]||(s[88]=n(" Open Date ")),t(Vt,{column:"ro_open_date",sortState:Oe.value},null,8,["sortState"])])]),_:1}),t(e(S),{onClick:s[10]||(s[10]=d=>We("ro_close_date")),class:"cursor-pointer font-semibold"},{default:a(()=>[l("div",Ta,[s[89]||(s[89]=n(" Close Date ")),t(Vt,{column:"ro_close_date",sortState:Oe.value},null,8,["sortState"])])]),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[90]||(s[90]=[n("Truck")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[91]||(s[91]=[n("Vendor")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[92]||(s[92]=[n("Areas of Concern")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[93]||(s[93]=[n("WO#")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[94]||(s[94]=[n("WO Status")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[95]||(s[95]=[n("Invoice")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[96]||(s[96]=[n("Amount")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[97]||(s[97]=[n("Invoice Received")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[98]||(s[98]=[n("On QS")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[99]||(s[99]=[n("QS Invoice Date")])),_:1}),t(e(S),{class:"font-semibold"},{default:a(()=>s[100]||(s[100]=[n("Disputed")])),_:1}),we.value.includes("repair-orders.delete")||we.value.includes("repair-orders.update")?(o(),w(e(S),{key:2,class:"font-semibold"},{default:a(()=>s[101]||(s[101]=[n("Actions")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[O.repairOrders.data.length?x("",!0):(o(),w(e(L),{key:0},{default:a(()=>[t(e(C),{colspan:J.value?16:15,class:"py-8 text-center"},{default:a(()=>[l("div",Fa,[t(f,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),s[102]||(s[102]=l("h2",{class:"text-lg font-medium"},"No repair orders found.",-1)),s[103]||(s[103]=l("p",{class:"text-muted-foreground mt-2"}," There is no data to display at this time. ",-1))])]),_:1},8,["colspan"])]),_:1})),(o(!0),u($,null,N(O.repairOrders.data,d=>(o(),w(e(L),{key:d.id,class:"hover:bg-muted/50 transition-colors"},{default:a(()=>[we.value.includes("repair-orders.delete")?(o(),w(e(C),{key:0},{default:a(()=>[Q(l("input",{type:"checkbox",value:d.id,"onUpdate:modelValue":s[11]||(s[11]=D=>z.value=D),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,8,Ea),[[st,z.value]])]),_:2},1024)):x("",!0),t(e(C),{class:"whitespace-nowrap font-medium"},{default:a(()=>[n(m(d.ro_number),1)]),_:2},1024),J.value?(o(),w(e(C),{key:1,class:"whitespace-nowrap"},{default:a(()=>{var D;return[n(m(((D=d.tenant)==null?void 0:D.name)||"—"),1)]}),_:2},1024)):x("",!0),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(Fe(d.ro_open_date)),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(d.ro_close_date?Fe(d.ro_close_date):"N/A"),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>{var D;return[n(m(((D=d.truck)==null?void 0:D.truckid)||"—"),1)]}),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>{var D;return[n(m(((D=d.vendor)==null?void 0:D.vendor_name)||"—"),1)]}),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>{var D;return[(D=d.areas_of_concern)!=null&&D.length?(o(),u("span",Ra,[(o(!0),u($,null,N(d.areas_of_concern,(Ye,Y)=>(o(),u("span",{key:Ye.id},[n(m(Ye.concern),1),Y<d.areas_of_concern.length-1?(o(),u("span",za,", ")):x("",!0)]))),128))])):(o(),u("span",Ba,"—"))]}),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(d.wo_number||"—"),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>{var D;return[n(m(((D=d.wo_status)==null?void 0:D.name)||"—"),1)]}),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(d.invoice||"—"),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(Ee(d.invoice_amount)),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(d.invoice_received?"Yes":"No"),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(d.on_qs?d.on_qs.charAt(0).toUpperCase()+d.on_qs.slice(1):"No"),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(d.qs_invoice_date?Fe(d.qs_invoice_date):"N/A"),1)]),_:2},1024),t(e(C),{class:"whitespace-nowrap"},{default:a(()=>[n(m(d.disputed?"Yes":"No"),1)]),_:2},1024),we.value.includes("repair-orders.update")||we.value.includes("repair-orders.delete")?(o(),w(e(C),{key:2},{default:a(()=>[l("div",La,[we.value.includes("repair-orders.update")?(o(),w(e(y),{key:0,size:"sm",variant:"warning",onClick:D=>pt(d),class:"h-8 px-2"},{default:a(()=>[t(f,{name:"pencil",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),we.value.includes("repair-orders.delete")?(o(),w(e(y),{key:1,size:"sm",variant:"destructive",onClick:D=>ct(d.id),class:"h-8 px-2"},{default:a(()=>[t(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),l("div",Pa,[l("div",qa,[l("span",ja,[t(f,{name:"list",class:"h-4 w-4"}),n(" Showing "+m(O.repairOrders.data.length)+" of "+m(O.repairOrders.total)+" entries ",1)]),l("span",Wa,[t(f,{name:"layout-grid",class:"h-4 w-4"}),s[104]||(s[104]=n(" Per page: "))]),l("div",Qa,[Q(l("select",{"onUpdate:modelValue":s[12]||(s[12]=d=>E.value=d),onChange:ot,class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(o(),u($,null,N([10,25,50,100],d=>l("option",{key:d,value:d},m(d),9,Ha)),64))],544),[[le,E.value,void 0,{number:!0}]]),s[105]||(s[105]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",Ya,[t(e(y),{size:"sm",variant:"ghost",onClick:s[13]||(s[13]=d=>Le(O.repairOrders.prev_page_url)),disabled:!O.repairOrders.prev_page_url,class:"flex items-center gap-1"},{default:a(()=>[t(f,{name:"chevron-left",class:"h-4 w-4"}),s[106]||(s[106]=n(" Prev "))]),_:1},8,["disabled"]),(o(!0),u($,null,N(O.repairOrders.links.slice(1,-1),d=>(o(),w(e(y),{key:d.label,size:"sm",variant:"ghost",onClick:D=>Le(d.url),disabled:!d.url,class:ye({"border-primary bg-primary/10 text-primary font-medium":d.active})},{default:a(()=>[l("span",{innerHTML:d.label},null,8,Ga)]),_:2},1032,["onClick","disabled","class"]))),128)),t(e(y),{size:"sm",variant:"ghost",onClick:s[14]||(s[14]=d=>Le(O.repairOrders.next_page_url)),disabled:!O.repairOrders.next_page_url,class:"flex items-center gap-1"},{default:a(()=>[s[107]||(s[107]=n(" Next ")),t(f,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})):(o(),u("div",Ka,[t(f,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),s[108]||(s[108]=l("h2",{class:"text-lg font-medium"},"There is No Data to give Information about.",-1))])),t(e(ve),{open:j.value,"onUpdate:open":s[32]||(s[32]=d=>j.value=d)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:a(()=>[t(e(ce),{class:"px-4 sm:px-6 border-b pb-3"},{default:a(()=>[l("div",Za,[t(f,{name:e(i).id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),t(e(xe),{class:"text-lg sm:text-xl font-semibold"},{default:a(()=>[n(m(_.value)+" Repair Order",1)]),_:1})]),t(e(pe),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:a(()=>[n("Fill in the details to "+m(_.value.toLowerCase())+" a repair order.",1)]),_:1})]),_:1}),l("div",Xa,[l("form",{onSubmit:oe(Ze,["prevent"]),class:"grid grid-cols-1 gap-3 p-3 sm:grid-cols-2 sm:gap-4 sm:p-4"},[J.value?(o(),u("div",Ja,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),s[109]||(s[109]=n(" Company "))]),_:1}),l("div",en,[Q(l("select",{"onUpdate:modelValue":s[15]||(s[15]=d=>e(i).tenant_id=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm ring-offset-background focus-visible:ring-2"},[s[110]||(s[110]=l("option",{disabled:"",value:""},"Select",-1)),(o(!0),u($,null,N(O.tenants,d=>(o(),u("option",{key:d.id,value:d.id},m(d.name),9,tn))),128))],512),[[le,e(i).tenant_id]]),s[111]||(s[111]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),l("div",sn,[t(f,{name:"info",class:"h-4 w-4 text-primary"}),s[112]||(s[112]=l("h3",{class:"text-md font-semibold text-primary"},"Basic Information",-1))]),l("div",ln,[l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),s[113]||(s[113]=n(" RO# "))]),_:1}),t(e(ee),{modelValue:e(i).ro_number,"onUpdate:modelValue":s[16]||(s[16]=d=>e(i).ro_number=d),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),s[114]||(s[114]=n(" Truck "))]),_:1}),l("div",an,[Q(l("select",{"onUpdate:modelValue":s[17]||(s[17]=d=>e(i).truck_id=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[115]||(s[115]=l("option",{disabled:"",value:""},"Select",-1)),(o(!0),u($,null,N(O.trucks,d=>(o(),u("option",{key:d.id,value:d.id},m(d.truckid),9,nn))),128))],512),[[le,e(i).truck_id]]),s[116]||(s[116]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"calendar",class:"h-4 w-4 text-muted-foreground"}),s[117]||(s[117]=n(" Open Date "))]),_:1}),t(e(ee),{type:"date",modelValue:e(i).ro_open_date,"onUpdate:modelValue":s[18]||(s[18]=d=>e(i).ro_open_date=d),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"calendar-check",class:"h-4 w-4 text-muted-foreground"}),s[118]||(s[118]=n(" Close Date "))]),_:1}),t(e(ee),{type:"date",modelValue:e(i).ro_close_date,"onUpdate:modelValue":s[19]||(s[19]=d=>e(i).ro_close_date=d),class:"h-9 w-full"},null,8,["modelValue"])])]),l("div",rn,[t(f,{name:"wrench",class:"h-4 w-4 text-primary"}),s[119]||(s[119]=l("h3",{class:"text-md font-semibold text-primary"},"Repair Details",-1))]),l("div",on,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"alert-triangle",class:"h-4 w-4 text-muted-foreground"}),s[120]||(s[120]=n(" Areas of Concern "))]),_:1}),l("div",dn,[(o(!0),u($,null,N(e(i).area_of_concerns,d=>(o(),u("span",{key:d,class:"badge bg-primary/10 text-primary px-2 py-1 rounded-md flex items-center"},[n(m(Ve.value[d]),1),l("button",{onClick:D=>Pt(d),class:"ml-1 hover:text-red-500 focus:outline-none"}," × ",8,un)]))),128)),e(i).area_of_concerns.length?x("",!0):(o(),u("span",mn,"No areas selected"))]),l("div",fn,[l("select",{onChange:s[20]||(s[20]=d=>Lt(d)),class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[121]||(s[121]=l("option",{value:""},"Select an area to add",-1)),(o(!0),u($,null,N(St.value,d=>(o(),u("option",{key:d.id,value:d.id},m(d.concern),9,pn))),128))],32),s[122]||(s[122]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",vn,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"clipboard-check",class:"h-4 w-4 text-muted-foreground"}),s[123]||(s[123]=n(" Repairs Made "))]),_:1}),Q(l("textarea",{"onUpdate:modelValue":s[21]||(s[21]=d=>e(i).repairs_made=d),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[Ut,e(i).repairs_made]])]),l("div",cn,[t(f,{name:"receipt",class:"h-4 w-4 text-primary"}),s[124]||(s[124]=l("h3",{class:"text-md font-semibold text-primary"}," Vendor & Invoice Information ",-1))]),l("div",xn,[l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"building-2",class:"h-4 w-4 text-muted-foreground"}),s[125]||(s[125]=n(" Vendor "))]),_:1}),l("div",gn,[Q(l("select",{"onUpdate:modelValue":s[22]||(s[22]=d=>e(i).vendor_id=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[126]||(s[126]=l("option",{disabled:"",value:""},"Select",-1)),(o(!0),u($,null,N(O.vendors,d=>(o(),u("option",{key:d.id,value:d.id},m(d.vendor_name),9,wn))),128))],512),[[le,e(i).vendor_id]]),s[127]||(s[127]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"file-text",class:"h-4 w-4 text-muted-foreground"}),s[128]||(s[128]=n(" WO# "))]),_:1}),t(e(ee),{modelValue:e(i).wo_number,"onUpdate:modelValue":s[23]||(s[23]=d=>e(i).wo_number=d),class:"h-9 w-full"},null,8,["modelValue"])]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),s[129]||(s[129]=n(" WO Status "))]),_:1}),l("div",yn,[Q(l("select",{"onUpdate:modelValue":s[24]||(s[24]=d=>e(i).wo_status_id=d),class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[130]||(s[130]=l("option",{value:null},"— None —",-1)),(o(!0),u($,null,N(O.woStatuses,d=>(o(),u("option",{key:d.id,value:d.id},m(d.name),9,bn))),128))],512),[[le,e(i).wo_status_id]]),s[131]||(s[131]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"check-square",class:"h-4 w-4 text-muted-foreground"}),s[132]||(s[132]=n(" On QS "))]),_:1}),l("div",kn,[Q(l("select",{"onUpdate:modelValue":s[25]||(s[25]=d=>e(i).on_qs=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},s[133]||(s[133]=[l("option",{value:"yes"},"Yes",-1),l("option",{value:"no"},"No",-1),l("option",{value:"not expected"},"Not Expected",-1)]),512),[[le,e(i).on_qs]]),s[134]||(s[134]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),l("div",_n,[l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"file-invoice",class:"h-4 w-4 text-muted-foreground"}),s[135]||(s[135]=n(" Invoice "))]),_:1}),t(e(ee),{modelValue:e(i).invoice,"onUpdate:modelValue":s[26]||(s[26]=d=>e(i).invoice=d),class:"h-9 w-full"},null,8,["modelValue"])]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"dollar-sign",class:"h-4 w-4 text-muted-foreground"}),s[136]||(s[136]=n(" Amount "))]),_:1}),l("div",hn,[s[137]||(s[137]=l("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground"},"$",-1)),t(e(ee),{type:"number",step:"0.01",modelValue:e(i).invoice_amount,"onUpdate:modelValue":s[27]||(s[27]=d=>e(i).invoice_amount=d),class:"pl-7 h-9 w-full"},null,8,["modelValue"])])]),l("div",Cn,[Q(l("input",{type:"checkbox","onUpdate:modelValue":s[28]||(s[28]=d=>e(i).invoice_received=d),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[st,e(i).invoice_received]]),t(e(U),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:a(()=>[t(f,{name:"inbox",class:"h-4 w-4 text-muted-foreground"}),s[138]||(s[138]=n(" Invoice Received "))]),_:1})]),l("div",null,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"calendar-days",class:"h-4 w-4 text-muted-foreground"}),s[139]||(s[139]=n(" QS Invoice Date "))]),_:1}),t(e(ee),{type:"date",modelValue:e(i).qs_invoice_date,"onUpdate:modelValue":s[29]||(s[29]=d=>e(i).qs_invoice_date=d),class:"h-9 w-full"},null,8,["modelValue"])])]),_.value==="Update"?(o(),u("div",Sn,[l("div",$n,[t(f,{name:"alert-octagon",class:"h-4 w-4 text-primary"}),s[140]||(s[140]=l("h3",{class:"text-md font-semibold text-primary"},"Dispute Information",-1))]),l("div",Vn,[Q(l("input",{type:"checkbox","onUpdate:modelValue":s[30]||(s[30]=d=>e(i).disputed=d),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[st,e(i).disputed]]),t(e(U),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:a(()=>[t(f,{name:"alert-circle",class:"h-4 w-4 text-muted-foreground"}),s[141]||(s[141]=n(" Disputed? "))]),_:1})]),e(i).disputed?(o(),u("div",Dn,[t(e(U),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(f,{name:"message-square",class:"h-4 w-4 text-muted-foreground"}),s[142]||(s[142]=n(" Dispute Outcome "))]),_:1}),Q(l("textarea",{"onUpdate:modelValue":s[31]||(s[31]=d=>e(i).dispute_outcome=d),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[Ut,e(i).dispute_outcome]])])):x("",!0)])):x("",!0)],32)]),t(e(De),{class:"px-4 sm:px-6 flex justify-end gap-2 mt-2 pt-3 border-t"},{default:a(()=>[t(e(y),{variant:"outline",onClick:vt,class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:a(()=>s[143]||(s[143]=[n("Cancel")])),_:1}),t(e(y),{type:"submit",onClick:Ze,class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:a(()=>[n(m(_.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:Z.value,"onUpdate:open":s[34]||(s[34]=d=>Z.value=d)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[t(e(ce),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(xe),{class:"text-lg sm:text-xl"},{default:a(()=>s[144]||(s[144]=[n("Confirm Deletion")])),_:1}),t(e(pe),{class:"text-xs sm:text-sm"},{default:a(()=>s[145]||(s[145]=[n("This action cannot be undone.")])),_:1})]),_:1}),t(e(De),{class:"px-4 sm:px-6 flex gap-2"},{default:a(()=>[t(e(y),{variant:"outline",onClick:s[33]||(s[33]=d=>Z.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>s[146]||(s[146]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:xt,class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>s[147]||(s[147]=[n("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:K.value,"onUpdate:open":s[36]||(s[36]=d=>K.value=d)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[t(e(ce),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(xe),{class:"text-lg sm:text-xl"},{default:a(()=>[n("Delete "+m(z.value.length)+" Orders?",1)]),_:1}),t(e(pe),{class:"text-xs sm:text-sm"},{default:a(()=>s[148]||(s[148]=[n("This action cannot be undone.")])),_:1})]),_:1}),t(e(De),{class:"px-4 sm:px-6 flex gap-2"},{default:a(()=>[t(e(y),{variant:"outline",onClick:s[35]||(s[35]=d=>K.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>s[149]||(s[149]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:Xe,class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>s[150]||(s[150]=[n("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:T.value,"onUpdate:open":s[39]||(s[39]=d=>T.value=d)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:a(()=>[t(e(ce),null,{default:a(()=>[t(e(xe),null,{default:a(()=>s[151]||(s[151]=[n("Manage Areas of Concern")])),_:1}),t(e(pe),{class:"text-sm sm:text-base"},{default:a(()=>s[152]||(s[152]=[n("Add or remove areas of concern for repair orders.")])),_:1})]),_:1}),l("div",An,[l("form",{onSubmit:oe(yt,["prevent"]),class:"space-y-3 sm:space-y-4"},[l("div",In,[t(e(U),{for:"concern"},{default:a(()=>s[153]||(s[153]=[n("Area of Concern")])),_:1}),t(e(ee),{id:"concern",modelValue:e(k).concern,"onUpdate:modelValue":s[37]||(s[37]=d=>e(k).concern=d),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(y),{type:"submit",class:"w-full"},{default:a(()=>s[154]||(s[154]=[n("Add Area of Concern")])),_:1})],32),l("div",On,[l("div",Mn,[t(e(_e),null,{default:a(()=>[t(e(he),{class:"sticky top-0 z-10 bg-background"},{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>s[155]||(s[155]=[n("Area of Concern")])),_:1}),t(e(S),{class:"w-20 text-xs sm:text-sm"},{default:a(()=>s[156]||(s[156]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[g.areasOfConcern.length?x("",!0):(o(),w(e(L),{key:0},{default:a(()=>[t(e(C),{colspan:"2",class:"py-4 text-center text-sm"},{default:a(()=>s[157]||(s[157]=[n("No areas of concern found.")])),_:1})]),_:1})),(o(!0),u($,null,N(O.areasOfConcern,d=>(o(),w(e(L),{key:d.id},{default:a(()=>[t(e(C),{class:"text-xs sm:text-sm"},{default:a(()=>[n(m(d.concern)+" ",1),d.deleted_at?(o(),u("span",Nn,"(Deleted)")):x("",!0)]),_:2},1024),t(e(C),null,{default:a(()=>[l("div",Un,[d.deleted_at?(o(),w(e(y),{key:0,onClick:D=>kt(d.id),variant:"outline",size:"sm"},{default:a(()=>[t(f,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),d.deleted_at?x("",!0):(o(),w(e(y),{key:1,onClick:D=>bt(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(De),null,{default:a(()=>[t(e(y),{onClick:s[38]||(s[38]=d=>T.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>s[158]||(s[158]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:te.value,"onUpdate:open":s[42]||(s[42]=d=>te.value=d)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:a(()=>[t(e(ce),null,{default:a(()=>[t(e(xe),null,{default:a(()=>s[159]||(s[159]=[n("Manage Vendors")])),_:1}),t(e(pe),{class:"text-sm sm:text-base"},{default:a(()=>s[160]||(s[160]=[n("Add or remove vendors for repair orders.")])),_:1})]),_:1}),l("div",Tn,[l("form",{onSubmit:oe(ht,["prevent"]),class:"space-y-3 sm:space-y-4"},[l("div",Fn,[t(e(U),{for:"vendor_name"},{default:a(()=>s[161]||(s[161]=[n("Vendor Name")])),_:1}),t(e(ee),{id:"vendor_name",modelValue:e(P).vendor_name,"onUpdate:modelValue":s[40]||(s[40]=d=>e(P).vendor_name=d),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(y),{type:"submit",class:"w-full"},{default:a(()=>s[162]||(s[162]=[n("Add Vendor")])),_:1})],32),l("div",En,[l("div",Rn,[t(e(_e),null,{default:a(()=>[t(e(he),{class:"sticky top-0 z-10 bg-background"},{default:a(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background"},{default:a(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>s[163]||(s[163]=[n("Vendor Name")])),_:1}),t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>s[164]||(s[164]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[O.vendors.length===0?(o(),w(e(L),{key:0},{default:a(()=>[t(e(C),{colspan:"2",class:"py-4 text-center text-sm"},{default:a(()=>s[165]||(s[165]=[n("No vendors found.")])),_:1})]),_:1})):x("",!0),(o(!0),u($,null,N(O.vendors,d=>(o(),w(e(L),{key:d.id},{default:a(()=>[t(e(C),{class:"text-xs sm:text-sm"},{default:a(()=>[n(m(d.vendor_name)+" ",1),d.deleted_at?(o(),u("span",zn,"(Deleted)")):x("",!0)]),_:2},1024),t(e(C),null,{default:a(()=>[l("div",Bn,[d.deleted_at?(o(),w(e(y),{key:0,onClick:D=>Ct(d.id),variant:"outline",size:"sm"},{default:a(()=>[t(f,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),d.deleted_at?x("",!0):(o(),w(e(y),{key:1,onClick:D=>Je(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),d.deleted_at?(o(),w(e(y),{key:2,onClick:D=>me(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(f,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(De),null,{default:a(()=>[t(e(y),{onClick:s[41]||(s[41]=d=>te.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>s[166]||(s[166]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:ie.value,"onUpdate:open":s[45]||(s[45]=d=>ie.value=d)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:a(()=>[t(e(ce),null,{default:a(()=>[t(e(xe),null,{default:a(()=>s[167]||(s[167]=[n("Manage Work Order Statuses")])),_:1}),t(e(pe),{class:"text-sm sm:text-base"},{default:a(()=>s[168]||(s[168]=[n(" Add or remove work order statuses for repair orders. ")])),_:1})]),_:1}),l("div",Ln,[l("form",{onSubmit:oe(r,["prevent"]),class:"space-y-3 sm:space-y-4"},[l("div",Pn,[t(e(U),{for:"status_name"},{default:a(()=>s[169]||(s[169]=[n("Status Name")])),_:1}),t(e(ee),{id:"status_name",modelValue:e(W).name,"onUpdate:modelValue":s[43]||(s[43]=d=>e(W).name=d),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(y),{type:"submit",class:"w-full"},{default:a(()=>s[170]||(s[170]=[n("Add Work Order Status")])),_:1})],32),l("div",qn,[l("div",jn,[t(e(_e),null,{default:a(()=>[t(e(he),{class:"sticky top-0 z-10 bg-background"},{default:a(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background"},{default:a(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>s[171]||(s[171]=[n("Status Name")])),_:1}),t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>s[172]||(s[172]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[g.woStatuses.length?x("",!0):(o(),w(e(L),{key:0},{default:a(()=>[t(e(C),{colspan:"2",class:"py-4 text-center text-sm"},{default:a(()=>s[173]||(s[173]=[n("No work order statuses found.")])),_:1})]),_:1})),(o(!0),u($,null,N(g.woStatuses,d=>(o(),w(e(L),{key:d.id},{default:a(()=>[t(e(C),{class:"text-xs sm:text-sm"},{default:a(()=>[n(m(d.name)+" ",1),d.deleted_at?(o(),u("span",Wn,"(Deleted)")):x("",!0)]),_:2},1024),t(e(C),null,{default:a(()=>[l("div",Qn,[d.deleted_at?(o(),w(e(y),{key:0,onClick:D=>A(d.id),variant:"outline",size:"sm"},{default:a(()=>[t(f,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),d.deleted_at?x("",!0):(o(),w(e(y),{key:1,onClick:D=>v(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),d.deleted_at?(o(),w(e(y),{key:2,onClick:D=>qe(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(f,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(De),null,{default:a(()=>[t(e(y),{onClick:s[44]||(s[44]=d=>ie.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>s[174]||(s[174]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ve),{open:ge.value,"onUpdate:open":s[47]||(s[47]=d=>ge.value=d)},{default:a(()=>[t(e(fe),{class:"max-h-[90vh] max-w-[95vw] overflow-y-auto md:max-w-[80vw] lg:max-w-4xl"},{default:a(()=>{var d;return[t(e(ce),null,{default:a(()=>[t(e(xe),{class:"flex items-center gap-2 text-lg md:text-xl"},{default:a(()=>[t(f,{name:"alert-triangle",class:"h-5 w-5 text-red-600"}),s[175]||(s[175]=n(" Canceled Invoices on QS "))]),_:1}),t(e(pe),null,{default:a(()=>s[176]||(s[176]=[n(" These invoices have a canceled WO status but are still marked as on QS. Please review and take appropriate action. ")])),_:1})]),_:1}),l("div",Hn,[(d=g.canceledQSInvoices)!=null&&d.length?(o(),w(e(_e),{key:0},{default:a(()=>[t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(S),{class:"whitespace-nowrap"},{default:a(()=>s[177]||(s[177]=[n("RO Number")])),_:1}),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>s[178]||(s[178]=[n("Vendor")])),_:1}),t(e(S),{class:"whitespace-nowrap text-right"},{default:a(()=>s[179]||(s[179]=[n("Amount")])),_:1}),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>s[180]||(s[180]=[n("Week")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[(o(!0),u($,null,N(g.canceledQSInvoices,D=>(o(),w(e(L),{key:D.ro_number,class:"hover:bg-red-50 dark:hover:bg-red-900/30"},{default:a(()=>[t(e(C),{class:"font-medium"},{default:a(()=>[l("div",Yn,[t(f,{name:"alert-triangle",class:"h-4 w-4 text-red-600 dark:text-red-400"}),n(" "+m(D.ro_number),1)])]),_:2},1024),t(e(C),null,{default:a(()=>[n(m(D.vendor_name),1)]),_:2},1024),t(e(C),{class:"text-right"},{default:a(()=>[n(m(Ee(D.invoice_amount)),1)]),_:2},1024),t(e(C),null,{default:a(()=>[n("W"+m(D.week_number)+"/"+m(D.year),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(o(),u("div",Gn," No canceled QS invoices found. "))]),t(e(De),{class:"mt-4 flex flex-col gap-2 sm:flex-row"},{default:a(()=>[t(e(y),{onClick:s[46]||(s[46]=D=>ge.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>s[181]||(s[181]=[n("Close")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]),t(e(ve),{open:ue.value,"onUpdate:open":s[51]||(s[51]=d=>ue.value=d)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:a(()=>{var d,D,Ye;return[t(e(ce),{class:"px-4 sm:px-6 border-b pb-3"},{default:a(()=>[l("div",Kn,[t(f,{name:"upload",class:"h-5 w-5 text-primary"}),t(e(xe),{class:"text-lg sm:text-xl font-semibold"},{default:a(()=>s[182]||(s[182]=[n(" Import Repair Orders ")])),_:1})]),t(e(pe),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:a(()=>s[183]||(s[183]=[n(" Choose an import format, then upload a CSV. The file will be validated before import. ")])),_:1})]),_:1}),l("div",Zn,[F.value?(o(),u("div",vr,[l("div",cr,[l("div",xr,[t(e(je),{variant:"outline",class:"text-xs"},{default:a(()=>[n(m(b.value==="template"?"Template Import":"QuickSight Import"),1)]),_:1}),J.value&&b.value==="quicksight"&&se.value?(o(),w(e(je),{key:0,variant:"outline",class:"text-xs"},{default:a(()=>[n(" Tenant ID: "+m(se.value),1)]),_:1})):x("",!0)])]),(d=F.value.headers)!=null&&d.length?(o(),u("div",gr,[l("div",wr,[s[196]||(s[196]=l("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),l("div",yr,m(F.value.headers.length)+" columns ",1)]),l("div",br,[(o(!0),u($,null,N(F.value.headers,Y=>(o(),u("span",{key:Y,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},m(Y),1))),128))])])):x("",!0),l("div",kr,[t(e(Se),{class:"border-2"},{default:a(()=>[t(e($e),{class:"p-4 text-center"},{default:a(()=>[l("div",_r,m(F.value.summary.total),1),s[197]||(s[197]=l("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),t(e(Se),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:a(()=>[t(e($e),{class:"p-4 text-center"},{default:a(()=>[l("div",hr,m(F.value.summary.valid),1),s[198]||(s[198]=l("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),t(e(Se),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:a(()=>[t(e($e),{class:"p-4 text-center"},{default:a(()=>[l("div",Cr,m(F.value.summary.invalid),1),s[199]||(s[199]=l("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),F.value.header_error?(o(),w(e(Te),{key:1,variant:"destructive"},{default:a(()=>[t(e(Ne),{class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"alert_circle",class:"h-5 w-5"}),s[200]||(s[200]=n(" Header Error "))]),_:1}),t(e(Ue),null,{default:a(()=>[n(m(F.value.header_error),1)]),_:1})]),_:1})):x("",!0),(D=F.value.invalid)!=null&&D.length?(o(),u("div",Sr,[l("div",$r,[l("h3",Vr,[t(f,{name:"alert-triangle",class:"h-5 w-5"}),n(" Validation Errors ("+m(F.value.invalid.length)+") ",1)]),t(e(y),{onClick:Kt,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"download",class:"h-4 w-4"}),s[201]||(s[201]=n(" Download Error Report "))]),_:1})]),l("div",Dr,[l("div",Ar,[t(e(_e),null,{default:a(()=>[t(e(he),{class:"sticky top-0 bg-background"},{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(S),{class:"w-20"},{default:a(()=>s[202]||(s[202]=[n("Row #")])),_:1}),t(e(S),null,{default:a(()=>s[203]||(s[203]=[n("Preview")])),_:1}),t(e(S),null,{default:a(()=>s[204]||(s[204]=[n("Errors")])),_:1}),Ke.value?(o(),w(e(S),{key:0},{default:a(()=>s[205]||(s[205]=[n("Warnings")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[(o(!0),u($,null,N(F.value.invalid,Y=>(o(),w(e(L),{key:Y.rowNumber,class:"hover:bg-muted/50"},{default:a(()=>[t(e(C),{class:"font-medium"},{default:a(()=>[n(m(Y.rowNumber),1)]),_:2},1024),t(e(C),{class:"text-sm text-muted-foreground"},{default:a(()=>[l("div",Ir,[(o(!0),u($,null,N(Y.preview,ke=>(o(),u("span",{key:ke.key,class:"whitespace-nowrap"},[l("span",Or,m(ke.label)+":",1),n(" "+m(ke.value),1)]))),128))])]),_:2},1024),t(e(C),null,{default:a(()=>[l("div",Mr,[(o(!0),u($,null,N(Y.errors,(ke,$t)=>(o(),u("div",{key:$t,class:"text-xs text-red-600 flex items-start gap-1"},[t(f,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),l("span",null,m(ke),1)]))),128))])]),_:2},1024),Ke.value?(o(),w(e(C),{key:0},{default:a(()=>{var ke;return[l("div",Nr,[(o(!0),u($,null,N(Y.warnings,($t,Zt)=>(o(),u("div",{key:Zt,class:"text-xs text-yellow-600 flex items-start gap-1"},[t(f,{name:"alert-triangle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),l("span",null,m($t),1)]))),128)),(ke=Y.warnings)!=null&&ke.length?x("",!0):(o(),u("div",Ur," — "))])]}),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1})]),_:1})])])])):x("",!0),(Ye=F.value.valid)!=null&&Ye.length?(o(),u("div",Tr,[l("h3",Fr,[t(f,{name:"check-circle",class:"h-5 w-5"}),n(" Valid Rows ("+m(F.value.valid.length)+") ",1)]),s[208]||(s[208]=l("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),l("div",Er,[t(e(_e),null,{default:a(()=>[t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(S),null,{default:a(()=>s[206]||(s[206]=[n("Row #")])),_:1}),t(e(S),null,{default:a(()=>s[207]||(s[207]=[n("Preview")])),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[(o(!0),u($,null,N(F.value.valid.slice(0,5),Y=>(o(),w(e(L),{key:Y.rowNumber},{default:a(()=>[t(e(C),{class:"font-medium"},{default:a(()=>[n(m(Y.rowNumber),1)]),_:2},1024),t(e(C),{class:"text-sm"},{default:a(()=>[l("div",Rr,[(o(!0),u($,null,N(Y.preview,ke=>(o(),u("span",{key:ke.key,class:"whitespace-nowrap"},[l("span",zr,m(ke.label)+":",1),n(" "+m(ke.value),1)]))),128))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):x("",!0)])):(o(),u("div",Xn,[l("div",Jn,[l("div",er,[l("div",tr,[t(f,{name:"sliders",class:"h-4 w-4 text-muted-foreground"}),s[184]||(s[184]=l("div",{class:"text-sm font-semibold"},"Import format",-1))]),l("div",sr,[l("label",{class:ye(["flex items-start gap-3 rounded-md border p-3 cursor-pointer hover:bg-muted/20 transition-colors",b.value==="template"?"border-primary bg-primary/5":""])},[Q(l("input",{type:"radio",class:"mt-1",value:"template","onUpdate:modelValue":s[48]||(s[48]=Y=>b.value=Y),disabled:ae.value},null,8,lr),[[Tt,b.value]]),s[185]||(s[185]=l("div",{class:"space-y-1"},[l("div",{class:"text-sm font-medium"},"Template Import"),l("div",{class:"text-xs text-muted-foreground"}," Uses the standard Repair Orders CSV template (download below). ")],-1))],2),l("label",{class:ye(["flex items-start gap-3 rounded-md border p-3 cursor-pointer hover:bg-muted/20 transition-colors",b.value==="quicksight"?"border-primary bg-primary/5":""])},[Q(l("input",{type:"radio",class:"mt-1",value:"quicksight","onUpdate:modelValue":s[49]||(s[49]=Y=>b.value=Y),disabled:ae.value},null,8,ar),[[Tt,b.value]]),s[186]||(s[186]=l("div",{class:"space-y-1"},[l("div",{class:"text-sm font-medium"},"QuickSight CSV Import"),l("div",{class:"text-xs text-muted-foreground"}," Upload a QuickSight-exported CSV and we’ll map columns automatically. ")],-1))],2)]),J.value&&b.value==="quicksight"?(o(),u("div",nr,[t(e(U),{class:"flex items-center gap-1.5 mb-2 text-sm font-medium"},{default:a(()=>[t(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),s[187]||(s[187]=n(" Company (required for QuickSight import) "))]),_:1}),l("div",rr,[Q(l("select",{"onUpdate:modelValue":s[50]||(s[50]=Y=>se.value=Y),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",disabled:ae.value},[s[188]||(s[188]=l("option",{value:""},"Select a company",-1)),(o(!0),u($,null,N(O.tenants,Y=>(o(),u("option",{key:Y.id,value:Y.id},m(Y.name),9,dr))),128))],8,or),[[le,se.value]]),s[189]||(s[189]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))]),J.value&&b.value==="quicksight"&&!se.value?(o(),w(e(Te),{key:0,variant:"destructive",class:"mt-3"},{default:a(()=>[t(e(Ne),{class:"flex items-center gap-2"},{default:a(()=>[t(f,{name:"alert_circle",class:"h-5 w-5"}),s[190]||(s[190]=n(" Required "))]),_:1}),t(e(Ue),null,{default:a(()=>s[191]||(s[191]=[n(" Please select a company before validating a QuickSight CSV. ")])),_:1})]),_:1})):x("",!0)])):x("",!0)]),l("div",{class:ye(["flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20 transition-colors",{"border-primary bg-primary/5":ne.value,"opacity-60 pointer-events-none":ae.value}]),onDragenter:oe(Wt,["prevent"]),onDragover:oe(Qt,["prevent"]),onDragleave:oe(Ht,["prevent"]),onDrop:oe(Yt,["prevent"])},[t(f,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),s[193]||(s[193]=l("div",{class:"text-center"},[l("div",{class:"text-sm font-medium"},[l("span",{class:"text-primary"},"Drag & drop"),n(" your CSV here ")]),l("p",{class:"text-xs text-muted-foreground mt-1"},"or")],-1)),l("label",ir,[s[192]||(s[192]=l("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),l("input",{ref_key:"importFileInput",ref:be,type:"file",class:"hidden",onChange:jt,accept:".csv,text/csv",disabled:ae.value||J.value&&b.value==="quicksight"&&!se.value},null,40,ur)]),s[194]||(s[194]=l("p",{class:"text-xs text-muted-foreground mt-2"},"CSV only",-1)),ne.value?(o(),u("div",mr," Drop file to validate ")):x("",!0)],34),b.value==="template"?(o(),u("div",fr,[t(f,{name:"info",class:"h-4 w-4"}),l("a",{href:Pr,download:"",class:"text-primary hover:underline"}," Download CSV Template ")])):x("",!0),ae.value?(o(),u("div",pr,s[195]||(s[195]=[l("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),l("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):x("",!0)])]))]),l("div",Br,[t(e(y),{onClick:Mt,variant:"outline",disabled:X.value},{default:a(()=>s[209]||(s[209]=[n(" Close ")])),_:1},8,["disabled"]),F.value&&F.value.summary.valid>0?(o(),w(e(y),{key:0,onClick:Gt,variant:"default",disabled:X.value||F.value.summary.invalid>0||!!F.value.header_error,class:"flex items-center gap-2"},{default:a(()=>[X.value?(o(),u("div",Lr)):(o(),w(f,{key:1,name:"check",class:"h-4 w-4"})),n(" "+m(X.value?"Importing...":`Import ${F.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):x("",!0)])]}),_:1})]),_:1},8,["open"])],64)}}}),jr=ls(qr,[["__scopeId","data-v-2355426c"]]),Wr={class:"bg-card rounded-lg border shadow-sm p-4 md:p-6 mb-6"},Qr={class:"flex justify-between items-center mb-4"},Hr={class:"overflow-x-auto max-h-80"},Yr={class:"flex justify-center space-x-2"},Gr={key:0,class:"border-t mt-4 px-4 py-3 bg-muted/20"},Kr={class:"flex flex-col sm:flex-row items-center justify-between gap-2"},Zr={class:"text-sm text-muted-foreground"},Xr={class:"flex flex-wrap gap-2"},Jr={class:"grid grid-cols-2 gap-4"},eo={key:0,class:"grid grid-cols-2 gap-4"},to={class:"mt-1"},so={class:"mt-1"},lo=nt({__name:"MilesDrivenTable",props:{milesEntries:{},tenantSlug:{},permissions:{}},setup(O){const g=O,V=h(!1),E=h("week_start_date"),z=h("desc"),R=h(1),q=h(10),H=h(!1),I=Me({id:null,year:"",week_number:"",week_start_date:"",week_end_date:"",miles:"",notes:""}),j=B(()=>{const _=[...g.milesEntries];return _.sort((i,k)=>{let P=i[E.value],W=k[E.value];return P>W?z.value==="asc"?1:-1:P<W?z.value==="asc"?-1:1:0}),_}),Z=B(()=>Math.ceil(j.value.length/q.value)),K=B(()=>{const _=(R.value-1)*q.value,i=_+q.value;return j.value.slice(_,i)}),T=B(()=>{const _=[];if(Z.value<=5)for(let k=1;k<=Z.value;k++)_.push(k);else{let k=Math.max(1,R.value-Math.floor(2.5)),P=Math.min(Z.value,k+5-1);P===Z.value&&(k=Math.max(1,P-5+1));for(let W=k;W<=P;W++)_.push(W)}return _});function te(_){_<1||_>Z.value||(R.value=_)}function ie(_){E.value===_?z.value=z.value==="asc"?"desc":"asc":(E.value=_,z.value="asc"),R.value=1}function ue(_=null){if(I.reset(),I.clearErrors(),_){I.id=_.id,I.week_start_date=_.week_start_date,I.week_end_date=_.week_end_date,I.miles=_.miles,I.notes=_.notes;const i=new Date(_.week_start_date),k=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()));k.setUTCDate(k.getUTCDate()+4-(k.getUTCDay()||7));const P=k.getUTCFullYear(),W=Math.ceil(((k-Date.UTC(P,0,1))/864e5+1)/7)+1;I.year=P,I.week_number=W}V.value=!0}function F(){const _=+I.year,i=+I.week_number;if(!_||!i){I.week_start_date="",I.week_end_date="";return}const k=new Date(Date.UTC(_,0,4)),P=k.getUTCDay()||7;k.setUTCDate(k.getUTCDate()+(i-1)*7+(1-P));const W=new Date(k);W.setUTCDate(k.getUTCDate()-1);const J=new Date(W);J.setUTCDate(W.getUTCDate()+6),I.week_start_date=W.toISOString().slice(0,10),I.week_end_date=J.toISOString().slice(0,10)}function ae(){const _=I.id?"miles_driven.update":"miles_driven.store",i=I.id?{tenantSlug:g.tenantSlug,milesDriven:I.id}:{tenantSlug:g.tenantSlug};I[I.id?"put":"post"](Ft(_,i),{preserveScroll:!0,onSuccess:()=>{V.value=!1}})}const X=h(null);function b(_){X.value=_,H.value=!0}function se(){if(!X.value)return;const _="miles_driven.destroy",i={tenantSlug:g.tenantSlug,milesDriven:X.value.id};I.delete(Ft(_,i),{preserveScroll:!0,onSuccess:()=>{H.value=!1,X.value=null}})}function be(_){if(!_)return"";const i=new Date(_);return new Date(i.getTime()+i.getTimezoneOffset()*6e4).toLocaleDateString()}function ne(_){return Number(_).toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4})}const M=B(()=>g.permissions.map(_=>_.name));return(_,i)=>(o(),u("div",Wr,[l("div",Qr,[i[14]||(i[14]=l("h3",{class:"text-base md:text-xl font-semibold"}," Miles Driven ",-1)),M.value.includes("miles-driven.create")?(o(),w(e(y),{key:0,onClick:i[0]||(i[0]=k=>ue()),variant:"default"},{default:a(()=>[t(f,{name:"plus",class:"mr-2 h-4 w-4"}),i[13]||(i[13]=l("span",null,"Add Miles Driven",-1))]),_:1})):x("",!0)]),l("div",Hr,[t(e(_e),{class:"w-full table-auto"},{default:a(()=>[t(e(he),null,{default:a(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background"},{default:a(()=>[t(e(S),{class:"cursor-pointer px-4 py-2 text-left",onClick:i[1]||(i[1]=k=>ie("week_start_date"))},{default:a(()=>[i[15]||(i[15]=n(" Week Start ")),l("span",null,[E.value==="week_start_date"&&z.value==="asc"?(o(),w(f,{key:0,name:"chevron-up"})):E.value==="week_start_date"&&z.value==="desc"?(o(),w(f,{key:1,name:"chevron-down"})):(o(),w(f,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),t(e(S),{class:"cursor-pointer px-4 py-2 text-left",onClick:i[2]||(i[2]=k=>ie("week_end_date"))},{default:a(()=>[i[16]||(i[16]=n(" Week End ")),l("span",null,[E.value==="week_end_date"&&z.value==="asc"?(o(),w(f,{key:0,name:"chevron-up"})):E.value==="week_end_date"&&z.value==="desc"?(o(),w(f,{key:1,name:"chevron-down"})):(o(),w(f,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),t(e(S),{class:"cursor-pointer px-4 py-2 text-left",onClick:i[3]||(i[3]=k=>ie("miles"))},{default:a(()=>[i[17]||(i[17]=n(" Miles ")),l("span",null,[E.value==="miles"&&z.value==="asc"?(o(),w(f,{key:0,name:"chevron-up"})):E.value==="miles"&&z.value==="desc"?(o(),w(f,{key:1,name:"chevron-down"})):(o(),w(f,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),M.value.includes("miles-driven.update")||M.value.includes("miles-driven.delete")?(o(),w(e(S),{key:0,class:"text-center px-4 py-2"},{default:a(()=>i[18]||(i[18]=[n(" Actions ")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(Ce),null,{default:a(()=>[(o(!0),u($,null,N(K.value,k=>(o(),w(e(L),{key:k.id,class:"border-b hover:bg-muted/20"},{default:a(()=>[t(e(C),{class:"px-4 py-3"},{default:a(()=>[n(m(be(k.week_start_date)),1)]),_:2},1024),t(e(C),{class:"px-4 py-3"},{default:a(()=>[n(m(be(k.week_end_date)),1)]),_:2},1024),t(e(C),{class:"px-4 py-3"},{default:a(()=>[n(m(ne(k.miles)),1)]),_:2},1024),M.value.includes("miles-driven.update")||M.value.includes("miles-driven.delete")?(o(),w(e(C),{key:0,class:"text-center px-4 py-3"},{default:a(()=>[l("div",Yr,[M.value.includes("miles-driven.update")?(o(),w(e(y),{key:0,variant:"outline",size:"sm",onClick:P=>ue(k)},{default:a(()=>[t(f,{name:"pencil",class:"mr-1 h-4 w-4"}),i[19]||(i[19]=l("span",null,"Edit",-1))]),_:2},1032,["onClick"])):x("",!0),M.value.includes("miles-driven.delete")?(o(),w(e(y),{key:1,variant:"destructive",size:"sm",onClick:P=>b(k)},{default:a(()=>[t(f,{name:"trash",class:"mr-1 h-4 w-4"}),i[20]||(i[20]=l("span",null,"Delete",-1))]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)):x("",!0)]),_:2},1024))),128)),_.milesEntries.length?x("",!0):(o(),w(e(L),{key:0},{default:a(()=>[t(e(C),{colspan:5,class:"py-4 text-center text-muted-foreground"},{default:a(()=>i[21]||(i[21]=[n(" No miles driven records found ")])),_:1})]),_:1}))]),_:1})]),_:1})]),Z.value>1?(o(),u("div",Gr,[l("div",Kr,[l("div",Zr," Showing "+m(K.value.length)+" of "+m(_.milesEntries.length)+" entries ",1),l("div",Xr,[t(e(y),{onClick:i[4]||(i[4]=k=>te(R.value-1)),disabled:R.value===1,variant:"ghost",size:"sm"},{default:a(()=>i[22]||(i[22]=[n(" Previous ")])),_:1},8,["disabled"]),(o(!0),u($,null,N(T.value,k=>(o(),w(e(y),{key:k,onClick:P=>te(k),variant:"ghost",size:"sm",class:ye({"border-primary bg-primary/10 text-primary":R.value===k})},{default:a(()=>[n(m(k),1)]),_:2},1032,["onClick","class"]))),128)),t(e(y),{onClick:i[5]||(i[5]=k=>te(R.value+1)),disabled:R.value===Z.value,variant:"ghost",size:"sm"},{default:a(()=>i[23]||(i[23]=[n(" Next ")])),_:1},8,["disabled"])])])])):x("",!0),t(e(ve),{open:V.value,"onUpdate:open":i[10]||(i[10]=k=>V.value=k)},{default:a(()=>[t(e(fe),{class:"sm:max-w-md w-full max-h-[90vh] overflow-auto"},{default:a(()=>[t(e(ce),null,{default:a(()=>[t(e(xe),null,{default:a(()=>[n(m(e(I).id?"Edit Miles Driven":"Add Miles Driven"),1)]),_:1}),t(e(pe),{class:"text-muted-foreground"},{default:a(()=>[n(m(e(I).id?"Update this record.":"Fill in the new miles driven record."),1)]),_:1})]),_:1}),l("form",{onSubmit:oe(ae,["prevent"]),class:"grid gap-4 py-4"},[l("div",Jr,[l("div",null,[t(e(U),{for:"year"},{default:a(()=>i[24]||(i[24]=[n("Year")])),_:1}),t(e(ee),{id:"year",type:"number",modelValue:e(I).year,"onUpdate:modelValue":i[6]||(i[6]=k=>e(I).year=k),modelModifiers:{number:!0},min:"2000",max:"2100",onInput:F},null,8,["modelValue"])]),l("div",null,[t(e(U),{for:"week_number"},{default:a(()=>i[25]||(i[25]=[n("Week #")])),_:1}),t(e(ee),{id:"week_number",type:"number",modelValue:e(I).week_number,"onUpdate:modelValue":i[7]||(i[7]=k=>e(I).week_number=k),modelModifiers:{number:!0},min:"1",max:"53",onInput:F},null,8,["modelValue"])])]),e(I).week_start_date?(o(),u("div",eo,[l("div",null,[t(e(U),null,{default:a(()=>i[26]||(i[26]=[n("Start (Sun)")])),_:1}),l("p",to,m(be(e(I).week_start_date)),1)]),l("div",null,[t(e(U),null,{default:a(()=>i[27]||(i[27]=[n("End (Sat)")])),_:1}),l("p",so,m(be(e(I).week_end_date)),1)])])):x("",!0),l("div",null,[t(e(U),{for:"miles"},{default:a(()=>i[28]||(i[28]=[n("Miles")])),_:1}),t(e(ee),{id:"miles",modelValue:e(I).miles,"onUpdate:modelValue":i[8]||(i[8]=k=>e(I).miles=k),type:"number",step:"0.0001",min:"0",max:"999999.9999"},null,8,["modelValue"])]),t(e(De),{class:"mt-4"},{default:a(()=>[t(e(y),{variant:"outline",type:"button",onClick:i[9]||(i[9]=k=>V.value=!1)},{default:a(()=>i[29]||(i[29]=[n(" Cancel ")])),_:1}),t(e(y),{type:"submit",disabled:e(I).processing},{default:a(()=>i[30]||(i[30]=[n("Submit")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),t(e(ve),{open:H.value,"onUpdate:open":i[12]||(i[12]=k=>H.value=k)},{default:a(()=>[t(e(fe),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[t(e(ce),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(xe),{class:"text-lg sm:text-xl"},{default:a(()=>i[31]||(i[31]=[n("Confirm Deletion")])),_:1}),t(e(pe),{class:"text-xs sm:text-sm"},{default:a(()=>i[32]||(i[32]=[n(" Are you sure you want to delete this miles driven record? This action cannot be undone. ")])),_:1})]),_:1}),t(e(De),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(y),{type:"button",onClick:i[11]||(i[11]=k=>H.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>i[33]||(i[33]=[n(" Cancel ")])),_:1}),t(e(y),{type:"button",onClick:se,variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>i[34]||(i[34]=[n(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),ao={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},no={class:"border-b"},ro={class:"flex justify-center space-x-8 px-0 pt-4"},oo={key:0,class:"flex justify-center items-center p-12"},io={key:1,class:"p-0"},Fo=nt({__name:"AssetMaintenance",props:{entries:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},repairOrders:{type:Object,default:()=>({data:[],links:[]})},dateRange:{type:Object,default:null},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},dateFilter:{type:String,default:"yesterday"},tenantSlug:String,SuperAdmin:Boolean,perPage:{type:Number,default:10},openedComponent:{type:String,default:"repairOrders"},milesEntries:Array,permissions:Array},setup(O){const g=O,V=h(!1),E=h(""),z=h(""),R=h(g.openedComponent||"trucks"),q=B(()=>[{title:g.tenantSlug?"Dashboard":"Admin Dashboard",href:g.tenantSlug?route("dashboard",{tenantSlug:g.tenantSlug}):route("admin.dashboard")},{title:"Asset Maintenance",href:"#"}]),H=B(()=>R.value==="trucks"?Nl:R.value==="milesDriven"?lo:jr),I=B(()=>g.permissions.map(K=>K.name)),j=B(()=>R.value==="trucks"?{entries:g.entries,tenantSlug:g.tenantSlug,SuperAdmin:g.SuperAdmin,tenants:g.tenants,trucks:g.trucks,vendors:g.vendors,areasOfConcern:g.areasOfConcern,permissions:g.permissions}:R.value==="milesDriven"?{milesEntries:g.milesEntries,tenantSlug:g.tenantSlug,permissions:g.permissions}:{repairOrders:g.repairOrders,tenantSlug:g.tenantSlug,SuperAdmin:g.SuperAdmin,tenants:g.tenants,trucks:g.trucks,vendors:g.vendors,areasOfConcern:g.areasOfConcern,dateRange:g.dateRange,woStatuses:g.woStatuses,weekNumber:g.weekNumber,startWeekNumber:g.startWeekNumber,endWeekNumber:g.endWeekNumber,year:g.year,canceledQSInvoices:g.canceledQSInvoices,outstandingInvoices:g.outstandingInvoices,workOrdersByTruck:g.workOrdersByTruck,workOrderByAreasOfConcern:g.workOrderByAreasOfConcern,filters:g.filters,dateFilter:g.dateFilter,perPage:g.perPage,permissions:g.permissions});function Z(K){V.value=!0,R.value=K;const T=new URL(window.location.href);T.search="",T.searchParams.set("openedComponent",K),window.history.replaceState({},"",T.href),setTimeout(()=>{V.value=!1},300)}return(K,T)=>(o(),w(Jt,{breadcrumbs:q.value,tenantSlug:O.tenantSlug,permissions:g.permissions},{default:a(()=>[t(e(Xt),{title:"Asset Maintenance"}),l("div",ao,[E.value?(o(),w(e(Te),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Ne),null,{default:a(()=>T[3]||(T[3]=[n("Success")])),_:1}),t(e(Ue),null,{default:a(()=>[n(m(E.value),1)]),_:1})]),_:1})):x("",!0),z.value?(o(),w(e(Te),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Ne),null,{default:a(()=>T[4]||(T[4]=[n("Error")])),_:1}),t(e(Ue),null,{default:a(()=>[n(m(z.value),1)]),_:1})]),_:1})):x("",!0),T[9]||(T[9]=l("div",{class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},[l("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Asset Maintenance "),l("div",{class:"flex flex-wrap gap-3 mt-2 sm:mt-0"})],-1)),t(e(Se),{class:"shadow-sm border bg-card"},{default:a(()=>[t(e($e),{class:"p-0"},{default:a(()=>[l("div",no,[l("div",ro,[I.value.includes("repair-orders.view")?(o(),w(e(y),{key:0,onClick:T[0]||(T[0]=te=>Z("repairOrders")),variant:"ghost",class:ye([[R.value==="repairOrders"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-0 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:a(()=>[t(f,{name:"clipboardList",class:"mr-2 h-4 w-4"}),T[5]||(T[5]=l("span",null,"Repair Orders",-1))]),_:1},8,["class"])):x("",!0),I.value.includes("miles-driven.view")?(o(),w(e(y),{key:1,onClick:T[1]||(T[1]=te=>Z("milesDriven")),variant:"ghost",class:ye([[R.value==="milesDriven"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:a(()=>[t(f,{name:"gauge",class:"mr-2 h-4 w-4"}),T[6]||(T[6]=l("span",null,"Miles Driven",-1))]),_:1},8,["class"])):x("",!0),I.value.includes("trucks.view")?(o(),w(e(y),{key:2,onClick:T[2]||(T[2]=te=>Z("trucks")),variant:"ghost",class:ye([[R.value==="trucks"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:a(()=>[t(f,{name:"truck",class:"mr-2 h-4 w-4"}),T[7]||(T[7]=l("span",null,"Trucks",-1))]),_:1},8,["class"])):x("",!0)])]),V.value?(o(),u("div",oo,T[8]||(T[8]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):(o(),u("div",io,[(o(),w(es(H.value),ts(ss(j.value)),null,16))]))]),_:1})]),_:1})])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}});export{Fo as default};
