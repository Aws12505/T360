import{e as lt,w as pe,H as u,i as d,X as t,G as b,B as a,j as s,O as i,E as z,Y as B,u as n,J as k,K as L,P as v,I as he,a3 as at,r as D,A as Se,aj as st,a as U,f as O,W as ot,ak as te,al as nt}from"./vendor-DQlNQ5gH.js";import{x as K,g as rt,W as R}from"./vendor-vue-CQn6KzTb.js";import{_ as N,a as de}from"./Label.vue_vue_type_script_setup_true_lang-BRq5T-WA.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-B-8911bK.js";import{_ as dt}from"./Checkbox.vue_vue_type_script_setup_true_lang-BXBwirKi.js";import{_ as M}from"./Icon.vue_vue_type_script_setup_true_lang-D_7hXODg.js";import{_ as it,a as ut,b as ye,c as ce,d as mt,e as le}from"./TableRow.vue_vue_type_script_setup_true_lang-tbX_6Hnu.js";import{_ as ve}from"./Card.vue_vue_type_script_setup_true_lang-yOexdr0W.js";import{_ as ct}from"./CardHeader.vue_vue_type_script_setup_true_lang-BXftwvVe.js";import{_ as ft}from"./CardTitle.vue_vue_type_script_setup_true_lang-OH7QXspQ.js";import{_ as ge}from"./CardContent.vue_vue_type_script_setup_true_lang-Dh-7LYTR.js";import{_ as ae,a as se,b as oe,c as ne,d as re}from"./DialogDescription.vue_vue_type_script_setup_true_lang-ffXSICao.js";import{_ as fe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CJ4mwW2I.js";import{_ as we,a as Ce,b as De}from"./AlertDescription.vue_vue_type_script_setup_true_lang-DGF9dqnu.js";import{_ as pt}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cf6itxCN.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-D2wO_Ovf.js";import"./vendor-ui-CGEGZLyF.js";import"./vendor-icons-pKobgiP0.js";import"./app-f_21pLqE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BpTGIYrD.js";const yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},vt={key:0,class:"col-span-full"},gt={class:"relative"},xt=["value"],bt={class:"col-span-full"},_t={class:"relative"},kt={class:"relative"},wt={class:"relative"},Ct=["value"],Dt={class:"relative"},ht={class:"flex items-center space-x-2"},St={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},$t=lt({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(f,{emit:r}){var h,C,F,$,Y,T,P;const x=f,V=r,p=K({id:(h=x.delay)==null?void 0:h.id,tenant_id:x.isSuperAdmin?(C=x.delay)==null?void 0:C.tenant_id:null,date:((F=x.delay)==null?void 0:F.date)||"",driver_name:(($=x.delay)==null?void 0:$.driver_name)||"",delay_type:((Y=x.delay)==null?void 0:Y.delay_type)||"origin",delay_category:((T=x.delay)==null?void 0:T.delay_category)||"1_120",delay_code_id:((P=x.delay)==null?void 0:P.delay_code_id)||null,disputed:x.delay&&x.delay.disputed!==null?parseInt(x.delay.disputed)===1:!1,driver_controllable:x.delay&&x.delay.driver_controllable!==null?parseInt(x.delay.driver_controllable)===1:null});pe(()=>x.delay,w=>{w?(p.id=w.id,p.tenant_id=w.tenant_id,p.date=w.date,p.driver_name=w.driver_name,p.delay_type=w.delay_type,p.delay_category=w.delay_category,p.delay_code_id=w.delay_code_id,p.disputed=w.disputed!==null?parseInt(w.disputed)===1:!1,p.driver_controllable=w.driver_controllable!==null?parseInt(w.driver_controllable)===1:null):p.reset()},{immediate:!0});const A=()=>{const w=!!p.id,m=x.isSuperAdmin?w?"ontime.update.admin":"ontime.store.admin":w?"ontime.update":"ontime.store",g=x.isSuperAdmin?w?{delay:p.id}:{}:w?{tenantSlug:x.tenantSlug,delay:p.id}:{tenantSlug:x.tenantSlug};p[w?"put":"post"](route(m,g),{onSuccess:()=>V("close")})};return(w,m)=>(d(),u("form",{onSubmit:he(A,["prevent"]),class:"space-y-6"},[t("div",yt,[f.isSuperAdmin?(d(),u("div",vt,[a(N,null,{default:s(()=>m[9]||(m[9]=[i("Company Name")])),_:1}),t("div",gt,[z(t("select",{"onUpdate:modelValue":m[0]||(m[0]=g=>n(p).tenant_id=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[m[10]||(m[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(d(!0),u(k,null,L(f.tenants,g=>(d(),u("option",{key:g.id,value:g.id},v(g.name),9,xt))),128))],512),[[B,n(p).tenant_id]]),m[11]||(m[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):b("",!0),t("div",bt,[a(N,null,{default:s(()=>m[12]||(m[12]=[i("Date")])),_:1}),a(de,{type:"date",modelValue:n(p).date,"onUpdate:modelValue":m[1]||(m[1]=g=>n(p).date=g),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(N,null,{default:s(()=>m[13]||(m[13]=[i("Driver Name")])),_:1}),a(de,{modelValue:n(p).driver_name,"onUpdate:modelValue":m[2]||(m[2]=g=>n(p).driver_name=g),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(N,null,{default:s(()=>m[14]||(m[14]=[i("Delay Type")])),_:1}),t("div",_t,[z(t("select",{"onUpdate:modelValue":m[3]||(m[3]=g=>n(p).delay_type=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[15]||(m[15]=[t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),512),[[B,n(p).delay_type]]),m[16]||(m[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(N,null,{default:s(()=>m[17]||(m[17]=[i("Delay Category")])),_:1}),t("div",kt,[z(t("select",{"onUpdate:modelValue":m[4]||(m[4]=g=>n(p).delay_category=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[18]||(m[18]=[t("option",{value:"1_120"},"1–120 min",-1),t("option",{value:"121_600"},"121–600 min",-1),t("option",{value:"601_plus"},"601+ min",-1)]),512),[[B,n(p).delay_category]]),m[19]||(m[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(N,null,{default:s(()=>m[20]||(m[20]=[i("Delay Code")])),_:1}),t("div",wt,[z(t("select",{"onUpdate:modelValue":m[5]||(m[5]=g=>n(p).delay_code_id=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(d(!0),u(k,null,L(f.delayCodes,g=>(d(),u("option",{key:g.id,value:g.id},v(g.code),9,Ct))),128))],512),[[B,n(p).delay_code_id]]),m[21]||(m[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(N,null,{default:s(()=>m[22]||(m[22]=[i("Driver Controllable")])),_:1}),t("div",Dt,[z(t("select",{"onUpdate:modelValue":m[6]||(m[6]=g=>n(p).driver_controllable=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[23]||(m[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[B,n(p).driver_controllable]]),m[24]||(m[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",ht,[a(dt,{checked:n(p).disputed,"onUpdate:checked":m[7]||(m[7]=g=>n(p).disputed=g),id:"disputed"},null,8,["checked"]),a(N,{for:"disputed"},{default:s(()=>m[25]||(m[25]=[i("Disputed")])),_:1})])]),t("div",St,[a(_,{type:"button",onClick:m[8]||(m[8]=g=>V("close")),variant:"outline",class:"w-full sm:w-auto"},{default:s(()=>m[26]||(m[26]=[i(" Cancel ")])),_:1}),a(_,{type:"submit",disabled:n(p).processing,class:"w-full sm:w-auto"},{default:s(()=>[i(v(n(p).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Tt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Nt={class:"text-base text-center font-semibold mb-2 md:mb-4"},At={key:0,class:"text-center text-sm py-4 text-primary font-medium"},Ft={class:"space-y-3"},Mt={class:"text-sm"},Ot={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},delayType:{type:String,default:""},totalDelays:{type:Number,default:-1}},setup(f){const r=f,x=V=>{const p=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],h=[...r.drivers].sort((C,F)=>F.total_penalty-C.total_penalty).map(C=>C.total_penalty).indexOf(V);return p[h]||"#6b7280"};return(V,p)=>(d(),u("div",Tt,[t("h3",Nt,v(f.title),1),i(" "+v(console.log(f.delayType))+" ",1),f.drivers.length===0?(d(),u("div",At,[f.totalDelays===0?(d(),u(k,{key:0},[f.delayType==="origin"?(d(),u(k,{key:0},[i(" No origin delays recorded. You're on track for Fantastic+ ! ")],64)):f.delayType==="destination"?(d(),u(k,{key:1},[i(" No destination delays recorded. You're on track for Fantastic+ ! ")],64)):(d(),u(k,{key:2},[i(" No delays recorded. You're on track for Fantastic+ ! ")],64))],64)):(d(),u(k,{key:1},[i(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(d(),u(k,{key:1},[p[0]||(p[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",Ft,[(d(!0),u(k,null,L(f.drivers,(A,h)=>(d(),u("div",{key:h,class:"flex justify-between items-center"},[t("span",Mt,v(A.driver_name),1),t("span",{class:"text-sm font-medium",style:at({color:x(A.total_penalty)})},v(A.total_penalty),5)]))),128))])],64))]))}},Ut={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Vt={class:"text-base text-center font-semibold mb-2 md:mb-4"},jt={class:"h-64"},zt={__name:"LineChart",props:{title:{type:String,default:"On-Time Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageOntime:{type:Number,default:null}},setup(f){const r=f,x=D(null);let V=null;const p=()=>{if(V&&V.destroy(),!x.value)return;const A=x.value.getContext("2d"),h=[];r.chartData.datasets.forEach($=>{$.data&&$.data.length&&h.push(...$.data)});const C=h.length>0?Math.min(...h):0,F=h.length>0?Math.max(...h):100;V=new st(A,{type:"line",data:r.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function($){const Y=$.raw||0,T=r.averageOntime||0,P=r.chartData.dateRangeLabel||"selected period",w=Number(T).toFixed(2);return[`On-Time Score: ${Y}`,`Average Score Over ${P}: ${w}`]}}}},scales:{y:{beginAtZero:!(C>10),min:Math.max(Math.floor(C-15),0),max:Math.min(110,Math.ceil(F+15)),ticks:{stepSize:5,padding:10,font:{size:11},callback:function($){return $<120?$:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return Se(()=>{p()}),pe(()=>r.chartData,()=>{p()},{deep:!0}),(A,h)=>(d(),u("div",Ut,[t("h3",Vt,v(f.title),1),t("div",jt,[t("canvas",{ref_key:"chartCanvas",ref:x},null,512)])]))}},Bt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 lg:p-6 flex flex-col items-center justify-center"},Pt={class:"text-base font-semibold mb-2 text-foreground"},Lt={class:"text-2xl font-bold text-primary"},Et={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(f){const r=f,x=U(()=>r.value===null||r.value===void 0||r.value===""?"No Data":r.value);return(V,p)=>(d(),u("div",Bt,[t("h3",Pt,v(f.title),1),t("p",Lt,v(x.value),1)]))}},Rt={class:"space-y-2 md:space-y-4 lg:space-y-6"},Wt={class:"grid grid-cols-1 gap-2 md:gap-4 lg:gap-6 sm:grid-cols-2 lg:grid-cols-4"},Yt={class:"grid grid-cols-1 gap-2 md:gap-4 lg:gap-6 lg:grid-cols-4"},It={__name:"OnTimeDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageOntime:{type:Number,default:null},currentDateFilter:{type:String,default:null},delayType:{type:String,default:"all"}},setup(f){const r=f,x=U(()=>r.metricsData&&r.metricsData.by_category?[{title:"Delayed for 1-120 Minutes",value:r.metricsData.between1_120Count},{title:"Delayed for 121-600 Minutes",value:r.metricsData.between121_600Count},{title:"Delayed for +601 Minutes",value:r.metricsData.moreThan601Count},{title:"Total Delayed Stops",value:r.metricsData.totalDelays}]:[]),V=U(()=>r.driversData&&r.driversData.length?r.driversData:[]),p=U(()=>r.chartData&&Object.keys(r.chartData).length?r.chartData:{});return(A,h)=>(d(),u("div",Rt,[t("div",Wt,[(d(!0),u(k,null,L(x.value,(C,F)=>(d(),O(Et,{key:F,title:C.title,value:C.value},null,8,["title","value"]))),128))]),t("div",Yt,[a(Ot,{title:"Bottom 5 Drivers",drivers:V.value,delayType:f.delayType,totalDelays:r.metricsData.totalDelays,class:"lg:col-span-1"},null,8,["drivers","delayType","totalDelays"]),r.currentDateFilter!="Yesterday"?(d(),O(zt,{key:0,title:"On-Time Score",chartData:p.value,averageOntime:f.averageOntime,class:"lg:col-span-3"},null,8,["chartData","averageOntime"])):b("",!0)])]))}},qt={class:"mx-auto w-full max-w-screen-xl space-y-2 p-2 md:space-y-4 md:p-4 lg:space-y-6 lg:p-6"},Ht={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},Gt={class:"flex flex-wrap gap-3"},Jt={class:"relative"},Kt={key:0,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},Qt={class:"py-1"},Xt={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},Zt=["href"],el=["action"],tl={class:"flex flex-col items-center gap-2 md:items-start"},ll={class:"flex flex-wrap gap-1 md:gap-2"},al={key:0,class:"text-sm text-muted-foreground"},sl={key:0},ol={key:1},nl={key:2},rl={key:3,class:"ml-1"},dl={key:2,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},il={class:"flex items-center justify-between"},ul={class:"flex items-center gap-2"},ml={key:0,class:"ml-4 flex flex-wrap gap-2"},cl={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fl={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},pl={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},yl={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},vl={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},gl={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},xl={class:"flex flex-col justify-between gap-1 md:gap-4"},bl={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},_l=["value"],kl={class:"flex justify-end"},wl={class:"overflow-x-auto"},Cl={class:"flex items-center justify-center"},Dl=["checked"],hl={class:"flex items-center"},Sl={key:2,class:"ml-2"},$l={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Tl={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Nl={key:3,class:"ml-2 opacity-50"},Al=["value"],Fl={key:0,class:"ml-1 text-xs text-red-500"},Ml={class:"flex space-x-2"},Ol={key:0,class:"border-t bg-muted/20 px-4 py-3"},Ul={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Vl={class:"text-sm text-muted-foreground"},jl={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},zl={class:"flex items-center gap-2"},Bl={class:"flex flex-wrap"},Pl=["innerHTML"],Ll={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},El={class:"flex items-center justify-between"},Rl={class:"max-h-[400px] overflow-y-auto rounded-md border"},Wl={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},Yl={key:1,class:"divide-y"},Il=["onClick"],ql={class:"text-xs font-medium sm:text-sm"},Hl={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},Gl={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},Jl={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},Kl={key:0,class:"space-y-4 rounded-md border p-4"},Ql={class:"text-sm font-medium sm:text-base"},Xl={class:"space-y-3"},Zl={class:"flex justify-end space-x-2"},ka={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},delay_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_ontime:{type:Number}},setup(f){const r=f,x=U(()=>(j.value==="yesterday"||j.value==="current-week")&&r.weekNumber&&r.year?`Week ${r.weekNumber}, ${r.year}`:(j.value==="6w"||j.value==="quarterly")&&r.startWeekNumber&&r.endWeekNumber&&r.year?`Weeks ${r.startWeekNumber}-${r.endWeekNumber}, ${r.year}`:""),V=[{title:r.tenantSlug?"Dashboard":"Admin Dashboard",href:r.tenantSlug?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin")}],p=D(!1),A=D(!1),h=D(null),C=D(""),F=D(""),$=D(!1),Y=D(null),T=D([]),P=D(!1),w=D(null),m=D(!1),g=D(null),E=D({code:"",description:""}),Q=D(!1),xe=D(null),I=D("date"),q=D("desc"),c=D({search:"",dateFrom:"",dateTo:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",controllable:""}),ie=["date","delay_type","driver_name","delay_category","delay_code","disputed","driver_controllable"],H=U(()=>{let o=[...r.delays.data];if(c.value.search){const e=c.value.search.toLowerCase();o=o.filter(l=>{var y,S,W,ee;return((y=l.driver_name)==null?void 0:y.toLowerCase().includes(e))||((S=l.delay_type)==null?void 0:S.toLowerCase().includes(e))||((ee=(W=l.delay_code)==null?void 0:W.code)==null?void 0:ee.toLowerCase().includes(e))})}if(c.value.dateFrom&&(o=o.filter(e=>e.date&&e.date>=c.value.dateFrom)),c.value.dateTo&&(o=o.filter(e=>e.date&&e.date<=c.value.dateTo)),c.value.delayCode&&(o=o.filter(e=>{var l;return((l=e.delay_code)==null?void 0:l.id)===parseInt(c.value.delayCode)})),c.value.delayType&&(o=o.filter(e=>e.delay_type===c.value.delayType)),c.value.delayCategory&&(o=o.filter(e=>e.delay_category===c.value.delayCategory)),c.value.disputed!==""){const e=c.value.disputed==="true";o=o.filter(l=>l.disputed===e)}if(c.value.controllable!=="")if(c.value.controllable==="null")o=o.filter(e=>e.driver_controllable===null);else{const e=c.value.controllable==="true";o=o.filter(l=>l.driver_controllable===e)}return o.sort((e,l)=>{var W,ee;let y,S;return I.value==="delay_code"?(y=((W=e.delay_code)==null?void 0:W.code)||"",S=((ee=l.delay_code)==null?void 0:ee.code)||""):(y=e[I.value],S=l[I.value]),y===null?1:S===null?-1:(typeof y=="string"&&(y=y.toLowerCase(),S=S.toLowerCase()),y<S?q.value==="asc"?-1:1:y>S?q.value==="asc"?1:-1:0)}),o}),$e=U(()=>r.delay_codes.filter(o=>!o.deleted_at));function Te(o){I.value===o?q.value=q.value==="asc"?"desc":"asc":(I.value=o,q.value="asc")}function G(){}function Ne(){c.value={search:"",dateFrom:"",dateTo:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",controllable:""}}const X=D(r.delays.per_page||10),j=D(r.dateFilter||"full");function Ae(){const o=r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin");R.get(o,{dateFilter:j.value,perPage:X.value},{preserveState:!0})}function ue(o){j.value=o;const e=r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin");R.get(e,{dateFilter:o,perPage:X.value},{preserveState:!0})}function Fe(o){if(o){const e=new URL(o);e.searchParams.set("perPage",X.value),e.searchParams.set("dateFilter",j.value),R.get(e.href,{},{only:["delays"]})}}function me(o){if(!o)return"";const e=o.split("-");if(e.length!==3)return o;const[l,y,S]=e;return`${Number(y)}/${Number(S)}/${l}`}const be=(o=null)=>{h.value=o,p.value=!0},Me=o=>{Y.value=o,$.value=!0},Oe=()=>{A.value=!0,m.value=!1,g.value=null},Ue=()=>{E.value={code:"",description:""},g.value=null,m.value=!0},Ve=o=>{E.value={code:o.code,description:o.description||""},g.value=o.id,m.value=!0},je=()=>{m.value=!1,g.value=null},ze=o=>{xe.value=o,Q.value=!0},J=D(!1),Be=U(()=>c.value.search||c.value.dateFrom||c.value.dateTo||c.value.delayCode||c.value.delayCategory||c.value.disputed||c.value.delayType||c.value.controllable),Pe=o=>{if(!o)return"";const e=r.delay_codes.find(l=>l.id===parseInt(o));return e?e.code:""},Le=async o=>{try{await R.delete(route("delay_codes.destroy.admin",o),{onSuccess:()=>{Q.value=!1,C.value="Delay code deleted successfully"}})}catch(e){console.error("Error deleting delay code:",e)}};function _e(o){if(!o)return"—";switch(o){case"1_120":return"1-120 mins";case"121_600":return"121-600 mins";case"601_plus":return"601+ mins";default:return o}}const Ee=()=>{const o=K({code:E.value.code,description:E.value.description}),e=g.value?r.isSuperAdmin?"delay_codes.update.admin":"delay_codes.update":r.isSuperAdmin?"delay_codes.store.admin":"delay_codes.store",l=g.value?r.isSuperAdmin?{id:g.value}:{tenantSlug:r.tenantSlug,id:g.value}:r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};(g.value?o.put:o.post).call(o,route(e,l),{onSuccess:()=>{C.value=g.value?"Delay code updated successfully.":"Delay code created successfully.",m.value=!1,g.value=null,R.reload({only:["delay_codes"]})},onError:S=>{console.error(S)}})},Re=o=>{K({}).post(route(r.isSuperAdmin?"delay_codes.restore.admin":"delay_codes.restore",{id:o}),{onSuccess:()=>{C.value="Delay code restored successfully.",R.reload({only:["delay_codes"]})},onError:l=>{console.error(l)}})},We=o=>{K({}).delete(route(r.isSuperAdmin?"delay_codes.forceDelete.admin":"delay_codes.forceDelete",{id:o}),{onSuccess:()=>{C.value="Delay code permanently deleted successfully.",R.reload({only:["delay_codes"]})},onError:l=>{console.error(l)}})},Ye=o=>{const e=K({}),l=r.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",y=r.isSuperAdmin?{delay:o}:{tenantSlug:r.tenantSlug,delay:o};e.delete(route(l,y),{preserveScroll:!0,onSuccess:()=>{C.value="Delay record deleted successfully.",$.value=!1}})};pe(C,o=>{o&&setTimeout(()=>{C.value=""},5e3)}),r.flash&&r.flash.error&&(F.value=r.flash.error),pe(F,o=>{o&&setTimeout(()=>{F.value=""},5e3)});const Ie=U(()=>{var l;if(!((l=r.delay_breakdown)!=null&&l.by_category))return null;const o=r.delay_breakdown.by_category,e=c.value.delayType;return e?{between1_120Count:o[`category_1_120_${e}_count`]||"0",between121_600Count:o[`category_121_600_${e}_count`]||"0",moreThan601Count:o[`category_601_plus_${e}_count`]||"0",totalDelays:o[`total_${e}_delays`]||"0",by_category:!0}:{between1_120Count:o.category_1_120_count||"0",between121_600Count:o.category_121_600_count||"0",moreThan601Count:o.category_601_plus_count||"0",totalDelays:o.total_delays||"0",by_category:!0}}),qe=U(()=>{var o,e,l;return c.value.delayType=="origin"?((o=r.delay_breakdown)==null?void 0:o.bottom_five_drivers.origin)||[]:c.value.delayType=="destination"?((e=r.delay_breakdown)==null?void 0:e.bottom_five_drivers.destination)||[]:((l=r.delay_breakdown)==null?void 0:l.bottom_five_drivers.total)||[]}),He=U(()=>!r.line_chart_data||r.line_chart_data.length===0?{labels:[],datasets:[{label:"On-Time Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}:{labels:r.line_chart_data.map(o=>o.date),datasets:[{label:"On-Time Performance",data:r.line_chart_data.map(o=>o.onTimePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}),Ge=U(()=>H.value.length>0&&T.value.length===H.value.length),ke=U(()=>r.delays.data&&r.delays.data.length>0);function Je(o){o.target.checked?T.value=H.value.map(e=>e.id):T.value=[]}function Ke(){T.value.length>0&&(P.value=!0)}function Qe(){const o=K({ids:T.value}),e=r.isSuperAdmin?"ontime.destroyBulk.admin":"ontime.destroyBulk",l=r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};o.delete(route(e,l),{preserveScroll:!0,onSuccess:()=>{C.value=`${T.value.length} delay records deleted successfully.`,T.value=[],P.value=!1,R.reload()},onError:y=>{console.error(y)}})}function Xe(o){const e=o.target.files[0];if(!e)return;const l=new FormData;l.append("csv_file",e);const y=r.isSuperAdmin?route("ontime.import.admin"):route("ontime.import",{tenantSlug:r.tenantSlug});R.post(y,l,{onSuccess:()=>{C.value="Delays imported successfully",o.target.value=""},onError:S=>{console.error(S),o.target.value=""}})}function Ze(){if(r.delays.data.length===0){F.value="No delay data found to export.";return}w.value&&w.value.submit()}const et=U(()=>r.tenantSlug?route("ontime.export",{tenantSlug:r.tenantSlug}):route("ontime.export.admin")),Z=D(!1),tt=U(()=>"/storage/upload-data-temps/Delays Template.csv");return Se(()=>{const o=e=>{Z.value&&!e.target.closest(".relative")&&(Z.value=!1)};document.addEventListener("click",o),ot(()=>{document.removeEventListener("click",o)})}),(o,e)=>(d(),O(pt,{breadcrumbs:V,tenantSlug:f.tenantSlug},{default:s(()=>[a(n(rt),{title:"On-Time"}),t("div",qt,[C.value?(d(),O(n(we),{key:0,variant:"success"},{default:s(()=>[a(n(Ce),null,{default:s(()=>e[32]||(e[32]=[i("Success")])),_:1}),a(n(De),null,{default:s(()=>[i(v(C.value),1)]),_:1})]),_:1})):b("",!0),F.value?(d(),O(n(we),{key:1,variant:"destructive"},{default:s(()=>[a(n(Ce),null,{default:s(()=>e[33]||(e[33]=[i("Error")])),_:1}),a(n(De),null,{default:s(()=>[i(v(F.value),1)]),_:1})]),_:1})):b("",!0),t("div",Ht,[e[39]||(e[39]=t("h1",{class:"text-lg font-bold md:text-xl lg:text-2xl"},"On-Time Management",-1)),t("div",Gt,[a(_,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=l=>be()),variant:"default"},{default:s(()=>[a(M,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[34]||(e[34]=i(" Add Delay "))]),_:1}),T.value.length>0?(d(),O(_,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=l=>Ke()),variant:"destructive"},{default:s(()=>[a(M,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),i(" Delete Selected ("+v(T.value.length)+") ",1)]),_:1})):b("",!0),t("div",Jt,[a(_,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[2]||(e[2]=l=>Z.value=!Z.value),variant:"secondary"},{default:s(()=>[a(M,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=i(" Upload CSV ")),a(M,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),Z.value?(d(),u("div",Kt,[t("div",Qt,[t("label",Xt,[e[36]||(e[36]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:Xe,accept:".csv"},null,32)]),t("a",{href:tt.value,download:"Delays Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Zt)])])):b("",!0)]),a(_,{class:"px-2 py-0 md:px-4 md:py-2",onClick:he(Ze,["prevent"]),variant:"outline"},{default:s(()=>[a(M,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[37]||(e[37]=i(" Download CSV "))]),_:1}),f.isSuperAdmin?(d(),O(_,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=l=>Oe()),variant:"outline"},{default:s(()=>[a(M,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[38]||(e[38]=i(" Manage Delay Codes "))]),_:1})):b("",!0)])]),t("form",{ref_key:"exportForm",ref:w,action:et.value,method:"GET",class:"hidden"},null,8,el),a(n(ve),null,{default:s(()=>[a(n(ge),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",tl,[t("div",ll,[a(_,{onClick:e[4]||(e[4]=l=>ue("yesterday")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":j.value==="yesterday"})},{default:s(()=>e[40]||(e[40]=[i(" Yesterday ")])),_:1},8,["class"]),a(_,{onClick:e[5]||(e[5]=l=>ue("current-week")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":j.value==="current-week"})},{default:s(()=>e[41]||(e[41]=[i(" WTD ")])),_:1},8,["class"]),a(_,{onClick:e[6]||(e[6]=l=>ue("6w")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":j.value==="6w"})},{default:s(()=>e[42]||(e[42]=[i(" T6W ")])),_:1},8,["class"]),a(_,{onClick:e[7]||(e[7]=l=>ue("quarterly")),variant:"outline",size:"sm",class:te({"border-primary bg-primary/10 text-primary":j.value==="quarterly"})},{default:s(()=>e[43]||(e[43]=[i(" Quarterly ")])),_:1},8,["class"])]),f.dateRange?(d(),u("div",al,[j.value==="yesterday"&&f.dateRange.start?(d(),u("span",sl," Showing data from "+v(me(f.dateRange.start)),1)):f.dateRange.start&&f.dateRange.end?(d(),u("span",ol," Showing data from "+v(me(f.dateRange.start))+" to "+v(me(f.dateRange.end)),1)):(d(),u("span",nl,v(f.dateRange.label),1)),x.value?(d(),u("span",rl,"("+v(x.value)+")",1)):b("",!0)])):b("",!0)])]),_:1})]),_:1}),ke.value?b("",!0):(d(),u("div",dl,[a(M,{name:"database-x",class:"mb-4 h-16 w-16 text-muted-foreground"}),e[44]||(e[44]=t("h2",{class:"text-center text-2xl font-bold text-muted-foreground"},"There is No Data to give Information about.",-1))])),ke.value?(d(),u(k,{key:3},[a(n(ve),null,{default:s(()=>[a(n(ct),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",il,[t("div",ul,[a(n(ft),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[45]||(e[45]=[i("Filters")])),_:1}),!J.value&&Be.value?(d(),u("div",ml,[c.value.search?(d(),u("div",cl," Search: "+v(c.value.search),1)):b("",!0),c.value.delayCode?(d(),u("div",fl," Code: "+v(Pe(c.value.delayCode)),1)):b("",!0),c.value.delayCategory?(d(),u("div",pl," Category: "+v(_e(c.value.delayCategory)),1)):b("",!0),c.value.delayType?(d(),u("div",yl," Type: "+v(c.value.delayType==="origin"?"Origin":"Destination"),1)):b("",!0),c.value.disputed?(d(),u("div",vl," Disputed: "+v(c.value.disputed==="true"?"Yes":"No"),1)):b("",!0),c.value.controllable?(d(),u("div",gl," Driver Controllable: "+v(c.value.controllable==="true"?"Yes":c.value.controllable==="false"?"No":"N/A"),1)):b("",!0)])):b("",!0)]),a(_,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=l=>J.value=!J.value)},{default:s(()=>[i(v(J.value?"Hide Filters":"Show Filters")+" ",1),a(M,{name:J.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),J.value?(d(),O(n(ge),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[t("div",xl,[t("div",bl,[t("div",null,[a(n(N),{for:"search"},{default:s(()=>e[46]||(e[46]=[i("Search")])),_:1}),a(n(de),{class:"h-9 px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:c.value.search,"onUpdate:modelValue":e[9]||(e[9]=l=>c.value.search=l),type:"text",placeholder:"Search by driver or type...",onInput:G},null,8,["modelValue"])]),t("div",null,[a(n(N),{for:"delayCode"},{default:s(()=>e[47]||(e[47]=[i("Delay Code")])),_:1}),z(t("select",{id:"delayCode","onUpdate:modelValue":e[10]||(e[10]=l=>c.value.delayCode=l),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[48]||(e[48]=t("option",{value:""},"All Codes",-1)),(d(!0),u(k,null,L(f.delay_codes,l=>(d(),u("option",{key:l.id,value:l.id},v(l.code),9,_l))),128))],544),[[B,c.value.delayCode]])]),t("div",null,[a(n(N),{for:"delayCategory"},{default:s(()=>e[49]||(e[49]=[i("Delay Category")])),_:1}),z(t("select",{id:"delayCategory","onUpdate:modelValue":e[11]||(e[11]=l=>c.value.delayCategory=l),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[50]||(e[50]=[t("option",{value:""},"All Categories",-1),t("option",{value:"1_120"},"1-120 mins",-1),t("option",{value:"121_600"},"121-600 mins",-1),t("option",{value:"601_plus"},"601+ mins",-1)]),544),[[B,c.value.delayCategory]])]),t("div",null,[a(n(N),{for:"delayType"},{default:s(()=>e[51]||(e[51]=[i("Delay Type")])),_:1}),z(t("select",{id:"delayType","onUpdate:modelValue":e[12]||(e[12]=l=>c.value.delayType=l),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[52]||(e[52]=[t("option",{value:""},"All Types",-1),t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),544),[[B,c.value.delayType]])]),t("div",null,[a(n(N),{for:"disputed"},{default:s(()=>e[53]||(e[53]=[i("Disputed Status")])),_:1}),z(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=l=>c.value.disputed=l),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[54]||(e[54]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Disputed",-1),t("option",{value:"false"},"Not Disputed",-1)]),544),[[B,c.value.disputed]])]),t("div",null,[a(n(N),{for:"controllable"},{default:s(()=>e[55]||(e[55]=[i("Driver Controllable")])),_:1}),z(t("select",{id:"controllable","onUpdate:modelValue":e[14]||(e[14]=l=>c.value.controllable=l),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[56]||(e[56]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"null"},"N/A",-1)]),544),[[B,c.value.controllable]])])]),t("div",kl,[a(_,{onClick:Ne,variant:"ghost",size:"sm"},{default:s(()=>[a(M,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[57]||(e[57]=i(" Reset Filters "))]),_:1})])])]),_:1})):b("",!0)]),_:1}),f.isSuperAdmin?b("",!0):(d(),O(It,{key:0,metricsData:Ie.value,driversData:qe.value,chartData:He.value,averageOntime:f.average_ontime,currentDateFilter:r.dateRange.label,delayType:c.value.delayType},null,8,["metricsData","driversData","chartData","averageOntime","currentDateFilter","delayType"])),a(n(ve),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:s(()=>[a(n(ge),{class:"p-0"},{default:s(()=>[t("div",wl,[a(n(it),{class:"relative h-[500px] overflow-auto"},{default:s(()=>[a(n(ut),null,{default:s(()=>[a(n(ye),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:s(()=>[a(n(ce),{class:"w-[50px]"},{default:s(()=>[t("div",Cl,[t("input",{type:"checkbox",onChange:Je,checked:Ge.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Dl)])]),_:1}),f.isSuperAdmin?(d(),O(n(ce),{key:0},{default:s(()=>e[58]||(e[58]=[i("Company Name")])),_:1})):b("",!0),(d(),u(k,null,L(ie,l=>a(n(ce),{key:l,class:"cursor-pointer",onClick:y=>Te(l)},{default:s(()=>[t("div",hl,[l==="delay_category"?(d(),u(k,{key:0},[i(" Delay ")],64)):(d(),u(k,{key:1},[i(v(l.replace(/_/g," ").split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" ")),1)],64)),I.value===l?(d(),u("div",Sl,[q.value==="asc"?(d(),u("svg",$l,e[59]||(e[59]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(d(),u("svg",Tl,e[60]||(e[60]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(d(),u("div",Nl,e[61]||(e[61]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),a(n(ce),null,{default:s(()=>e[62]||(e[62]=[i("Actions")])),_:1})]),_:1})]),_:1}),a(n(mt),null,{default:s(()=>[H.value.length===0?(d(),O(n(ye),{key:0},{default:s(()=>[a(n(le),{colspan:f.isSuperAdmin?ie.length+2:ie.length+1,class:"py-8 text-center"},{default:s(()=>e[63]||(e[63]=[i(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):b("",!0),(d(!0),u(k,null,L(H.value,l=>(d(),O(n(ye),{key:l.id,class:"hover:bg-muted/50"},{default:s(()=>[a(n(le),{class:"text-center"},{default:s(()=>[z(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[15]||(e[15]=y=>T.value=y),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Al),[[nt,T.value]])]),_:2},1024),f.isSuperAdmin?(d(),O(n(le),{key:0},{default:s(()=>{var y;return[i(v(((y=l.tenant)==null?void 0:y.name)||"—"),1)]}),_:2},1024)):b("",!0),(d(),u(k,null,L(ie,y=>a(n(le),{key:y,class:"whitespace-nowrap"},{default:s(()=>{var S,W;return[y==="date"?(d(),u(k,{key:0},[i(v(me(l[y])),1)],64)):y==="disputed"?(d(),u(k,{key:1},[i(v(l[y]?"Yes":"No"),1)],64)):y==="driver_controllable"?(d(),u(k,{key:2},[i(v(l[y]===null?"N/A":l[y]?"Yes":"No"),1)],64)):y==="delay_code"?(d(),u(k,{key:3},[i(v(((S=l.delay_code)==null?void 0:S.code)||"—")+" ",1),(W=l.delay_code)!=null&&W.deleted_at?(d(),u("span",Fl,"(Deleted Code)")):b("",!0)],64)):y==="delay_category"?(d(),u(k,{key:4},[i(v(_e(l.delay_category)),1)],64)):(d(),u(k,{key:5},[i(v(l[y]),1)],64))]}),_:2},1024)),64)),a(n(le),null,{default:s(()=>[t("div",Ml,[a(_,{onClick:y=>be(l),variant:"warning",size:"sm"},{default:s(()=>[a(M,{name:"pencil",class:"mr-1 h-4 w-4"}),e[64]||(e[64]=i(" Edit "))]),_:2},1032,["onClick"]),a(_,{onClick:y=>Me(l.id),variant:"destructive",size:"sm"},{default:s(()=>[a(M,{name:"trash",class:"mr-1 h-4 w-4"}),e[65]||(e[65]=i(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),f.delays.links?(d(),u("div",Ol,[t("div",Ul,[t("div",Vl," Showing "+v(H.value.length)+" of "+v(f.delays.data.length)+" entries ",1),t("div",jl,[t("div",zl,[a(n(N),{for:"perPage",class:"text-sm"},{default:s(()=>e[66]||(e[66]=[i("Per page:")])),_:1}),z(t("select",{id:"perPage","onUpdate:modelValue":e[16]||(e[16]=l=>X.value=l),onChange:Ae,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[67]||(e[67]=[t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),544),[[B,X.value]])]),t("div",Bl,[(d(!0),u(k,null,L(f.delays.links,l=>(d(),O(_,{key:l.label,onClick:y=>Fe(l.url),disabled:!l.url,variant:"ghost",size:"sm",class:te(["mx-1",{"border-primary bg-primary/10 text-primary":l.active}])},{default:s(()=>[t("span",{innerHTML:l.label},null,8,Pl)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):b("",!0)]),_:1})]),_:1})],64)):b("",!0),a(n(ae),{open:p.value,"onUpdate:open":e[18]||(e[18]=l=>p.value=l)},{default:s(()=>[a(n(se),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:s(()=>[a(n(oe),{class:"px-4 sm:px-6"},{default:s(()=>[a(n(ne),{class:"text-lg sm:text-xl"},{default:s(()=>[i(v(h.value?"Edit":"Add")+" Delay",1)]),_:1}),a(n(re),{class:"text-xs sm:text-sm"},{default:s(()=>[i(" Fill in the details to "+v(h.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),a($t,{delay:h.value,"delay-codes":$e.value,tenants:f.tenants,"is-super-admin":f.isSuperAdmin,"tenant-slug":f.tenantSlug,onClose:e[17]||(e[17]=l=>p.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),a(n(ae),{open:A.value,"onUpdate:open":e[22]||(e[22]=l=>A.value=l)},{default:s(()=>[a(n(se),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:s(()=>[a(n(oe),{class:"px-4 sm:px-6"},{default:s(()=>[a(n(ne),{class:"text-lg sm:text-xl"},{default:s(()=>e[68]||(e[68]=[i("Manage Delay Codes")])),_:1}),a(n(re),{class:"text-xs sm:text-sm"},{default:s(()=>e[69]||(e[69]=[i(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),t("div",Ll,[t("div",El,[e[71]||(e[71]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Delay Codes",-1)),a(_,{onClick:Ue,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>[a(M,{name:"plus",class:"mr-1 h-3 w-3 sm:h-3.5 sm:w-3.5"}),e[70]||(e[70]=i(" Add New Code "))]),_:1})]),t("div",Rl,[!f.delay_codes||f.delay_codes.length===0?(d(),u("div",Wl," No delay codes found ")):(d(),u("div",Yl,[(d(!0),u(k,null,L(f.delay_codes,l=>(d(),u("div",{key:l.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:y=>Ve(l)},[t("div",ql,[i(v(l.code)+" ",1),l.deleted_at?(d(),u("span",Hl,"(Deleted)")):b("",!0)]),l.description?(d(),u("div",Gl,v(l.description),1)):b("",!0)],8,Il),t("div",Jl,[f.isSuperAdmin?(d(),u(k,{key:0},[l.deleted_at?(d(),u(k,{key:0},[a(_,{onClick:y=>Re(l.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(M,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[72]||(e[72]=i(" Restore "))]),_:2},1032,["onClick"]),a(_,{onClick:y=>We(l.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[73]||(e[73]=i(" Delete "))]),_:2},1032,["onClick"])],64)):(d(),O(_,{key:1,onClick:y=>ze(l.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:s(()=>[a(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[74]||(e[74]=i(" Delete "))]),_:2},1032,["onClick"]))],64)):b("",!0)])]))),128))]))]),m.value?(d(),u("div",Kl,[t("h3",Ql,v(g.value?"Edit":"Add")+" Delay Code",1),t("div",Xl,[t("div",null,[a(n(N),{for:"code",class:"text-xs sm:text-sm"},{default:s(()=>e[75]||(e[75]=[i("Code")])),_:1}),a(n(de),{id:"code",modelValue:E.value.code,"onUpdate:modelValue":e[19]||(e[19]=l=>E.value.code=l),placeholder:"Enter code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[a(n(N),{for:"description",class:"text-xs sm:text-sm"},{default:s(()=>e[76]||(e[76]=[i("Description")])),_:1}),a(n(de),{id:"description",modelValue:E.value.description,"onUpdate:modelValue":e[20]||(e[20]=l=>E.value.description=l),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",Zl,[a(_,{onClick:je,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>e[77]||(e[77]=[i("Cancel")])),_:1}),a(_,{onClick:Ee,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:s(()=>e[78]||(e[78]=[i("Save")])),_:1})])])])):b("",!0)]),a(n(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(_,{onClick:e[21]||(e[21]=l=>A.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[79]||(e[79]=[i("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(n(ae),{open:Q.value,"onUpdate:open":e[25]||(e[25]=l=>Q.value=l)},{default:s(()=>[a(n(se),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(n(oe),{class:"px-4 sm:px-6"},{default:s(()=>[a(n(ne),{class:"text-lg sm:text-xl"},{default:s(()=>e[80]||(e[80]=[i("Confirm Deletion")])),_:1}),a(n(re),{class:"text-xs sm:text-sm"},{default:s(()=>e[81]||(e[81]=[i(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),a(n(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(_,{type:"button",onClick:e[23]||(e[23]=l=>Q.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[82]||(e[82]=[i(" Cancel ")])),_:1}),a(_,{type:"button",onClick:e[24]||(e[24]=l=>Le(xe.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[83]||(e[83]=[i(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(n(ae),{open:$.value,"onUpdate:open":e[28]||(e[28]=l=>$.value=l)},{default:s(()=>[a(n(se),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(n(oe),{class:"px-4 sm:px-6"},{default:s(()=>[a(n(ne),{class:"text-lg sm:text-xl"},{default:s(()=>e[84]||(e[84]=[i("Confirm Deletion")])),_:1}),a(n(re),{class:"text-xs sm:text-sm"},{default:s(()=>e[85]||(e[85]=[i(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),a(n(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(_,{type:"button",onClick:e[26]||(e[26]=l=>$.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[86]||(e[86]=[i(" Cancel ")])),_:1}),a(_,{type:"button",onClick:e[27]||(e[27]=l=>Ye(Y.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[87]||(e[87]=[i(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(n(ae),{open:P.value,"onUpdate:open":e[31]||(e[31]=l=>P.value=l)},{default:s(()=>[a(n(se),{class:"max-w-[95vw] sm:max-w-md"},{default:s(()=>[a(n(oe),{class:"px-4 sm:px-6"},{default:s(()=>[a(n(ne),{class:"text-lg sm:text-xl"},{default:s(()=>e[88]||(e[88]=[i("Confirm Bulk Deletion")])),_:1}),a(n(re),{class:"text-xs sm:text-sm"},{default:s(()=>[i(" Are you sure you want to delete "+v(T.value.length)+" delay records? This action cannot be undone. ",1)]),_:1})]),_:1}),a(n(fe),{class:"px-4 sm:px-6"},{default:s(()=>[a(_,{type:"button",onClick:e[29]||(e[29]=l=>P.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[89]||(e[89]=[i(" Cancel ")])),_:1}),a(_,{type:"button",onClick:e[30]||(e[30]=l=>Qe()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:s(()=>e[90]||(e[90]=[i(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{ka as default};
