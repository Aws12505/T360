import{B as x,E as $e,A as Ae,L as b,N as d,O as n,a1 as l,an as r,I as a,a6 as k,ae as i,af as f,a7 as c,a4 as L,a9 as C,aa as h,ao as Q,a8 as Z,aM as y,aN as Ve}from"./vendor-o5Di5AwF.js";import{C as R,m as Ee,W as Y}from"./vendor-vue-lpVd98mV.js";import{_ as Ne}from"./AppLayout.vue_vue_type_script_setup_true_lang-DNtBJque.js";import{_ as $}from"./Icon.vue_vue_type_script_setup_true_lang-Ovs4EhbQ.js";import{_ as De,a as Ue,b as J,c as I,d as Fe,e as F}from"./TableRow.vue_vue_type_script_setup_true_lang-CE4Mx9a0.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-C_P0SGkH.js";import{_ as ee}from"./Card.vue_vue_type_script_setup_true_lang-DdlXYqAi.js";import{_ as te}from"./CardContent.vue_vue_type_script_setup_true_lang-DsCNBkRU.js";import{_ as ae,a as le,b as ne,c as re,d as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DdtDnxhT.js";import{_ as ie}from"./DialogFooter.vue_vue_type_script_setup_true_lang-D_1c_otZ.js";import{a as M,_ as A}from"./Label.vue_vue_type_script_setup_true_lang-S1ZEb7um.js";import{_ as oe,a as de,b as ue}from"./AlertDescription.vue_vue_type_script_setup_true_lang-Bnb7lUdY.js";import Me from"./SafetySummary-ClTb4BV2.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-d3-DIcH9R7C.js";import"./vendor-axios-t--hEgTQ.js";import"./vendor-lodash-BO1Uc7XX.js";import"./utils-DRqSx_Qq.js";import"./vendor-ui-PRc3Y1Vx.js";import"./app-O9OdtTpi.js";import"./vendor-icons-DgZz2dW4.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bp9Mlgp1.js";const je={class:"max-w-7xl mx-auto p-6 space-y-8"},Te={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},Be={class:"flex flex-wrap gap-3"},Le={key:1,class:"flex items-center gap-2"},Re=["value"],Ie={class:"flex items-center gap-2"},Oe={class:"cursor-pointer"},qe={class:"flex flex-col gap-2"},We={class:"flex flex-wrap gap-2"},He={class:"flex justify-between items-center"},Xe={key:0,class:"text-sm text-muted-foreground"},Ge={key:0},Qe={key:1},Ye={key:2},Je={class:"overflow-x-auto bg-background dark:bg-background border-t border-border"},Ke={class:"flex items-center justify-center"},Ze=["checked"],et=["value"],tt={class:"flex space-x-2"},at={key:0,class:"bg-muted/20 px-4 py-3 border-t"},lt={class:"flex justify-between items-center"},nt={class:"text-sm text-muted-foreground"},rt={class:"flex items-center gap-4"},st={class:"flex items-center gap-2"},it={class:"flex"},ot=["innerHTML"],dt={key:0,class:"col-span-full"},ut={class:"relative"},mt=["value"],ft={class:"col-span-full"},ct={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"},pt={__name:"Safety",props:{entries:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:String,SuperAdmin:Boolean,tenants:Array,dateRange:Object,dateFilter:{type:String,default:"yesterday"},safetyData:{type:Object,default:()=>({})}},setup(m){const u=m,P=x(""),z=x(""),V=x(!1),O=x("Create Entry"),E=x("Create"),q=x(null),w=x(u.dateFilter||"full"),N=x(10),_=x([]),D=x(!1),v=x(!1),me=[{title:u.tenantSlug?"Dashboard":"Admin Dashboard",href:u.tenantSlug?route("dashboard",{tenantSlug:u.tenantSlug}):route("admin.dashboard")},{title:"Safety",href:u.tenantSlug?route("safety.index",{tenantSlug:u.tenantSlug}):route("safety.index.admin")}];function fe(){v.value=!v.value}const j={driver_name:"text",user_name:"text",group:"text",group_hierarchy:"text",minutes_analyzed:"decimal",green_minutes_percent:"decimal",overspeeding_percent:"decimal",driver_score:"decimal",total_events_avg_fd_impact:"decimal",average_following_distance_sec:"decimal",average_following_distance_gz_impact:"decimal",total_events:"decimal",high_g:"decimal",low_impact:"decimal",driver_initiated:"decimal",potential_collision:"decimal",sign_violations:"decimal",sign_violations_gz_impact:"decimal",traffic_light_violation:"decimal",traffic_light_violation_gz_impact:"decimal",u_turn:"decimal",u_turn_gz_impact:"decimal",hard_braking:"decimal",hard_braking_gz_impact:"decimal",hard_turn:"decimal",hard_turn_gz_impact:"decimal",hard_acceleration:"decimal",hard_acceleration_gz_impact:"decimal",driver_distraction:"decimal",driver_distraction_gz_impact:"decimal",following_distance:"decimal",following_distance_gz_impact:"decimal",speeding_violations:"decimal",speeding_violations_gz_impact:"decimal",seatbelt_compliance:"decimal",camera_obstruction:"decimal",driver_drowsiness:"decimal",weaving:"decimal",weaving_gz_impact:"decimal",collision_warning:"decimal",collision_warning_gz_impact:"decimal",requested_video:"decimal",backing:"decimal",roadside_parking:"decimal",driver_distracted_hard_brake:"decimal",following_distance_hard_brake:"decimal",driver_distracted_following_distance:"decimal",driver_star:"decimal",driver_star_gz_impact:"decimal",vehicle_type:"text",safety_normalisation_factor:"decimal",date:"date"},T=Object.keys(j),B=[...T],p=R({tenant_id:null,...Object.fromEntries(T.map(s=>[s,""])),id:null}),S=R({csv_file:null,date:"",tenant_id:null}),ce=R({});function W(s){const e=j[s];return e==="decimal"||e==="integer"?"number":e==="date"?"date":"text"}function H(s){const e=j[s];return e==="decimal"?"0.01":e==="integer"?"1":null}function X(s){const e=j[s];return e==="decimal"||e==="integer"?"-99999":null}function pe(){p.reset(),O.value="Create Entry",E.value="Create",V.value=!0}function ge(s){O.value="Edit Entry",E.value="Update",p.tenant_id=u.SuperAdmin?s.tenant_id:null,p.id=s.id,T.forEach(e=>{p[e]=s[e]}),V.value=!0}function K(){V.value=!1}function ve(){const s=E.value==="Create",e=s?u.SuperAdmin?route("safety.store.admin"):route("safety.store",u.tenantSlug):u.SuperAdmin?route("safety.update.admin",[p.id]):route("safety.update",[u.tenantSlug,p.id]);p[s?"post":"put"](e,{onSuccess:()=>{z.value=s?"Entry created.":"Entry updated.",K()},onError:()=>alert("Something went wrong.")})}function ye(s){if(!confirm("Are you sure?"))return;const e=u.SuperAdmin?route("safety.destroy.admin",[s]):route("safety.destroy",[u.tenantSlug,s]);ce.delete(e,{onSuccess:()=>z.value="Entry deleted."})}function _e(s){var o;const e=(o=s.target.files)==null?void 0:o[0];if(!e)return;if(!S.date){alert("Please select the date for this import.");return}if(u.SuperAdmin&&!S.tenant_id){alert("Please select a tenant for import.");return}S.csv_file=e;const t=u.SuperAdmin?route("safety.import.admin"):route("safety.import",u.tenantSlug);S.post(t,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{z.value="Data imported successfully.",S.reset()},onError:()=>alert("Import failed.")})}function be(){var e,t;if(u.entries.data.length===0){P.value="No data available to export",setTimeout(()=>{P.value=""},3e3);return}const s=u.SuperAdmin?route("safety.export.admin"):route("safety.export",u.tenantSlug);(e=q.value)==null||e.setAttribute("action",s),(t=q.value)==null||t.submit()}$e(z,s=>{s&&setTimeout(()=>{z.value=""},5e3)});function U(s){w.value=s;const e=u.tenantSlug?route("safety.index",{tenantSlug:u.tenantSlug}):route("safety.index.admin");Y.get(e,{dateFilter:s,perPage:N.value},{preserveState:!0})}function xe(){const s=u.tenantSlug?route("safety.index",{tenantSlug:u.tenantSlug}):route("safety.index.admin");Y.get(s,{dateFilter:w.value,perPage:N.value},{preserveState:!0})}function G(s){if(!s)return"";const e=s.split("-");if(e.length!==3)return s;const[t,o,ze]=e;return`${Number(o)}/${Number(ze)}/${t}`}function ke(s){if(s){const e=new URL(s);e.searchParams.set("perPage",N.value),e.searchParams.set("dateFilter",w.value),Y.get(e.href,{},{only:["entries"]})}}const we=Ae(()=>u.entries.data.length>0&&_.value.length===u.entries.data.length);function Se(s){s.target.checked?_.value=u.entries.data.map(e=>e.id):_.value=[]}function Ce(){_.value.length>0&&(D.value=!0)}function he(){const s=R({ids:_.value}),e=u.SuperAdmin?"safety.destroyBulk.admin":"safety.destroyBulk",t=u.SuperAdmin?{}:{tenantSlug:u.tenantSlug};s.delete(route(e,t),{preserveScroll:!0,onSuccess:()=>{z.value=`${_.value.length} safety records deleted successfully.`,_.value=[],D.value=!1},onError:o=>{console.error(o)}})}return(s,e)=>(d(),b(Ne,{breadcrumbs:me,tenantSlug:m.tenantSlug},{default:n(()=>[l(a(Ee),{title:"Safety"}),r("div",je,[z.value?(d(),b(a(oe),{key:0,variant:"success"},{default:n(()=>[l(a(de),null,{default:n(()=>e[16]||(e[16]=[i("Success")])),_:1}),l(a(ue),null,{default:n(()=>[i(f(z.value),1)]),_:1})]),_:1})):k("",!0),P.value?(d(),b(a(oe),{key:1,variant:"destructive"},{default:n(()=>[l(a(de),null,{default:n(()=>e[17]||(e[17]=[i("Error")])),_:1}),l(a(ue),null,{default:n(()=>[i(f(P.value),1)]),_:1})]),_:1})):k("",!0),r("div",Te,[e[22]||(e[22]=r("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Safety Management",-1)),r("div",Be,[l(a(g),{onClick:pe,variant:"default"},{default:n(()=>[l($,{name:"plus",class:"mr-2 h-4 w-4"}),e[18]||(e[18]=i(" Create New Entry "))]),_:1}),_.value.length>0?(d(),b(a(g),{key:0,onClick:e[0]||(e[0]=t=>Ce()),variant:"destructive"},{default:n(()=>[l($,{name:"trash",class:"mr-2 h-4 w-4"}),i(" Delete Selected ("+f(_.value.length)+") ",1)]),_:1})):k("",!0),m.SuperAdmin?(d(),c("div",Le,[L(r("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>a(S).tenant_id=t),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[e[19]||(e[19]=r("option",{disabled:"",value:""},"Select Company Name",-1)),(d(!0),c(C,null,h(m.tenants,t=>(d(),c("option",{key:t.id,value:t.id},f(t.name),9,Re))),128))],512),[[Q,a(S).tenant_id]])])):k("",!0),r("div",Ie,[l(a(M),{modelValue:a(S).date,"onUpdate:modelValue":e[2]||(e[2]=t=>a(S).date=t),type:"date",required:"",placeholder:"Date for Import"},null,8,["modelValue"])]),r("label",Oe,[l(a(g),{variant:"secondary",as:"span"},{default:n(()=>[l($,{name:"upload",class:"mr-2 h-4 w-4"}),e[20]||(e[20]=i(" Upload XLSX "))]),_:1}),r("input",{type:"file",class:"hidden",onChange:_e,accept:".xlsx"},null,32)]),l(a(g),{onClick:Z(be,["prevent"]),variant:"outline"},{default:n(()=>[l($,{name:"download",class:"mr-2 h-4 w-4"}),e[21]||(e[21]=i(" Download CSV "))]),_:1})])]),l(a(ee),null,{default:n(()=>[l(a(te),{class:"p-4"},{default:n(()=>[r("div",qe,[r("div",We,[l(a(g),{onClick:e[3]||(e[3]=t=>U("yesterday")),variant:"outline",size:"sm",class:y({"bg-primary/10 text-primary border-primary":w.value==="yesterday"})},{default:n(()=>e[23]||(e[23]=[i(" Yesterday ")])),_:1},8,["class"]),l(a(g),{onClick:e[4]||(e[4]=t=>U("current-week")),variant:"outline",size:"sm",class:y({"bg-primary/10 text-primary border-primary":w.value==="current-week"})},{default:n(()=>e[24]||(e[24]=[i(" Current Week ")])),_:1},8,["class"]),l(a(g),{onClick:e[5]||(e[5]=t=>U("6w")),variant:"outline",size:"sm",class:y({"bg-primary/10 text-primary border-primary":w.value==="6w"})},{default:n(()=>e[25]||(e[25]=[i(" 6 Weeks ")])),_:1},8,["class"]),l(a(g),{onClick:e[6]||(e[6]=t=>U("quarterly")),variant:"outline",size:"sm",class:y({"bg-primary/10 text-primary border-primary":w.value==="quarterly"})},{default:n(()=>e[26]||(e[26]=[i(" Quarterly ")])),_:1},8,["class"]),l(a(g),{onClick:e[7]||(e[7]=t=>U("full")),variant:"outline",size:"sm",class:y({"bg-primary/10 text-primary border-primary":w.value==="full"})},{default:n(()=>e[27]||(e[27]=[i(" Full ")])),_:1},8,["class"])]),r("div",He,[m.dateRange?(d(),c("div",Xe,[w.value==="yesterday"&&m.dateRange.start?(d(),c("span",Ge," Showing data from "+f(G(m.dateRange.start)),1)):m.dateRange.start&&m.dateRange.end?(d(),c("span",Qe," Showing data from "+f(G(m.dateRange.start))+" to "+f(G(m.dateRange.end)),1)):(d(),c("span",Ye,f(m.dateRange.label),1))])):k("",!0)])])]),_:1})]),_:1}),m.SuperAdmin?k("",!0):(d(),b(Me,{key:2,data:m.safetyData},null,8,["data"])),l(a(g),{onClick:fe,variant:"outline",size:"sm",class:y({"bg-primary/10 text-primary border-primary":v.value})},{default:n(()=>[l($,{name:v.value?"lock":"unlock",class:"mr-2 h-4 w-4"},null,8,["name"]),i(" "+f(v.value?"Unfreeze Names":"Freeze Names"),1)]),_:1},8,["class"]),l(a(ee),null,{default:n(()=>[l(a(te),{class:"p-0"},{default:n(()=>[r("div",Je,[l(a(De),{class:"relative h-[500px] overflow-auto"},{default:n(()=>[l(a(Ue),null,{default:n(()=>[l(a(J),{class:"sticky top-0 bg-background border-b z-10 hover:bg-background"},{default:n(()=>[l(a(I),{class:y(["w-[50px]",{"sticky left-0 z-20 bg-background":v.value}])},{default:n(()=>[r("div",Ke,[r("input",{type:"checkbox",onChange:Se,checked:we.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ze)])]),_:1},8,["class"]),m.SuperAdmin?(d(),b(a(I),{key:0,class:y({"sticky left-[50px] z-20 bg-background":v.value})},{default:n(()=>e[28]||(e[28]=[i("Company Name")])),_:1},8,["class"])):k("",!0),(d(!0),c(C,null,h(B.filter(t=>!["user_name","group","group_hierarchy"].includes(t)&&!t.toLowerCase().includes("impact")),t=>(d(),b(a(I),{key:t,class:y(["whitespace-nowrap",{"sticky z-20 bg-background":v.value&&t==="driver_name","left-[50px]":v.value&&t==="driver_name"&&!m.SuperAdmin,"left-[150px]":v.value&&t==="driver_name"&&m.SuperAdmin}])},{default:n(()=>[i(f(t.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())),1)]),_:2},1032,["class"]))),128)),l(a(I),null,{default:n(()=>e[29]||(e[29]=[i("Actions")])),_:1})]),_:1})]),_:1}),l(a(Fe),null,{default:n(()=>[m.entries.data.length===0?(d(),b(a(J),{key:0},{default:n(()=>[l(a(F),{colspan:m.SuperAdmin?B.length+3:B.length+2,class:"text-center py-8"},{default:n(()=>e[30]||(e[30]=[i(" No entries found ")])),_:1},8,["colspan"])]),_:1})):k("",!0),(d(!0),c(C,null,h(m.entries.data,t=>(d(),b(a(J),{key:t.id,class:"hover:bg-muted/50"},{default:n(()=>[l(a(F),{class:y(["text-center",{"sticky left-0 z-10 bg-background":v.value}])},{default:n(()=>[L(r("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[8]||(e[8]=o=>_.value=o),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,et),[[Ve,_.value]])]),_:2},1032,["class"]),m.SuperAdmin?(d(),b(a(F),{key:0,class:y({"sticky left-[50px] z-10 bg-background":v.value})},{default:n(()=>{var o;return[i(f(((o=t.tenant)==null?void 0:o.name)??"—"),1)]}),_:2},1032,["class"])):k("",!0),(d(!0),c(C,null,h(B.filter(o=>!["user_name","group","group_hierarchy"].includes(o)&&!o.toLowerCase().includes("impact")),o=>(d(),b(a(F),{key:o,class:y(["whitespace-nowrap",{"sticky z-10 bg-background":v.value&&o==="driver_name","left-[50px]":v.value&&o==="driver_name"&&!m.SuperAdmin,"left-[150px]":v.value&&o==="driver_name"&&m.SuperAdmin}])},{default:n(()=>[i(f(t[o]),1)]),_:2},1032,["class"]))),128)),l(a(F),null,{default:n(()=>[r("div",tt,[l(a(g),{onClick:o=>ge(t),variant:"warning",size:"sm"},{default:n(()=>[l($,{name:"pencil",class:"mr-1 h-4 w-4"}),e[31]||(e[31]=i(" Edit "))]),_:2},1032,["onClick"]),l(a(g),{onClick:o=>ye(t.id),variant:"destructive",size:"sm"},{default:n(()=>[l($,{name:"trash",class:"mr-1 h-4 w-4"}),e[32]||(e[32]=i(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),m.entries.links?(d(),c("div",at,[r("div",lt,[r("div",nt," Showing "+f(m.entries.data.length)+" entries ",1),r("div",rt,[r("div",st,[l(a(A),{for:"perPage",class:"text-sm"},{default:n(()=>e[33]||(e[33]=[i("Per page:")])),_:1}),L(r("select",{id:"perPage","onUpdate:modelValue":e[9]||(e[9]=t=>N.value=t),onChange:xe,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[34]||(e[34]=[r("option",{value:"10"},"10",-1),r("option",{value:"25"},"25",-1),r("option",{value:"50"},"50",-1),r("option",{value:"100"},"100",-1)]),544),[[Q,N.value]])]),r("div",it,[(d(!0),c(C,null,h(m.entries.links,t=>(d(),b(a(g),{key:t.label,onClick:o=>ke(t.url),disabled:!t.url,variant:"ghost",size:"sm",class:y(["mx-1",{"bg-primary/10 text-primary border-primary":t.active}])},{default:n(()=>[r("span",{innerHTML:t.label},null,8,ot)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):k("",!0)]),_:1})]),_:1}),l(a(ae),{open:V.value,"onUpdate:open":e[12]||(e[12]=t=>V.value=t)},{default:n(()=>[l(a(le),{class:"sm:max-w-lg md:max-w-2xl lg:max-w-4xl w-[90vw]"},{default:n(()=>[l(a(ne),null,{default:n(()=>[l(a(re),null,{default:n(()=>[i(f(O.value),1)]),_:1}),l(a(se),null,{default:n(()=>[i(" Fill in the details to "+f(E.value.toLowerCase())+" an entry. ",1)]),_:1})]),_:1}),r("form",{onSubmit:Z(ve,["prevent"]),class:"grid gap-6 max-h-[70vh] overflow-y-auto p-1"},[m.SuperAdmin?(d(),c("div",dt,[l(a(A),{for:"tenant"},{default:n(()=>e[35]||(e[35]=[i("Company Name")])),_:1}),r("div",ut,[L(r("select",{id:"tenant","onUpdate:modelValue":e[10]||(e[10]=t=>a(p).tenant_id=t),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[e[36]||(e[36]=r("option",{disabled:"",value:""},"Select Company",-1)),(d(!0),c(C,null,h(m.tenants,t=>(d(),c("option",{key:t.id,value:t.id},f(t.name),9,mt))),128))],512),[[Q,a(p).tenant_id]]),e[37]||(e[37]=r("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[r("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):k("",!0),r("div",ft,[l(a(A),{for:"date",class:"font-medium"},{default:n(()=>e[38]||(e[38]=[i("Date")])),_:1}),l(a(M),{id:"date",modelValue:a(p).date,"onUpdate:modelValue":e[11]||(e[11]=t=>a(p).date=t),type:"date",required:"",class:"w-full"},null,8,["modelValue"])]),r("div",ct,[e[39]||(e[39]=r("div",{class:"col-span-full mb-2"},[r("h3",{class:"text-md font-semibold border-b pb-1"},"Driver Information")],-1)),(d(),c(C,null,h(["driver_name","user_name","group","group_hierarchy","vehicle_type"],t=>r("div",{key:t,class:"space-y-1"},[l(a(A),{for:t,class:"capitalize"},{default:n(()=>[i(f(t.replace(/_/g," ")),1)]),_:2},1032,["for"]),l(a(M),{id:t,modelValue:a(p)[t],"onUpdate:modelValue":o=>a(p)[t]=o,type:W(t),step:H(t),min:X(t)},null,8,["id","modelValue","onUpdate:modelValue","type","step","min"])])),64)),e[40]||(e[40]=r("div",{class:"col-span-full mt-4 mb-2"},[r("h3",{class:"text-md font-semibold border-b pb-1"},"Performance Metrics")],-1)),(d(),c(C,null,h(["minutes_analyzed","green_minutes_percent","overspeeding_percent","driver_score","safety_normalisation_factor"],t=>r("div",{key:t,class:"space-y-1"},[l(a(A),{for:t,class:"capitalize"},{default:n(()=>[i(f(t.replace(/_/g," ")),1)]),_:2},1032,["for"]),l(a(M),{id:t,modelValue:a(p)[t],"onUpdate:modelValue":o=>a(p)[t]=o,type:W(t),step:H(t),min:X(t)},null,8,["id","modelValue","onUpdate:modelValue","type","step","min"])])),64)),e[41]||(e[41]=r("div",{class:"col-span-full mt-4 mb-2"},[r("h3",{class:"text-md font-semibold border-b pb-1"},"Events & Violations")],-1)),(d(!0),c(C,null,h(a(T).filter(t=>!["driver_name","user_name","group","group_hierarchy","vehicle_type","minutes_analyzed","green_minutes_percent","overspeeding_percent","driver_score","safety_normalisation_factor","date"].includes(t)),t=>(d(),c("div",{key:t,class:"space-y-1"},[l(a(A),{for:t,class:"capitalize text-sm"},{default:n(()=>[i(f(t.replace(/_/g," ")),1)]),_:2},1032,["for"]),l(a(M),{id:t,modelValue:a(p)[t],"onUpdate:modelValue":o=>a(p)[t]=o,type:W(t),step:H(t),min:X(t)},null,8,["id","modelValue","onUpdate:modelValue","type","step","min"])]))),128))]),l(a(ie),{class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 mt-6 pt-4 border-t"},{default:n(()=>[l(a(g),{type:"button",onClick:K,variant:"outline",class:"w-full sm:w-auto"},{default:n(()=>e[42]||(e[42]=[i(" Cancel ")])),_:1}),l(a(g),{type:"submit",variant:"default",class:"w-full sm:w-auto"},{default:n(()=>[i(f(E.value),1)]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(a(ae),{open:D.value,"onUpdate:open":e[15]||(e[15]=t=>D.value=t)},{default:n(()=>[l(a(le),null,{default:n(()=>[l(a(ne),null,{default:n(()=>[l(a(re),null,{default:n(()=>e[43]||(e[43]=[i("Confirm Bulk Deletion")])),_:1}),l(a(se),null,{default:n(()=>[i(" Are you sure you want to delete "+f(_.value.length)+" safety records? This action cannot be undone. ",1)]),_:1})]),_:1}),l(a(ie),{class:"mt-4"},{default:n(()=>[l(a(g),{type:"button",onClick:e[13]||(e[13]=t=>D.value=!1),variant:"outline"},{default:n(()=>e[44]||(e[44]=[i(" Cancel ")])),_:1}),l(a(g),{type:"button",onClick:e[14]||(e[14]=t=>he()),variant:"destructive"},{default:n(()=>e[45]||(e[45]=[i(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),r("form",{ref_key:"exportForm",ref:q,method:"GET",class:"hidden"},null,512)])]),_:1},8,["tenantSlug"]))}},jt=Pe(pt,[["__scopeId","data-v-fb664722"]]);export{jt as default};
