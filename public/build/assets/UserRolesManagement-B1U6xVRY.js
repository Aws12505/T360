import{a as p,o as d,b as l,g as $,F as A,r as z,t as k,e as t,l as w,w as o,i as v,u as e,S as pe,W as K,d as P,C as B,k as C,c as R,f as Q,j as Y,m as ve,T as O}from"./app-B91Zl0Oo.js";import{X as D,o as ge,_ as be}from"./AppLayout.vue_vue_type_script_setup_true_lang-B7AKyEh7.js";import{_ as U,a as M}from"./Label.vue_vue_type_script_setup_true_lang-ChWoabUD.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-PJXKnqlO.js";import{_ as J}from"./Checkbox.vue_vue_type_script_setup_true_lang-Cyvup3SO.js";import{_ as _e,a as ye,b as xe,c as he,d as Z}from"./SelectValue.vue_vue_type_script_setup_true_lang-COMAtdeg.js";import{_ as V}from"./InputError.vue_vue_type_script_setup_true_lang-W-u9a6xD.js";import{L as N}from"./loader-circle-DQaJYqkb.js";import{_ as W}from"./Card.vue_vue_type_script_setup_true_lang-BJWyaRE5.js";import{_ as q}from"./CardContent.vue_vue_type_script_setup_true_lang-NmazK22E.js";import{_ as I,a as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-BGN-U_jC.js";import{_ as $e}from"./Separator.vue_vue_type_script_setup_true_lang-D2x5gf6v.js";import{S as ke,P as G,a as we,B as Se}from"./shield-Bc7egZTN.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BwX3HRAb.js";import"./createLucideIcon-CMlEOo_P.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-d3MMgUIc.js";import"./check-Cp0bzDxk.js";const Ue={class:"rounded-md border"},Ae={class:"w-full caption-bottom text-sm"},je={class:"[&_tr:last-child]:border-0"},ze={class:"p-4 align-middle font-medium"},Ve={class:"p-4 align-middle"},Me={class:"p-4 align-middle text-right"},Le={class:"flex justify-end space-x-2"},Ee={key:0,class:"mt-6 flex justify-center"},Re={class:"flex items-center space-x-1"},De={__name:"UserList",props:{users:Object,isSuperAdmin:{type:Boolean,default:!1}},setup(f){const _=n=>{n&&K.get(n,{},{only:["users"]})};return(n,u)=>(d(),p("div",null,[l("div",Ue,[l("table",Ae,[u[3]||(u[3]=l("thead",{class:"[&_tr]:border-b"},[l("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[l("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Name"),l("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Email"),l("th",{class:"h-12 px-4 text-right pr-16 align-middle font-medium text-muted-foreground"},"Actions")])],-1)),l("tbody",je,[(d(!0),p(A,null,z(f.users.data,s=>(d(),p("tr",{key:s.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[l("td",ze,k(s.name),1),l("td",Ve,k(s.email),1),l("td",Me,[l("div",Le,[t(e(b),{onClick:i=>n.$emit("edit",s),variant:"outline",size:"sm"},{default:o(()=>u[0]||(u[0]=[v(" Edit ")])),_:2},1032,["onClick"]),t(e(b),{onClick:i=>n.$emit("delete",s),variant:"destructive",size:"sm"},{default:o(()=>u[1]||(u[1]=[v(" Delete ")])),_:2},1032,["onClick"]),f.isSuperAdmin?(d(),w(e(pe),{key:0,href:n.route("impersonate.start",s.id),as:"button"},{default:o(()=>[t(e(b),{variant:"secondary",size:"sm"},{default:o(()=>u[2]||(u[2]=[v(" Impersonate ")])),_:1})]),_:2},1032,["href"])):$("",!0)])])]))),128))])])]),f.users.links?(d(),p("div",Ee,[l("nav",Re,[(d(!0),p(A,null,z(f.users.links,s=>(d(),w(e(b),{key:s.label,onClick:i=>_(s.url),disabled:!s.url,variant:s.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:s.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):$("",!0)]))}},Te={class:"rounded-md border"},Pe={class:"w-full caption-bottom text-sm"},Oe={class:"[&_tr:last-child]:border-0"},Be={class:"p-4 align-middle font-medium"},Ne={class:"p-4 align-middle"},He={class:"flex flex-wrap gap-1"},Fe={class:"p-4 align-middle text-right"},We={class:"flex justify-end space-x-2"},qe={key:0,class:"mt-6 flex justify-center"},Ie={class:"flex items-center space-x-1"},Xe={__name:"RoleList",props:{roles:Object},setup(f){const _=n=>{n&&K.get(n,{},{only:["roles"]})};return(n,u)=>(d(),p("div",null,[l("div",Te,[l("table",Pe,[u[2]||(u[2]=l("thead",{class:"[&_tr]:border-b"},[l("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[l("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Role Name"),l("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Permissions"),l("th",{class:"h-12 px-4 text-right pr-16 align-middle font-medium text-muted-foreground"},"Actions")])],-1)),l("tbody",Oe,[(d(!0),p(A,null,z(f.roles.data,s=>(d(),p("tr",{key:s.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[l("td",Be,k(s.name),1),l("td",Ne,[l("div",He,[(d(!0),p(A,null,z(s.permissions,i=>(d(),p("span",{key:i.id,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground"},k(i.name),1))),128))])]),l("td",Fe,[l("div",We,[t(e(b),{onClick:i=>n.$emit("edit",s),variant:"outline",size:"sm"},{default:o(()=>u[0]||(u[0]=[v(" Edit ")])),_:2},1032,["onClick"]),t(e(b),{onClick:i=>n.$emit("delete",s),variant:"destructive",size:"sm"},{default:o(()=>u[1]||(u[1]=[v(" Delete ")])),_:2},1032,["onClick"])])])]))),128))])])]),f.roles.links?(d(),p("div",qe,[l("nav",Ie,[(d(!0),p(A,null,z(f.roles.links,s=>(d(),w(e(b),{key:s.label,onClick:i=>_(s.url),disabled:!s.url,variant:s.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:s.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):$("",!0)]))}},Ge={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},Je={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md overflow-y-auto max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},Ke={class:"flex justify-between items-center mb-4"},Qe={class:"text-2xl font-bold text-foreground"},Ye={class:"space-y-2"},Ze={class:"space-y-2"},es={key:0,class:"space-y-2"},ss={key:1,class:"space-y-2"},ts={class:"space-y-2"},ls={class:"relative"},ns={class:"flex items-center space-x-2"},as={class:"h-40 border rounded-md p-2 overflow-y-auto"},os={class:"space-y-2"},rs={class:"relative"},is={class:"flex items-center space-x-2"},ds={class:"h-40 border rounded-md p-2 overflow-y-auto"},us={key:0,class:"ml-2 text-xs px-2 py-0.5 rounded-full border border-gray-200 bg-gray-100 dark:border-gray-700 dark:bg-gray-800 text-gray-600 dark:text-gray-300"},ms={class:"flex justify-end space-x-3 pt-4"},cs=P({__name:"UserForm",props:{user:{type:Object,default:null},tenants:{type:Array,default:()=>[]},roles:{type:Array,default:()=>[]},permissions:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close","saved"],setup(f,{emit:_}){const n=f,u=_,s=B({name:n.user?n.user.name:"",email:n.user?n.user.email:"",password:"",tenant_id:n.user?n.user.tenant_id:n.tenants.length?n.tenants[0].id:null,roles:n.user&&n.user.roles?n.user.roles.map(r=>r.id):[],user_permissions:n.user&&n.user.permissions?n.user.permissions.map(r=>r.name):[]}),i=C(""),m=C(""),g=R(()=>{if(!i.value.trim())return n.roles;const r=i.value.toLowerCase();return n.roles.filter(a=>a.name.toLowerCase().includes(r))}),S=R(()=>{if(!m.value.trim())return n.permissions;const r=m.value.toLowerCase();return n.permissions.filter(a=>a.name.toLowerCase().includes(r))}),L=R(()=>{const r=new Set;return n.roles.forEach(a=>{s.roles.includes(a.id)&&a.permissions&&a.permissions.forEach(c=>{r.add(c.name)})}),Array.from(r)});Q(()=>n.user,r=>{r?(s.name=r.name,s.email=r.email,s.tenant_id=r.tenant_id,s.roles=r.roles?r.roles.map(a=>a.id):[],s.user_permissions=r.permissions?r.permissions.map(a=>a.name):[]):(s.name="",s.email="",s.password="",s.tenant_id=n.tenants.length?n.tenants[0].id:null,s.roles=[],s.user_permissions=[])},{immediate:!0});const E=()=>{n.user?n.isSuperAdmin?s.put(route("admin.users.update",n.user),{onSuccess:()=>{u("saved")}}):s.put(route("users.update",[n.tenantSlug,n.user]),{onSuccess:()=>{u("saved")}}):n.isSuperAdmin?s.post(route("admin.users.store"),{onSuccess:()=>{u("saved")}}):s.post(route("users.store",n.tenantSlug),{onSuccess:()=>{u("saved")}})},j=r=>{const a=s.roles.indexOf(r);a===-1?s.roles.push(r):s.roles.splice(a,1)},y=r=>{if(L.value.includes(r))return;const a=s.user_permissions.indexOf(r);a===-1?s.user_permissions.push(r):s.user_permissions.splice(a,1)};return(r,a)=>(d(),p("div",Ge,[l("div",Je,[l("div",Ke,[l("h2",Qe,k(f.user?"Edit User":"Create User"),1),t(e(b),{variant:"ghost",size:"icon",onClick:a[0]||(a[0]=()=>u("close"))},{default:o(()=>[t(e(D),{class:"h-5 w-5"})]),_:1})]),l("form",{onSubmit:Y(E,["prevent"]),class:"space-y-4"},[l("div",Ye,[t(e(U),{for:"name"},{default:o(()=>a[10]||(a[10]=[v("Name")])),_:1}),t(e(M),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":a[1]||(a[1]=c=>e(s).name=c),placeholder:"Enter name",class:"w-full"},null,8,["modelValue"]),t(V,{message:e(s).errors.name},null,8,["message"])]),l("div",Ze,[t(e(U),{for:"email"},{default:o(()=>a[11]||(a[11]=[v("Email")])),_:1}),t(e(M),{id:"email",modelValue:e(s).email,"onUpdate:modelValue":a[2]||(a[2]=c=>e(s).email=c),type:"email",placeholder:"Enter email",class:"w-full"},null,8,["modelValue"]),t(V,{message:e(s).errors.email},null,8,["message"])]),f.user?$("",!0):(d(),p("div",es,[t(e(U),{for:"password"},{default:o(()=>a[12]||(a[12]=[v("Password")])),_:1}),t(e(M),{id:"password",modelValue:e(s).password,"onUpdate:modelValue":a[3]||(a[3]=c=>e(s).password=c),type:"password",placeholder:"Enter password",class:"w-full"},null,8,["modelValue"]),t(V,{message:e(s).errors.password},null,8,["message"])])),f.isSuperAdmin?(d(),p("div",ss,[t(e(U),{for:"tenant"},{default:o(()=>a[13]||(a[13]=[v("Company Name")])),_:1}),t(e(_e),{modelValue:e(s).tenant_id,"onUpdate:modelValue":a[4]||(a[4]=c=>e(s).tenant_id=c)},{default:o(()=>[t(e(ye),null,{default:o(()=>[t(e(xe),{placeholder:"Select a company"})]),_:1}),t(e(he),null,{default:o(()=>[t(e(Z),{value:null},{default:o(()=>a[14]||(a[14]=[v("None")])),_:1}),(d(!0),p(A,null,z(f.tenants,c=>(d(),w(e(Z),{value:c.id,key:c.id},{default:o(()=>[v(k(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(V,{message:e(s).errors.tenant_id},null,8,["message"])])):$("",!0),l("div",ts,[t(e(U),null,{default:o(()=>a[15]||(a[15]=[v("Roles")])),_:1}),l("div",ls,[l("div",ns,[t(e(M),{modelValue:i.value,"onUpdate:modelValue":a[5]||(a[5]=c=>i.value=c),placeholder:"Search roles...",class:"w-full"},null,8,["modelValue"]),i.value?(d(),w(e(b),{key:0,type:"button",variant:"ghost",size:"icon",onClick:a[6]||(a[6]=c=>i.value=""),class:"absolute right-2"},{default:o(()=>[t(e(D),{class:"h-4 w-4"})]),_:1})):$("",!0)])]),l("div",as,[(d(!0),p(A,null,z(g.value,c=>(d(),p("div",{key:c.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[t(e(J),{id:`role-${c.id}`,checked:e(s).roles.includes(c.id),"onUpdate:checked":H=>j(c.id),class:"mr-2"},null,8,["id","checked","onUpdate:checked"]),t(e(U),{for:`role-${c.id}`,class:"cursor-pointer"},{default:o(()=>[v(k(c.name),1)]),_:2},1032,["for"])]))),128))]),t(V,{message:e(s).errors.roles},null,8,["message"])]),l("div",os,[t(e(U),null,{default:o(()=>a[16]||(a[16]=[v("Permissions")])),_:1}),l("div",rs,[l("div",is,[t(e(M),{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=c=>m.value=c),placeholder:"Search permissions...",class:"w-full"},null,8,["modelValue"]),m.value?(d(),w(e(b),{key:0,type:"button",variant:"ghost",size:"icon",onClick:a[8]||(a[8]=c=>m.value=""),class:"absolute right-2"},{default:o(()=>[t(e(D),{class:"h-4 w-4"})]),_:1})):$("",!0)])]),l("div",ds,[(d(!0),p(A,null,z(S.value,c=>(d(),p("div",{key:c.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[t(e(J),{id:`permission-${c.name}`,checked:e(s).user_permissions.includes(c.name),"onUpdate:checked":H=>y(c.name),disabled:L.value.includes(c.name),class:"mr-2"},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(U),{for:`permission-${c.name}`,class:"cursor-pointer"},{default:o(()=>[v(k(c.name)+" ",1),L.value.includes(c.name)?(d(),p("span",us," inherited ")):$("",!0)]),_:2},1032,["for"])]))),128))]),t(V,{message:e(s).errors.user_permissions},null,8,["message"])]),l("div",ms,[t(e(b),{type:"button",onClick:a[9]||(a[9]=()=>u("close")),variant:"outline"},{default:o(()=>a[17]||(a[17]=[v(" Cancel ")])),_:1}),t(e(b),{type:"submit",disabled:e(s).processing},{default:o(()=>[e(s).processing?(d(),w(e(N),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(s).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])]))}}),fs={class:"rounded-md border"},ps={class:"w-full caption-bottom text-sm"},vs={class:"[&_tr:last-child]:border-0"},gs={class:"p-4 align-middle font-medium"},bs={class:"p-4 align-middle"},_s={class:"p-4 align-middle text-right"},ys={class:"flex justify-end space-x-2"},xs={key:0,class:"mt-6 flex justify-center"},hs={class:"flex items-center space-x-1"},$s={__name:"TenantList",props:{tenants:{type:Object,default:()=>({data:[],links:[]})}},setup(f){const _=f,n=Array.isArray(_.tenants)?_.tenants:_.tenants.data||[],u=s=>{s&&K.get(s,{},{only:["tenants"]})};return(s,i)=>(d(),p("div",null,[l("div",fs,[l("table",ps,[i[2]||(i[2]=l("thead",{class:"[&_tr]:border-b"},[l("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[l("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Company Name"),l("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Slug"),l("th",{class:"h-12 px-4 text-right pr-16 align-middle font-medium text-muted-foreground"},"Actions")])],-1)),l("tbody",vs,[(d(!0),p(A,null,z(e(n),m=>(d(),p("tr",{key:m.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[l("td",gs,k(m.name),1),l("td",bs,k(m.slug),1),l("td",_s,[l("div",ys,[t(e(b),{onClick:g=>s.$emit("edit",m),variant:"outline",size:"sm"},{default:o(()=>i[0]||(i[0]=[v(" Edit ")])),_:2},1032,["onClick"]),t(e(b),{onClick:g=>s.$emit("delete",m),variant:"destructive",size:"sm"},{default:o(()=>i[1]||(i[1]=[v(" Delete ")])),_:2},1032,["onClick"])])])]))),128))])])]),f.tenants.links?(d(),p("div",xs,[l("nav",hs,[(d(!0),p(A,null,z(f.tenants.links,m=>(d(),w(e(b),{key:m.label,onClick:g=>u(m.url),disabled:!m.url,variant:m.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:m.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):$("",!0)]))}},ks={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},ws={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md overflow-y-auto max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},Ss={class:"flex justify-between items-center mb-4"},Cs={class:"text-2xl font-bold text-foreground"},Us={class:"space-y-2"},As={key:0,class:"space-y-2"},js={class:"flex justify-end space-x-3 pt-4"},zs=P({__name:"TenantForm",props:{tenant:{type:Object,default:null}},emits:["close","saved"],setup(f,{emit:_}){const n=f,u=_,s=B({name:n.tenant?n.tenant.name:"",slug:n.tenant?n.tenant.slug:""});Q(()=>n.tenant,m=>{m?(s.name=m.name,s.slug=m.slug):(s.name="",s.slug="")},{immediate:!0});const i=()=>{n.tenant?s.put(route("admin.tenants.update",n.tenant),{onSuccess:()=>{u("saved")}}):s.post(route("admin.tenants.store"),{onSuccess:()=>{u("saved")}})};return(m,g)=>(d(),p("div",ks,[l("div",ws,[l("div",Ss,[l("h2",Cs,k(f.tenant?"Edit Company":"Create Company"),1),t(e(b),{variant:"ghost",size:"icon",onClick:g[0]||(g[0]=()=>u("close"))},{default:o(()=>[t(e(D),{class:"h-5 w-5"})]),_:1})]),l("form",{onSubmit:Y(i,["prevent"]),class:"space-y-4"},[l("div",Us,[t(e(U),{for:"name"},{default:o(()=>g[4]||(g[4]=[v("Company Name")])),_:1}),t(e(M),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":g[1]||(g[1]=S=>e(s).name=S),placeholder:"Enter company name",class:"w-full"},null,8,["modelValue"]),t(V,{message:e(s).errors.name},null,8,["message"])]),f.tenant?(d(),p("div",As,[t(e(U),{for:"slug"},{default:o(()=>g[5]||(g[5]=[v("Slug")])),_:1}),t(e(M),{id:"slug",modelValue:e(s).slug,"onUpdate:modelValue":g[2]||(g[2]=S=>e(s).slug=S),placeholder:"Enter company slug",class:"w-full"},null,8,["modelValue"]),t(V,{message:e(s).errors.slug},null,8,["message"])])):$("",!0),l("div",js,[t(e(b),{type:"button",onClick:g[3]||(g[3]=()=>u("close")),variant:"outline"},{default:o(()=>g[6]||(g[6]=[v(" Cancel ")])),_:1}),t(e(b),{type:"submit",disabled:e(s).processing},{default:o(()=>[e(s).processing?(d(),w(e(N),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(s).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])]))}}),Vs={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},Ms={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md overflow-y-auto max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},Ls={class:"flex justify-between items-center mb-4"},Es={class:"text-2xl font-bold text-foreground"},Rs={class:"space-y-2"},Ds={class:"space-y-2"},Ts={class:"relative"},Ps={class:"flex items-center space-x-2"},Os={class:"h-40 border rounded-md p-2 overflow-y-auto"},Bs={class:"flex justify-end space-x-3 pt-4"},Ns=P({__name:"RoleForm",props:{role:{type:Object,default:null},permissions:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["saved","close"],setup(f,{emit:_}){var E,j;const n=_,u=f,{tenantSlug:s}=u,i=B({name:u.role?u.role.name:"",permissions:((j=(E=u.role)==null?void 0:E.permissions)==null?void 0:j.map(y=>y.name))||[]}),m=C(""),g=R(()=>{if(!m.value.trim())return u.permissions;const y=m.value.toLowerCase();return u.permissions.filter(r=>r.name.toLowerCase().includes(y))});Q(()=>u.role,y=>{var r;y?(i.name=y.name,i.permissions=((r=y.permissions)==null?void 0:r.map(a=>a.name))||[]):(i.name="",i.permissions=[])},{immediate:!0});const S=()=>{u.role?u.isSuperAdmin?i.put(route("admin.roles.update",u.role.id),{onSuccess:()=>{n("saved")}}):i.put(route("roles.update",[s,u.role.id]),{onSuccess:()=>{n("saved")}}):u.isSuperAdmin?i.post(route("admin.roles.store"),{onSuccess:()=>{n("saved")}}):i.post(route("roles.store",s),{onSuccess:()=>{n("saved")}})},L=y=>{const r=i.permissions.indexOf(y);r===-1?i.permissions.push(y):i.permissions.splice(r,1)};return(y,r)=>(d(),p("div",Vs,[l("div",Ms,[l("div",Ls,[l("h2",Es,k(f.role?"Edit Role":"Create Role"),1),t(e(b),{variant:"ghost",size:"icon",onClick:r[0]||(r[0]=()=>n("close"))},{default:o(()=>[t(e(D),{class:"h-5 w-5"})]),_:1})]),l("form",{onSubmit:Y(S,["prevent"]),class:"space-y-4"},[l("div",Rs,[t(e(U),{for:"name"},{default:o(()=>r[5]||(r[5]=[v("Role Name")])),_:1}),t(e(M),{id:"name",modelValue:e(i).name,"onUpdate:modelValue":r[1]||(r[1]=a=>e(i).name=a),placeholder:"Enter role name",class:"w-full"},null,8,["modelValue"]),t(V,{message:e(i).errors.name},null,8,["message"])]),l("div",Ds,[t(e(U),null,{default:o(()=>r[6]||(r[6]=[v("Permissions")])),_:1}),l("div",Ts,[l("div",Ps,[t(e(M),{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=a=>m.value=a),placeholder:"Search permissions...",class:"w-full"},null,8,["modelValue"]),m.value?(d(),w(e(b),{key:0,type:"button",variant:"ghost",size:"icon",onClick:r[3]||(r[3]=a=>m.value=""),class:"absolute right-2"},{default:o(()=>[t(e(D),{class:"h-4 w-4"})]),_:1})):$("",!0)])]),l("div",Os,[(d(!0),p(A,null,z(g.value,a=>(d(),p("div",{key:a.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[t(e(J),{id:`permission-${a.name}`,checked:e(i).permissions.includes(a.name),"onUpdate:checked":c=>L(a.name),class:"mr-2"},null,8,["id","checked","onUpdate:checked"]),t(e(U),{for:`permission-${a.name}`,class:"cursor-pointer"},{default:o(()=>[v(k(a.name),1)]),_:2},1032,["for"])]))),128))]),t(V,{message:e(i).errors.permissions},null,8,["message"])]),l("div",Bs,[t(e(b),{type:"button",onClick:r[4]||(r[4]=()=>n("close")),variant:"outline"},{default:o(()=>r[7]||(r[7]=[v(" Cancel ")])),_:1}),t(e(b),{type:"submit",disabled:e(i).processing},{default:o(()=>[e(i).processing?(d(),w(e(N),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(i).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])]))}}),Hs={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},Fs={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md animate-in fade-in zoom-in-95 duration-200 border border-border"},Ws={class:"flex flex-col space-y-4"},qs={class:"text-muted-foreground"},Is={class:"flex justify-end space-x-3 pt-2"},Xs=P({__name:"ConfirmDeleteModal",props:{message:{type:String,default:"Are you sure you want to delete this item?"},deleteUrl:{type:String,required:!0},tenantSlug:{type:String,default:null}},emits:["cancel","confirmed"],setup(f,{emit:_}){const n=f,u=_,s=B({}),i=()=>{s.delete(n.deleteUrl,{onSuccess:()=>{u("confirmed")}})},m=()=>{u("cancel")};return(g,S)=>(d(),p("div",Hs,[l("div",Fs,[l("div",Ws,[S[1]||(S[1]=l("h2",{class:"text-xl font-bold text-foreground"},"Confirm Deletion",-1)),l("p",qs,k(f.message),1),l("div",Is,[t(e(b),{type:"button",onClick:m,variant:"outline"},{default:o(()=>S[0]||(S[0]=[v(" Cancel ")])),_:1}),t(e(b),{type:"button",variant:"destructive",onClick:i,disabled:e(s).processing},{default:o(()=>[e(s).processing?(d(),w(e(N),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(s).processing?"Deleting...":"Delete"),1)]),_:1},8,["disabled"])])])])]))}}),Gs={class:"container mx-auto p-6 space-y-8"},Js={class:"relative max-w-md"},Ks={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Qs={class:"flex items-center space-x-2"},Ys={class:"flex items-center space-x-2"},Zs={class:"flex items-center space-x-2"},et=P({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(f){const _=f,{tenantSlug:n}=_,u=[{title:n?"Dashboard":"Admin Dashboard",href:n?`/${n}/dashboard`:"/dashboard"},{title:"User Management",href:n?`/${n}/admin/user-management`:"/admin/user-management"}],s=C(_.search||""),i=C(!1),m=C(!1),g=C(!1),S=C(null),L=C(null),E=C(null),j=_.SuperAdmin,y=C(!1),r=C(""),a=C(""),c=R(()=>{if(!s.value.trim())return _.users;const x=s.value.toLowerCase(),h=_.users.data.filter(T=>T.name.toLowerCase().includes(x)||T.email.toLowerCase().includes(x));return{..._.users,data:h}}),H=()=>{S.value=null,i.value=!0},ee=()=>{i.value=!1},se=()=>{E.value=null,g.value=!0},te=()=>{g.value=!1},le=()=>{L.value=null,m.value=!0},ne=()=>{m.value=!1},ae=x=>{S.value=x,i.value=!0},oe=x=>{E.value=x,g.value=!0},re=x=>{L.value=x,m.value=!0},ie=x=>{r.value=j?route("admin.users.destroy",x):route("users.destroy",[n,x]),a.value=`Are you sure you want to delete user ${x.name}?`,y.value=!0},de=x=>{r.value=j?route("admin.roles.destroy",x):route("roles.destroy",[n,x]),a.value=`Are you sure you want to delete role ${x.name}?`,y.value=!0},ue=x=>{r.value=route("admin.tenants.destroy",x),a.value=`Are you sure you want to delete tenant ${x.name}?`,y.value=!0},me=()=>{y.value=!1},F=()=>{m.value=!1,i.value=!1,g.value=!1},ce=R(()=>_.roles.data),fe=R(()=>_.tenants.data);return(x,h)=>(d(),p(A,null,[t(e(ve),{title:"Users Management"}),t(be,{breadcrumbs:u,tenantSlug:e(n)},{default:o(()=>[l("div",Gs,[h[8]||(h[8]=l("div",{class:"space-y-2"},[l("h1",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"}," User and Role Management "),l("p",{class:"text-gray-500 dark:text-gray-400"}," Manage users, roles, and permissions for your application. ")],-1)),t(e($e)),l("div",Js,[l("div",Ks,[t(e(ke),{class:"h-5 w-5 text-gray-400"})]),t(M,{modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=T=>s.value=T),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])]),t(e(W),null,{default:o(()=>[t(e(I),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(X),{class:"text-xl font-semibold"},{default:o(()=>[l("div",Qs,[t(e(ge),{class:"h-5 w-5"}),h[2]||(h[2]=l("span",null,"Users",-1))])]),_:1}),t(b,{onClick:H,variant:"default",size:"sm",class:"gap-1"},{default:o(()=>[t(e(G),{class:"h-4 w-4"}),h[3]||(h[3]=l("span",null,"Add User",-1))]),_:1})]),_:1}),t(e(q),null,{default:o(()=>[t(De,{users:c.value,isSuperAdmin:e(j),onEdit:ae,onDelete:ie},null,8,["users","isSuperAdmin"])]),_:1})]),_:1}),t(e(W),null,{default:o(()=>[t(e(I),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(X),{class:"text-xl font-semibold"},{default:o(()=>[l("div",Ys,[t(e(we),{class:"h-5 w-5"}),h[4]||(h[4]=l("span",null,"Roles",-1))])]),_:1}),t(b,{onClick:le,variant:"default",size:"sm",class:"gap-1"},{default:o(()=>[t(e(G),{class:"h-4 w-4"}),h[5]||(h[5]=l("span",null,"Add Role",-1))]),_:1})]),_:1}),t(e(q),null,{default:o(()=>[t(Xe,{roles:f.roles,onEdit:re,onDelete:de},null,8,["roles"])]),_:1})]),_:1}),e(j)?(d(),w(e(W),{key:0},{default:o(()=>[t(e(I),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(X),{class:"text-xl font-semibold"},{default:o(()=>[l("div",Zs,[t(e(Se),{class:"h-5 w-5"}),h[6]||(h[6]=l("span",null,"Companies",-1))])]),_:1}),t(b,{onClick:se,variant:"default",size:"sm",class:"gap-1"},{default:o(()=>[t(e(G),{class:"h-4 w-4"}),h[7]||(h[7]=l("span",null,"Add Company",-1))]),_:1})]),_:1}),t(e(q),null,{default:o(()=>[t($s,{tenants:f.tenants,onEdit:oe,onDelete:ue},null,8,["tenants"])]),_:1})]),_:1})):$("",!0),t(O,{name:"fade"},{default:o(()=>[i.value?(d(),w(cs,{key:0,user:S.value,roles:ce.value,permissions:f.permissions,tenants:fe.value,isSuperAdmin:e(j),tenantSlug:e(n),onClose:ee,onSaved:F},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])):$("",!0)]),_:1}),t(O,{name:"fade"},{default:o(()=>[g.value?(d(),w(zs,{key:0,tenants:f.tenants,tenant:E.value,onClose:te,onSaved:F},null,8,["tenants","tenant"])):$("",!0)]),_:1}),t(O,{name:"fade"},{default:o(()=>[m.value?(d(),w(Ns,{key:0,role:L.value,permissions:f.permissions,isSuperAdmin:e(j),tenantSlug:e(n),onClose:ne,onSaved:F},null,8,["role","permissions","isSuperAdmin","tenantSlug"])):$("",!0)]),_:1}),t(O,{name:"fade"},{default:o(()=>[y.value?(d(),w(Xs,{key:0,deleteUrl:r.value,message:a.value,tenantSlug:e(n),onCancel:h[1]||(h[1]=T=>y.value=!1),onConfirmed:me},null,8,["deleteUrl","message","tenantSlug"])):$("",!0)]),_:1})])]),_:1},8,["tenantSlug"])],64))}}),yt=Ce(et,[["__scopeId","data-v-71f1e202"]]);export{yt as default};
