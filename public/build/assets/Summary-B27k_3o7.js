import{g as Y,W as Z}from"./vendor-vue-B19pMx_k.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ca64iwsg.js";import{_ as k}from"./Icon.vue_vue_type_script_setup_true_lang-PuJXuPvT.js";import{_ as T}from"./Badge.vue_vue_type_script_setup_true_lang-AXtkzjkF.js";import{d as W,c as C,F as S,e as m,X as e,U as o,aj as A,r as O,E as V,H as I,O as G,z as i,f as c,S as y,u as l,i as J,w as K,b as $,C as ee,Y as te,y as ae}from"./vendor-BpT-r7Ja.js";import{_ as se,a as re,b as Q,c as U,d as ne,e as E}from"./TableRow.vue_vue_type_script_setup_true_lang-vI05P3KP.js";import{_ as q}from"./Button.vue_vue_type_script_setup_true_lang-CACqrpJk.js";import{_ as oe}from"./Card.vue_vue_type_script_setup_true_lang-CG7v7ona.js";import{_ as ie}from"./CardHeader.vue_vue_type_script_setup_true_lang-DE9XBglt.js";import{_ as le}from"./CardTitle.vue_vue_type_script_setup_true_lang-C-33W2wv.js";import{_ as ce}from"./CardContent.vue_vue_type_script_setup_true_lang-hvNNGnvR.js";import{_ as de}from"./Input.vue_vue_type_script_setup_true_lang-BjJf4-TG.js";import{c as ue}from"./utils-Do85zU62.js";import"./vendor-axios-xsH4HHeE.js";import"./vendor-ui-BXjA1Bwp.js";import"./app-CEbXasaB.js";import"./vendor-icons-Dww4C8Xv.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-9XXNMqpr.js";const me={class:"mb-6"},fe=W({__name:"DashboardHeader",props:{operationalExcellenceScore:{type:String,default:"Not Available"}},setup(a){const f=a,d=C(()=>{switch(f.operationalExcellenceScore){case"Fantastic +":return"text-green-600";case"Fantastic":return"text-emerald-600";case"Good":return"text-blue-600";case"Fair":return"text-amber-600";case"Poor":return"text-red-600";default:return"text-gray-600"}});return(h,x)=>(m(),S("div",me,[e("h2",{class:A(["text-4xl font-bold tracking-tight",[d.value,"transition-colors duration-300"]])},o(a.operationalExcellenceScore),3)]))}}),ve={class:"mb-6"},ge={class:"border-b"},xe={class:"flex -mb-px space-x-8"},pe=["onClick"],be={key:0,class:"mt-2 text-sm text-muted-foreground"},ye={key:0,class:"ml-1"},we=W({__name:"TimePeriodTabs",props:{dateRangeText:{type:String,default:""},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},activeTabId:{type:String,default:"yesterday"}},emits:["tab-change"],setup(a,{emit:f}){const d=a,h=[{id:"yesterday",label:"Yesterday"},{id:"current-week",label:"WTD"},{id:"t6w",label:"T6W Scores"},{id:"quarterly",label:"Quarterly Scores"}],x=O(d.activeTabId),g=f,p=C(()=>(x.value==="yesterday"||x.value==="current-week")&&d.weekNumber&&d.year?`Week ${d.weekNumber}, ${d.year}`:(x.value==="t6w"||x.value==="quarterly")&&d.startWeekNumber&&d.endWeekNumber&&d.year?`Weeks ${d.startWeekNumber}-${d.endWeekNumber}, ${d.year}`:""),B=F=>{x.value=F,g("tab-change",F)};return(F,_)=>(m(),S("div",ve,[e("div",ge,[e("div",xe,[(m(),S(I,null,G(h,D=>e("button",{key:D.id,onClick:j=>B(D.id),class:A(["py-2 px-1 border-b-2 text-sm font-medium transition-colors",x.value===D.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},o(D.label),11,pe)),64))])]),a.dateRangeText?(m(),S("div",be,[e("span",null,o(a.dateRangeText),1),p.value?(m(),S("span",ye,"("+o(p.value)+")",1)):V("",!0)])):V("",!0)]))}}),_e={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 sm:gap-6 mb-4 sm:mb-6"},he={class:"xl:col-span-3"},De={class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-4 sm:mb-6"},ke={class:"bg-card rounded-lg border shadow-sm p-3 sm:p-4 flex flex-col min-h-[16rem] sm:h-80"},$e={class:"flex items-center justify-between gap-2 sm:gap-3 mb-2"},Se={class:"space-y-1 text-xs sm:text-sm max-h-28 sm:max-h-36 overflow-y-auto flex-grow"},je={class:"truncate mr-2 max-w-[70%]"},Ne={class:"bg-card rounded-lg border shadow-sm p-3 sm:p-4 flex flex-col min-h-[16rem] sm:h-80"},Re={class:"flex items-center justify-between gap-2 sm:gap-3 mb-2"},Ce={class:"space-y-1 text-xs sm:text-sm max-h-28 sm:max-h-36 overflow-y-auto flex-grow"},Te={class:"truncate mr-2 max-w-[70%]"},Be={class:"bg-card rounded-lg border shadow-sm p-3 sm:p-4 flex flex-col min-h-[16rem] sm:h-80"},Fe={class:"flex items-center justify-between gap-2 sm:gap-3 mb-2"},Pe={class:"text-xs sm:text-sm space-y-1 flex-grow"},Oe={class:"flex justify-between"},Ae={class:"flex justify-between"},Me={class:"flex justify-between"},Ve={class:"flex justify-between"},We={class:"bg-card rounded-lg border shadow-sm p-3 sm:p-4 h-16 sm:h-20"},ze={class:"flex items-center justify-between h-full"},Ee={class:"text-xl sm:text-2xl font-bold text-indigo-600"},Ie={class:"bg-card rounded-lg border shadow-sm p-3 sm:p-4 min-h-[20rem] sm:h-75 flex flex-col"},Ge={class:"flex items-center justify-between gap-2 sm:gap-3 mb-3 sm:mb-4"},Le={class:"text-3xl sm:text-4xl font-bold text-indigo-600"},Ue={class:"space-y-1 sm:space-y-2 text-xs sm:text-sm flex-grow"},qe={class:"flex justify-between items-center"},He={class:"flex items-center gap-2"},Ke={class:"w-12 text-right"},Qe={class:"w-16 text-right"},Ye={class:"flex justify-between items-center"},Ze={class:"flex items-center gap-2"},Xe={class:"w-12 text-right"},Je={class:"w-16 text-right"},et={class:"flex justify-between items-center"},tt={class:"flex items-center gap-2"},at={class:"w-12 text-right"},st={class:"w-16 text-right"},rt={class:"flex justify-between items-center"},nt={class:"flex items-center gap-2"},ot={class:"w-12 text-right"},it={class:"w-16 text-right"},lt={class:"flex justify-between items-center"},ct={class:"flex items-center gap-2"},dt={class:"w-12 text-right"},ut={class:"w-16 text-right"},mt={class:"text-xs sm:text-sm text-muted-foreground mt-2 sm:mt-3"},ft=W({__name:"PerformanceCards",props:{performanceData:{type:Object,default:()=>({})},performanceRatings:{type:Object,default:()=>({})},safetyData:{type:Object,default:()=>({})},delayBreakdowns:{type:Array,default:()=>[]},rejectionBreakdowns:{type:Array,default:()=>[]},maintenanceBreakdowns:{type:Object,default:()=>({})},milesDriven:{type:Number,default:0}},setup(a){const f=a,d=C(()=>[...f.delayBreakdowns].sort((t,s)=>s.total_delays-t.total_delays).slice(0,3)),h=C(()=>[...f.rejectionBreakdowns].sort((t,s)=>s.total_rejections-t.total_rejections).slice(0,3)),x=t=>t==null?"0%":`${Math.round(parseFloat(t))}%`,g=t=>(typeof t=="string"&&(t=parseFloat(t)),t==null||isNaN(t)?"0":Math.round(t).toString()),p=t=>(typeof t=="string"&&(t=parseFloat(t)),t==null||isNaN(t)?"0.00":t.toFixed(2)),B=t=>(typeof t=="string"&&(t=parseFloat(t)),t==null||isNaN(t)?"0.00":t.toFixed(2)),F=t=>t==null?"0":new Intl.NumberFormat().format(t),_=t=>{if(!t)return"Not Available";switch(t){case"gold":return"Gold Tier";case"silver":return"Silver Tier";case"not_eligible":return"Not Eligible";case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return t}},D=t=>{if(!t)return"outline";switch(t){case"gold":return"gold";case"silver":return"silver";case"not_eligible":return"not-eligible";case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},j=t=>t?t==="Gold Tier"?"gold":t==="Silver Tier"?"silver":t==="Not Eligible"?"not-eligible":"outline":"outline",P=C(()=>{var w;if(!((w=f.safetyData)!=null&&w.ratings))return null;const t=f.safetyData.ratings,s={gold:3,silver:2,not_eligible:1},N=["traffic_light_violation","speeding_violations","following_distance","driver_distraction","sign_violations"];let v="gold";for(const u of N)t[u]&&s[t[u]]<s[v]&&(v=t[u]);switch(v){case"gold":return"Gold Tier";case"silver":return"Silver Tier";case"not_eligible":return"Not Eligible";default:return"Not Available"}}),b=t=>{if(!t)return"text-gray-600";switch(t){case"gold":return"text-amber-600";case"silver":return"text-slate-600";case"not_eligible":return"text-red-600";case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}};return(t,s)=>{var N,v,w,u,r;return m(),S("div",_e,[e("div",he,[e("div",De,[e("div",ke,[s[0]||(s[0]=e("h3",{class:"text-base font-semibold mb-1"},"Acceptance",-1)),s[1]||(s[1]=e("div",{class:"text-xs text-muted-foreground mb-1"},"Total Score",-1)),e("div",$e,[e("div",{class:A(["text-3xl sm:text-4xl font-bold",b(a.performanceRatings.average_acceptance)])},o(x(a.performanceData.average_acceptance)),3),i(l(T),{variant:D(a.performanceRatings.average_acceptance),class:"text-xs"},{default:c(()=>[y(o(_(a.performanceRatings.average_acceptance)),1)]),_:1},8,["variant"])]),s[2]||(s[2]=e("div",{class:"text-xs sm:text-sm mb-1 flex justify-between"},[e("span",{class:"font-semibold"},"Rejections by Reason"),e("span",{class:"font-semibold"},"Total")],-1)),e("div",Se,[(m(!0),S(I,null,G(h.value,(n,R)=>(m(),S("div",{key:R,class:"flex justify-between"},[e("span",je,o(n.reason_code),1),e("span",null,o(n.total_rejections),1)]))),128))])]),e("div",Ne,[s[3]||(s[3]=e("h3",{class:"text-base font-semibold mb-1"},"On-Time",-1)),s[4]||(s[4]=e("div",{class:"text-xs text-muted-foreground mb-1"},"Total Score",-1)),e("div",Re,[e("div",{class:A(["text-3xl sm:text-4xl font-bold",b(a.performanceRatings.average_on_time)])},o(x(a.performanceData.average_on_time)),3),i(l(T),{variant:D(a.performanceRatings.average_on_time),class:"text-xs"},{default:c(()=>[y(o(_(a.performanceRatings.average_on_time)),1)]),_:1},8,["variant"])]),s[5]||(s[5]=e("div",{class:"text-xs sm:text-sm mb-1 flex justify-between"},[e("span",{class:"font-semibold"},"Delays by Reason"),e("span",{class:"font-semibold"},"Total")],-1)),e("div",Ce,[(m(!0),S(I,null,G(d.value,(n,R)=>(m(),S("div",{key:R,class:"flex justify-between"},[e("span",Te,o(n.code),1),e("span",null,o(n.total_delays),1)]))),128))])]),e("div",Be,[s[10]||(s[10]=e("h3",{class:"text-base font-semibold mb-1"},"Maintenance",-1)),s[11]||(s[11]=e("div",{class:"text-xs text-muted-foreground mb-1"},"MVtS Score",-1)),e("div",Fe,[e("div",{class:A(["text-3xl sm:text-4xl font-bold",b(a.performanceRatings.average_maintenance_variance_to_spend)])},o(x(a.performanceData.average_maintenance_variance_to_spend)),3),i(l(T),{variant:D(a.performanceRatings.average_maintenance_variance_to_spend),class:"text-xs"},{default:c(()=>[y(o(_(a.performanceRatings.average_maintenance_variance_to_spend)),1)]),_:1},8,["variant"])]),e("div",Pe,[e("div",Oe,[s[6]||(s[6]=e("span",null,"Cost per mile",-1)),e("span",null,"$"+o(B(a.maintenanceBreakdowns.cpm)),1)]),e("div",Ae,[s[7]||(s[7]=e("span",null,"Num of WOs",-1)),e("span",null,o(a.maintenanceBreakdowns.total_repair_orders),1)]),e("div",Me,[s[8]||(s[8]=e("span",null,"Current Costs",-1)),e("span",null,"$"+o(B(a.maintenanceBreakdowns.total_invoice_amount)),1)]),e("div",Ve,[s[9]||(s[9]=e("span",null,"Missing Invoices",-1)),e("span",null,o(a.maintenanceBreakdowns.missing_invoices_count||0),1)])])])]),e("div",We,[e("div",ze,[s[12]||(s[12]=e("h3",{class:"text-base font-semibold"},"Miles Driven",-1)),e("div",Ee,o(F(a.milesDriven))+" Mile ",1)])])]),e("div",Ie,[s[18]||(s[18]=e("h3",{class:"text-base font-semibold mb-1"},"Netradyne Alerts Bonus Criteria",-1)),s[19]||(s[19]=e("div",{class:"text-xs text-muted-foreground mb-1"},"Green Zone Score",-1)),e("div",Ge,[e("div",Le,o(g(a.safetyData.average_driver_score||"N/A")),1),i(l(T),{variant:j(P.value),class:"text-xs"},{default:c(()=>[y(o(_(P.value)),1)]),_:1},8,["variant"])]),s[20]||(s[20]=e("div",{class:"flex justify-between items-center text-xs sm:text-sm font-semibold mb-2"},[e("span",null,"Alert Type"),e("div",{class:"flex items-center gap-1 sm:gap-2"},[e("span",{class:"w-10 sm:w-12 text-right"},"Total"),e("span",{class:"w-14 sm:w-16 text-right"},"P1KH")])],-1)),e("div",Ue,[e("div",qe,[s[13]||(s[13]=e("span",null,"Distracted Driving",-1)),e("div",He,[e("span",Ke,o(g(a.safetyData.driver_distraction)),1),e("span",Qe,o(p((N=a.safetyData.rates)==null?void 0:N.driver_distraction)),1)])]),e("div",Ye,[s[14]||(s[14]=e("span",null,"Speeding",-1)),e("div",Ze,[e("span",Xe,o(g(a.safetyData.speeding_violations)),1),e("span",Je,o(p((v=a.safetyData.rates)==null?void 0:v.speeding_violations)),1)])]),e("div",et,[s[15]||(s[15]=e("span",null,"Sign Violation",-1)),e("div",tt,[e("span",at,o(g(a.safetyData.sign_violations)),1),e("span",st,o(p((w=a.safetyData.rates)==null?void 0:w.sign_violations)),1)])]),e("div",rt,[s[16]||(s[16]=e("span",null,"Traffic Light Violation",-1)),e("div",nt,[e("span",ot,o(g(a.safetyData.traffic_light_violation)),1),e("span",it,o(p((u=a.safetyData.rates)==null?void 0:u.traffic_light_violation)),1)])]),e("div",lt,[s[17]||(s[17]=e("span",null,"Following Distance",-1)),e("div",ct,[e("span",dt,o(g(a.safetyData.following_distance)),1),e("span",ut,o(p((r=a.safetyData.rates)==null?void 0:r.following_distance)),1)])])]),e("div",mt,[e("div",null,"Total Hours Analyzed: "+o(g(a.safetyData.total_hours||0)),1)])])])}}}),vt={class:"bg-card rounded-lg border shadow-sm p-6 mb-6"},gt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},xt={class:"p-4 border rounded-lg"},pt={class:"flex items-center justify-between gap-3 mb-3"},bt={class:"p-4 border rounded-lg"},yt={class:"flex items-center justify-between gap-3 mb-3"},wt={class:"p-4 border rounded-lg"},_t={class:"flex items-center justify-between gap-3 mb-3"},ht=W({__name:"AdditionalMetricsCard",props:{performanceData:{type:Object,default:()=>({})},performanceRatings:{type:Object,default:()=>({})}},setup(a){const f=g=>g==null?"0":Math.round(parseFloat(g)).toString(),d=g=>{if(!g)return"Not Available";switch(g){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return g.charAt(0).toUpperCase()+g.slice(1).replace(/_/g," ")}},h=g=>{if(!g)return"outline";switch(g){case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},x=g=>{if(!g)return"text-gray-600";switch(g){case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}};return(g,p)=>(m(),S("div",vt,[p[6]||(p[6]=e("h3",{class:"text-xl font-semibold mb-4"},"Additional Performance Metrics",-1)),e("div",gt,[e("div",xt,[p[0]||(p[0]=e("h4",{class:"text-lg font-medium mb-2"},"VCR-P",-1)),p[1]||(p[1]=e("div",{class:"text-sm text-muted-foreground mb-1"},"Count",-1)),e("div",pt,[e("div",{class:A(["text-3xl font-bold",x(a.performanceRatings.vcr_preventable)])},o(f(a.performanceData.vcr_preventable)),3),i(l(T),{variant:h(a.performanceRatings.vcr_preventable),class:"text-xs"},{default:c(()=>[y(o(d(a.performanceRatings.vcr_preventable)),1)]),_:1},8,["variant"])])]),e("div",bt,[p[2]||(p[2]=e("h4",{class:"text-lg font-medium mb-2"},"VMCR-P",-1)),p[3]||(p[3]=e("div",{class:"text-sm text-muted-foreground mb-1"},"Count",-1)),e("div",yt,[e("div",{class:A(["text-3xl font-bold",x(a.performanceRatings.vmcr_p)])},o(f(a.performanceData.vmcr_p)),3),i(l(T),{variant:h(a.performanceRatings.vmcr_p),class:"text-xs"},{default:c(()=>[y(o(d(a.performanceRatings.vmcr_p)),1)]),_:1},8,["variant"])])]),e("div",wt,[p[4]||(p[4]=e("h4",{class:"text-lg font-medium mb-2"},"Open BOC",-1)),p[5]||(p[5]=e("div",{class:"text-sm text-muted-foreground mb-1"},"Count",-1)),e("div",_t,[e("div",{class:A(["text-3xl font-bold",x(a.performanceRatings.open_boc)])},o(f(a.performanceData.open_boc)),3),i(l(T),{variant:h(a.performanceRatings.open_boc),class:"text-xs"},{default:c(()=>[y(o(d(a.performanceRatings.open_boc)),1)]),_:1},8,["variant"])])])])]))}}),Dt=W({__name:"CardDescription",props:{class:{}},setup(a){const f=a;return(d,h)=>(m(),S("p",{class:A(l(ue)("text-sm text-muted-foreground",f.class))},[J(d.$slots,"default")],2))}}),kt={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},$t={class:"flex items-center gap-2"},St={class:"relative w-full md:w-auto"},jt={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},Nt={class:"overflow-x-auto"},Rt={class:"flex items-center gap-1"},Ct={class:"flex items-center justify-end gap-1"},Tt={class:"flex items-center justify-end gap-1"},Bt={class:"flex items-center justify-end gap-1"},Ft={class:"flex flex-col items-center justify-center gap-2"},Pt={key:0},Ot={key:1},At={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},Mt={class:"flex items-center gap-4 text-sm text-muted-foreground"},Vt={class:"flex items-center gap-1"},Wt={class:"flex items-center gap-1"},zt={class:"relative"},Et=["value"],It={class:"flex space-x-1"},Gt=W({__name:"DriverPerformanceTable",props:{driversData:{type:Array,default:()=>[]}},setup(a){const f=a,d=O(""),h=O("overall_score"),x=O("desc"),g=u=>{h.value===u?x.value=x.value==="asc"?"desc":"asc":(h.value=u,x.value=u==="driver_name"?"asc":"desc")},p=()=>{d.value="",h.value="overall_score",x.value="desc",_.value=1,D.value=10},B=C(()=>{if(!f.driversData||f.driversData.length===0)return[];if(!d.value)return f.driversData;const u=d.value.toLowerCase();return f.driversData.filter(r=>r.driver_name.toLowerCase().includes(u))}),F=C(()=>B.value.length===0?[]:[...B.value].sort((u,r)=>{const n=u[h.value],R=r[h.value];return typeof n=="string"?x.value==="asc"?n.localeCompare(R):R.localeCompare(n):x.value==="asc"?n-R:R-n})),_=O(1),D=O(10);K([h,x,d],()=>{_.value=1}),K(D,()=>{_.value=1});const j=C(()=>F.value.length),P=C(()=>Math.max(1,Math.ceil(j.value/D.value)));K([P,_],()=>{_.value>P.value&&(_.value=P.value)});const b=C(()=>{const u=P.value,r=_.value;if(u<=5)return Array.from({length:u},(M,H)=>H+1);let n=[1,u];const R=[r-1,r,r+1].filter(M=>M>1&&M<u);n.push(...R),n=[...new Set(n)].sort((M,H)=>M-H);const z=[];let L=0;for(const M of n)M-L>1&&z.push(-1),z.push(M),L=M;return z}),t=C(()=>(_.value-1)*D.value),s=C(()=>Math.min(t.value+D.value,j.value)),N=C(()=>F.value.slice(t.value,s.value)),v=u=>u>=75?"success":u>=50?"midRange":u>=25?"warning":"destructive",w=u=>u>=900?"success":u>=750?"midRange":u>=600?"warning":"destructive";return(u,r)=>(m(),$(l(oe),{class:"shadow-sm border bg-card"},{default:c(()=>[i(l(ie),{class:"p-4 border-b"},{default:c(()=>[e("div",kt,[e("div",null,[i(l(le),{class:"text-lg font-semibold flex items-center gap-2"},{default:c(()=>[i(k,{name:"users",class:"h-5 w-5 text-primary"}),r[9]||(r[9]=y(" Driver Performance "))]),_:1}),i(Dt,null,{default:c(()=>r[10]||(r[10]=[y("Overall driver performance metrics")])),_:1})]),e("div",$t,[e("div",St,[e("div",jt,[i(k,{name:"search",class:"h-4 w-4 text-muted-foreground"})]),i(l(de),{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=n=>d.value=n),placeholder:"Search drivers...",class:"pl-10 w-full md:w-[200px]"},null,8,["modelValue"])]),i(l(q),{variant:"outline",size:"sm",onClick:p,class:"hidden md:flex items-center gap-1"},{default:c(()=>[i(k,{name:"rotate-ccw",class:"h-4 w-4"}),r[11]||(r[11]=y(" Reset "))]),_:1})])])]),_:1}),i(l(ce),{class:"p-0"},{default:c(()=>[e("div",Nt,[i(l(se),{class:"relative h-[400px] overflow-auto"},{default:c(()=>[i(l(re),null,{default:c(()=>[i(l(Q),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:c(()=>[i(l(U),{class:"w-12 text-center"},{default:c(()=>r[12]||(r[12]=[e("div",{class:"flex items-center justify-center"}," # ",-1)])),_:1}),i(l(U),{onClick:r[1]||(r[1]=n=>g("driver_name")),class:"cursor-pointer whitespace-nowrap"},{default:c(()=>[e("div",Rt,[r[13]||(r[13]=y(" Driver Name ")),h.value==="driver_name"?(m(),$(k,{key:0,name:x.value==="asc"?"arrow-up":"arrow-down",class:"h-4 w-4"},null,8,["name"])):(m(),$(k,{key:1,name:"arrow-up-down",class:"h-4 w-4 opacity-50"}))])]),_:1}),i(l(U),{onClick:r[2]||(r[2]=n=>g("acceptance_score")),class:"cursor-pointer text-right whitespace-nowrap"},{default:c(()=>[e("div",Ct,[r[14]||(r[14]=y(" Acceptance ")),h.value==="acceptance_score"?(m(),$(k,{key:0,name:x.value==="asc"?"arrow-up":"arrow-down",class:"h-4 w-4"},null,8,["name"])):(m(),$(k,{key:1,name:"arrow-up-down",class:"h-4 w-4 opacity-50"}))])]),_:1}),i(l(U),{onClick:r[3]||(r[3]=n=>g("on_time_score")),class:"cursor-pointer text-right whitespace-nowrap"},{default:c(()=>[e("div",Tt,[r[15]||(r[15]=y(" On-Time ")),h.value==="on_time_score"?(m(),$(k,{key:0,name:x.value==="asc"?"arrow-up":"arrow-down",class:"h-4 w-4"},null,8,["name"])):(m(),$(k,{key:1,name:"arrow-up-down",class:"h-4 w-4 opacity-50"}))])]),_:1}),i(l(U),{onClick:r[4]||(r[4]=n=>g("safety_score")),class:"cursor-pointer text-right whitespace-nowrap"},{default:c(()=>[e("div",Bt,[r[16]||(r[16]=y(" Green Zone Score ")),h.value==="safety_score"?(m(),$(k,{key:0,name:x.value==="asc"?"arrow-up":"arrow-down",class:"h-4 w-4"},null,8,["name"])):(m(),$(k,{key:1,name:"arrow-up-down",class:"h-4 w-4 opacity-50"}))])]),_:1})]),_:1})]),_:1}),i(l(ne),null,{default:c(()=>[(m(!0),S(I,null,G(N.value,(n,R)=>(m(),$(l(Q),{key:n.driver_name,class:"hover:bg-muted/20 transition-colors"},{default:c(()=>[i(l(E),{class:"text-center"},{default:c(()=>[i(l(T),{variant:"outline",class:"min-w-[28px] justify-center"},{default:c(()=>[y(o(t.value+R+1),1)]),_:2},1024)]),_:2},1024),i(l(E),{class:"font-medium"},{default:c(()=>[y(o(n.driver_name),1)]),_:2},1024),i(l(E),{class:"text-right"},{default:c(()=>[i(l(T),{variant:v(n.acceptance_score)},{default:c(()=>[y(o(n.acceptance_score)+"% ",1)]),_:2},1032,["variant"])]),_:2},1024),i(l(E),{class:"text-right"},{default:c(()=>[i(l(T),{variant:v(n.on_time_score)},{default:c(()=>[y(o(n.on_time_score)+"% ",1)]),_:2},1032,["variant"])]),_:2},1024),i(l(E),{class:"text-right"},{default:c(()=>[i(l(T),{variant:w(n.raw_safety_score)},{default:c(()=>[y(o(n.raw_safety_score),1)]),_:2},1032,["variant"])]),_:2},1024)]),_:2},1024))),128)),B.value.length===0?(m(),$(l(Q),{key:0},{default:c(()=>[i(l(E),{colspan:"6",class:"text-center py-8 text-muted-foreground"},{default:c(()=>[e("div",Ft,[i(k,{name:"users-x",class:"h-10 w-10 opacity-50"}),d.value?(m(),S("p",Pt,'No drivers found matching "'+o(d.value)+'"',1)):(m(),S("p",Ot,"No driver performance data available for the selected period.")),d.value?(m(),$(l(q),{key:2,variant:"outline",size:"sm",onClick:r[5]||(r[5]=n=>d.value="")},{default:c(()=>r[17]||(r[17]=[y(" Clear search ")])),_:1})):V("",!0)])]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1})]),e("div",At,[e("div",Mt,[e("span",Vt,[i(k,{name:"list",class:"h-4 w-4"}),y(" Showing "+o(t.value+1)+"-"+o(s.value)+" of "+o(j.value)+" drivers ",1)]),e("span",Wt,[i(k,{name:"layout-grid",class:"h-4 w-4"}),r[18]||(r[18]=y(" Per page: "))]),e("div",zt,[ee(e("select",{"onUpdate:modelValue":r[6]||(r[6]=n=>D.value=n),class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(m(),S(I,null,G([5,10,20,50],n=>e("option",{key:n,value:n},o(n),9,Et)),64))],512),[[te,D.value,void 0,{number:!0}]]),r[19]||(r[19]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),e("div",It,[i(l(q),{size:"sm",variant:"ghost",onClick:r[7]||(r[7]=n=>_.value--),disabled:_.value===1,class:"flex items-center gap-1"},{default:c(()=>[i(k,{name:"chevron-left",class:"h-4 w-4"}),r[20]||(r[20]=y(" Prev "))]),_:1},8,["disabled"]),(m(!0),S(I,null,G(b.value,n=>(m(),$(l(q),{key:n,size:"sm",variant:"ghost",onClick:R=>n!==-1?_.value=n:null,class:A({"border-primary bg-primary/10 text-primary font-medium":n===_.value,"opacity-50 pointer-events-none":n===-1})},{default:c(()=>[y(o(n===-1?"...":n),1)]),_:2},1032,["onClick","class"]))),128)),i(l(q),{size:"sm",variant:"ghost",onClick:r[8]||(r[8]=n=>_.value++),disabled:_.value===P.value,class:"flex items-center gap-1"},{default:c(()=>[r[21]||(r[21]=y(" Next ")),i(k,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}}),Lt={class:"container w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Ut={class:"flex items-center justify-between mb-6"},qt={class:"h-auto"},ua=W({__name:"Summary",props:{tenantSlug:String,summaries:Object,delayBreakdowns:Object,rejectionBreakdowns:Object,maintenanceBreakdowns:Object,dateFilter:String,dateRange:Object,driversOverallPerformance:Object,milesDriven:Number},setup(a){const f=a;O("on-time");const d=O(f.dateFilter||"t6w"),h=O(null),x=O(null);ae(()=>{});const g=C(()=>{const t={yesterday:"yesterday","current-week":"current_week",t6w:"rolling_6_weeks",quarterly:"quarterly"}[d.value]||d.value;return D(t)}),p=b=>{d.value=b,Z.visit(route("dashboard",{tenantSlug:f.tenantSlug,dateFilter:b,minInvoiceAmount:h.value||null,outstandingDate:x.value||null}),{only:["summaries","delayBreakdowns","rejectionBreakdowns","maintenanceBreakdowns","dateFilter","dateRange","milesDriven","driversOverallPerformance"]})},B=[{title:f.tenantSlug?"Dashboard":"Admin Dashboard",href:f.tenantSlug?route("dashboard",{tenantSlug:f.tenantSlug}):route("admin.dashboard")},{title:"Performance Summary",href:route("dashboard",{tenantSlug:f.tenantSlug})}],F=C(()=>{var b,t;return(t=(b=f.summaries)==null?void 0:b.performance)!=null&&t.last_updated?_(new Date(f.summaries.performance.last_updated)):_(new Date)}),_=b=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(b),D=b=>{var s,N;if((N=(s=f.summaries)==null?void 0:s[b])!=null&&N.date_range){const v=new Date(f.summaries[b].date_range.start+"T12:00:00"),w=new Date(f.summaries[b].date_range.end+"T12:00:00");return`${j(v)} - ${j(w)}`}const t=new Date;switch(b){case"yesterday":{const v=new Date(t);return v.setDate(v.getDate()-1),j(v)}case"current_week":{const v=new Date(t);v.setDate(t.getDate()-t.getDay());const w=new Date(v);return w.setDate(v.getDate()+6),`${j(v)} - ${j(w)}`}case"rolling_6_weeks":{const v=new Date(t);v.setDate(t.getDate()-t.getDay()+6);const w=new Date(v);return w.setDate(v.getDate()-6*7+1),`${j(w)} - ${j(v)}`}case"quarterly":{const v=new Date(t),w=new Date(t);return w.setMonth(w.getMonth()-3),`${j(w)} - ${j(v)}`}default:return""}},j=b=>new Intl.DateTimeFormat("en-US",{month:"numeric",day:"numeric",year:"numeric"}).format(b),P=C(()=>{var v,w;if(!((w=(v=f.summaries)==null?void 0:v.performance)!=null&&w.ratings))return"Not Available";const b=f.summaries.performance.ratings,t={fantastic_plus:5,fantastic:4,good:3,fair:2,poor:1},s=["average_acceptance","average_on_time","average_maintenance_variance_to_spend","open_boc","vcr_preventable","vmcr_p"];let N="fantastic_plus";for(const u of s)b[u]&&t[b[u]]<t[N]&&(N=b[u]);switch(N){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return"Not Available"}});return(b,t)=>(m(),$(X,{breadcrumbs:B,tenantSlug:a.tenantSlug},{default:c(()=>{var s,N,v,w,u,r,n,R,z,L;return[i(l(Y),{title:"Performance Summary Dashboard"}),e("div",Lt,[e("div",Ut,[t[0]||(t[0]=e("h1",{class:"text-2xl font-bold"},null,-1)),i(l(T),{variant:"outline",class:"text-sm"},{default:c(()=>[i(k,{name:"calendar",class:"mr-1 h-4 w-4"}),y(" Last updated: "+o(F.value),1)]),_:1})]),i(fe,{operationalExcellenceScore:P.value},null,8,["operationalExcellenceScore"]),i(we,{onTabChange:p,dateRangeText:g.value,weekNumber:(s=a.dateRange)==null?void 0:s.weekNumber,startWeekNumber:(N=a.dateRange)==null?void 0:N.startWeekNumber,endWeekNumber:(v=a.dateRange)==null?void 0:v.endWeekNumber,year:(w=a.dateRange)==null?void 0:w.year,activeTabId:d.value},null,8,["dateRangeText","weekNumber","startWeekNumber","endWeekNumber","year","activeTabId"]),a.summaries?(m(),$(ft,{key:0,performanceData:((u=a.summaries.performance)==null?void 0:u.data)||{},performanceRatings:((r=a.summaries.performance)==null?void 0:r.ratings)||{},safetyData:a.summaries.safety||{},delayBreakdowns:((n=a.delayBreakdowns)==null?void 0:n.by_code)||[],rejectionBreakdowns:((R=a.rejectionBreakdowns)==null?void 0:R.by_reason)||[],maintenanceBreakdowns:a.maintenanceBreakdowns||{},milesDriven:a.milesDriven},null,8,["performanceData","performanceRatings","safetyData","delayBreakdowns","rejectionBreakdowns","maintenanceBreakdowns","milesDriven"])):V("",!0),e("div",qt,[a.driversOverallPerformance?(m(),$(Gt,{key:0,driversData:a.driversOverallPerformance.drivers||[]},null,8,["driversData"])):V("",!0)]),a.summaries?(m(),$(ht,{key:1,performanceData:((z=a.summaries.performance)==null?void 0:z.data)||{},performanceRatings:((L=a.summaries.performance)==null?void 0:L.ratings)||{}},null,8,["performanceData","performanceRatings"])):V("",!0)])]}),_:1},8,["tenantSlug"]))}});export{ua as default};
