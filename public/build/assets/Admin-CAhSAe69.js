import{d as D,c as $,r as w,b as u,e as i,f as s,z as e,u as t,X as d,E as c,F as b,S as n,H as F,O as V,U as _,ah as j}from"./vendor-_LBoWcPD.js";import{g as G}from"./vendor-vue-DhopVsWr.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-C0mLukR-.js";import{_ as H,a as I}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-CO7sizhr.js";import{_ as L}from"./Form.vue_vue_type_script_setup_true_lang-BvVyI9qP.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-BTsGooBq.js";import{_ as O}from"./Card.vue_vue_type_script_setup_true_lang-CZX-Mq43.js";import{_ as U}from"./CardContent.vue_vue_type_script_setup_true_lang-BknjOVLD.js";import{_ as X}from"./CardHeader.vue_vue_type_script_setup_true_lang-E1nNsC9_.js";import{_ as Y}from"./CardTitle.vue_vue_type_script_setup_true_lang-S735wyEC.js";import{_ as q}from"./Separator.vue_vue_type_script_setup_true_lang-C6WAv8py.js";import{_ as J,a as K,b as E,c as m,d as Q,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-CTKJpJde.js";import{_ as B}from"./Badge.vue_vue_type_script_setup_true_lang-DwyBWJwY.js";import{P as R,T as W,c as Z}from"./vendor-icons-DEdOLZ3C.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-BEwfQTMc.js";import"./vendor-ui-C-2WMSm6.js";import"./Icon.vue_vue_type_script_setup_true_lang-BH94pyx1.js";import"./useInitials-DzeGKvtI.js";import"./app-C2-wzv-3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C9DuGiAN.js";import"./Input.vue_vue_type_script_setup_true_lang-ct5fQ9S7.js";import"./Label.vue_vue_type_script_setup_true_lang-CM72ee2b.js";import"./InputError.vue_vue_type_script_setup_true_lang-78CVv6-X.js";const te={class:"flex flex-col space-y-6 w-full"},se={class:"flex justify-end"},ae={class:"flex items-center space-x-2"},le={key:0,class:"overflow-x-auto"},ne={key:1,class:"text-center py-12"},re={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center overflow-y-auto overflow-x-hidden"},ie={class:"relative z-10 mx-auto my-4 w-full max-w-md p-4 md:max-w-xl"},oe=D({__name:"Admin",props:{thresholds:Array,metrics:Array,tenantSlug:{type:String,default:null},permissions:Array},setup(M){const l=M,{tenantSlug:p}=l,h=$(()=>l.permissions?l.permissions.map(r=>r.name):[]),N=$(()=>[{title:p?"Dashboard":"Admin Dashboard",href:p?route("dashboard",{tenantSlug:l.tenantSlug}):route("admin.dashboard")}]),g=w(!1),v=w({}),x=w(!1),S=r=>{switch(r){case!0:return"success";case!1:return"destructive";default:return"outline"}};function z(r){v.value=r,x.value=!1,g.value=!0}function T(){v.value={metric_name:"",good_threshold:null,bad_threshold:null,good_enabled:!0,bad_enabled:!0},x.value=!0,g.value=!0}function y(){g.value=!1,v.value={}}function A(r){return r??"-"}const k=$(()=>{if(!l.metrics||!l.thresholds)return[];const r=l.thresholds.map(a=>a.metric_name);return l.metrics.filter(a=>!r.includes(a))});return(r,a)=>(i(),u(P,{breadcrumbs:N.value,tenantSlug:t(p),permissions:l.permissions},{default:s(()=>[e(t(G),{title:"Safety Thresholds Management"}),e(H,{permissions:l.permissions},{default:s(()=>[d("div",te,[e(I,{title:"Safety Thresholds",description:"Manage safety thresholds for driver coaching and alerts"}),e(t(q)),d("div",se,[k.value.length>0&&h.value.includes("sms-coaching.update")?(i(),u(C,{key:0,onClick:T,variant:"default",size:"sm",class:"gap-1"},{default:s(()=>[e(t(R),{class:"h-4 w-4"}),a[0]||(a[0]=d("span",null,"Add New Threshold",-1))]),_:1})):c("",!0)]),e(t(O),{class:"w-full"},{default:s(()=>[e(t(X),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(Y),{class:"text-xl font-semibold"},{default:s(()=>[d("div",ae,[e(t(W),{class:"h-5 w-5"}),a[1]||(a[1]=d("span",null,"Safety Thresholds",-1))])]),_:1})]),_:1}),e(t(U),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[l.thresholds&&l.thresholds.length>0?(i(),b("div",le,[e(t(J),null,{default:s(()=>[e(t(K),null,{default:s(()=>[e(t(E),null,{default:s(()=>[e(t(m),null,{default:s(()=>a[2]||(a[2]=[n("Metric")])),_:1}),e(t(m),null,{default:s(()=>a[3]||(a[3]=[n("Good Threshold")])),_:1}),e(t(m),null,{default:s(()=>a[4]||(a[4]=[n("Good Enabled")])),_:1}),e(t(m),null,{default:s(()=>a[5]||(a[5]=[n("Bad Threshold")])),_:1}),e(t(m),null,{default:s(()=>a[6]||(a[6]=[n("Bad Enabled")])),_:1}),h.value.includes("sms-coaching.update")?(i(),u(t(m),{key:0,class:"text-right"},{default:s(()=>a[7]||(a[7]=[n("Actions")])),_:1})):c("",!0)]),_:1})]),_:1}),e(t(Q),null,{default:s(()=>[(i(!0),b(F,null,V(l.thresholds,o=>(i(),u(t(E),{key:o.id},{default:s(()=>[e(t(f),{class:"capitalize"},{default:s(()=>[n(_(o.metric_name.replace(/_/g," ")),1)]),_:2},1024),e(t(f),null,{default:s(()=>[n(_(A(o.good_threshold)),1)]),_:2},1024),e(t(f),null,{default:s(()=>[e(t(B),{variant:S(o.good_enabled)},{default:s(()=>[n(_(o.good_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:s(()=>[n(_(A(o.bad_threshold)),1)]),_:2},1024),e(t(f),null,{default:s(()=>[e(t(B),{variant:S(o.bad_enabled)},{default:s(()=>[n(_(o.bad_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),{class:"text-right"},{default:s(()=>[h.value.includes("sms-coaching.update")?(i(),u(C,{key:0,variant:"outline",size:"sm",onClick:de=>z(o)},{default:s(()=>a[8]||(a[8]=[n(" Edit ")])),_:2},1032,["onClick"])):c("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(i(),b("div",ne,[e(t(Z),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a[10]||(a[10]=d("h3",{class:"text-lg font-medium text-muted-foreground mb-4"},"No safety thresholds defined yet",-1)),k.value.length>0?(i(),u(C,{key:0,onClick:T,variant:"default"},{default:s(()=>a[9]||(a[9]=[n(" Create Your First Threshold ")])),_:1})):c("",!0)]))]),_:1})]),_:1}),e(j,{name:"fade"},{default:s(()=>[g.value?(i(),b("div",re,[d("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:y}),d("div",ie,[e(L,{tenantSlug:t(p),entry:v.value,isCreating:x.value,availableMetrics:k.value,onSaved:y,onCancel:y},null,8,["tenantSlug","entry","isCreating","availableMetrics"])])])):c("",!0)]),_:1})])]),_:1},8,["permissions"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}}),Fe=ee(oe,[["__scopeId","data-v-e83c76aa"]]);export{Fe as default};
