import{H as c,i,X as t,P as g,a as T,J as $,K as L,a3 as Ze,r as S,A as he,w as pe,aj as et,f as N,B as n,G as x,e as tt,j as l,O as d,E as z,Y as P,u as s,I as Se,W as ot,ak as X,al as nt}from"./vendor-DQlNQ5gH.js";import{x as ee,g as lt,W as Y}from"./vendor-vue-CQn6KzTb.js";import{_ as F}from"./Icon.vue_vue_type_script_setup_true_lang-D_7hXODg.js";import{_ as M,a as te}from"./Label.vue_vue_type_script_setup_true_lang-BRq5T-WA.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-B-8911bK.js";import{_ as at}from"./Checkbox.vue_vue_type_script_setup_true_lang-BXBwirKi.js";import{_ as rt,a as st,b as ce,c as ae,d as it,e as Z}from"./TableRow.vue_vue_type_script_setup_true_lang-tbX_6Hnu.js";import{_ as fe}from"./Card.vue_vue_type_script_setup_true_lang-yOexdr0W.js";import{_ as dt}from"./CardHeader.vue_vue_type_script_setup_true_lang-BXftwvVe.js";import{_ as ut}from"./CardTitle.vue_vue_type_script_setup_true_lang-OH7QXspQ.js";import{_ as me}from"./CardContent.vue_vue_type_script_setup_true_lang-Dh-7LYTR.js";import{_ as re,a as se,b as ie,c as de,d as ue}from"./DialogDescription.vue_vue_type_script_setup_true_lang-ffXSICao.js";import{_ as ve}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CJ4mwW2I.js";import{_ as Ce,a as we,b as je}from"./AlertDescription.vue_vue_type_script_setup_true_lang-DGF9dqnu.js";import{_ as ct}from"./AppLayout.vue_vue_type_script_setup_true_lang-AWtMNQ9g.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-D2wO_Ovf.js";import"./vendor-icons-pKobgiP0.js";import"./vendor-ui-CGEGZLyF.js";import"./app-D7DQGb5e.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BpTGIYrD.js";const ft={class:"bg-background rounded-lg border shadow-sm p-4 flex flex-col items-center justify-center"},mt={class:"text-sm font-semibold mb-2 text-foreground"},vt={class:"text-2xl font-bold text-primary"},pt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(v){return(r,_)=>(i(),c("div",ft,[t("h3",mt,g(v.title),1),t("p",vt,g(v.value),1)]))}},gt={class:"bg-background rounded-lg border shadow-sm p-4"},yt={class:"text-base font-semibold mb-4"},bt={key:0,class:"text-center text-lg py-4 text-violet-400 font-medium"},_t={class:"space-y-3"},xt={class:"text-sm"},kt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},totalRejections:{type:Number,default:0},rejectionType:{type:String,default:""}},setup(v){const r=v,_=T(()=>r.rejectionType==="load"?"No load rejections recorded. You're on track for Fantastic+ !":r.rejectionType==="block"?"No block rejections recorded. You're on track for Fantastic+ !":"No rejections recorded. You're on track for Fantastic+ !"),B=p=>{const R=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],h=[...r.drivers].sort((w,b)=>b.total_penalty-w.total_penalty).map(w=>w.total_penalty).indexOf(p);return R[h]||"#6b7280"};return(p,R)=>(i(),c("div",gt,[t("h3",yt,g(v.title),1),v.totalRejections==="0"?(i(),c("div",bt,g(_.value),1)):(i(),c($,{key:1},[R[0]||(R[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",_t,[(i(!0),c($,null,L(v.drivers,(j,h)=>(i(),c("div",{key:h,class:"flex justify-between items-center"},[t("span",xt,g(j.driver_name),1),t("span",{class:"text-sm font-medium",style:Ze({color:B(j.total_penalty)})},g(j.total_penalty),5)]))),128))])],64))]))}},Ct={class:"bg-background rounded-lg border shadow-sm p-4"},wt={class:"text-base font-semibold mb-4"},jt={class:"h-64"},ht={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(v){const r=v,_=S(null);let B=null;const p=()=>{if(B&&B.destroy(),!_.value)return;const R=_.value.getContext("2d"),j=[];r.chartData.datasets.forEach(b=>{b.data&&b.data.length&&j.push(...b.data)});const h=j.length>0?Math.min(...j):0,w=j.length>0?Math.max(...j):100;B=new et(R,{type:"line",data:r.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(b){const V=b.raw||0,A=r.averageAcceptance||0,E=r.chartData.dateRangeLabel||"selected period",C=Number(A).toFixed(2);return[`Acceptance Score: ${V}`,`Average Score Over ${E}: ${C}`]}}}},scales:{y:{beginAtZero:!(h>10),min:Math.max(Math.floor(h-15),0),max:Math.min(110,Math.ceil(w+15)),ticks:{stepSize:5,padding:10,font:{size:11},callback:function(b){return b<120?b:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return he(()=>{p()}),pe(()=>r.chartData,()=>{p()},{deep:!0}),(R,j)=>(i(),c("div",Ct,[t("h3",wt,g(v.title),1),t("div",jt,[t("canvas",{ref_key:"chartCanvas",ref:_},null,512)])]))}},St={class:"space-y-6"},$t={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Dt={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},At={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null},currentDateFilter:{type:String,default:null},currentFilters:{type:Object,default:()=>({})}},setup(v){const r=v,_=T(()=>r.metricsData&&r.metricsData.by_category?[{title:"Total Rejected Stops",value:r.metricsData.totalRejections},{title:"Rejected +6 Hours Before Start Time",value:r.metricsData.moreThan6Count},{title:"Rejected 0-6 Hours Before Start Time",value:r.metricsData.within6Count},{title:"Rejected After Start Time",value:r.metricsData.afterStartCount}]:[]),B=T(()=>r.driversData&&r.driversData.length?r.driversData:[]),p=T(()=>r.chartData&&Object.keys(r.chartData).length?r.chartData:{}),R=T(()=>{var h;return((h=r.metricsData)==null?void 0:h.totalRejections)||0}),j=T(()=>{var h;return((h=r.currentFilters)==null?void 0:h.rejectionType)||null});return(h,w)=>(i(),c("div",St,[t("div",$t,[(i(!0),c($,null,L(_.value,(b,V)=>(i(),N(pt,{key:V,title:b.title,value:b.value},null,8,["title","value"]))),128))]),t("div",Dt,[n(kt,{title:"Bottom 5 Drivers",drivers:B.value,"total-rejections":R.value,"rejection-type":j.value,class:"lg:col-span-1"},null,8,["drivers","total-rejections","rejection-type"]),r.currentDateFilter!="Yesterday"?(i(),N(ht,{key:0,title:"Acceptance Score",chartData:p.value,averageAcceptance:v.averageAcceptance,class:"lg:col-span-3"},null,8,["chartData","averageAcceptance"])):x("",!0)])]))}},Nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Tt={key:0,class:"col-span-full"},Rt={class:"relative"},Ft=["value"],Mt={class:"col-span-full"},Ut={class:"relative"},Bt={class:"relative"},Vt={class:"relative"},zt=["value"],Lt={class:"relative"},Pt={class:"flex items-center space-x-2"},Et={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},Ot=tt({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(v,{emit:r}){var j,h,w,b,V,A,E;const _=v,B=r,p=ee({id:(j=_.rejection)==null?void 0:j.id,tenant_id:_.isSuperAdmin?(h=_.rejection)==null?void 0:h.tenant_id:null,date:((w=_.rejection)==null?void 0:w.date)||"",driver_name:((b=_.rejection)==null?void 0:b.driver_name)||"",rejection_type:((V=_.rejection)==null?void 0:V.rejection_type)||"block",rejection_category:((A=_.rejection)==null?void 0:A.rejection_category)||"more_than_6",reason_code_id:((E=_.rejection)==null?void 0:E.reason_code_id)||null,disputed:_.rejection&&_.rejection.disputed!==null?parseInt(_.rejection.disputed)===1:!1,driver_controllable:_.rejection&&_.rejection.driver_controllable!==null?parseInt(_.rejection.driver_controllable)===1:null});pe(()=>_.rejection,C=>{C?(p.id=C.id,p.tenant_id=C.tenant_id,p.date=C.date,p.driver_name=C.driver_name,p.rejection_type=C.rejection_type,p.rejection_category=C.rejection_category,p.reason_code_id=C.reason_code_id,p.disputed=C.disputed!==null?parseInt(C.disputed)===1:!1,p.driver_controllable=C.driver_controllable!==null?parseInt(C.driver_controllable)===1:null):p.reset()},{immediate:!0});const R=()=>{const C=!!p.id,u=_.isSuperAdmin?C?"acceptance.update.admin":"acceptance.store.admin":C?"acceptance.update":"acceptance.store",y=_.isSuperAdmin?C?{rejection:p.id}:{}:C?{tenantSlug:_.tenantSlug,rejection:p.id}:{tenantSlug:_.tenantSlug};p[C?"put":"post"](route(u,y),{onSuccess:()=>B("close")})};return(C,u)=>(i(),c("form",{onSubmit:Se(R,["prevent"]),class:"space-y-6"},[t("div",Nt,[v.isSuperAdmin?(i(),c("div",Tt,[n(M,null,{default:l(()=>u[9]||(u[9]=[d("Company Name")])),_:1}),t("div",Rt,[z(t("select",{"onUpdate:modelValue":u[0]||(u[0]=y=>s(p).tenant_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[u[10]||(u[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),c($,null,L(v.tenants,y=>(i(),c("option",{key:y.id,value:y.id},g(y.name),9,Ft))),128))],512),[[P,s(p).tenant_id]]),u[11]||(u[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),t("div",Mt,[n(M,null,{default:l(()=>u[12]||(u[12]=[d("Date")])),_:1}),n(te,{type:"date",modelValue:s(p).date,"onUpdate:modelValue":u[1]||(u[1]=y=>s(p).date=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(M,null,{default:l(()=>u[13]||(u[13]=[d("Driver Name")])),_:1}),n(te,{modelValue:s(p).driver_name,"onUpdate:modelValue":u[2]||(u[2]=y=>s(p).driver_name=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(M,null,{default:l(()=>u[14]||(u[14]=[d("Rejection Type")])),_:1}),t("div",Ut,[z(t("select",{"onUpdate:modelValue":u[3]||(u[3]=y=>s(p).rejection_type=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[15]||(u[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[P,s(p).rejection_type]]),u[16]||(u[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(M,null,{default:l(()=>u[17]||(u[17]=[d("Rejection Category")])),_:1}),t("div",Bt,[z(t("select",{"onUpdate:modelValue":u[4]||(u[4]=y=>s(p).rejection_category=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[18]||(u[18]=[t("option",{value:"more_than_6"},"More than 6 hrs",-1),t("option",{value:"within_6"},"Within 6 hrs",-1),t("option",{value:"after_start"},"After start",-1)]),512),[[P,s(p).rejection_category]]),u[19]||(u[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(M,null,{default:l(()=>u[20]||(u[20]=[d("Reason Code")])),_:1}),t("div",Vt,[z(t("select",{"onUpdate:modelValue":u[5]||(u[5]=y=>s(p).reason_code_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),c($,null,L(v.reasons,y=>(i(),c("option",{key:y.id,value:y.id},g(y.reason_code),9,zt))),128))],512),[[P,s(p).reason_code_id]]),u[21]||(u[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(M,null,{default:l(()=>u[22]||(u[22]=[d("Driver Controllable")])),_:1}),t("div",Lt,[z(t("select",{"onUpdate:modelValue":u[6]||(u[6]=y=>s(p).driver_controllable=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[23]||(u[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[P,s(p).driver_controllable]]),u[24]||(u[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",Pt,[n(at,{checked:s(p).disputed,"onUpdate:checked":u[7]||(u[7]=y=>s(p).disputed=y),id:"disputed"},null,8,["checked"]),n(M,{for:"disputed"},{default:l(()=>u[25]||(u[25]=[d("Disputed")])),_:1})])]),t("div",Et,[n(k,{type:"button",onClick:u[8]||(u[8]=y=>B("close")),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>u[26]||(u[26]=[d(" Cancel ")])),_:1}),n(k,{type:"submit",disabled:s(p).processing,class:"w-full sm:w-auto"},{default:l(()=>[d(g(s(p).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Wt={class:"mx-auto w-full space-y-8 p-6"},Yt={class:"mb-6 flex flex-col items-center justify-between gap-4 sm:flex-row"},It={class:"flex flex-wrap gap-3"},qt={class:"relative"},Ht={key:0,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},Gt={class:"py-1"},Jt={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},Kt=["href"],Qt=["action"],Xt={class:"flex flex-col gap-2"},Zt={class:"flex flex-wrap gap-2"},eo={key:0,class:"text-sm text-muted-foreground"},to={key:0},oo={key:1},no={key:2},lo={key:3,class:"ml-1"},ao={key:2,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},ro={key:3},so={class:"flex items-center justify-between"},io={class:"flex items-center gap-2"},uo={key:0,class:"ml-4 flex flex-wrap gap-2"},co={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fo={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},mo={class:"capitalize"},vo={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},po={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},go={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},yo={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},bo={class:"flex flex-col gap-4"},_o={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-1"},xo={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-3"},ko=["value"],Co={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},wo={class:"flex justify-end"},jo={class:"overflow-x-auto"},ho={class:"flex items-center justify-center"},So=["checked"],$o={class:"flex items-center"},Do={key:0},Ao={key:1},No={key:2,class:"ml-2"},To={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ro={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Fo={key:3,class:"ml-2 opacity-50"},Mo=["value"],Uo={key:1,class:"capitalize"},Bo={key:0,class:"ml-1 text-xs text-red-500"},Vo={class:"flex space-x-2"},zo={key:0,class:"border-t bg-muted/20 px-4 py-3"},Lo={class:"flex items-center justify-between"},Po={class:"flex items-center gap-4 text-sm text-muted-foreground"},Eo={class:"flex items-center gap-2"},Oo=["value"],Wo={class:"flex"},Yo=["innerHTML"],Io={class:"mt-4 space-y-4"},qo={class:"flex items-center justify-between"},Ho={class:"max-h-[400px] overflow-y-auto"},Go={key:0,class:"rounded-md border py-8 text-center text-muted-foreground"},Jo={key:1,class:"space-y-2"},Ko=["onClick"],Qo={class:"font-medium"},Xo={key:0,class:"ml-2 text-xs text-red-500"},Zo={key:0,class:"mt-1 text-sm text-muted-foreground"},en={class:"opacity-0 transition-opacity group-hover:opacity-100"},tn={key:0,class:"space-y-4 rounded-md border p-4"},on={class:"text-sm font-medium"},nn={class:"space-y-3"},ln={class:"flex justify-end space-x-2"},$n={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number}},setup(v){const r=v,_=T(()=>(b.value==="yesterday"||b.value==="current-week")&&r.weekNumber&&r.year?`Week ${r.weekNumber}, ${r.year}`:(b.value==="6w"||b.value==="quarterly")&&r.startWeekNumber&&r.endWeekNumber&&r.year?`Weeks ${r.startWeekNumber}-${r.endWeekNumber}, ${r.year}`:""),B=[{title:r.tenantSlug?"Dashboard":"Admin Dashboard",href:r.tenantSlug?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:r.tenantSlug?route("acceptance.index",{tenantSlug:r.tenantSlug}):route("acceptance.index.admin")}],p=S(!1),R=S(!1),j=S(null),h=S(""),w=S(""),b=S(r.dateFilter||"full"),V=S(r.perPage),A=S([]),E=S(!1),C=S(null),u=S(!1),y=S(!1),U=S(null),O=S({reason_code:"",description:""}),J=S(!1),ge=S(null),oe=["date","driver_name","rejection_type","reason_code","rejection_category","disputed","driver_controllable"],q=S("date"),H=S("desc"),m=S({search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""}),I=T(()=>{let a=[...r.rejections.data];if(m.value.search){const e=m.value.search.toLowerCase();a=a.filter(o=>{var f,D,W,Q,ke;return((f=o.driver_name)==null?void 0:f.toLowerCase().includes(e))||((D=o.rejection_type)==null?void 0:D.toLowerCase().includes(e))||((Q=(W=o.reason_code)==null?void 0:W.reason_code)==null?void 0:Q.toLowerCase().includes(e))||((ke=o.load_number)==null?void 0:ke.toLowerCase().includes(e))})}if(m.value.dateFrom&&(a=a.filter(e=>e.date&&e.date>=m.value.dateFrom)),m.value.dateTo&&(a=a.filter(e=>e.date&&e.date<=m.value.dateTo)),m.value.rejectionType&&(a=a.filter(e=>e.rejection_type===m.value.rejectionType)),m.value.reasonCode&&(a=a.filter(e=>e.reason_code&&e.reason_code.id===parseInt(m.value.reasonCode))),m.value.rejectionCategory&&(a=a.filter(e=>e.rejection_category===m.value.rejectionCategory)),m.value.disputed!==""){const e=m.value.disputed==="true";a=a.filter(o=>o.disputed===e)}if(m.value.driverControllable!=="")if(m.value.driverControllable==="null")a=a.filter(e=>e.driver_controllable===null);else{const e=m.value.driverControllable==="true";a=a.filter(o=>o.driver_controllable===e)}return a.sort((e,o)=>{var W,Q;let f=e[q.value],D=o[q.value];return q.value==="reason_code"&&(f=((W=e.reason_code)==null?void 0:W.reason_code)||"",D=((Q=o.reason_code)==null?void 0:Q.reason_code)||""),f===null?1:D===null?-1:(typeof f=="string"&&(f=f.toLowerCase(),D=D.toLowerCase()),f<D?H.value==="asc"?-1:1:f>D?H.value==="asc"?1:-1:0)}),a});function $e(a){q.value===a?H.value=H.value==="asc"?"desc":"asc":(q.value=a,H.value="asc")}function G(){}function De(){m.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""}}const ye=(a=null)=>{j.value=a,p.value=!0},Ae=()=>{R.value=!0,y.value=!1,U.value=null},Ne=()=>{O.value={reason_code:"",description:""},U.value=null,y.value=!0},Te=a=>{O.value={reason_code:a.reason_code,description:a.description||""},U.value=a.id,y.value=!0},Re=()=>{y.value=!1,U.value=null},be=a=>{ge.value=a,J.value=!0},Fe=()=>{const a=ee({reason_code:O.value.reason_code,description:O.value.description}),e=U.value?r.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":r.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",o=U.value?r.isSuperAdmin?{code:U.value}:{tenantSlug:r.tenantSlug,code:U.value}:r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};(U.value?a.put:a.post).call(a,route(e,o),{onSuccess:()=>{w.value=U.value?"Reason code updated successfully.":"Reason code created successfully.",y.value=!1,U.value=null,Y.reload({only:["rejection_reason_codes"]})},onError:D=>{console.error(D)}})},Me=a=>{const e=ee({}),o=r.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",f=r.isSuperAdmin?{id:a}:{tenantSlug:r.tenantSlug,code:a};e.delete(route(o,f),{onSuccess:()=>{w.value="Reason code deleted successfully.",J.value=!1,Y.reload({only:["rejection_reason_codes"]})}})},Ue=a=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=ee({}),o=r.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",f=r.isSuperAdmin?{rejection:a}:{tenantSlug:r.tenantSlug,rejection:a};e.delete(route(o,f),{preserveScroll:!0,onSuccess:()=>{w.value="Rejection deleted successfully."}})},Be=a=>{if(a){const e=new URL(a);e.searchParams.set("perPage",V.value),Y.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["rejections"]})}};function ne(a){b.value=a;const e=r.tenantSlug?route("acceptance.index",{tenantSlug:r.tenantSlug}):route("acceptance.index.admin");Y.get(e,{dateFilter:a,perPage:V.value},{preserveState:!0})}function Ve(){const a=r.tenantSlug?route("acceptance.index",{tenantSlug:r.tenantSlug}):route("acceptance.index.admin");Y.get(a,{dateFilter:b.value,perPage:V.value},{preserveState:!0})}function le(a){if(!a)return"";const e=a.split("-");if(e.length!==3)return a;const[o,f,D]=e;return`${Number(f)}/${Number(D)}/${o}`}pe(w,a=>{a&&setTimeout(()=>{w.value=""},5e3)});const ze=T(()=>{var o,f;if(!((o=r.rejection_breakdown)!=null&&o.by_category)||!((f=r.rejection_breakdown)!=null&&f.by_category.total_rejections))return null;const a=r.rejection_breakdown.by_category,e=m.value.rejectionType;return e?{totalRejections:a[`total_${e}_rejections`]||0,moreThan6Count:a[`more_than_6_${e}_count`]||0,within6Count:a[`within_6_${e}_count`]||0,afterStartCount:a[`after_start_${e}_count`]||0,by_category:!0}:{totalRejections:a.total_rejections,moreThan6Count:a.more_than_6_count,within6Count:a.within_6_count,afterStartCount:a.after_start_count,by_category:!0}}),Le=T(()=>{var a,e,o;return m.value.rejectionType=="load"?((a=r.rejection_breakdown)==null?void 0:a.bottom_five_drivers.load)||[]:m.value.rejectionType=="block"?((e=r.rejection_breakdown)==null?void 0:e.bottom_five_drivers.block)||[]:((o=r.rejection_breakdown)==null?void 0:o.bottom_five_drivers.total)||[]}),Pe=T(()=>!r.line_chart_data||r.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:r.line_chart_data.map(a=>a.date),datasets:[{label:"Acceptance Performance",data:r.line_chart_data.map(a=>a.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function Ee(a){Y.post(route("rejection_reason_codes.restore.admin",{id:a}),{},{onSuccess:()=>{w.value="Reason code restored successfully",setTimeout(()=>w.value="",3e3)}})}function Oe(a){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&Y.delete(route("rejection_reason_codes.forceDelete.admin",{id:a}),{onSuccess:()=>{w.value="Reason code permanently deleted",setTimeout(()=>w.value="",3e3)}})}T(()=>r.rejection_reason_codes.filter(a=>!a.deleted_at));const We=T(()=>I.value.length>0&&A.value.length===I.value.length);function Ye(a){a.target.checked?A.value=I.value.map(e=>e.id):A.value=[]}function Ie(){A.value.length>0&&(E.value=!0)}function qe(){const a=ee({ids:A.value}),e=r.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",o=r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};a.delete(route(e,o),{preserveScroll:!0,onSuccess:()=>{w.value=`${A.value.length} rejection records deleted successfully.`,A.value=[],E.value=!1},onError:f=>{console.error(f)}})}function He(a){const e=a.target.files[0];if(!e)return;const o=new FormData;o.append("csv_file",e);const f=r.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:r.tenantSlug});Y.post(f,o,{onSuccess:()=>{w.value="Delays imported successfully",a.target.value=""},onError:D=>{console.error(D),a.target.value=""}})}function Ge(){if(I.value.length===0){h.value="No data available to export",setTimeout(()=>{h.value=""},3e3);return}C.value&&C.value.submit()}const Je=T(()=>r.tenantSlug?route("acceptance.export",{tenantSlug:r.tenantSlug}):route("acceptance.export.admin")),_e=T(()=>b.value==="yesterday"||b.value==="current-week"||b.value==="6w"||b.value==="quarterly"?r.rejections&&r.rejections.data&&r.rejections.data.length>0:!0),K=S(!1),Ke=T(()=>"/storage/upload-data-temps/Rejections Template.csv");he(()=>{const a=e=>{K.value&&!e.target.closest(".relative")&&(K.value=!1)};document.addEventListener("click",a),ot(()=>{document.removeEventListener("click",a)})});const Qe=T(()=>m.value.search||m.value.dateFrom||m.value.dateTo||m.value.rejectionType||m.value.reasonCode||m.value.rejectionCategory||m.value.disputed||m.value.driverControllable);function Xe(a){if(!a)return"";const e=r.rejection_reason_codes.find(o=>o.id==a);return e?e.reason_code:""}function xe(a){return a?{more_than_6:"More than 6 hrs",within_6:"Within 6 hrs",after_start:"After start"}[a]||a:"—"}return(a,e)=>(i(),N(ct,{breadcrumbs:B,tenantSlug:v.tenantSlug},{default:l(()=>[n(s(lt),{title:"Acceptance"}),t("div",Wt,[w.value?(i(),N(s(Ce),{key:0,variant:"success"},{default:l(()=>[n(s(we),null,{default:l(()=>e[29]||(e[29]=[d("Success")])),_:1}),n(s(je),null,{default:l(()=>[d(g(w.value),1)]),_:1})]),_:1})):x("",!0),h.value?(i(),N(s(Ce),{key:1,variant:"destructive"},{default:l(()=>[n(s(we),null,{default:l(()=>e[30]||(e[30]=[d("Error")])),_:1}),n(s(je),null,{default:l(()=>[d(g(h.value),1)]),_:1})]),_:1})):x("",!0),t("div",Yt,[e[36]||(e[36]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Acceptance",-1)),t("div",It,[n(k,{onClick:e[0]||(e[0]=o=>ye()),variant:"default"},{default:l(()=>[n(F,{name:"plus",class:"mr-2 h-4 w-4"}),e[31]||(e[31]=d(" Add Rejection "))]),_:1}),A.value.length>0?(i(),N(k,{key:0,onClick:e[1]||(e[1]=o=>Ie()),variant:"destructive"},{default:l(()=>[n(F,{name:"trash",class:"mr-2 h-4 w-4"}),d(" Delete Selected ("+g(A.value.length)+") ",1)]),_:1})):x("",!0),t("div",qt,[n(k,{onClick:e[2]||(e[2]=o=>K.value=!K.value),variant:"secondary"},{default:l(()=>[n(F,{name:"upload",class:"mr-2 h-4 w-4"}),e[32]||(e[32]=d(" Upload CSV ")),n(F,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),K.value?(i(),c("div",Ht,[t("div",Gt,[t("label",Jt,[e[33]||(e[33]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:He,accept:".csv"},null,32)]),t("a",{href:Ke.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Kt)])])):x("",!0)]),n(k,{onClick:Se(Ge,["prevent"]),variant:"outline"},{default:l(()=>[n(F,{name:"download",class:"mr-2 h-4 w-4"}),e[34]||(e[34]=d(" Download CSV "))]),_:1}),v.isSuperAdmin?(i(),N(k,{key:1,onClick:e[3]||(e[3]=o=>Ae()),variant:"outline"},{default:l(()=>[n(F,{name:"settings",class:"mr-2 h-4 w-4"}),e[35]||(e[35]=d(" Manage Reason Codes "))]),_:1})):x("",!0)])]),t("form",{ref_key:"exportForm",ref:C,action:Je.value,method:"GET",class:"hidden"},null,8,Qt),n(s(fe),null,{default:l(()=>[n(s(me),{class:"p-4"},{default:l(()=>[t("div",Xt,[t("div",Zt,[n(k,{onClick:e[4]||(e[4]=o=>ne("yesterday")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":b.value==="yesterday"})},{default:l(()=>e[37]||(e[37]=[d(" Yesterday ")])),_:1},8,["class"]),n(k,{onClick:e[5]||(e[5]=o=>ne("current-week")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":b.value==="current-week"})},{default:l(()=>e[38]||(e[38]=[d(" WTD ")])),_:1},8,["class"]),n(k,{onClick:e[6]||(e[6]=o=>ne("6w")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":b.value==="6w"})},{default:l(()=>e[39]||(e[39]=[d(" T6W ")])),_:1},8,["class"]),n(k,{onClick:e[7]||(e[7]=o=>ne("quarterly")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":b.value==="quarterly"})},{default:l(()=>e[40]||(e[40]=[d(" Quarterly ")])),_:1},8,["class"])]),v.dateRange?(i(),c("div",eo,[b.value==="yesterday"&&v.dateRange.start?(i(),c("span",to," Showing data from "+g(le(v.dateRange.start)),1)):v.dateRange.start&&v.dateRange.end?(i(),c("span",oo," Showing data from "+g(le(v.dateRange.start))+" to "+g(le(v.dateRange.end)),1)):(i(),c("span",no,g(v.dateRange.label),1)),_.value?(i(),c("span",lo,"("+g(_.value)+")",1)):x("",!0)])):x("",!0)])]),_:1})]),_:1}),_e.value?x("",!0):(i(),c("div",ao,[n(F,{name:"database-x",class:"mb-4 h-16 w-16 text-muted-foreground"}),e[41]||(e[41]=t("h2",{class:"text-center text-2xl font-bold text-muted-foreground"},"There is No Data to give Information about.",-1))])),_e.value?(i(),c("div",ro,[n(s(fe),{class:"mb-6"},{default:l(()=>[n(s(dt),{class:"pb-2"},{default:l(()=>[t("div",so,[t("div",io,[n(s(ut),null,{default:l(()=>e[42]||(e[42]=[d("Filters")])),_:1}),!u.value&&Qe.value?(i(),c("div",uo,[m.value.search?(i(),c("div",co," Search: "+g(m.value.search),1)):x("",!0),m.value.rejectionType?(i(),c("div",fo,[e[43]||(e[43]=d(" Type: ")),t("span",mo,g(m.value.rejectionType),1)])):x("",!0),m.value.reasonCode?(i(),c("div",vo," Reason: "+g(Xe(m.value.reasonCode)),1)):x("",!0),m.value.rejectionCategory?(i(),c("div",po," Category: "+g(xe(m.value.rejectionCategory)),1)):x("",!0),m.value.disputed?(i(),c("div",go," Disputed: "+g(m.value.disputed==="true"?"Yes":"No"),1)):x("",!0),m.value.driverControllable?(i(),c("div",yo," Driver Controllable: "+g(m.value.driverControllable==="true"?"Yes":m.value.driverControllable==="false"?"No":"N/A"),1)):x("",!0)])):x("",!0)]),n(k,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=o=>u.value=!u.value)},{default:l(()=>[d(g(u.value?"Hide Filters":"Show Filters")+" ",1),n(F,{name:u.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),u.value?(i(),N(s(me),{key:0,class:"pt-2"},{default:l(()=>[t("div",bo,[t("div",_o,[t("div",null,[n(s(M),{for:"search"},{default:l(()=>e[44]||(e[44]=[d("Search")])),_:1}),n(s(te),{id:"search",modelValue:m.value.search,"onUpdate:modelValue":e[9]||(e[9]=o=>m.value.search=o),type:"text",placeholder:"Search by driver name...",onInput:G,class:"w-full"},null,8,["modelValue"])])]),t("div",xo,[t("div",null,[n(s(M),{for:"rejectionType"},{default:l(()=>e[45]||(e[45]=[d("Rejection Type")])),_:1}),z(t("select",{id:"rejectionType","onUpdate:modelValue":e[10]||(e[10]=o=>m.value.rejectionType=o),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[46]||(e[46]=[t("option",{value:""},"All Types",-1),t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),544),[[P,m.value.rejectionType]])]),t("div",null,[n(s(M),{for:"reasonCode"},{default:l(()=>e[47]||(e[47]=[d("Reason Code")])),_:1}),z(t("select",{id:"reasonCode","onUpdate:modelValue":e[11]||(e[11]=o=>m.value.reasonCode=o),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[48]||(e[48]=t("option",{value:""},"All Reason Codes",-1)),(i(!0),c($,null,L(v.rejection_reason_codes,o=>(i(),c("option",{key:o.id,value:o.id},g(o.reason_code),9,ko))),128))],544),[[P,m.value.reasonCode]])]),t("div",null,[n(s(M),{for:"rejectionCategory"},{default:l(()=>e[49]||(e[49]=[d("Rejection From Start")])),_:1}),z(t("select",{id:"rejectionCategory","onUpdate:modelValue":e[12]||(e[12]=o=>m.value.rejectionCategory=o),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[50]||(e[50]=[t("option",{value:""},"All Categories",-1),t("option",{value:"more_than_6"},"More than 6 hours",-1),t("option",{value:"within_6"},"Within 6 hours",-1),t("option",{value:"after_start"},"After start time",-1)]),544),[[P,m.value.rejectionCategory]])])]),t("div",Co,[t("div",null,[n(s(M),{for:"disputed"},{default:l(()=>e[51]||(e[51]=[d("Disputed")])),_:1}),z(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=o=>m.value.disputed=o),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[52]||(e[52]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),544),[[P,m.value.disputed]])]),t("div",null,[n(s(M),{for:"driverControllable"},{default:l(()=>e[53]||(e[53]=[d("Driver Controllable")])),_:1}),z(t("select",{id:"driverControllable","onUpdate:modelValue":e[14]||(e[14]=o=>m.value.driverControllable=o),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[54]||(e[54]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"null"},"N/A",-1)]),544),[[P,m.value.driverControllable]])])]),t("div",wo,[n(k,{onClick:De,variant:"ghost",size:"sm"},{default:l(()=>[n(F,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[55]||(e[55]=d(" Reset Filters "))]),_:1})])])]),_:1})):x("",!0)]),_:1}),v.isSuperAdmin?x("",!0):(i(),N(At,{key:0,metricsData:ze.value,driversData:Le.value,chartData:Pe.value,averageAcceptance:v.average_acceptance,currentDateFilter:r.dateRange.label,currentFilters:m.value},null,8,["metricsData","driversData","chartData","averageAcceptance","currentDateFilter","currentFilters"])),n(s(fe),null,{default:l(()=>[n(s(me),{class:"p-0"},{default:l(()=>[t("div",jo,[n(s(rt),{class:"relative h-[500px] overflow-auto"},{default:l(()=>[n(s(st),null,{default:l(()=>[n(s(ce),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:l(()=>[n(s(ae),{class:"w-[50px]"},{default:l(()=>[t("div",ho,[t("input",{type:"checkbox",onChange:Ye,checked:We.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,So)])]),_:1}),v.isSuperAdmin?(i(),N(s(ae),{key:0},{default:l(()=>e[56]||(e[56]=[d("Company Name")])),_:1})):x("",!0),(i(),c($,null,L(oe,o=>n(s(ae),{key:o,class:"cursor-pointer",onClick:f=>$e(o)},{default:l(()=>[t("div",$o,[o=="rejection_category"?(i(),c("div",Do,"Rejection From Start")):(i(),c("div",Ao,g(o.replace(/_/g," ").split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")),1)),q.value===o?(i(),c("div",No,[H.value==="asc"?(i(),c("svg",To,e[57]||(e[57]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),c("svg",Ro,e[58]||(e[58]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),c("div",Fo,e[59]||(e[59]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),n(s(ae),null,{default:l(()=>e[60]||(e[60]=[d("Actions")])),_:1})]),_:1})]),_:1}),n(s(it),null,{default:l(()=>[I.value.length===0?(i(),N(s(ce),{key:0},{default:l(()=>[n(s(Z),{colspan:v.isSuperAdmin?oe.length+3:oe.length+2,class:"py-8 text-center"},{default:l(()=>e[61]||(e[61]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):x("",!0),(i(!0),c($,null,L(I.value,o=>(i(),N(s(ce),{key:o.id,class:"hover:bg-muted/50"},{default:l(()=>[n(s(Z),{class:"text-center"},{default:l(()=>[z(t("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":e[15]||(e[15]=f=>A.value=f),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Mo),[[nt,A.value]])]),_:2},1024),v.isSuperAdmin?(i(),N(s(Z),{key:0},{default:l(()=>{var f;return[d(g(((f=o.tenant)==null?void 0:f.name)||"—"),1)]}),_:2},1024)):x("",!0),(i(),c($,null,L(oe,f=>n(s(Z),{key:f,class:"whitespace-nowrap"},{default:l(()=>{var D,W;return[f==="date"?(i(),c($,{key:0},[d(g(le(o[f])),1)],64)):f==="rejection_type"?(i(),c("span",Uo,g(o[f]),1)):f==="reason_code"?(i(),c($,{key:2},[d(g(((D=o.reason_code)==null?void 0:D.reason_code)||"—")+" ",1),(W=o.reason_code)!=null&&W.deleted_at?(i(),c("span",Bo,"(Deleted)")):x("",!0)],64)):f==="disputed"?(i(),c($,{key:3},[d(g(o[f]?"Yes":"No"),1)],64)):f==="driver_controllable"?(i(),c($,{key:4},[d(g(o[f]===null?"N/A":o[f]?"Yes":"No"),1)],64)):f==="rejection_category"?(i(),c($,{key:5},[d(g(xe(o[f])),1)],64)):(i(),c($,{key:6},[d(g(o[f]),1)],64))]}),_:2},1024)),64)),n(s(Z),null,{default:l(()=>[t("div",Vo,[n(k,{size:"sm",onClick:f=>ye(o),variant:"warning"},{default:l(()=>[n(F,{name:"pencil",class:"mr-1 h-4 w-4"}),e[62]||(e[62]=d(" Edit "))]),_:2},1032,["onClick"]),n(k,{size:"sm",variant:"destructive",onClick:f=>Ue(o.id)},{default:l(()=>[n(F,{name:"trash",class:"mr-1 h-4 w-4"}),e[63]||(e[63]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),v.rejections.links?(i(),c("div",zo,[t("div",Lo,[t("div",Po,[t("span",null,"Showing "+g(I.value.length)+" of "+g(v.rejections.data.length)+" entries",1),t("div",Eo,[e[64]||(e[64]=t("span",{class:"text-sm"},"Show:",-1)),z(t("select",{"onUpdate:modelValue":e[16]||(e[16]=o=>V.value=o),onChange:Ve,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(i(),c($,null,L([10,25,50,100],o=>t("option",{key:o,value:o},g(o),9,Oo)),64))],544),[[P,V.value]])])]),t("div",Wo,[(i(!0),c($,null,L(v.rejections.links,o=>(i(),N(k,{key:o.label,onClick:f=>Be(o.url),disabled:!o.url,variant:"ghost",size:"sm",class:X(["mx-1",{"border-primary bg-primary/10 text-primary":o.active}])},{default:l(()=>[t("span",{innerHTML:o.label},null,8,Yo)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):x("",!0)]),_:1})]),_:1}),n(s(re),{open:p.value,"onUpdate:open":e[18]||(e[18]=o=>p.value=o)},{default:l(()=>[n(s(se),{class:"sm:max-w-2xl"},{default:l(()=>[n(s(ie),null,{default:l(()=>[n(s(de),null,{default:l(()=>[d(g(j.value?"Edit":"Add")+" Rejection",1)]),_:1}),n(s(ue),null,{default:l(()=>[d(" Fill in the details to "+g(j.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),n(Ot,{rejection:j.value,reasons:v.rejection_reason_codes,tenants:v.tenants,"is-super-admin":v.isSuperAdmin,"tenant-slug":v.tenantSlug,onClose:e[17]||(e[17]=o=>p.value=!1)},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),v.isSuperAdmin?(i(),N(s(re),{key:1,open:R.value,"onUpdate:open":e[22]||(e[22]=o=>R.value=o)},{default:l(()=>[n(s(se),{class:"sm:max-w-lg"},{default:l(()=>[n(s(ie),null,{default:l(()=>[n(s(de),null,{default:l(()=>e[65]||(e[65]=[d("Manage Reason Codes")])),_:1}),n(s(ue),null,{default:l(()=>e[66]||(e[66]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",Io,[t("div",qo,[e[68]||(e[68]=t("h3",{class:"text-sm font-medium"},"Current Reason Codes",-1)),n(k,{onClick:Ne,size:"sm",variant:"outline"},{default:l(()=>[n(F,{name:"plus",class:"mr-2 h-4 w-4"}),e[67]||(e[67]=d(" Add New Code "))]),_:1})]),t("div",Ho,[!v.rejection_reason_codes||v.rejection_reason_codes.length===0?(i(),c("div",Go," No reason codes found ")):(i(),c("div",Jo,[(i(!0),c($,null,L(v.rejection_reason_codes,o=>(i(),c("div",{key:o.id,class:"group flex items-center justify-between rounded-md border p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:f=>Te(o)},[t("div",Qo,[d(g(o.reason_code)+" ",1),o.deleted_at?(i(),c("span",Xo,"(Deleted)")):x("",!0)]),o.description?(i(),c("div",Zo,g(o.description),1)):x("",!0)],8,Ko),t("div",en,[v.isSuperAdmin?(i(),c($,{key:0},[o.deleted_at?(i(),c($,{key:0},[n(k,{onClick:f=>Ee(o.id),size:"sm",variant:"outline"},{default:l(()=>[n(F,{name:"refresh",class:"mr-2 h-4 w-4"}),e[69]||(e[69]=d(" Restore "))]),_:2},1032,["onClick"]),n(k,{onClick:f=>Oe(o.id),size:"sm",variant:"destructive"},{default:l(()=>[n(F,{name:"trash",class:"mr-2 h-4 w-4"}),e[70]||(e[70]=d(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(i(),N(k,{key:1,onClick:f=>be(o.id),size:"sm",variant:"destructive"},{default:l(()=>[n(F,{name:"trash",class:"mr-2 h-4 w-4"}),e[71]||(e[71]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):(i(),N(k,{key:1,onClick:f=>be(o.id),size:"sm",variant:"destructive"},{default:l(()=>[n(F,{name:"trash",class:"mr-2 h-4 w-4"}),e[72]||(e[72]=d(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))])]),y.value?(i(),c("div",tn,[t("h3",on,g(U.value?"Edit":"Add")+" Reason Code",1),t("div",nn,[t("div",null,[n(s(M),{for:"reason_code"},{default:l(()=>e[73]||(e[73]=[d("Code")])),_:1}),n(s(te),{id:"reason_code",modelValue:O.value.reason_code,"onUpdate:modelValue":e[19]||(e[19]=o=>O.value.reason_code=o),placeholder:"Enter reason code"},null,8,["modelValue"])]),t("div",null,[n(s(M),{for:"description"},{default:l(()=>e[74]||(e[74]=[d("Description")])),_:1}),n(s(te),{id:"description",modelValue:O.value.description,"onUpdate:modelValue":e[20]||(e[20]=o=>O.value.description=o),placeholder:"Enter description"},null,8,["modelValue"])]),t("div",ln,[n(k,{onClick:Re,variant:"ghost",size:"sm"},{default:l(()=>e[75]||(e[75]=[d("Cancel")])),_:1}),n(k,{onClick:Fe,variant:"default",size:"sm"},{default:l(()=>e[76]||(e[76]=[d("Save")])),_:1})])])])):x("",!0),n(s(ve),{class:"mt-6"},{default:l(()=>[n(k,{onClick:e[21]||(e[21]=o=>R.value=!1),variant:"outline"},{default:l(()=>e[77]||(e[77]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):x("",!0),n(s(re),{open:J.value,"onUpdate:open":e[25]||(e[25]=o=>J.value=o)},{default:l(()=>[n(s(se),null,{default:l(()=>[n(s(ie),null,{default:l(()=>[n(s(de),null,{default:l(()=>e[78]||(e[78]=[d("Confirm Deletion")])),_:1}),n(s(ue),null,{default:l(()=>e[79]||(e[79]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),n(s(ve),{class:"mt-4"},{default:l(()=>[n(k,{type:"button",onClick:e[23]||(e[23]=o=>J.value=!1),variant:"outline"},{default:l(()=>e[80]||(e[80]=[d(" Cancel ")])),_:1}),n(k,{type:"button",onClick:e[24]||(e[24]=o=>Me(ge.value)),variant:"destructive"},{default:l(()=>e[81]||(e[81]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n(s(re),{open:E.value,"onUpdate:open":e[28]||(e[28]=o=>E.value=o)},{default:l(()=>[n(s(se),null,{default:l(()=>[n(s(ie),null,{default:l(()=>[n(s(de),null,{default:l(()=>e[82]||(e[82]=[d("Confirm Bulk Deletion")])),_:1}),n(s(ue),null,{default:l(()=>[d(" Are you sure you want to delete "+g(A.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),n(s(ve),{class:"mt-4"},{default:l(()=>[n(k,{type:"button",onClick:e[26]||(e[26]=o=>E.value=!1),variant:"outline"},{default:l(()=>e[83]||(e[83]=[d(" Cancel ")])),_:1}),n(k,{type:"button",onClick:e[27]||(e[27]=o=>qe()),variant:"destructive"},{default:l(()=>e[84]||(e[84]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])):x("",!0)])]),_:1},8,["tenantSlug"]))}};export{$n as default};
