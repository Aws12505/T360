import{d as W,r,c as h,F as Y,e as f,z as e,u as s,f as l,X as n,b as g,E as x,ah as b,H as Z}from"./vendor-BpT-r7Ja.js";import{g as ee}from"./vendor-vue-B19pMx_k.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ca64iwsg.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-BjJf4-TG.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-CACqrpJk.js";import{_ as te,a as le,b as ne,c as oe,d as re,e as ue,f as de}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-SRmTwm74.js";import{_ as M}from"./Card.vue_vue_type_script_setup_true_lang-CG7v7ona.js";import{_ as R}from"./CardContent.vue_vue_type_script_setup_true_lang-hvNNGnvR.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-DE9XBglt.js";import{_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-C-33W2wv.js";import{_ as ie}from"./Separator.vue_vue_type_script_setup_true_lang-aKUs8kB0.js";import{S as me,U as fe,P as T,c as ce,B as pe}from"./vendor-icons-Dww4C8Xv.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-Do85zU62.js";import"./vendor-ui-BXjA1Bwp.js";import"./Icon.vue_vue_type_script_setup_true_lang-PuJXuPvT.js";import"./app-CEbXasaB.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-9XXNMqpr.js";import"./Label.vue_vue_type_script_setup_true_lang-Kvpd3EIc.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-bPT6IWzp.js";import"./InputError.vue_vue_type_script_setup_true_lang-h2cAZsoZ.js";const _e={class:"container w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},ge={class:"relative max-w-md"},xe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ye={class:"flex items-center space-x-2"},we={class:"flex items-center space-x-2"},Se={class:"flex items-center space-x-2"},be=W({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(d){const u=d,{tenantSlug:o}=u,j=[{title:o?"Dashboard":"Admin Dashboard",href:o?`/${o}/dashboard`:"/dashboard"},{title:"User Management",href:o?`/${o}/admin/user-management`:"/admin/user-management"}],y=r(u.search||""),c=r(!1),p=r(!1),v=r(!1),$=r(null),U=r(null),A=r(null),i=u.SuperAdmin,m=r(!1),w=r(""),S=r(""),V=h(()=>{if(!y.value.trim())return u.users;const a=y.value.toLowerCase(),t=u.users.data.filter(_=>_.name.toLowerCase().includes(a)||_.email.toLowerCase().includes(a));return{...u.users,data:t}}),E=()=>{$.value=null,c.value=!0},z=()=>{c.value=!1},L=()=>{A.value=null,v.value=!0},N=()=>{v.value=!1},O=()=>{U.value=null,p.value=!0},F=()=>{p.value=!1},P=a=>{$.value=a,c.value=!0},H=a=>{A.value=a,v.value=!0},I=a=>{U.value=a,p.value=!0},X=a=>{w.value=i?route("admin.users.destroy",a):route("users.destroy",[o,a]),S.value=`Are you sure you want to delete user ${a.name}?`,m.value=!0},q=a=>{w.value=i?route("admin.roles.destroy",a):route("roles.destroy",[o,a]),S.value=`Are you sure you want to delete role ${a.name}?`,m.value=!0},G=a=>{w.value=route("admin.tenants.destroy",a),S.value=`Are you sure you want to delete tenant ${a.name}?`,m.value=!0},J=()=>{m.value=!1},C=()=>{p.value=!1,c.value=!1,v.value=!1},K=h(()=>u.roles.data),Q=h(()=>u.tenants.data);return(a,t)=>(f(),Y(Z,null,[e(s(ee),{title:"Users Management"}),e(se,{breadcrumbs:j,tenantSlug:s(o)},{default:l(()=>[n("div",_e,[t[8]||(t[8]=n("div",{class:"space-y-2"},[n("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100"}," User and Role Management "),n("p",{class:"text-gray-500 dark:text-gray-400"}," Manage users, roles, and permissions for your application. ")],-1)),e(s(ie)),n("div",ge,[n("div",xe,[e(s(me),{class:"h-5 w-5 text-gray-400"})]),e(ae,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=_=>y.value=_),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])]),e(s(M),null,{default:l(()=>[e(s(D),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[e(s(B),{class:"text-xl font-semibold"},{default:l(()=>[n("div",ye,[e(s(fe),{class:"h-5 w-5"}),t[2]||(t[2]=n("span",null,"Users",-1))])]),_:1}),e(k,{onClick:E,variant:"default",size:"sm",class:"gap-1"},{default:l(()=>[e(s(T),{class:"h-4 w-4"}),t[3]||(t[3]=n("span",null,"Add User",-1))]),_:1})]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[e(te,{users:V.value,isSuperAdmin:s(i),onEdit:P,onDelete:X},null,8,["users","isSuperAdmin"])]),_:1})]),_:1}),e(s(M),null,{default:l(()=>[e(s(D),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[e(s(B),{class:"text-xl font-semibold"},{default:l(()=>[n("div",we,[e(s(ce),{class:"h-5 w-5"}),t[4]||(t[4]=n("span",null,"Roles",-1))])]),_:1}),e(k,{onClick:O,variant:"default",size:"sm",class:"gap-1"},{default:l(()=>[e(s(T),{class:"h-4 w-4"}),t[5]||(t[5]=n("span",null,"Add Role",-1))]),_:1})]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[e(le,{roles:d.roles,onEdit:I,onDelete:q},null,8,["roles"])]),_:1})]),_:1}),s(i)?(f(),g(s(M),{key:0},{default:l(()=>[e(s(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[e(s(B),{class:"text-xl font-semibold"},{default:l(()=>[n("div",Se,[e(s(pe),{class:"h-5 w-5"}),t[6]||(t[6]=n("span",null,"Companies",-1))])]),_:1}),e(k,{onClick:L,variant:"default",size:"sm",class:"gap-1"},{default:l(()=>[e(s(T),{class:"h-4 w-4"}),t[7]||(t[7]=n("span",null,"Add Company",-1))]),_:1})]),_:1}),e(s(R),null,{default:l(()=>[e(ne,{tenants:d.tenants,onEdit:H,onDelete:G},null,8,["tenants"])]),_:1})]),_:1})):x("",!0),e(b,{name:"fade"},{default:l(()=>[c.value?(f(),g(oe,{key:0,user:$.value,roles:K.value,permissions:d.permissions,tenants:Q.value,isSuperAdmin:s(i),tenantSlug:s(o),onClose:z,onSaved:C},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])):x("",!0)]),_:1}),e(b,{name:"fade"},{default:l(()=>[v.value?(f(),g(re,{key:0,tenants:d.tenants,tenant:A.value,onClose:N,onSaved:C},null,8,["tenants","tenant"])):x("",!0)]),_:1}),e(b,{name:"fade"},{default:l(()=>[p.value?(f(),g(ue,{key:0,role:U.value,permissions:d.permissions,isSuperAdmin:s(i),tenantSlug:s(o),onClose:F,onSaved:C},null,8,["role","permissions","isSuperAdmin","tenantSlug"])):x("",!0)]),_:1}),e(b,{name:"fade"},{default:l(()=>[m.value?(f(),g(de,{key:0,deleteUrl:w.value,message:S.value,tenantSlug:s(o),onCancel:t[1]||(t[1]=_=>m.value=!1),onConfirmed:J},null,8,["deleteUrl","message","tenantSlug"])):x("",!0)]),_:1})])]),_:1},8,["tenantSlug"])],64))}}),Xe=ve(be,[["__scopeId","data-v-ba1bd777"]]);export{Xe as default};
