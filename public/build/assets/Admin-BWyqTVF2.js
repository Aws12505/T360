import{d as N,c as T,r as y,b as g,e as i,f as a,l as e,u as t,V as d,z as C,v as b,x as l,F as D,C as V,y as m,ah as F}from"./vendor-Bo5HMgp9.js";import{g as j}from"./vendor-vue-U3hygByY.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CjIFVRCX.js";import{_ as P,a as I}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-BR8R7YKq.js";import{_ as L}from"./Form.vue_vue_type_script_setup_true_lang-BIJ8CYmx.js";import{_ as $}from"./Button.vue_vue_type_script_setup_true_lang-aefVT2rO.js";import{_ as Y}from"./Card.vue_vue_type_script_setup_true_lang-BiSo-lfq.js";import{_ as q}from"./CardContent.vue_vue_type_script_setup_true_lang-OH4fMdUO.js";import{_ as H}from"./CardHeader.vue_vue_type_script_setup_true_lang-DnXa1Q0v.js";import{_ as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-Db1edUY4.js";import{_ as K}from"./Separator.vue_vue_type_script_setup_true_lang-CJcACWIn.js";import{_ as O,a as Q,b as A,c as u,d as R,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-DlDTWHeS.js";import{_ as B}from"./Badge.vue_vue_type_script_setup_true_lang-Bn0FBe5D.js";import{P as U,T as W,C as X}from"./vendor-icons-CLnRj7LD.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-olDi9ANG.js";import"./vendor-ui-CdWqhd_O.js";import"./Icon.vue_vue_type_script_setup_true_lang-B-9SXevG.js";import"./app-DRqV69eo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dx7kowKY.js";import"./Label.vue_vue_type_script_setup_true_lang-snO2soGp.js";import"./InputError.vue_vue_type_script_setup_true_lang-DX3LQSP2.js";const ee={class:"flex flex-col space-y-6 w-full"},te={class:"flex justify-end"},ae={class:"flex items-center space-x-2"},se={key:0,class:"overflow-x-auto"},le={key:1,class:"text-center py-12"},ne={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},re={class:"relative z-10"},oe=N({__name:"Admin",props:{thresholds:Array,metrics:Array,tenantSlug:{type:String,default:null}},setup(E){const r=E,{tenantSlug:_}=r,M=T(()=>[{title:_?"Dashboard":"Admin Dashboard",href:_?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")}]),c=y(!1),p=y({}),v=y(!1),k=n=>{switch(n){case!0:return"success";case!1:return"destructive";default:return"outline"}};function z(n){p.value=n,v.value=!1,c.value=!0}function S(){p.value={metric_name:"",good_threshold:null,bad_threshold:null,good_enabled:!0,bad_enabled:!0},v.value=!0,c.value=!0}function h(){c.value=!1,p.value={}}function w(n){return n??"-"}const x=T(()=>{if(!r.metrics||!r.thresholds)return[];const n=r.thresholds.map(s=>s.metric_name);return r.metrics.filter(s=>!n.includes(s))});return(n,s)=>(i(),g(G,{breadcrumbs:M.value,tenantSlug:t(_)},{default:a(()=>[e(t(j),{title:"Safety Thresholds Management"}),e(P,null,{default:a(()=>[d("div",ee,[e(I,{title:"Safety Thresholds",description:"Manage safety thresholds for driver coaching and alerts"}),e(t(K)),d("div",te,[x.value.length>0?(i(),g($,{key:0,onClick:S,variant:"default",size:"sm",class:"gap-1"},{default:a(()=>[e(t(U),{class:"h-4 w-4"}),s[0]||(s[0]=d("span",null,"Add New Threshold",-1))]),_:1})):C("",!0)]),e(t(Y),{class:"w-full"},{default:a(()=>[e(t(H),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(t(J),{class:"text-xl font-semibold"},{default:a(()=>[d("div",ae,[e(t(W),{class:"h-5 w-5"}),s[1]||(s[1]=d("span",null,"Safety Thresholds",-1))])]),_:1})]),_:1}),e(t(q),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[r.thresholds&&r.thresholds.length>0?(i(),b("div",se,[e(t(O),null,{default:a(()=>[e(t(Q),null,{default:a(()=>[e(t(A),null,{default:a(()=>[e(t(u),null,{default:a(()=>s[2]||(s[2]=[l("Metric")])),_:1}),e(t(u),null,{default:a(()=>s[3]||(s[3]=[l("Good Threshold")])),_:1}),e(t(u),null,{default:a(()=>s[4]||(s[4]=[l("Good Enabled")])),_:1}),e(t(u),null,{default:a(()=>s[5]||(s[5]=[l("Bad Threshold")])),_:1}),e(t(u),null,{default:a(()=>s[6]||(s[6]=[l("Bad Enabled")])),_:1}),e(t(u),{class:"text-right"},{default:a(()=>s[7]||(s[7]=[l("Actions")])),_:1})]),_:1})]),_:1}),e(t(R),null,{default:a(()=>[(i(!0),b(D,null,V(r.thresholds,o=>(i(),g(t(A),{key:o.id},{default:a(()=>[e(t(f),{class:"capitalize"},{default:a(()=>[l(m(o.metric_name.replace(/_/g," ")),1)]),_:2},1024),e(t(f),null,{default:a(()=>[l(m(w(o.good_threshold)),1)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(B),{variant:k(o.good_enabled)},{default:a(()=>[l(m(o.good_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:a(()=>[l(m(w(o.bad_threshold)),1)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(B),{variant:k(o.bad_enabled)},{default:a(()=>[l(m(o.bad_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),{class:"text-right"},{default:a(()=>[e($,{variant:"outline",size:"sm",onClick:ie=>z(o)},{default:a(()=>s[8]||(s[8]=[l(" Edit ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(i(),b("div",le,[e(t(X),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s[10]||(s[10]=d("h3",{class:"text-lg font-medium text-muted-foreground mb-4"},"No safety thresholds defined yet",-1)),x.value.length>0?(i(),g($,{key:0,onClick:S,variant:"default"},{default:a(()=>s[9]||(s[9]=[l(" Create Your First Threshold ")])),_:1})):C("",!0)]))]),_:1})]),_:1}),e(F,{name:"fade"},{default:a(()=>[c.value?(i(),b("div",ne,[d("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:h}),d("div",re,[e(L,{tenantSlug:t(_),entry:p.value,isCreating:v.value,availableMetrics:x.value,onSaved:h,onCancel:h},null,8,["tenantSlug","entry","isCreating","availableMetrics"])])])):C("",!0)]),_:1})])]),_:1})]),_:1},8,["breadcrumbs","tenantSlug"]))}}),ze=Z(oe,[["__scopeId","data-v-b48b1df1"]]);export{ze as default};
