import{e as Ge,w as me,H as f,i,X as t,G as x,B as n,j as o,O as r,E as U,Y as B,u as s,J as S,K as M,P as m,I as Ce,a3 as Qe,r as k,A as we,aj as Xe,a as z,f as T,W as Ze,ak as X,al as et}from"./vendor-BFuKjz45.js";import{x as ne,g as tt,W as Y}from"./vendor-vue-BLQkEQ_D.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-BbwYdLlm.js";import{_ as se,a as ae,b as re,c as ie,d as de}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BMgF8EFT.js";import{_ as ce}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B6J1QtuW.js";import{_ as j,a as q}from"./Label.vue_vue_type_script_setup_true_lang-B6MZTsAk.js";import{_ as lt}from"./Checkbox.vue_vue_type_script_setup_true_lang-CLgiEqQp.js";import{_ as nt}from"./AppLayout.vue_vue_type_script_setup_true_lang-CvhbqXcl.js";import{_ as A}from"./Icon.vue_vue_type_script_setup_true_lang-Bvtx7n_2.js";import{_ as ot,a as st,b as fe,c as ue,d as at,e as le}from"./TableRow.vue_vue_type_script_setup_true_lang-BYKXF4kE.js";import{_ as ve}from"./Card.vue_vue_type_script_setup_true_lang-kUJ1jh19.js";import{_ as rt,a as it}from"./CardTitle.vue_vue_type_script_setup_true_lang-B4PiGnOE.js";import{_ as pe}from"./CardContent.vue_vue_type_script_setup_true_lang-CaXnTGJw.js";import{_ as _e,a as xe,b as ke}from"./AlertDescription.vue_vue_type_script_setup_true_lang-DfRKwC2v.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-7fX89-0C.js";import"./vendor-ui-CqNqovUm.js";import"./vendor-icons-ILJ_3fu6.js";import"./app-CGq9Auu4.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CZUnzYQk.js";const dt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ut={key:0,class:"col-span-full"},ct={class:"relative"},ft=["value"],vt={class:"col-span-full"},pt={class:"relative"},mt={class:"relative"},gt={class:"relative"},yt=["value"],bt={class:"relative"},_t={class:"flex items-center space-x-2"},xt={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},kt=Ge({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(g,{emit:c}){var V,P,$,D,L,h,E;const b=g,F=c,p=ne({id:(V=b.rejection)==null?void 0:V.id,tenant_id:b.isSuperAdmin?(P=b.rejection)==null?void 0:P.tenant_id:null,date:(($=b.rejection)==null?void 0:$.date)||"",driver_name:((D=b.rejection)==null?void 0:D.driver_name)||"",rejection_type:((L=b.rejection)==null?void 0:L.rejection_type)||"block",rejection_category:((h=b.rejection)==null?void 0:h.rejection_category)||"more_than_6",reason_code_id:((E=b.rejection)==null?void 0:E.reason_code_id)||null,disputed:b.rejection&&b.rejection.disputed!==null?parseInt(b.rejection.disputed)===1:!1,driver_controllable:b.rejection&&b.rejection.driver_controllable!==null?parseInt(b.rejection.driver_controllable)===1:null});me(()=>b.rejection,C=>{C?(p.id=C.id,p.tenant_id=C.tenant_id,p.date=C.date,p.driver_name=C.driver_name,p.rejection_type=C.rejection_type,p.rejection_category=C.rejection_category,p.reason_code_id=C.reason_code_id,p.disputed=C.disputed!==null?parseInt(C.disputed)===1:!1,p.driver_controllable=C.driver_controllable!==null?parseInt(C.driver_controllable)===1:null):p.reset()},{immediate:!0});const N=()=>{const C=!!p.id,d=b.isSuperAdmin?C?"acceptance.update.admin":"acceptance.store.admin":C?"acceptance.update":"acceptance.store",y=b.isSuperAdmin?C?{rejection:p.id}:{}:C?{tenantSlug:b.tenantSlug,rejection:p.id}:{tenantSlug:b.tenantSlug};p[C?"put":"post"](route(d,y),{onSuccess:()=>F("close")})};return(C,d)=>(i(),f("form",{onSubmit:Ce(N,["prevent"]),class:"space-y-6"},[t("div",dt,[g.isSuperAdmin?(i(),f("div",ut,[n(j,null,{default:o(()=>d[9]||(d[9]=[r("Company Name")])),_:1}),t("div",ct,[U(t("select",{"onUpdate:modelValue":d[0]||(d[0]=y=>s(p).tenant_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[d[10]||(d[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),f(S,null,M(g.tenants,y=>(i(),f("option",{key:y.id,value:y.id},m(y.name),9,ft))),128))],512),[[B,s(p).tenant_id]]),d[11]||(d[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),t("div",vt,[n(j,null,{default:o(()=>d[12]||(d[12]=[r("Date")])),_:1}),n(q,{type:"date",modelValue:s(p).date,"onUpdate:modelValue":d[1]||(d[1]=y=>s(p).date=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(j,null,{default:o(()=>d[13]||(d[13]=[r("Driver Name")])),_:1}),n(q,{modelValue:s(p).driver_name,"onUpdate:modelValue":d[2]||(d[2]=y=>s(p).driver_name=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(j,null,{default:o(()=>d[14]||(d[14]=[r("Rejection Type")])),_:1}),t("div",pt,[U(t("select",{"onUpdate:modelValue":d[3]||(d[3]=y=>s(p).rejection_type=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},d[15]||(d[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[B,s(p).rejection_type]]),d[16]||(d[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(j,null,{default:o(()=>d[17]||(d[17]=[r("Rejection Category")])),_:1}),t("div",mt,[U(t("select",{"onUpdate:modelValue":d[4]||(d[4]=y=>s(p).rejection_category=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},d[18]||(d[18]=[t("option",{value:"more_than_6"},"More than 6 hrs",-1),t("option",{value:"within_6"},"Within 6 hrs",-1),t("option",{value:"after_start"},"After start",-1)]),512),[[B,s(p).rejection_category]]),d[19]||(d[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(j,null,{default:o(()=>d[20]||(d[20]=[r("Reason Code")])),_:1}),t("div",gt,[U(t("select",{"onUpdate:modelValue":d[5]||(d[5]=y=>s(p).reason_code_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),f(S,null,M(g.reasons,y=>(i(),f("option",{key:y.id,value:y.id},m(y.reason_code),9,yt))),128))],512),[[B,s(p).reason_code_id]]),d[21]||(d[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(j,null,{default:o(()=>d[22]||(d[22]=[r("Driver Controllable")])),_:1}),t("div",bt,[U(t("select",{"onUpdate:modelValue":d[6]||(d[6]=y=>s(p).driver_controllable=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},d[23]||(d[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[B,s(p).driver_controllable]]),d[24]||(d[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",_t,[n(lt,{checked:s(p).disputed,"onUpdate:checked":d[7]||(d[7]=y=>s(p).disputed=y),id:"disputed"},null,8,["checked"]),n(j,{for:"disputed"},{default:o(()=>d[25]||(d[25]=[r("Disputed")])),_:1})])]),t("div",xt,[n(_,{type:"button",onClick:d[8]||(d[8]=y=>F("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>d[26]||(d[26]=[r(" Cancel ")])),_:1}),n(_,{type:"submit",disabled:s(p).processing,class:"w-full sm:w-auto"},{default:o(()=>[r(m(s(p).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Ct={class:"bg-background rounded-lg border shadow-sm p-4 flex flex-col items-center justify-center"},wt={class:"text-base font-semibold mb-2 text-foreground"},St={class:"text-2xl font-bold text-primary"},jt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(g){return(c,b)=>(i(),f("div",Ct,[t("h3",wt,m(g.title),1),t("p",St,m(g.value),1)]))}},$t={class:"bg-background rounded-lg border shadow-sm p-4"},ht={class:"text-base font-semibold mb-4"},Dt={class:"space-y-3"},At={class:"text-sm"},Tt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]}},setup(g){const c=b=>["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"][b]||"#6b7280";return(b,F)=>(i(),f("div",$t,[t("h3",ht,m(g.title),1),t("div",Dt,[(i(!0),f(S,null,M(g.drivers,(p,N)=>(i(),f("div",{key:N,class:"flex justify-between items-center"},[t("span",At,m(p.name),1),t("span",{class:"text-sm font-medium",style:Qe({color:c(N)})},m(p.value),5)]))),128))])]))}},Nt={class:"bg-background rounded-lg border shadow-sm p-4"},Rt={class:"text-base font-semibold mb-4"},Ft={class:"h-64"},Lt={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})}},setup(g){const c=g,b=k(null);let F=null;const p=()=>{if(F&&F.destroy(),!b.value)return;const N=b.value.getContext("2d");F=new Xe(N,{type:"line",data:c.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})};return we(()=>{p()}),me(()=>c.chartData,()=>{p()},{deep:!0}),(N,V)=>(i(),f("div",Nt,[t("h3",Rt,m(g.title),1),t("div",Ft,[t("canvas",{ref_key:"chartCanvas",ref:b},null,512)])]))}},Mt={class:"space-y-6"},Ut={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Vt={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},zt={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})}},setup(g){const c=g,b=[{title:"Total Late Stops",value:1050},{title:"1-20 Minutes Late",value:1050},{title:"121 - 600 Minutes Late",value:1050},{title:"+601 Minutes Late",value:1050}],F=[{name:"Kain",value:5},{name:"Ronny",value:4},{name:"Damen",value:3},{name:"Leo",value:2},{name:"Shawn",value:1}],p={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Late Stops",data:[65,59,80,81,56,55],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]},N=z(()=>c.metricsData.items||b),V=z(()=>c.driversData.length?c.driversData:F),P=z(()=>Object.keys(c.chartData).length?c.chartData:p);return($,D)=>(i(),f("div",Mt,[t("div",Ut,[(i(!0),f(S,null,M(N.value,(L,h)=>(i(),T(jt,{key:h,title:L.title,value:L.value},null,8,["title","value"]))),128))]),t("div",Vt,[n(Tt,{title:"Bottom 5 Drivers",drivers:V.value,class:"lg:col-span-1"},null,8,["drivers"]),n(Lt,{title:"Acceptance Score","chart-data":P.value,class:"lg:col-span-3"},null,8,["chart-data"])])]))}},Bt={class:"max-w-7xl mx-auto p-6 space-y-8"},Pt={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},Et={class:"flex flex-wrap gap-3"},Wt={class:"relative"},Ot={key:0,class:"absolute right-0 mt-1 w-48 bg-background rounded-md shadow-lg border z-10"},It={class:"py-1"},Yt={class:"cursor-pointer block px-4 py-2 text-sm hover:bg-muted"},qt=["href"],Jt=["action"],Ht={class:"flex flex-col gap-2"},Kt={class:"flex flex-wrap gap-2"},Gt={key:0,class:"text-sm text-muted-foreground"},Qt={key:0},Xt={key:1},Zt={key:2},el={key:3,class:"ml-1"},tl={class:"flex justify-between items-center"},ll={class:"flex items-center gap-2"},nl={key:0,class:"flex flex-wrap gap-2 ml-4"},ol={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},sl={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},al={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},rl={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},il={class:"capitalize"},dl={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ul={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cl={key:6,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fl={key:7,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},vl={class:"flex flex-col gap-4"},pl={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},ml={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},gl=["value"],yl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full"},bl={class:"flex justify-end"},_l={class:"overflow-x-auto"},xl={class:"flex items-center justify-center"},kl=["checked"],Cl={class:"flex items-center"},wl={key:0,class:"ml-2"},Sl={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},jl={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$l={key:1,class:"ml-2 opacity-50"},hl=["value"],Dl={key:1,class:"capitalize"},Al={key:0,class:"ml-1 text-xs text-red-500"},Tl={class:"flex space-x-2"},Nl={key:0,class:"bg-muted/20 px-4 py-3 border-t"},Rl={class:"flex justify-between items-center"},Fl={class:"text-sm text-muted-foreground flex items-center gap-4"},Ll={class:"flex items-center gap-2"},Ml=["value"],Ul={class:"flex"},Vl=["innerHTML"],zl={class:"mt-4 space-y-4"},Bl={class:"flex items-center justify-between"},Pl={class:"max-h-[400px] overflow-y-auto"},El={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},Wl={key:1,class:"space-y-2"},Ol=["onClick"],Il={class:"font-medium"},Yl={key:0,class:"ml-2 text-xs text-red-500"},ql={key:0,class:"text-sm text-muted-foreground mt-1"},Jl={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Hl={key:0,class:"border rounded-md p-4 space-y-4"},Kl={class:"text-sm font-medium"},Gl={class:"space-y-3"},Ql={class:"flex justify-end space-x-2"},_n={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null}},setup(g){const c=g,b=z(()=>(D.value==="yesterday"||D.value==="current-week")&&c.weekNumber&&c.year?`Week ${c.weekNumber}, ${c.year}`:(D.value==="6w"||D.value==="quarterly")&&c.startWeekNumber&&c.endWeekNumber&&c.year?`Weeks ${c.startWeekNumber}-${c.endWeekNumber}, ${c.year}`:""),F=[{title:c.tenantSlug?"Dashboard":"Admin Dashboard",href:c.tenantSlug?route("dashboard",{tenantSlug:c.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:c.tenantSlug?route("acceptance.index",{tenantSlug:c.tenantSlug}):route("acceptance.index.admin")}],p=k(!1),N=k(!1),V=k(null),P=k(""),$=k(""),D=k(c.dateFilter||"full"),L=k(c.perPage),h=k([]),E=k(!1),C=k(null),d=k(!1),y=k(!1),R=k(null),W=k({reason_code:"",description:""}),Z=k(!1),ge=k(null),oe=["date","rejection_type","driver_name","penalty","reason_code","disputed","driver_controllable"],H=k("date"),K=k("desc"),u=k({search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""}),J=z(()=>{let a=[...c.rejections.data];if(u.value.search){const e=u.value.search.toLowerCase();a=a.filter(l=>{var v,w,I,te;return((v=l.driver_name)==null?void 0:v.toLowerCase().includes(e))||((w=l.rejection_type)==null?void 0:w.toLowerCase().includes(e))||((te=(I=l.reason_code)==null?void 0:I.reason_code)==null?void 0:te.toLowerCase().includes(e))})}if(u.value.dateFrom&&(a=a.filter(e=>e.date&&e.date>=u.value.dateFrom)),u.value.dateTo&&(a=a.filter(e=>e.date&&e.date<=u.value.dateTo)),u.value.rejectionType&&(a=a.filter(e=>e.rejection_type===u.value.rejectionType)),u.value.reasonCode&&(a=a.filter(e=>e.reason_code&&e.reason_code.id===parseInt(u.value.reasonCode))),u.value.penalty){const e=u.value.penalty.toLowerCase();a=a.filter(l=>l.penalty&&l.penalty.toString().toLowerCase().includes(e))}if(u.value.disputed!==""){const e=u.value.disputed==="true";a=a.filter(l=>l.disputed===e)}if(u.value.driverControllable!=="")if(u.value.driverControllable==="null")a=a.filter(e=>e.driver_controllable===null);else{const e=u.value.driverControllable==="true";a=a.filter(l=>l.driver_controllable===e)}return a.sort((e,l)=>{var I,te;let v=e[H.value],w=l[H.value];return H.value==="reason_code"&&(v=((I=e.reason_code)==null?void 0:I.reason_code)||"",w=((te=l.reason_code)==null?void 0:te.reason_code)||""),v===null?1:w===null?-1:(typeof v=="string"&&(v=v.toLowerCase(),w=w.toLowerCase()),v<w?K.value==="asc"?-1:1:v>w?K.value==="asc"?1:-1:0)}),a});function Se(a){H.value===a?K.value=K.value==="asc"?"desc":"asc":(H.value=a,K.value="asc")}function O(){}function je(){u.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""},G("full")}const ye=(a=null)=>{V.value=a,p.value=!0},$e=()=>{N.value=!0,y.value=!1,R.value=null},he=()=>{W.value={reason_code:"",description:""},R.value=null,y.value=!0},De=a=>{W.value={reason_code:a.reason_code,description:a.description||""},R.value=a.id,y.value=!0},Ae=()=>{y.value=!1,R.value=null},be=a=>{ge.value=a,Z.value=!0},Te=()=>{const a=ne({reason_code:W.value.reason_code,description:W.value.description}),e=R.value?c.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":c.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",l=R.value?c.isSuperAdmin?{code:R.value}:{tenantSlug:c.tenantSlug,code:R.value}:c.isSuperAdmin?{}:{tenantSlug:c.tenantSlug};(R.value?a.put:a.post).call(a,route(e,l),{onSuccess:()=>{$.value=R.value?"Reason code updated successfully.":"Reason code created successfully.",y.value=!1,R.value=null,Y.reload({only:["rejection_reason_codes"]})},onError:w=>{console.error(w)}})},Ne=a=>{const e=ne({}),l=c.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",v=c.isSuperAdmin?{id:a}:{tenantSlug:c.tenantSlug,code:a};e.delete(route(l,v),{onSuccess:()=>{$.value="Reason code deleted successfully.",Z.value=!1,Y.reload({only:["rejection_reason_codes"]})}})},Re=a=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=ne({}),l=c.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",v=c.isSuperAdmin?{rejection:a}:{tenantSlug:c.tenantSlug,rejection:a};e.delete(route(l,v),{preserveScroll:!0,onSuccess:()=>{$.value="Rejection deleted successfully."}})},Fe=a=>{if(a){const e=new URL(a);e.searchParams.set("perPage",L.value),Y.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["rejections"]})}};function G(a){D.value=a;const e=c.tenantSlug?route("acceptance.index",{tenantSlug:c.tenantSlug}):route("acceptance.index.admin");Y.get(e,{dateFilter:a,perPage:L.value},{preserveState:!0})}function Le(){const a=c.tenantSlug?route("acceptance.index",{tenantSlug:c.tenantSlug}):route("acceptance.index.admin");Y.get(a,{dateFilter:D.value,perPage:L.value},{preserveState:!0})}function Q(a){if(!a)return"";const e=a.split("-");if(e.length!==3)return a;const[l,v,w]=e;return`${Number(v)}/${Number(w)}/${l}`}me($,a=>{a&&setTimeout(()=>{$.value=""},5e3)});const Me=k({items:[{title:"Total Late Stops",value:1050},{title:"1-20 Minutes Late",value:1050},{title:"121 - 600 Minutes Late",value:1050},{title:"+601 Minutes Late",value:1050}]}),Ue=k([{name:"Kain",value:5},{name:"Ronny",value:4},{name:"Damen",value:3},{name:"Leo",value:2},{name:"Shawn",value:1}]),Ve=k({labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Late Stops",data:[65,59,80,81,56,55],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function ze(a){Y.post(route("rejection_reason_codes.restore.admin",{id:a}),{},{onSuccess:()=>{$.value="Reason code restored successfully",setTimeout(()=>$.value="",3e3)}})}function Be(a){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&Y.delete(route("rejection_reason_codes.forceDelete.admin",{id:a}),{onSuccess:()=>{$.value="Reason code permanently deleted",setTimeout(()=>$.value="",3e3)}})}z(()=>c.rejection_reason_codes.filter(a=>!a.deleted_at));const Pe=z(()=>J.value.length>0&&h.value.length===J.value.length);function Ee(a){a.target.checked?h.value=J.value.map(e=>e.id):h.value=[]}function We(){h.value.length>0&&(E.value=!0)}function Oe(){const a=ne({ids:h.value}),e=c.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",l=c.isSuperAdmin?{}:{tenantSlug:c.tenantSlug};a.delete(route(e,l),{preserveScroll:!0,onSuccess:()=>{$.value=`${h.value.length} rejection records deleted successfully.`,h.value=[],E.value=!1},onError:v=>{console.error(v)}})}function Ie(a){const e=a.target.files[0];if(!e)return;const l=new FormData;l.append("csv_file",e);const v=c.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:c.tenantSlug});Y.post(v,l,{onSuccess:()=>{$.value="Delays imported successfully",a.target.value=""},onError:w=>{console.error(w),a.target.value=""}})}function Ye(){if(J.value.length===0){P.value="No data available to export",setTimeout(()=>{P.value=""},3e3);return}C.value&&C.value.submit()}const qe=z(()=>c.tenantSlug?route("acceptance.export",{tenantSlug:c.tenantSlug}):route("acceptance.export.admin")),ee=k(!1),Je=z(()=>"/storage/upload-data-temps/Rejections Template.csv");we(()=>{const a=e=>{ee.value&&!e.target.closest(".relative")&&(ee.value=!1)};document.addEventListener("click",a),Ze(()=>{document.removeEventListener("click",a)})});const He=z(()=>u.value.search||u.value.dateFrom||u.value.dateTo||u.value.rejectionType||u.value.reasonCode||u.value.penalty||u.value.disputed||u.value.driverControllable);function Ke(a){if(!a)return"";const e=c.rejection_reason_codes.find(l=>l.id==a);return e?e.reason_code:""}return(a,e)=>(i(),T(nt,{breadcrumbs:F,tenantSlug:g.tenantSlug},{default:o(()=>[n(s(tt),{title:"Acceptance"}),t("div",Bt,[$.value?(i(),T(s(_e),{key:0,variant:"success"},{default:o(()=>[n(s(xe),null,{default:o(()=>e[32]||(e[32]=[r("Success")])),_:1}),n(s(ke),null,{default:o(()=>[r(m($.value),1)]),_:1})]),_:1})):x("",!0),P.value?(i(),T(s(_e),{key:1,variant:"destructive"},{default:o(()=>[n(s(xe),null,{default:o(()=>e[33]||(e[33]=[r("Error")])),_:1}),n(s(ke),null,{default:o(()=>[r(m(P.value),1)]),_:1})]),_:1})):x("",!0),t("div",Pt,[e[39]||(e[39]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Acceptance",-1)),t("div",Et,[n(_,{onClick:e[0]||(e[0]=l=>ye()),variant:"default"},{default:o(()=>[n(A,{name:"plus",class:"mr-2 h-4 w-4"}),e[34]||(e[34]=r(" Add Rejection "))]),_:1}),h.value.length>0?(i(),T(_,{key:0,onClick:e[1]||(e[1]=l=>We()),variant:"destructive"},{default:o(()=>[n(A,{name:"trash",class:"mr-2 h-4 w-4"}),r(" Delete Selected ("+m(h.value.length)+") ",1)]),_:1})):x("",!0),t("div",Wt,[n(_,{onClick:e[2]||(e[2]=l=>ee.value=!ee.value),variant:"secondary"},{default:o(()=>[n(A,{name:"upload",class:"mr-2 h-4 w-4"}),e[35]||(e[35]=r(" Upload CSV ")),n(A,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),ee.value?(i(),f("div",Ot,[t("div",It,[t("label",Yt,[e[36]||(e[36]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:Ie,accept:".csv"},null,32)]),t("a",{href:Je.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,qt)])])):x("",!0)]),n(_,{onClick:Ce(Ye,["prevent"]),variant:"outline"},{default:o(()=>[n(A,{name:"download",class:"mr-2 h-4 w-4"}),e[37]||(e[37]=r(" Download CSV "))]),_:1}),g.isSuperAdmin?(i(),T(_,{key:1,onClick:e[3]||(e[3]=l=>$e()),variant:"outline"},{default:o(()=>[n(A,{name:"settings",class:"mr-2 h-4 w-4"}),e[38]||(e[38]=r(" Manage Reason Codes "))]),_:1})):x("",!0)])]),t("form",{ref_key:"exportForm",ref:C,action:qe.value,method:"GET",class:"hidden"},null,8,Jt),n(s(ve),null,{default:o(()=>[n(s(pe),{class:"p-4"},{default:o(()=>[t("div",Ht,[t("div",Kt,[n(_,{onClick:e[4]||(e[4]=l=>G("yesterday")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":D.value==="yesterday"})},{default:o(()=>e[40]||(e[40]=[r(" Yesterday ")])),_:1},8,["class"]),n(_,{onClick:e[5]||(e[5]=l=>G("current-week")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":D.value==="current-week"})},{default:o(()=>e[41]||(e[41]=[r(" WtD ")])),_:1},8,["class"]),n(_,{onClick:e[6]||(e[6]=l=>G("6w")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":D.value==="6w"})},{default:o(()=>e[42]||(e[42]=[r(" 6 Weeks ")])),_:1},8,["class"]),n(_,{onClick:e[7]||(e[7]=l=>G("quarterly")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":D.value==="quarterly"})},{default:o(()=>e[43]||(e[43]=[r(" Quarterly ")])),_:1},8,["class"]),n(_,{onClick:e[8]||(e[8]=l=>G("full")),variant:"outline",size:"sm",class:X({"bg-primary/10 text-primary border-primary":D.value==="full"})},{default:o(()=>e[44]||(e[44]=[r(" Full ")])),_:1},8,["class"])]),g.dateRange?(i(),f("div",Gt,[D.value==="yesterday"&&g.dateRange.start?(i(),f("span",Qt," Showing data from "+m(Q(g.dateRange.start)),1)):g.dateRange.start&&g.dateRange.end?(i(),f("span",Xt," Showing data from "+m(Q(g.dateRange.start))+" to "+m(Q(g.dateRange.end)),1)):(i(),f("span",Zt,m(g.dateRange.label),1)),b.value?(i(),f("span",el,"("+m(b.value)+")",1)):x("",!0)])):x("",!0)])]),_:1})]),_:1}),n(s(ve),null,{default:o(()=>[n(s(rt),{class:"pb-2"},{default:o(()=>[t("div",tl,[t("div",ll,[n(s(it),null,{default:o(()=>e[45]||(e[45]=[r("Filters")])),_:1}),!d.value&&He.value?(i(),f("div",nl,[u.value.search?(i(),f("div",ol," Search: "+m(u.value.search),1)):x("",!0),u.value.dateFrom?(i(),f("div",sl," From: "+m(Q(u.value.dateFrom)),1)):x("",!0),u.value.dateTo?(i(),f("div",al," To: "+m(Q(u.value.dateTo)),1)):x("",!0),u.value.rejectionType?(i(),f("div",rl,[e[46]||(e[46]=r(" Type: ")),t("span",il,m(u.value.rejectionType),1)])):x("",!0),u.value.reasonCode?(i(),f("div",dl," Reason: "+m(Ke(u.value.reasonCode)),1)):x("",!0),u.value.penalty?(i(),f("div",ul," Penalty: "+m(u.value.penalty),1)):x("",!0),u.value.disputed?(i(),f("div",cl," Disputed: "+m(u.value.disputed==="true"?"Yes":"No"),1)):x("",!0),u.value.driverControllable?(i(),f("div",fl," Driver Controllable: "+m(u.value.driverControllable==="true"?"Yes":u.value.driverControllable==="false"?"No":"N/A"),1)):x("",!0)])):x("",!0)]),n(_,{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=l=>d.value=!d.value)},{default:o(()=>[r(m(d.value?"Hide Filters":"Show Filters")+" ",1),n(A,{name:d.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),d.value?(i(),T(s(pe),{key:0,class:"pt-2"},{default:o(()=>[t("div",vl,[t("div",pl,[t("div",null,[n(s(j),{for:"search"},{default:o(()=>e[47]||(e[47]=[r("Search")])),_:1}),n(s(q),{id:"search",modelValue:u.value.search,"onUpdate:modelValue":e[10]||(e[10]=l=>u.value.search=l),type:"text",placeholder:"Search by driver name...",onInput:O,class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(s(j),{for:"dateFrom"},{default:o(()=>e[48]||(e[48]=[r("Date From")])),_:1}),n(s(q),{id:"dateFrom",modelValue:u.value.dateFrom,"onUpdate:modelValue":e[11]||(e[11]=l=>u.value.dateFrom=l),type:"date",onChange:O,class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(s(j),{for:"dateTo"},{default:o(()=>e[49]||(e[49]=[r("Date To")])),_:1}),n(s(q),{id:"dateTo",modelValue:u.value.dateTo,"onUpdate:modelValue":e[12]||(e[12]=l=>u.value.dateTo=l),type:"date",onChange:O,class:"w-full"},null,8,["modelValue"])])]),t("div",ml,[t("div",null,[n(s(j),{for:"rejectionType"},{default:o(()=>e[50]||(e[50]=[r("Rejection Type")])),_:1}),U(t("select",{id:"rejectionType","onUpdate:modelValue":e[13]||(e[13]=l=>u.value.rejectionType=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[51]||(e[51]=[t("option",{value:""},"All Types",-1),t("option",{value:"pickup"},"Pickup",-1),t("option",{value:"delivery"},"Delivery",-1)]),544),[[B,u.value.rejectionType]])]),t("div",null,[n(s(j),{for:"reasonCode"},{default:o(()=>e[52]||(e[52]=[r("Reason Code")])),_:1}),U(t("select",{id:"reasonCode","onUpdate:modelValue":e[14]||(e[14]=l=>u.value.reasonCode=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[53]||(e[53]=t("option",{value:""},"All Reason Codes",-1)),(i(!0),f(S,null,M(g.rejection_reason_codes,l=>(i(),f("option",{key:l.id,value:l.id},m(l.reason_code),9,gl))),128))],544),[[B,u.value.reasonCode]])]),t("div",null,[n(s(j),{for:"penalty"},{default:o(()=>e[54]||(e[54]=[r("Penalty")])),_:1}),n(s(q),{id:"penalty",modelValue:u.value.penalty,"onUpdate:modelValue":e[15]||(e[15]=l=>u.value.penalty=l),type:"text",placeholder:"Filter by penalty...",onInput:O,class:"w-full"},null,8,["modelValue"])])]),t("div",yl,[t("div",null,[n(s(j),{for:"disputed"},{default:o(()=>e[55]||(e[55]=[r("Disputed")])),_:1}),U(t("select",{id:"disputed","onUpdate:modelValue":e[16]||(e[16]=l=>u.value.disputed=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[56]||(e[56]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),544),[[B,u.value.disputed]])]),t("div",null,[n(s(j),{for:"driverControllable"},{default:o(()=>e[57]||(e[57]=[r("Driver Controllable")])),_:1}),U(t("select",{id:"driverControllable","onUpdate:modelValue":e[17]||(e[17]=l=>u.value.driverControllable=l),onChange:O,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[58]||(e[58]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"null"},"N/A",-1)]),544),[[B,u.value.driverControllable]])])]),t("div",bl,[n(_,{onClick:je,variant:"ghost",size:"sm"},{default:o(()=>[n(A,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[59]||(e[59]=r(" Reset Filters "))]),_:1})])])]),_:1})):x("",!0)]),_:1}),n(zt,{"metrics-data":Me.value,"drivers-data":Ue.value,"chart-data":Ve.value},null,8,["metrics-data","drivers-data","chart-data"]),n(s(ve),null,{default:o(()=>[n(s(pe),{class:"p-0"},{default:o(()=>[t("div",_l,[n(s(ot),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[n(s(st),null,{default:o(()=>[n(s(fe),{class:"sticky top-0 bg-background border-b z-10 hover:bg-background"},{default:o(()=>[n(s(ue),{class:"w-[50px]"},{default:o(()=>[t("div",xl,[t("input",{type:"checkbox",onChange:Ee,checked:Pe.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,kl)])]),_:1}),g.isSuperAdmin?(i(),T(s(ue),{key:0},{default:o(()=>e[60]||(e[60]=[r("Company Name")])),_:1})):x("",!0),(i(),f(S,null,M(oe,l=>n(s(ue),{key:l,class:"cursor-pointer",onClick:v=>Se(l)},{default:o(()=>[t("div",Cl,[r(m(l.replace(/_/g," ").replace(/^./,v=>v.toUpperCase()))+" ",1),H.value===l?(i(),f("div",wl,[K.value==="asc"?(i(),f("svg",Sl,e[61]||(e[61]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),f("svg",jl,e[62]||(e[62]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),f("div",$l,e[63]||(e[63]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),n(s(ue),null,{default:o(()=>e[64]||(e[64]=[r("Actions")])),_:1})]),_:1})]),_:1}),n(s(at),null,{default:o(()=>[J.value.length===0?(i(),T(s(fe),{key:0},{default:o(()=>[n(s(le),{colspan:g.isSuperAdmin?oe.length+3:oe.length+2,class:"text-center py-8"},{default:o(()=>e[65]||(e[65]=[r(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):x("",!0),(i(!0),f(S,null,M(J.value,l=>(i(),T(s(fe),{key:l.id,class:"hover:bg-muted/50"},{default:o(()=>[n(s(le),{class:"text-center"},{default:o(()=>[U(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[18]||(e[18]=v=>h.value=v),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,hl),[[et,h.value]])]),_:2},1024),g.isSuperAdmin?(i(),T(s(le),{key:0},{default:o(()=>{var v;return[r(m(((v=l.tenant)==null?void 0:v.name)||"—"),1)]}),_:2},1024)):x("",!0),(i(),f(S,null,M(oe,v=>n(s(le),{key:v,class:"whitespace-nowrap"},{default:o(()=>{var w,I;return[v==="date"?(i(),f(S,{key:0},[r(m(Q(l[v])),1)],64)):v==="rejection_type"?(i(),f("span",Dl,m(l[v]),1)):v==="reason_code"?(i(),f(S,{key:2},[r(m(((w=l.reason_code)==null?void 0:w.reason_code)||"—")+" ",1),(I=l.reason_code)!=null&&I.deleted_at?(i(),f("span",Al,"(Deleted)")):x("",!0)],64)):v==="disputed"?(i(),f(S,{key:3},[r(m(l[v]?"Yes":"No"),1)],64)):v==="driver_controllable"?(i(),f(S,{key:4},[r(m(l[v]===null?"N/A":l[v]?"Yes":"No"),1)],64)):(i(),f(S,{key:5},[r(m(l[v]),1)],64))]}),_:2},1024)),64)),n(s(le),null,{default:o(()=>[t("div",Tl,[n(_,{size:"sm",onClick:v=>ye(l),variant:"warning"},{default:o(()=>[n(A,{name:"pencil",class:"mr-1 h-4 w-4"}),e[66]||(e[66]=r(" Edit "))]),_:2},1032,["onClick"]),n(_,{size:"sm",variant:"destructive",onClick:v=>Re(l.id)},{default:o(()=>[n(A,{name:"trash",class:"mr-1 h-4 w-4"}),e[67]||(e[67]=r(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),g.rejections.links?(i(),f("div",Nl,[t("div",Rl,[t("div",Fl,[t("span",null,"Showing "+m(J.value.length)+" of "+m(g.rejections.data.length)+" entries",1),t("div",Ll,[e[68]||(e[68]=t("span",{class:"text-sm"},"Show:",-1)),U(t("select",{"onUpdate:modelValue":e[19]||(e[19]=l=>L.value=l),onChange:Le,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(i(),f(S,null,M([10,25,50,100],l=>t("option",{key:l,value:l},m(l),9,Ml)),64))],544),[[B,L.value]])])]),t("div",Ul,[(i(!0),f(S,null,M(g.rejections.links,l=>(i(),T(_,{key:l.label,onClick:v=>Fe(l.url),disabled:!l.url,variant:"ghost",size:"sm",class:X(["mx-1",{"bg-primary/10 text-primary border-primary":l.active}])},{default:o(()=>[t("span",{innerHTML:l.label},null,8,Vl)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):x("",!0)]),_:1})]),_:1}),n(s(se),{open:p.value,"onUpdate:open":e[21]||(e[21]=l=>p.value=l)},{default:o(()=>[n(s(ae),{class:"sm:max-w-2xl"},{default:o(()=>[n(s(re),null,{default:o(()=>[n(s(ie),null,{default:o(()=>[r(m(V.value?"Edit":"Add")+" Rejection",1)]),_:1}),n(s(de),null,{default:o(()=>[r(" Fill in the details to "+m(V.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),n(kt,{rejection:V.value,reasons:g.rejection_reason_codes,tenants:g.tenants,"is-super-admin":g.isSuperAdmin,"tenant-slug":g.tenantSlug,onClose:e[20]||(e[20]=l=>p.value=!1)},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),g.isSuperAdmin?(i(),T(s(se),{key:2,open:N.value,"onUpdate:open":e[25]||(e[25]=l=>N.value=l)},{default:o(()=>[n(s(ae),{class:"sm:max-w-lg"},{default:o(()=>[n(s(re),null,{default:o(()=>[n(s(ie),null,{default:o(()=>e[69]||(e[69]=[r("Manage Reason Codes")])),_:1}),n(s(de),null,{default:o(()=>e[70]||(e[70]=[r(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",zl,[t("div",Bl,[e[72]||(e[72]=t("h3",{class:"text-sm font-medium"},"Current Reason Codes",-1)),n(_,{onClick:he,size:"sm",variant:"outline"},{default:o(()=>[n(A,{name:"plus",class:"mr-2 h-4 w-4"}),e[71]||(e[71]=r(" Add New Code "))]),_:1})]),t("div",Pl,[!g.rejection_reason_codes||g.rejection_reason_codes.length===0?(i(),f("div",El," No reason codes found ")):(i(),f("div",Wl,[(i(!0),f(S,null,M(g.rejection_reason_codes,l=>(i(),f("div",{key:l.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[t("div",{class:"flex-1 cursor-pointer",onClick:v=>De(l)},[t("div",Il,[r(m(l.reason_code)+" ",1),l.deleted_at?(i(),f("span",Yl,"(Deleted)")):x("",!0)]),l.description?(i(),f("div",ql,m(l.description),1)):x("",!0)],8,Ol),t("div",Jl,[g.isSuperAdmin?(i(),f(S,{key:0},[l.deleted_at?(i(),f(S,{key:0},[n(_,{onClick:v=>ze(l.id),size:"sm",variant:"outline"},{default:o(()=>[n(A,{name:"refresh",class:"mr-2 h-4 w-4"}),e[73]||(e[73]=r(" Restore "))]),_:2},1032,["onClick"]),n(_,{onClick:v=>Be(l.id),size:"sm",variant:"destructive"},{default:o(()=>[n(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[74]||(e[74]=r(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(i(),T(_,{key:1,onClick:v=>be(l.id),size:"sm",variant:"destructive"},{default:o(()=>[n(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[75]||(e[75]=r(" Delete "))]),_:2},1032,["onClick"]))],64)):(i(),T(_,{key:1,onClick:v=>be(l.id),size:"sm",variant:"destructive"},{default:o(()=>[n(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[76]||(e[76]=r(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))])]),y.value?(i(),f("div",Hl,[t("h3",Kl,m(R.value?"Edit":"Add")+" Reason Code",1),t("div",Gl,[t("div",null,[n(s(j),{for:"reason_code"},{default:o(()=>e[77]||(e[77]=[r("Code")])),_:1}),n(s(q),{id:"reason_code",modelValue:W.value.reason_code,"onUpdate:modelValue":e[22]||(e[22]=l=>W.value.reason_code=l),placeholder:"Enter reason code"},null,8,["modelValue"])]),t("div",null,[n(s(j),{for:"description"},{default:o(()=>e[78]||(e[78]=[r("Description")])),_:1}),n(s(q),{id:"description",modelValue:W.value.description,"onUpdate:modelValue":e[23]||(e[23]=l=>W.value.description=l),placeholder:"Enter description"},null,8,["modelValue"])]),t("div",Ql,[n(_,{onClick:Ae,variant:"ghost",size:"sm"},{default:o(()=>e[79]||(e[79]=[r("Cancel")])),_:1}),n(_,{onClick:Te,variant:"default",size:"sm"},{default:o(()=>e[80]||(e[80]=[r("Save")])),_:1})])])])):x("",!0),n(s(ce),{class:"mt-6"},{default:o(()=>[n(_,{onClick:e[24]||(e[24]=l=>N.value=!1),variant:"outline"},{default:o(()=>e[81]||(e[81]=[r("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):x("",!0),n(s(se),{open:Z.value,"onUpdate:open":e[28]||(e[28]=l=>Z.value=l)},{default:o(()=>[n(s(ae),null,{default:o(()=>[n(s(re),null,{default:o(()=>[n(s(ie),null,{default:o(()=>e[82]||(e[82]=[r("Confirm Deletion")])),_:1}),n(s(de),null,{default:o(()=>e[83]||(e[83]=[r(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),n(s(ce),{class:"mt-4"},{default:o(()=>[n(_,{type:"button",onClick:e[26]||(e[26]=l=>Z.value=!1),variant:"outline"},{default:o(()=>e[84]||(e[84]=[r(" Cancel ")])),_:1}),n(_,{type:"button",onClick:e[27]||(e[27]=l=>Ne(ge.value)),variant:"destructive"},{default:o(()=>e[85]||(e[85]=[r(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n(s(se),{open:E.value,"onUpdate:open":e[31]||(e[31]=l=>E.value=l)},{default:o(()=>[n(s(ae),null,{default:o(()=>[n(s(re),null,{default:o(()=>[n(s(ie),null,{default:o(()=>e[86]||(e[86]=[r("Confirm Bulk Deletion")])),_:1}),n(s(de),null,{default:o(()=>[r(" Are you sure you want to delete "+m(h.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),n(s(ce),{class:"mt-4"},{default:o(()=>[n(_,{type:"button",onClick:e[29]||(e[29]=l=>E.value=!1),variant:"outline"},{default:o(()=>e[87]||(e[87]=[r(" Cancel ")])),_:1}),n(_,{type:"button",onClick:e[30]||(e[30]=l=>Oe()),variant:"destructive"},{default:o(()=>e[88]||(e[88]=[r(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{_n as default};
