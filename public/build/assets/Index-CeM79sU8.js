import{d as je,C as I,f as ye,a as m,o as i,b as a,g as N,e as l,h as U,w as n,i as s,v as z,u as o,F as $,r as E,t as C,j as Pe,k as _,c as re,l as F,m as Be,n as G,p as Ee,W as B}from"./app-DOHfSnMT.js";import{_ as Le}from"./AppLayout.vue_vue_type_script_setup_true_lang-DU3cY6DD.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-DvVgTGWm.js";import{_ as Z,a as h,b as ee,c as te,d as le,e as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Bt-Ov6Wy.js";import{_ as S,a as O}from"./Label.vue_vue_type_script_setup_true_lang-Txy_2B_m.js";import{_ as Re}from"./Checkbox.vue_vue_type_script_setup_true_lang-Dq4qMH2n.js";import{_ as V}from"./Icon.vue_vue_type_script_setup_true_lang-BdMqJti2.js";import{_ as Ie,a as Oe,b as ie,c as de,d as Ye,e as ne}from"./TableRow.vue_vue_type_script_setup_true_lang-BrU9_CN9.js";import{_ as fe}from"./Card.vue_vue_type_script_setup_true_lang-DzqexA0r.js";import{_ as We,a as qe}from"./CardTitle.vue_vue_type_script_setup_true_lang-DaqQoYbP.js";import{_ as me}from"./CardContent.vue_vue_type_script_setup_true_lang-D2-lWpDr.js";import{_ as He,a as Qe,b as Ge}from"./AlertDescription.vue_vue_type_script_setup_true_lang-6_aNRwVD.js";import"./index-BF4cvBij.js";import"./createLucideIcon-Br4LuE9f.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ToSW60Bf.js";import"./check-DEIf2Qok.js";import"./shield-DpvrnMCS.js";import"./loader-circle-CstCd4AU.js";import"./sun-Dkpz6XPy.js";const Je={class:"grid grid-cols-2 gap-4"},Ke={key:0},Xe=["value"],Ze=["value"],he={class:"flex items-center space-x-2"},et={class:"mt-6 flex justify-end"},tt=je({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(p,{emit:v}){var A,M,J,D,j,T,w;const k=p,Y=v,f=I({id:(A=k.delay)==null?void 0:A.id,tenant_id:k.isSuperAdmin?(M=k.delay)==null?void 0:M.tenant_id:null,date:((J=k.delay)==null?void 0:J.date)||"",driver_name:((D=k.delay)==null?void 0:D.driver_name)||"",delay_type:((j=k.delay)==null?void 0:j.delay_type)||"origin",delay_category:((T=k.delay)==null?void 0:T.delay_category)||"1_120",delay_code_id:((w=k.delay)==null?void 0:w.delay_code_id)||null,disputed:k.delay&&k.delay.disputed!==null?parseInt(k.delay.disputed)===1:!1,driver_controllable:k.delay&&k.delay.driver_controllable!==null?parseInt(k.delay.driver_controllable)===1:null});ye(()=>k.delay,y=>{y?(f.id=y.id,f.tenant_id=y.tenant_id,f.date=y.date,f.driver_name=y.driver_name,f.delay_type=y.delay_type,f.delay_category=y.delay_category,f.delay_code_id=y.delay_code_id,f.disputed=y.disputed!==null?parseInt(y.disputed)===1:!1,f.driver_controllable=y.driver_controllable!==null?parseInt(y.driver_controllable)===1:null):f.reset()},{immediate:!0});const W=()=>{const y=!!f.id,u=k.isSuperAdmin?y?"ontime.update.admin":"ontime.store.admin":y?"ontime.update":"ontime.store",c=k.isSuperAdmin?y?{delay:f.id}:{}:y?{tenantSlug:k.tenantSlug,delay:f.id}:{tenantSlug:k.tenantSlug};f[y?"put":"post"](route(u,c),{onSuccess:()=>Y("close")})};return(y,u)=>(i(),m("form",{onSubmit:Pe(W,["prevent"])},[a("div",Je,[p.isSuperAdmin?(i(),m("div",Ke,[l(S,null,{default:n(()=>u[8]||(u[8]=[s("Company Name")])),_:1}),U(a("select",{"onUpdate:modelValue":u[0]||(u[0]=c=>o(f).tenant_id=c),class:"w-full border rounded px-2 py-1"},[u[9]||(u[9]=a("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),m($,null,E(p.tenants,c=>(i(),m("option",{key:c.id,value:c.id},C(c.name),9,Xe))),128))],512),[[z,o(f).tenant_id]])])):N("",!0),a("div",null,[l(S,null,{default:n(()=>u[10]||(u[10]=[s("Date")])),_:1}),l(O,{type:"date",modelValue:o(f).date,"onUpdate:modelValue":u[1]||(u[1]=c=>o(f).date=c),class:"w-full"},null,8,["modelValue"])]),a("div",null,[l(S,null,{default:n(()=>u[11]||(u[11]=[s("Driver Name")])),_:1}),l(O,{modelValue:o(f).driver_name,"onUpdate:modelValue":u[2]||(u[2]=c=>o(f).driver_name=c),class:"w-full"},null,8,["modelValue"])]),a("div",null,[l(S,null,{default:n(()=>u[12]||(u[12]=[s("Delay Type")])),_:1}),U(a("select",{"onUpdate:modelValue":u[3]||(u[3]=c=>o(f).delay_type=c),class:"w-full border rounded px-2 py-1"},u[13]||(u[13]=[a("option",{value:"origin"},"Origin",-1),a("option",{value:"destination"},"Destination",-1)]),512),[[z,o(f).delay_type]])]),a("div",null,[l(S,null,{default:n(()=>u[14]||(u[14]=[s("Delay Category")])),_:1}),U(a("select",{"onUpdate:modelValue":u[4]||(u[4]=c=>o(f).delay_category=c),class:"w-full border rounded px-2 py-1"},u[15]||(u[15]=[a("option",{value:"1_120"},"1–120 min",-1),a("option",{value:"121_600"},"121–600 min",-1),a("option",{value:"601_plus"},"601+ min",-1)]),512),[[z,o(f).delay_category]])]),a("div",null,[l(S,null,{default:n(()=>u[16]||(u[16]=[s("Delay Code")])),_:1}),U(a("select",{"onUpdate:modelValue":u[5]||(u[5]=c=>o(f).delay_code_id=c),class:"w-full border rounded px-2 py-1"},[(i(!0),m($,null,E(p.delayCodes,c=>(i(),m("option",{key:c.id,value:c.id},C(c.code),9,Ze))),128))],512),[[z,o(f).delay_code_id]])]),a("div",he,[l(Re,{checked:o(f).disputed,"onUpdate:checked":u[6]||(u[6]=c=>o(f).disputed=c)},null,8,["checked"]),l(S,null,{default:n(()=>u[17]||(u[17]=[s("Disputed")])),_:1})]),a("div",null,[l(S,null,{default:n(()=>u[18]||(u[18]=[s("Driver Controllable")])),_:1}),U(a("select",{"onUpdate:modelValue":u[7]||(u[7]=c=>o(f).driver_controllable=c),class:"w-full border rounded px-2 py-1"},u[19]||(u[19]=[a("option",{value:null},"N/A",-1),a("option",{value:!0},"Yes",-1),a("option",{value:!1},"No",-1)]),512),[[z,o(f).driver_controllable]])])]),a("div",et,[l(g,{type:"submit",disabled:o(f).processing},{default:n(()=>[s(C(o(f).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),lt={class:"max-w-7xl mx-auto p-6 space-y-8"},nt={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},ot={class:"flex flex-wrap gap-3"},at={class:"flex flex-col gap-2"},st={class:"flex flex-wrap gap-2"},dt={key:0,class:"text-sm text-muted-foreground"},ut={key:0},rt={key:1},it={class:"flex flex-col justify-between gap-4"},ft={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full"},mt=["value"],vt={class:"flex justify-end"},pt={class:"overflow-x-auto"},yt={class:"flex items-center justify-center"},ct=["checked"],gt={class:"flex items-center"},bt={key:0,class:"ml-2"},Ct={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},kt={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},xt={key:1,class:"ml-2 opacity-50"},_t=["value"],St={key:0,class:"ml-1 text-xs text-red-500"},Dt={class:"flex space-x-2"},wt={key:0,class:"bg-muted/20 px-4 py-3 border-t"},$t={class:"flex justify-between items-center"},At={class:"text-sm text-muted-foreground"},Nt={class:"flex items-center gap-4"},Ft={class:"flex items-center gap-2"},Vt={class:"flex"},Ut=["innerHTML"],Tt={class:"mt-4 space-y-4"},zt={class:"flex items-center justify-between"},Mt={class:"max-h-[400px] overflow-y-auto"},jt={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},Pt={key:1,class:"space-y-2"},Bt=["onClick"],Et={class:"font-medium"},Lt={key:0,class:"ml-2 text-xs text-red-500"},Rt={key:0,class:"text-sm text-muted-foreground mt-1"},It={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Ot={key:0,class:"border rounded-md p-4 space-y-4"},Yt={class:"text-sm font-medium"},Wt={class:"space-y-3"},qt={class:"flex justify-end space-x-2"},fl={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"full"}},setup(p){const v=p,k=[{title:v.tenantSlug?"Dashboard":"Admin Dashboard",href:v.tenantSlug?route("dashboard",{tenantSlug:v.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:v.tenantSlug?route("ontime.index",{tenantSlug:v.tenantSlug}):route("ontime.index.admin")}],Y=_(!1),f=_(!1),W=_(null),A=_(""),M=_(!1),J=_(null),D=_([]),j=_(!1),T=_(!1),w=_(null),y=_({code:"",description:""}),u=_(!1),c=_(null),L=_("date"),q=_("desc"),b=_({search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}),oe=["date","delay_type","driver_name","penalty","delay_code","disputed","driver_controllable"],H=re(()=>{let d=[...v.delays.data];if(b.value.search){const e=b.value.search.toLowerCase();d=d.filter(t=>{var r,x,P,X;return((r=t.driver_name)==null?void 0:r.toLowerCase().includes(e))||((x=t.delay_type)==null?void 0:x.toLowerCase().includes(e))||((X=(P=t.delay_code)==null?void 0:P.code)==null?void 0:X.toLowerCase().includes(e))})}if(b.value.dateFrom&&(d=d.filter(e=>e.date&&e.date>=b.value.dateFrom)),b.value.dateTo&&(d=d.filter(e=>e.date&&e.date<=b.value.dateTo)),b.value.delayCode&&(d=d.filter(e=>{var t;return((t=e.delay_code)==null?void 0:t.id)===parseInt(b.value.delayCode)})),b.value.disputed!==""){const e=b.value.disputed==="true";d=d.filter(t=>t.disputed===e)}if(b.value.controllable!=="")if(b.value.controllable==="null")d=d.filter(e=>e.driver_controllable===null);else{const e=b.value.controllable==="true";d=d.filter(t=>t.driver_controllable===e)}return d.sort((e,t)=>{var P,X;let r,x;return L.value==="delay_code"?(r=((P=e.delay_code)==null?void 0:P.code)||"",x=((X=t.delay_code)==null?void 0:X.code)||""):(r=e[L.value],x=t[L.value]),r===null?1:x===null?-1:(typeof r=="string"&&(r=r.toLowerCase(),x=x.toLowerCase()),r<x?q.value==="asc"?-1:1:r>x?q.value==="asc"?1:-1:0)}),d}),ce=re(()=>v.delay_codes.filter(d=>!d.deleted_at));function ge(d){L.value===d?q.value=q.value==="asc"?"desc":"asc":(L.value=d,q.value="asc")}function Q(){}function be(){b.value={search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}}const ae=_(10),R=_(v.dateFilter||"full");function Ce(){const d=v.tenantSlug?route("ontime.index",{tenantSlug:v.tenantSlug}):route("ontime.index.admin");B.get(d,{dateFilter:R.value,perPage:ae.value},{preserveState:!0})}function K(d){R.value=d;const e=v.tenantSlug?route("ontime.index",{tenantSlug:v.tenantSlug}):route("ontime.index.admin");B.get(e,{dateFilter:d,perPage:ae.value},{preserveState:!0})}function ke(d){d&&B.get(d,{},{only:["delays"]})}function ue(d){if(!d)return"";const e=d.split("-");if(e.length!==3)return d;const[t,r,x]=e;return`${Number(r)}/${Number(x)}/${t}`}const ve=(d=null)=>{W.value=d,Y.value=!0},xe=d=>{J.value=d,M.value=!0},_e=()=>{f.value=!0,T.value=!1,w.value=null},Se=()=>{y.value={code:"",description:""},w.value=null,T.value=!0},De=d=>{y.value={code:d.code,description:d.description||""},w.value=d.id,T.value=!0},we=()=>{T.value=!1,w.value=null},pe=d=>{c.value=d,u.value=!0},$e=d=>{const e=I({}),t=v.isSuperAdmin?"delay_codes.destroy.admin":"delay_codes.destroy",r=v.isSuperAdmin?{id:d}:{tenantSlug:v.tenantSlug,delay_code:d};e.delete(route(t,r),{onSuccess:()=>{A.value="Delay code deleted successfully.",u.value=!1,B.reload({only:["delay_codes"]})},onError:x=>{console.error(x)}})},Ae=()=>{const d=I({code:y.value.code,description:y.value.description}),e=w.value?v.isSuperAdmin?"delay_codes.update.admin":"delay_codes.update":v.isSuperAdmin?"delay_codes.store.admin":"delay_codes.store",t=w.value?v.isSuperAdmin?{id:w.value}:{tenantSlug:v.tenantSlug,id:w.value}:v.isSuperAdmin?{}:{tenantSlug:v.tenantSlug};(w.value?d.put:d.post).call(d,route(e,t),{onSuccess:()=>{A.value=w.value?"Delay code updated successfully.":"Delay code created successfully.",T.value=!1,w.value=null,B.reload({only:["delay_codes"]})},onError:x=>{console.error(x)}})},Ne=d=>{I({}).post(route(v.isSuperAdmin?"delay_codes.restore.admin":"delay_codes.restore",{id:d}),{onSuccess:()=>{A.value="Delay code restored successfully.",B.reload({only:["delay_codes"]})},onError:t=>{console.error(t)}})},Fe=d=>{I({}).delete(route(v.isSuperAdmin?"delay_codes.forceDelete.admin":"delay_codes.forceDelete",{id:d}),{onSuccess:()=>{A.value="Delay code permanently deleted successfully.",B.reload({only:["delay_codes"]})},onError:t=>{console.error(t)}})},Ve=d=>{const e=I({}),t=v.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",r=v.isSuperAdmin?{delay:d}:{tenantSlug:v.tenantSlug,delay:d};e.delete(route(t,r),{preserveScroll:!0,onSuccess:()=>{A.value="Delay record deleted successfully.",M.value=!1}})};ye(A,d=>{d&&setTimeout(()=>{A.value=""},5e3)});const Ue=re(()=>H.value.length>0&&D.value.length===H.value.length);function Te(d){d.target.checked?D.value=H.value.map(e=>e.id):D.value=[]}function ze(){D.value.length>0&&(j.value=!0)}function Me(){const d=I({ids:D.value}),e=v.isSuperAdmin?"ontime.destroyBulk.admin":"ontime.destroyBulk",t=v.isSuperAdmin?{}:{tenantSlug:v.tenantSlug};d.delete(route(e,t),{preserveScroll:!0,onSuccess:()=>{A.value=`${D.value.length} delay records deleted successfully.`,D.value=[],j.value=!1,B.reload()},onError:r=>{console.error(r)}})}return(d,e)=>(i(),F(Le,{breadcrumbs:k,tenantSlug:p.tenantSlug},{default:n(()=>[l(o(Be),{title:"On-Time"}),a("div",lt,[A.value?(i(),F(o(He),{key:0,variant:"success"},{default:n(()=>[l(o(Qe),null,{default:n(()=>e[31]||(e[31]=[s("Success")])),_:1}),l(o(Ge),null,{default:n(()=>[s(C(A.value),1)]),_:1})]),_:1})):N("",!0),a("div",nt,[e[34]||(e[34]=a("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"On-Time Management",-1)),a("div",ot,[l(g,{onClick:e[0]||(e[0]=t=>ve()),variant:"default"},{default:n(()=>[l(V,{name:"plus",class:"mr-2 h-4 w-4"}),e[32]||(e[32]=s(" Add Delay "))]),_:1}),D.value.length>0?(i(),F(g,{key:0,onClick:e[1]||(e[1]=t=>ze()),variant:"destructive"},{default:n(()=>[l(V,{name:"trash",class:"mr-2 h-4 w-4"}),s(" Delete Selected ("+C(D.value.length)+") ",1)]),_:1})):N("",!0),p.isSuperAdmin?(i(),F(g,{key:1,onClick:e[2]||(e[2]=t=>_e()),variant:"outline"},{default:n(()=>[l(V,{name:"settings",class:"mr-2 h-4 w-4"}),e[33]||(e[33]=s(" Manage Delay Codes "))]),_:1})):N("",!0)])]),l(o(fe),null,{default:n(()=>[l(o(me),{class:"p-4"},{default:n(()=>[a("div",at,[a("div",st,[l(g,{onClick:e[3]||(e[3]=t=>K("yesterday")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":R.value==="yesterday"})},{default:n(()=>e[35]||(e[35]=[s(" Yesterday ")])),_:1},8,["class"]),l(g,{onClick:e[4]||(e[4]=t=>K("current-week")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":R.value==="current-week"})},{default:n(()=>e[36]||(e[36]=[s(" Current Week ")])),_:1},8,["class"]),l(g,{onClick:e[5]||(e[5]=t=>K("6w")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":R.value==="6w"})},{default:n(()=>e[37]||(e[37]=[s(" 6 Weeks ")])),_:1},8,["class"]),l(g,{onClick:e[6]||(e[6]=t=>K("quarterly")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":R.value==="quarterly"})},{default:n(()=>e[38]||(e[38]=[s(" Quarterly ")])),_:1},8,["class"]),l(g,{onClick:e[7]||(e[7]=t=>K("full")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":R.value==="full"})},{default:n(()=>e[39]||(e[39]=[s(" Full ")])),_:1},8,["class"])]),p.dateRange?(i(),m("div",dt,[p.dateRange.start&&p.dateRange.end?(i(),m("span",ut," Showing data from "+C(ue(p.dateRange.start))+" to "+C(ue(p.dateRange.end)),1)):(i(),m("span",rt,C(p.dateRange.label),1))])):N("",!0)])]),_:1})]),_:1}),l(o(fe),null,{default:n(()=>[l(o(We),null,{default:n(()=>[l(o(qe),null,{default:n(()=>e[40]||(e[40]=[s("Filters")])),_:1})]),_:1}),l(o(me),null,{default:n(()=>[a("div",it,[a("div",ft,[a("div",null,[l(o(S),{for:"search"},{default:n(()=>e[41]||(e[41]=[s("Search")])),_:1}),l(o(O),{id:"search",modelValue:b.value.search,"onUpdate:modelValue":e[8]||(e[8]=t=>b.value.search=t),type:"text",placeholder:"Search by driver or type...",onInput:Q},null,8,["modelValue"])]),a("div",null,[l(o(S),{for:"dateFrom"},{default:n(()=>e[42]||(e[42]=[s("Date From")])),_:1}),l(o(O),{id:"dateFrom",modelValue:b.value.dateFrom,"onUpdate:modelValue":e[9]||(e[9]=t=>b.value.dateFrom=t),type:"date",onChange:Q},null,8,["modelValue"])]),a("div",null,[l(o(S),{for:"dateTo"},{default:n(()=>e[43]||(e[43]=[s("Date To")])),_:1}),l(o(O),{id:"dateTo",modelValue:b.value.dateTo,"onUpdate:modelValue":e[10]||(e[10]=t=>b.value.dateTo=t),type:"date",onChange:Q},null,8,["modelValue"])]),a("div",null,[l(o(S),{for:"delayCode"},{default:n(()=>e[44]||(e[44]=[s("Delay Code")])),_:1}),U(a("select",{id:"delayCode","onUpdate:modelValue":e[11]||(e[11]=t=>b.value.delayCode=t),onChange:Q,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[45]||(e[45]=a("option",{value:""},"All Codes",-1)),(i(!0),m($,null,E(p.delay_codes,t=>(i(),m("option",{key:t.id,value:t.id},C(t.code),9,mt))),128))],544),[[z,b.value.delayCode]])]),a("div",null,[l(o(S),{for:"disputed"},{default:n(()=>e[46]||(e[46]=[s("Disputed Status")])),_:1}),U(a("select",{id:"disputed","onUpdate:modelValue":e[12]||(e[12]=t=>b.value.disputed=t),onChange:Q,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[47]||(e[47]=[a("option",{value:""},"All",-1),a("option",{value:"true"},"Disputed",-1),a("option",{value:"false"},"Not Disputed",-1)]),544),[[z,b.value.disputed]])]),a("div",null,[l(o(S),{for:"controllable"},{default:n(()=>e[48]||(e[48]=[s("Driver Controllable")])),_:1}),U(a("select",{id:"controllable","onUpdate:modelValue":e[13]||(e[13]=t=>b.value.controllable=t),onChange:Q,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[49]||(e[49]=[a("option",{value:""},"All",-1),a("option",{value:"true"},"Yes",-1),a("option",{value:"false"},"No",-1),a("option",{value:"null"},"N/A",-1)]),544),[[z,b.value.controllable]])])]),a("div",vt,[l(g,{onClick:be,variant:"ghost",size:"sm"},{default:n(()=>[l(V,{name:"rotate-ccw",class:"mr-2 h-4 w-4"}),e[50]||(e[50]=s(" Reset Filters "))]),_:1})])])]),_:1})]),_:1}),l(o(fe),null,{default:n(()=>[l(o(me),{class:"p-0"},{default:n(()=>[a("div",pt,[l(o(Ie),{class:"relative h-[500px] overflow-auto"},{default:n(()=>[l(o(Oe),null,{default:n(()=>[l(o(ie),{class:"sticky top-0 bg-background border-b z-10"},{default:n(()=>[l(o(de),{class:"w-[50px]"},{default:n(()=>[a("div",yt,[a("input",{type:"checkbox",onChange:Te,checked:Ue.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ct)])]),_:1}),p.isSuperAdmin?(i(),F(o(de),{key:0},{default:n(()=>e[51]||(e[51]=[s("Company Name")])),_:1})):N("",!0),(i(),m($,null,E(oe,t=>l(o(de),{key:t,class:"cursor-pointer",onClick:r=>ge(t)},{default:n(()=>[a("div",gt,[s(C(t.replace(/_/g," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "))+" ",1),L.value===t?(i(),m("div",bt,[q.value==="asc"?(i(),m("svg",Ct,e[52]||(e[52]=[a("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),m("svg",kt,e[53]||(e[53]=[a("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),m("div",xt,e[54]||(e[54]=[a("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M8 10l4-4 4 4"}),a("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),l(o(de),null,{default:n(()=>e[55]||(e[55]=[s("Actions")])),_:1})]),_:1})]),_:1}),l(o(Ye),null,{default:n(()=>[H.value.length===0?(i(),F(o(ie),{key:0},{default:n(()=>[l(o(ne),{colspan:p.isSuperAdmin?oe.length+2:oe.length+1,class:"text-center py-8"},{default:n(()=>e[56]||(e[56]=[s(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):N("",!0),(i(!0),m($,null,E(H.value,t=>(i(),F(o(ie),{key:t.id,class:"hover:bg-muted/50"},{default:n(()=>[l(o(ne),{class:"text-center"},{default:n(()=>[U(a("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[14]||(e[14]=r=>D.value=r),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,_t),[[Ee,D.value]])]),_:2},1024),p.isSuperAdmin?(i(),F(o(ne),{key:0},{default:n(()=>{var r;return[s(C(((r=t.tenant)==null?void 0:r.name)||"—"),1)]}),_:2},1024)):N("",!0),(i(),m($,null,E(oe,r=>l(o(ne),{key:r,class:"whitespace-nowrap"},{default:n(()=>{var x,P;return[r==="date"?(i(),m($,{key:0},[s(C(ue(t[r])),1)],64)):r==="disputed"?(i(),m($,{key:1},[s(C(t[r]?"Yes":"No"),1)],64)):r==="driver_controllable"?(i(),m($,{key:2},[s(C(t[r]===null?"N/A":t[r]?"Yes":"No"),1)],64)):r==="delay_code"?(i(),m($,{key:3},[s(C(((x=t.delay_code)==null?void 0:x.code)||"—")+" ",1),(P=t.delay_code)!=null&&P.deleted_at?(i(),m("span",St,"(Deleted Code)")):N("",!0)],64)):(i(),m($,{key:4},[s(C(t[r]),1)],64))]}),_:2},1024)),64)),l(o(ne),null,{default:n(()=>[a("div",Dt,[l(g,{onClick:r=>ve(t),variant:"warning",size:"sm"},{default:n(()=>[l(V,{name:"pencil",class:"mr-1 h-4 w-4"}),e[57]||(e[57]=s(" Edit "))]),_:2},1032,["onClick"]),l(g,{onClick:r=>xe(t.id),variant:"destructive",size:"sm"},{default:n(()=>[l(V,{name:"trash",class:"mr-1 h-4 w-4"}),e[58]||(e[58]=s(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),p.delays.links?(i(),m("div",wt,[a("div",$t,[a("div",At," Showing "+C(H.value.length)+" of "+C(p.delays.data.length)+" entries ",1),a("div",Nt,[a("div",Ft,[l(o(S),{for:"perPage",class:"text-sm"},{default:n(()=>e[59]||(e[59]=[s("Per page:")])),_:1}),U(a("select",{id:"perPage","onUpdate:modelValue":e[15]||(e[15]=t=>ae.value=t),onChange:Ce,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[60]||(e[60]=[a("option",{value:"10"},"10",-1),a("option",{value:"25"},"25",-1),a("option",{value:"50"},"50",-1),a("option",{value:"100"},"100",-1)]),544),[[z,ae.value]])]),a("div",Vt,[(i(!0),m($,null,E(p.delays.links,t=>(i(),F(g,{key:t.label,onClick:r=>ke(t.url),disabled:!t.url,variant:"ghost",size:"sm",class:G(["mx-1",{"bg-primary/10 text-primary border-primary":t.active}])},{default:n(()=>[a("span",{innerHTML:t.label},null,8,Ut)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):N("",!0)]),_:1})]),_:1}),l(o(Z),{open:Y.value,"onUpdate:open":e[17]||(e[17]=t=>Y.value=t)},{default:n(()=>[l(o(h),{class:"sm:max-w-2xl"},{default:n(()=>[l(o(ee),null,{default:n(()=>[l(o(te),null,{default:n(()=>[s(C(W.value?"Edit":"Add")+" Delay",1)]),_:1}),l(o(le),null,{default:n(()=>[s(" Fill in the details to "+C(W.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),l(tt,{delay:W.value,"delay-codes":ce.value,tenants:p.tenants,"is-super-admin":p.isSuperAdmin,"tenant-slug":p.tenantSlug,onClose:e[16]||(e[16]=t=>Y.value=!1)},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),l(o(Z),{open:f.value,"onUpdate:open":e[21]||(e[21]=t=>f.value=t)},{default:n(()=>[l(o(h),{class:"sm:max-w-lg"},{default:n(()=>[l(o(ee),null,{default:n(()=>[l(o(te),null,{default:n(()=>e[61]||(e[61]=[s("Manage Delay Codes")])),_:1}),l(o(le),null,{default:n(()=>e[62]||(e[62]=[s(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),a("div",Tt,[a("div",zt,[e[64]||(e[64]=a("h3",{class:"text-sm font-medium"},"Current Delay Codes",-1)),l(g,{onClick:Se,size:"sm",variant:"outline"},{default:n(()=>[l(V,{name:"plus",class:"mr-2 h-4 w-4"}),e[63]||(e[63]=s(" Add New Code "))]),_:1})]),a("div",Mt,[!p.delay_codes||p.delay_codes.length===0?(i(),m("div",jt," No delay codes found ")):(i(),m("div",Pt,[(i(!0),m($,null,E(p.delay_codes,t=>(i(),m("div",{key:t.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[a("div",{class:"flex-1 cursor-pointer",onClick:r=>De(t)},[a("div",Et,[s(C(t.code)+" ",1),t.deleted_at?(i(),m("span",Lt,"(Deleted)")):N("",!0)]),t.description?(i(),m("div",Rt,C(t.description),1)):N("",!0)],8,Bt),a("div",It,[p.isSuperAdmin?(i(),m($,{key:0},[t.deleted_at?(i(),m($,{key:0},[l(g,{onClick:r=>Ne(t.id),size:"sm",variant:"outline"},{default:n(()=>[l(V,{name:"refresh",class:"mr-2 h-4 w-4"}),e[65]||(e[65]=s(" Restore "))]),_:2},1032,["onClick"]),l(g,{onClick:r=>Fe(t.id),size:"sm",variant:"destructive"},{default:n(()=>[l(V,{name:"trash",class:"mr-2 h-4 w-4"}),e[66]||(e[66]=s(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(i(),F(g,{key:1,onClick:r=>pe(t.id),size:"sm",variant:"destructive"},{default:n(()=>[l(V,{name:"trash",class:"mr-2 h-4 w-4"}),e[67]||(e[67]=s(" Delete "))]),_:2},1032,["onClick"]))],64)):(i(),F(g,{key:1,onClick:r=>pe(t.id),size:"sm",variant:"destructive"},{default:n(()=>[l(V,{name:"trash",class:"mr-2 h-4 w-4"}),e[68]||(e[68]=s(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))]),T.value?(i(),m("div",Ot,[a("h3",Yt,C(w.value?"Edit":"Add")+" Delay Code",1),a("div",Wt,[a("div",null,[l(o(S),{for:"code"},{default:n(()=>e[69]||(e[69]=[s("Code")])),_:1}),l(o(O),{id:"code",modelValue:y.value.code,"onUpdate:modelValue":e[18]||(e[18]=t=>y.value.code=t),placeholder:"Enter code"},null,8,["modelValue"])]),a("div",null,[l(o(S),{for:"description"},{default:n(()=>e[70]||(e[70]=[s("Description")])),_:1}),l(o(O),{id:"description",modelValue:y.value.description,"onUpdate:modelValue":e[19]||(e[19]=t=>y.value.description=t),placeholder:"Enter description"},null,8,["modelValue"])]),a("div",qt,[l(g,{onClick:we,variant:"ghost",size:"sm"},{default:n(()=>e[71]||(e[71]=[s("Cancel")])),_:1}),l(g,{onClick:Ae,variant:"default",size:"sm"},{default:n(()=>e[72]||(e[72]=[s("Save")])),_:1})])])])):N("",!0)]),l(o(se),{class:"mt-6"},{default:n(()=>[l(g,{onClick:e[20]||(e[20]=t=>f.value=!1),variant:"outline"},{default:n(()=>e[73]||(e[73]=[s("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(o(Z),{open:u.value,"onUpdate:open":e[24]||(e[24]=t=>u.value=t)},{default:n(()=>[l(o(h),null,{default:n(()=>[l(o(ee),null,{default:n(()=>[l(o(te),null,{default:n(()=>e[74]||(e[74]=[s("Confirm Deletion")])),_:1}),l(o(le),null,{default:n(()=>e[75]||(e[75]=[s(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),l(o(se),{class:"mt-4"},{default:n(()=>[l(g,{type:"button",onClick:e[22]||(e[22]=t=>u.value=!1),variant:"outline"},{default:n(()=>e[76]||(e[76]=[s(" Cancel ")])),_:1}),l(g,{type:"button",onClick:e[23]||(e[23]=t=>$e(c.value)),variant:"destructive"},{default:n(()=>e[77]||(e[77]=[s(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(o(Z),{open:M.value,"onUpdate:open":e[27]||(e[27]=t=>M.value=t)},{default:n(()=>[l(o(h),null,{default:n(()=>[l(o(ee),null,{default:n(()=>[l(o(te),null,{default:n(()=>e[78]||(e[78]=[s("Confirm Deletion")])),_:1}),l(o(le),null,{default:n(()=>e[79]||(e[79]=[s(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),l(o(se),{class:"mt-4"},{default:n(()=>[l(g,{type:"button",onClick:e[25]||(e[25]=t=>M.value=!1),variant:"outline"},{default:n(()=>e[80]||(e[80]=[s(" Cancel ")])),_:1}),l(g,{type:"button",onClick:e[26]||(e[26]=t=>Ve(J.value)),variant:"destructive"},{default:n(()=>e[81]||(e[81]=[s(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(o(Z),{open:j.value,"onUpdate:open":e[30]||(e[30]=t=>j.value=t)},{default:n(()=>[l(o(h),null,{default:n(()=>[l(o(ee),null,{default:n(()=>[l(o(te),null,{default:n(()=>e[82]||(e[82]=[s("Confirm Bulk Deletion")])),_:1}),l(o(le),null,{default:n(()=>[s(" Are you sure you want to delete "+C(D.value.length)+" delay records? This action cannot be undone. ",1)]),_:1})]),_:1}),l(o(se),{class:"mt-4"},{default:n(()=>[l(g,{type:"button",onClick:e[28]||(e[28]=t=>j.value=!1),variant:"outline"},{default:n(()=>e[83]||(e[83]=[s(" Cancel ")])),_:1}),l(g,{type:"button",onClick:e[29]||(e[29]=t=>Me()),variant:"destructive"},{default:n(()=>e[84]||(e[84]=[s(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{fl as default};
