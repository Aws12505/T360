import{z as re,b as oe,E as le,W as E,m as ie}from"./vendor-vue-lpVd98mV.js";import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-CDpx8XVe.js";import{_ as ce}from"./Icon.vue_vue_type_script_setup_true_lang-CqPbUTEp.js";import{_ as F}from"./Badge.vue_vue_type_script_setup_true_lang-B3OKYqPu.js";import{J as R,B as P,a7 as y,N as f,a9 as T,aa as j,an as e,af as o,aM as M,L as N,I as d,aP as ue,aJ as X,O as v,a6 as C,a1 as m,ae as x,A as $,aQ as me,av as L,P as fe,aG as ee,a0 as ge}from"./vendor-o5Di5AwF.js";import{a as ae,b as q,c as O,d as se,_ as ne,e as W}from"./TableRow.vue_vue_type_script_setup_true_lang-CE4Mx9a0.js";import{_ as z}from"./Button.vue_vue_type_script_setup_true_lang-C_P0SGkH.js";import{c as ve}from"./utils-DRqSx_Qq.js";import{_ as be}from"./Card.vue_vue_type_script_setup_true_lang-DdlXYqAi.js";import{_ as ye}from"./CardContent.vue_vue_type_script_setup_true_lang-DsCNBkRU.js";import{_ as _e,a as pe}from"./CardTitle.vue_vue_type_script_setup_true_lang-JClUbsjK.js";import"./vendor-axios-t--hEgTQ.js";import"./vendor-lodash-BO1Uc7XX.js";import"./vendor-ui-PRc3Y1Vx.js";import"./app-g_XNfKTD.js";import"./vendor-d3-DIcH9R7C.js";import"./vendor-icons-dv3bzpsi.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bp9Mlgp1.js";const xe={class:"flex border-b mb-6"},we=["onClick"],he=R({__name:"TabsHeader",emits:["tab-change"],setup(t,{expose:n,emit:g}){const p=[{id:"on-time",label:"On-Time"},{id:"acceptance",label:"Acceptance"},{id:"safety",label:"Safety"},{id:"maintenance",label:"Maintenance"}],u=P("on-time"),l=g,c=s=>{u.value=s,l("tab-change",s)};return n({activeTab:u}),(s,a)=>(f(),y("div",xe,[(f(),y(T,null,j(p,_=>e("button",{key:_.id,onClick:()=>c(_.id),class:M(["px-4 py-2 font-medium text-sm transition-colors",[u.value===_.id?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"]])},o(_.label),11,we)),64))]))}}),ke=R({__name:"ChartSingleTooltip",props:{selector:{},index:{},items:{},valueFormatter:{type:Function},customTooltip:{}},setup(t){const n=t,g=new WeakMap;function p(u,l,c){const s=n.valueFormatter??(a=>`${a}`);if(n.index in u){if(g.has(u))return g.get(u);{const a=document.createElement("div"),_=Object.entries(ue(u,[n.index])).map(([D,r])=>{var S;return{...(S=n.items)==null?void 0:S.find(k=>k.name===D),value:s(r)}}),b=n.customTooltip??te;return X(b,{title:u[n.index],data:_}).mount(a),g.set(u,a.innerHTML),a.innerHTML}}else{const a=u.data;if(g.has(a))return g.get(a);{const _=getComputedStyle(c[l]),b=[{name:a.name,value:s(a[n.index]),color:_.fill}],D=document.createElement("div"),r=n.customTooltip??te;return X(r,{title:u[n.index],data:b}).mount(D),g.set(u,D.innerHTML),D.innerHTML}}}return(u,l)=>(f(),N(d(re),{"horizontal-shift":20,"vertical-shift":20,triggers:{[u.selector]:p}},null,8,["triggers"]))}}),De={class:"flex items-center"},$e={class:"w-2.5 h-2.5 mr-2"},Se={width:"100%",height:"100%",viewBox:"0 0 30 30"},Te=["stroke","fill"],je={class:"font-semibold ml-4"},te=R({__name:"ChartTooltip",props:{title:{},data:{}},setup(t){return(n,g)=>(f(),N(d(be),{class:"text-sm"},{default:v(()=>[n.title?(f(),N(d(_e),{key:0,class:"p-3 border-b"},{default:v(()=>[m(d(pe),null,{default:v(()=>[x(o(n.title),1)]),_:1})]),_:1})):C("",!0),m(d(ye),{class:"p-3 min-w-[180px] flex flex-col gap-1"},{default:v(()=>[(f(!0),y(T,null,j(n.data,(p,u)=>(f(),y("div",{key:u,class:"flex justify-between"},[e("div",De,[e("span",$e,[(f(),y("svg",Se,[e("path",{d:" M 15 15 m -14, 0 a 14,14 0 1,1 28,0 a 14,14 0 1,1 -28,0",stroke:p.color,fill:p.color,"stroke-width":"1"},null,8,Te)]))]),e("span",null,o(p.name),1)]),e("span",je,o(p.value),1)]))),128))]),_:1})]),_:1}))}});function Be(t=3){const n=Math.floor(t/2),g=t%2,p=n+g,u=n;return[...Array.from(new Array(p).keys()).map(l=>`hsl(var(--vis-primary-color) / ${1-1/p*l})`),...Array.from(new Array(u).keys()).map(l=>`hsl(var(--vis-secondary-color) / ${1-1/u*l})`)]}const G=R({__name:"DonutChart",props:{data:{},colors:{},index:{},margin:{default:()=>({top:0,bottom:0,left:0,right:0})},showLegend:{type:Boolean,default:!0},showTooltip:{type:Boolean,default:!0},filterOpacity:{default:.2},category:{},type:{default:"donut"},sortFunction:{type:Function,default:()=>{}},valueFormatter:{},customTooltip:{}},setup(t){const n=t,g=n.valueFormatter??(b=>`${b}`),p=$(()=>n.category),u=$(()=>n.index),l=me(),c=P(),s=$(()=>{var b;return(b=n.colors)!=null&&b.length?n.colors:Be(n.data.filter(D=>D[n.category]).filter(Boolean).length)}),a=$(()=>n.data.map((b,D)=>({name:b[n.index],color:s.value[D],inactive:!1}))),_=$(()=>n.data.reduce((b,D)=>b+D[n.category],0));return(b,D)=>(f(),y("div",{class:M(d(ve)("w-full h-48 flex flex-col items-end",b.$attrs.class??""))},[m(d(oe),{style:L({height:d(l)?"100%":"auto"}),margin:{left:20,right:20},data:b.data},{default:v(()=>[m(d(ke),{selector:d(ee).selectors.segment,index:p.value,items:a.value,"value-formatter":d(g),"custom-tooltip":b.customTooltip},null,8,["selector","index","items","value-formatter","custom-tooltip"]),m(d(le),{value:r=>r[p.value],"sort-function":b.sortFunction,color:s.value,"arc-width":b.type==="donut"?20:0,"show-background":!1,"central-label":b.type==="donut"?d(g)(_.value):"",events:{[d(ee).selectors.segment]:{click:(r,i,S,k)=>{var w,h;((w=r==null?void 0:r.data)==null?void 0:w[u.value])===c.value?(c.value=void 0,k.forEach(B=>B.style.opacity="1")):(c.value=(h=r==null?void 0:r.data)==null?void 0:h[u.value],k.forEach(B=>B.style.opacity=`${b.filterOpacity}`),k[S].style.opacity="1")}}}},null,8,["value","sort-function","color","arc-width","central-label","events"]),fe(b.$slots,"default")]),_:3},8,["style","data"])],2))}}),Ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Re={class:"bg-card rounded-lg border shadow-sm"},Ne={class:"p-4"},Fe={class:"mt-4 text-right"},Me={class:"bg-card rounded-lg border shadow-sm"},Ae={class:"p-4 flex flex-col items-center"},Oe={class:"mt-6 w-full grid grid-cols-2 gap-4"},We={class:"text-sm"},Ve=R({__name:"OnTimeContent",props:{delayBreakdownsByDriver:{type:Array,default:()=>[]},delayBreakdownsByCode:{type:Array,default:()=>[]},tenantSlug:{type:String,required:!0}},setup(t){const n=t,g=$(()=>[...n.delayBreakdownsByDriver].sort((c,s)=>s.total_delays-c.total_delays).slice(0,5)),p=()=>{E.visit(route("ontime.index",{tenantSlug:n.tenantSlug}))},u=$(()=>{const c=[...n.delayBreakdownsByCode].sort((a,_)=>_.total_delays-a.total_delays).slice(0,4),s=c.reduce((a,_)=>a+_.total_delays,0);return c.map(a=>({label:a.code||"Unknown",value:s>0?Math.round(a.total_delays/s*100):0}))}),l=["#1e40af","#3b82f6","#60a5fa","#93c5fd"];return(c,s)=>(f(),y("div",Ce,[e("div",Re,[s[5]||(s[5]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Total delays by driver")],-1)),e("div",Ne,[m(d(ne),null,{default:v(()=>[m(d(ae),null,{default:v(()=>[m(d(q),null,{default:v(()=>[m(d(O),null,{default:v(()=>s[0]||(s[0]=[x("Driver Name")])),_:1}),m(d(O),null,{default:v(()=>s[1]||(s[1]=[x("Origin Delays")])),_:1}),m(d(O),null,{default:v(()=>s[2]||(s[2]=[x("Destination Delays")])),_:1}),m(d(O),null,{default:v(()=>s[3]||(s[3]=[x("Total")])),_:1})]),_:1})]),_:1}),m(d(se),null,{default:v(()=>[(f(!0),y(T,null,j(g.value,(a,_)=>(f(),N(d(q),{key:_},{default:v(()=>[m(d(W),null,{default:v(()=>[x(o(a.driver_name||"Unknown"),1)]),_:2},1024),m(d(W),null,{default:v(()=>[x(o(a.total_origin_delays),1)]),_:2},1024),m(d(W),null,{default:v(()=>[x(o(a.total_destination_delays),1)]),_:2},1024),m(d(W),null,{default:v(()=>[x(o(a.total_delays),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e("div",Fe,[m(d(z),{variant:"link",size:"sm",class:"text-primary",onClick:p},{default:v(()=>s[4]||(s[4]=[x(" See details... ")])),_:1})])])]),e("div",Me,[s[6]||(s[6]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Delays By Reason")],-1)),e("div",Ae,[m(d(G),{category:"value",data:u.value,colors:l,index:"label",showTooltip:!0,tooltipTemplate:a=>`${a.label}: ${a.value}%`,class:"max-w-[500px]"},null,8,["data","tooltipTemplate"]),e("div",Oe,[(f(!0),y(T,null,j(u.value,(a,_)=>(f(),y("div",{key:_,class:"flex items-center"},[e("div",{class:"w-3 h-3 rounded-full mr-2",style:L({backgroundColor:l[_]})},null,4),e("span",We,o(a.label)+": "+o(a.value)+"%",1)]))),128))])])])]))}}),Pe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ee={class:"bg-card rounded-lg border shadow-sm"},qe={class:"p-4"},Le={class:"mt-4 text-right"},ze={class:"bg-card rounded-lg border shadow-sm"},Ge={class:"p-4 flex flex-col items-center"},He={class:"mt-6 w-full grid grid-cols-2 gap-4"},Ie={class:"text-sm"},Ue=R({__name:"AcceptanceContent",props:{rejectionBreakdownsByDriver:{type:Array,default:()=>[]},rejectionBreakdownsByReason:{type:Array,default:()=>[]},tenantSlug:{type:String,required:!0}},setup(t){const n=t,g=$(()=>[...n.rejectionBreakdownsByDriver].sort((c,s)=>s.total_rejections-c.total_rejections).slice(0,5)),p=()=>{E.visit(route("acceptance.index",{tenantSlug:n.tenantSlug}))},u=$(()=>{const c=[...n.rejectionBreakdownsByReason].sort((a,_)=>_.total_rejections-a.total_rejections).slice(0,4),s=c.reduce((a,_)=>a+_.total_rejections,0);return c.map(a=>({label:a.reason_code||"Unknown",value:s>0?Math.round(a.total_rejections/s*100):0}))}),l=["#1e40af","#3b82f6","#60a5fa","#93c5fd"];return(c,s)=>(f(),y("div",Pe,[e("div",Ee,[s[5]||(s[5]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Total rejections by driver")],-1)),e("div",qe,[m(d(ne),null,{default:v(()=>[m(d(ae),null,{default:v(()=>[m(d(q),null,{default:v(()=>[m(d(O),null,{default:v(()=>s[0]||(s[0]=[x("Driver Name")])),_:1}),m(d(O),null,{default:v(()=>s[1]||(s[1]=[x("Load rejections")])),_:1}),m(d(O),null,{default:v(()=>s[2]||(s[2]=[x("Block rejections")])),_:1}),m(d(O),null,{default:v(()=>s[3]||(s[3]=[x("Penalty")])),_:1})]),_:1})]),_:1}),m(d(se),null,{default:v(()=>[(f(!0),y(T,null,j(g.value,(a,_)=>(f(),N(d(q),{key:_},{default:v(()=>[m(d(W),null,{default:v(()=>[x(o(a.driver_name||"Unknown"),1)]),_:2},1024),m(d(W),null,{default:v(()=>[x(o(a.total_load_rejections),1)]),_:2},1024),m(d(W),null,{default:v(()=>[x(o(a.total_block_rejections),1)]),_:2},1024),m(d(W),null,{default:v(()=>[x(o(a.total_penalty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e("div",Le,[m(d(z),{variant:"link",size:"sm",class:"text-primary",onClick:p},{default:v(()=>s[4]||(s[4]=[x(" See details... ")])),_:1})])])]),e("div",ze,[s[6]||(s[6]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Rejections by Reason")],-1)),e("div",Ge,[m(d(G),{data:u.value,colors:l,index:"label",category:"value",showTooltip:!0,tooltipTemplate:a=>`${a.label}: ${a.value}%`},null,8,["data","tooltipTemplate"]),e("div",He,[(f(!0),y(T,null,j(u.value,(a,_)=>(f(),y("div",{key:_,class:"flex items-center"},[e("div",{class:"w-3 h-3 rounded-full mr-2",style:L({backgroundColor:l[_]})},null,4),e("span",Ie,o(a.label)+": "+o(a.value)+"%",1)]))),128))])])])]))}}),Qe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ke={class:"bg-card rounded-lg border shadow-sm"},Je={class:"p-4"},Ye={class:"space-y-3"},Ze={key:0,class:"text-center text-muted-foreground"},Xe={class:"mt-4 text-right"},et={class:"bg-card rounded-lg border shadow-sm"},tt={class:"p-4"},at={class:"space-y-3"},st={key:0,class:"text-center text-muted-foreground"},nt={class:"bg-card rounded-lg border shadow-sm"},rt={class:"p-4 flex flex-col items-center"},ot={class:"mt-6 w-full space-y-2"},lt={class:"flex items-center"},it={class:"text-sm"},dt={class:"text-sm font-medium"},ct=R({__name:"SafetyContent",props:{safetyData:{type:Object,default:()=>({})},tenantSlug:{type:String,required:!0}},setup(t){const n=t,g=()=>{E.visit(route("safety.index",{tenantSlug:n.tenantSlug}))},p=$(()=>{const l=(n.safetyData.traffic_light_violation||0)+(n.safetyData.speeding_violations||0)+(n.safetyData.following_distance||0)+(n.safetyData.driver_distraction||0)+(n.safetyData.sign_violations||0);return l===0?[{label:"No Data",value:100}]:[{label:"Speeding Violations",value:l>0?Math.round((n.safetyData.speeding_violations||0)/l*100*10)/10:0},{label:"Traffic Light Violation",value:l>0?Math.round((n.safetyData.traffic_light_violation||0)/l*100*10)/10:0},{label:"Following Distance",value:l>0?Math.round((n.safetyData.following_distance||0)/l*100*10)/10:0},{label:"Driver Distraction",value:l>0?Math.round((n.safetyData.driver_distraction||0)/l*100*10)/10:0},{label:"Sign Violations",value:l>0?Math.round((n.safetyData.sign_violations||0)/l*100*10)/10:0}].filter(c=>c.value>0)}),u=["#1e40af","#3b82f6","#60a5fa","#93c5fd","#bfdbfe"];return(l,c)=>(f(),y("div",Qe,[e("div",Ke,[c[1]||(c[1]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Top 5 Drivers")],-1)),e("div",Je,[e("ul",Ye,[(f(!0),y(T,null,j(t.safetyData.top_drivers||[],(s,a)=>(f(),y("li",{key:a,class:"flex justify-between items-center"},[e("span",null,o(s.name),1),m(d(F),{variant:"outline"},{default:v(()=>[x(o(s.score),1)]),_:2},1024)]))),128)),(t.safetyData.top_drivers||[]).length===0?(f(),y("li",Ze," No data available ")):C("",!0)]),e("div",Xe,[m(d(z),{variant:"link",size:"sm",class:"text-primary",onClick:g},{default:v(()=>c[0]||(c[0]=[x(" See details... ")])),_:1})])])]),e("div",et,[c[2]||(c[2]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Bottom 5 Drivers")],-1)),e("div",tt,[e("ul",at,[(f(!0),y(T,null,j(t.safetyData.bottom_drivers||[],(s,a)=>(f(),y("li",{key:a,class:"flex justify-between items-center"},[e("span",null,o(s.name),1),m(d(F),{variant:"outline"},{default:v(()=>[x(o(s.score),1)]),_:2},1024)]))),128)),(t.safetyData.bottom_drivers||[]).length===0?(f(),y("li",st," No data available ")):C("",!0)])])]),e("div",nt,[c[3]||(c[3]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Safety Summary")],-1)),e("div",rt,[m(d(G),{category:"value",data:p.value,colors:u,index:"label",showTooltip:!0,tooltipTemplate:s=>`${s.label}: ${s.value}%`,class:"max-w-[200px]"},null,8,["data","tooltipTemplate"]),e("div",ot,[(f(!0),y(T,null,j(p.value,(s,a)=>(f(),y("div",{key:a,class:"flex items-center justify-between"},[e("div",lt,[e("div",{class:"w-3 h-3 rounded-full mr-2",style:L({backgroundColor:u[a]})},null,4),e("span",it,o(s.label),1)]),e("span",dt,o(s.value)+"%",1)]))),128))])])])]))}}),ut={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},mt={class:"bg-card rounded-lg border shadow-sm"},ft={class:"p-4"},gt={class:"space-y-4"},vt={class:"flex justify-between items-center"},bt={class:"font-medium"},yt={class:"flex justify-between items-center"},_t={class:"font-medium"},pt={class:"flex justify-between items-center"},xt={class:"font-medium"},wt={class:"flex justify-between items-center"},ht={class:"font-medium"},kt={class:"flex justify-between items-center"},Dt={class:"font-medium"},$t={class:"flex justify-between items-center"},St={class:"font-medium"},Tt={class:"flex justify-between items-center"},jt={class:"font-medium"},Bt={class:"mt-4 text-right"},Ct={class:"bg-card rounded-lg border shadow-sm"},Rt={class:"p-4"},Nt={class:"space-y-3"},Ft={class:"text-sm"},Mt={key:0,class:"text-center text-muted-foreground"},At={class:"bg-card rounded-lg border shadow-sm"},Ot={class:"p-4"},Wt={class:"space-y-3"},Vt={class:"text-sm"},Pt={key:0,class:"text-center text-muted-foreground"},Et=R({__name:"MaintenanceContent",props:{maintenanceData:{type:Object,default:()=>({})},tenantSlug:{type:String,required:!0}},setup(t){const n=t,g=()=>{E.visit(route("repair_orders.index",{tenantSlug:n.tenantSlug}))},p=$(()=>(n.maintenanceData.areas_of_concern||[]).slice(0,5)),u=$(()=>(n.maintenanceData.work_orders_by_truck||[]).slice(0,5)),l=(s,a=2)=>s==null?"0.00":Number(s).toFixed(a),c=(s,a=0)=>s==null?"0":Number(s).toLocaleString("en-US",{minimumFractionDigits:a,maximumFractionDigits:a});return(s,a)=>(f(),y("div",ut,[e("div",mt,[a[8]||(a[8]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Maintenance Overview")],-1)),e("div",ft,[e("div",gt,[e("div",vt,[a[0]||(a[0]=e("span",{class:"text-sm text-muted-foreground"},"Total Repair Orders:",-1)),e("span",bt,o(t.maintenanceData.total_repair_orders||0),1)]),e("div",yt,[a[1]||(a[1]=e("span",{class:"text-sm text-muted-foreground"},"Total Invoice Amount:",-1)),e("span",_t,"$"+o(l(t.maintenanceData.total_invoice_amount)),1)]),e("div",pt,[a[2]||(a[2]=e("span",{class:"text-sm text-muted-foreground"},"QS Invoice Amount:",-1)),e("span",xt,"$"+o(l(t.maintenanceData.qs_invoice_amount)),1)]),e("div",wt,[a[3]||(a[3]=e("span",{class:"text-sm text-muted-foreground"},"Total Miles:",-1)),e("span",ht,o(c(t.maintenanceData.total_miles)),1)]),e("div",kt,[a[4]||(a[4]=e("span",{class:"text-sm text-muted-foreground"},"Cost Per Mile (CPM):",-1)),e("span",Dt,"$"+o(l(t.maintenanceData.cpm,3)),1)]),e("div",$t,[a[5]||(a[5]=e("span",{class:"text-sm text-muted-foreground"},"QS CPM:",-1)),e("span",St,"$"+o(l(t.maintenanceData.qs_cpm,3)),1)]),e("div",Tt,[a[6]||(a[6]=e("span",{class:"text-sm text-muted-foreground"},"QS MVtS:",-1)),e("span",jt,o(c(t.maintenanceData.qs_MVtS,2)),1)])]),e("div",Bt,[m(d(z),{variant:"link",size:"sm",class:"text-primary",onClick:g},{default:v(()=>a[7]||(a[7]=[x(" See details... ")])),_:1})])])]),e("div",Ct,[a[9]||(a[9]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Areas of Concern")],-1)),e("div",Rt,[e("ul",Nt,[(f(!0),y(T,null,j(p.value,(_,b)=>(f(),y("li",{key:b,class:"flex justify-between items-center"},[e("span",Ft,o(_.concern),1),m(d(F),{variant:"outline"},{default:v(()=>[x(o(_.count),1)]),_:2},1024)]))),128)),p.value.length===0?(f(),y("li",Mt," No data available ")):C("",!0)])])]),e("div",At,[a[10]||(a[10]=e("div",{class:"p-4 border-b"},[e("h3",{class:"text-lg font-semibold"},"Top Trucks by Work Orders")],-1)),e("div",Ot,[e("ul",Wt,[(f(!0),y(T,null,j(u.value,(_,b)=>(f(),y("li",{key:b,class:"flex justify-between items-center"},[e("span",Vt,"Truck #"+o(_.truckid),1),m(d(F),{variant:"outline"},{default:v(()=>[x(o(_.work_order_count),1)]),_:2},1024)]))),128)),u.value.length===0?(f(),y("li",Pt," No data available ")):C("",!0)])])])]))}}),qt={class:"mb-6"},Lt=R({__name:"DashboardHeader",props:{operationalExcellenceScore:{type:String,default:"Not Available"}},setup(t){const n=t,g=$(()=>{switch(n.operationalExcellenceScore){case"Fantastic +":return"text-green-600";case"Fantastic":return"text-emerald-600";case"Good":return"text-blue-600";case"Fair":return"text-amber-600";case"Poor":return"text-red-600";default:return"text-gray-600"}});return(p,u)=>(f(),y("div",qt,[e("h2",{class:M(["text-4xl font-bold tracking-tight",[g.value,"transition-colors duration-300"]])},o(t.operationalExcellenceScore),3)]))}}),zt={class:"mb-6"},Gt={class:"border-b"},Ht={class:"flex -mb-px space-x-8"},It=["onClick"],Ut={key:0,class:"mt-2 text-sm text-muted-foreground"},Qt={key:0,class:"ml-1"},Kt=R({__name:"TimePeriodTabs",props:{dateRangeText:{type:String,default:""},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},activeTabId:{type:String,default:"yesterday"}},emits:["tab-change"],setup(t,{emit:n}){const g=t,p=[{id:"yesterday",label:"Yesterday"},{id:"current-week",label:"Current Week"},{id:"t6w",label:"T6W Scores"},{id:"quarterly",label:"Quarterly Scores"}],u=P(g.activeTabId),l=n,c=$(()=>(u.value==="yesterday"||u.value==="current-week")&&g.weekNumber&&g.year?`Week ${g.weekNumber}, ${g.year}`:(u.value==="t6w"||u.value==="quarterly")&&g.startWeekNumber&&g.endWeekNumber&&g.year?`Weeks ${g.startWeekNumber}-${g.endWeekNumber}, ${g.year}`:""),s=a=>{u.value=a,l("tab-change",a)};return ge(()=>{l("tab-change",u.value)}),(a,_)=>(f(),y("div",zt,[e("div",Gt,[e("div",Ht,[(f(),y(T,null,j(p,b=>e("button",{key:b.id,onClick:D=>s(b.id),class:M(["py-2 px-1 border-b-2 text-sm font-medium transition-colors",u.value===b.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},o(b.label),11,It)),64))])]),t.dateRangeText?(f(),y("div",Ut,[e("span",null,o(t.dateRangeText),1),c.value?(f(),y("span",Qt,"("+o(c.value)+")",1)):C("",!0)])):C("",!0)]))}}),Jt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-6"},Yt={class:"bg-card rounded-lg border shadow-sm p-4"},Zt={class:"flex items-center justify-between gap-3 mb-4"},Xt={class:"space-y-2 text-sm max-h-40 overflow-y-auto"},ea={class:"bg-card rounded-lg border shadow-sm p-4"},ta={class:"flex items-center justify-between gap-3 mb-4"},aa={class:"space-y-2 text-sm max-h-40 overflow-y-auto"},sa={class:"bg-card rounded-lg border shadow-sm p-4"},na={class:"flex items-center justify-between gap-3 mb-4"},ra={class:"text-sm mb-2 space-y-2"},oa={class:"flex justify-between"},la={class:"flex justify-between"},ia={class:"flex justify-between"},da={class:"flex justify-between"},ca={class:"bg-card rounded-lg border shadow-sm p-4"},ua={class:"flex items-center justify-between gap-3 mb-4"},ma={class:"text-4xl font-bold text-indigo-600"},fa={class:"space-y-2 text-sm"},ga={class:"flex justify-between items-center"},va={class:"flex items-center gap-2"},ba={class:"w-12 text-right"},ya={class:"w-16 text-right"},_a={class:"flex justify-between items-center"},pa={class:"flex items-center gap-2"},xa={class:"w-12 text-right"},wa={class:"w-16 text-right"},ha={class:"flex justify-between items-center"},ka={class:"flex items-center gap-2"},Da={class:"w-12 text-right"},$a={class:"w-16 text-right"},Sa={class:"flex justify-between items-center"},Ta={class:"flex items-center gap-2"},ja={class:"w-12 text-right"},Ba={class:"w-16 text-right"},Ca={class:"flex justify-between items-center"},Ra={class:"flex items-center gap-2"},Na={class:"w-12 text-right"},Fa={class:"w-16 text-right"},Ma={class:"text-sm text-muted-foreground mt-3"},Aa=R({__name:"PerformanceCards",props:{performanceData:{type:Object,default:()=>({})},performanceRatings:{type:Object,default:()=>({})},safetyData:{type:Object,default:()=>({})},delayBreakdowns:{type:Array,default:()=>[]},rejectionBreakdowns:{type:Array,default:()=>[]},maintenanceBreakdowns:{type:Object,default:()=>({})}},setup(t){const n=t,g=$(()=>[...n.delayBreakdowns].sort((r,i)=>i.total_delays-r.total_delays).slice(0,3)),p=$(()=>[...n.rejectionBreakdowns].sort((r,i)=>i.total_rejections-r.total_rejections).slice(0,3)),u=r=>r==null?"0%":`${Math.round(parseFloat(r))}%`,l=r=>(typeof r=="string"&&(r=parseFloat(r)),r==null||isNaN(r)?"0":Math.round(r).toString()),c=r=>(typeof r=="string"&&(r=parseFloat(r)),r==null||isNaN(r)?"0.00":r.toFixed(2)),s=r=>{if(!r)return"Not Available";switch(r){case"gold":return"Gold Tier";case"silver":return"Silver Tier";case"not_eligible":return"Not Eligible";case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return r}},a=r=>{if(!r)return"outline";switch(r){case"gold":return"gold";case"silver":return"silver";case"not_eligible":return"not-eligible";case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},_=r=>r?r==="Gold Tier"?"gold":r==="Silver Tier"?"silver":r==="Not Eligible"?"not-eligible":"outline":"outline",b=$(()=>{var w;if(!((w=n.safetyData)!=null&&w.ratings))return null;const r=n.safetyData.ratings,i={gold:3,silver:2,not_eligible:1},S=["traffic_light_violation","speeding_violations","following_distance","driver_distraction","sign_violations"];let k="gold";for(const h of S)r[h]&&i[r[h]]<i[k]&&(k=r[h]);switch(k){case"gold":return"Gold Tier";case"silver":return"Silver Tier";case"not_eligible":return"Not Eligible";default:return"Not Available"}}),D=r=>{if(!r)return"text-gray-600";switch(r){case"gold":return"text-amber-600";case"silver":return"text-slate-600";case"not_eligible":return"text-red-600";case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}};return(r,i)=>{var S,k,w,h,B;return f(),y("div",Jt,[e("div",Yt,[i[0]||(i[0]=e("h3",{class:"text-base font-semibold mb-1"},"On-Time",-1)),i[1]||(i[1]=e("div",{class:"text-xs text-muted-foreground mb-1"},"Total Score",-1)),e("div",Zt,[e("div",{class:M(["text-4xl font-bold",D(t.performanceRatings.average_on_time)])},o(u(t.performanceData.average_on_time)),3),m(d(F),{variant:a(t.performanceRatings.average_on_time),class:"text-xs"},{default:v(()=>[x(o(s(t.performanceRatings.average_on_time)),1)]),_:1},8,["variant"])]),i[2]||(i[2]=e("div",{class:"text-sm mb-2 flex justify-between"},[e("span",{class:"font-semibold"},"Delays by Reason"),e("span",{class:"font-semibold"},"Total")],-1)),e("div",Xt,[(f(!0),y(T,null,j(g.value,(A,V)=>(f(),y("div",{key:V,class:"flex justify-between"},[e("span",null,o(A.code),1),e("span",null,o(A.total_delays),1)]))),128))])]),e("div",ea,[i[3]||(i[3]=e("h3",{class:"text-base font-semibold mb-1"},"Acceptance",-1)),i[4]||(i[4]=e("div",{class:"text-xs text-muted-foreground mb-1"},"Total Score",-1)),e("div",ta,[e("div",{class:M(["text-4xl font-bold",D(t.performanceRatings.average_acceptance)])},o(u(t.performanceData.average_acceptance)),3),m(d(F),{variant:a(t.performanceRatings.average_acceptance),class:"text-xs"},{default:v(()=>[x(o(s(t.performanceRatings.average_acceptance)),1)]),_:1},8,["variant"])]),i[5]||(i[5]=e("div",{class:"text-sm mb-2 flex justify-between"},[e("span",{class:"font-semibold"},"Rejections by Reason"),e("span",{class:"font-semibold"},"Total")],-1)),e("div",aa,[(f(!0),y(T,null,j(p.value,(A,V)=>(f(),y("div",{key:V,class:"flex justify-between"},[e("span",null,o(A.reason_code),1),e("span",null,o(A.total_rejections),1)]))),128))])]),e("div",sa,[i[10]||(i[10]=e("h3",{class:"text-base font-semibold mb-1"},"Maintenance",-1)),i[11]||(i[11]=e("div",{class:"text-xs text-muted-foreground mb-1"},"MVtS Score",-1)),e("div",na,[e("div",{class:M(["text-4xl font-bold",D(t.performanceRatings.average_maintenance_variance_to_spend)])},o(u(t.performanceData.average_maintenance_variance_to_spend)),3),m(d(F),{variant:a(t.performanceRatings.average_maintenance_variance_to_spend),class:"text-xs"},{default:v(()=>[x(o(s(t.performanceRatings.average_maintenance_variance_to_spend)),1)]),_:1},8,["variant"])]),e("div",ra,[e("div",oa,[i[6]||(i[6]=e("span",null,"Cost per mile",-1)),e("span",null,"$"+o(c(t.maintenanceBreakdowns.cpm)),1)]),e("div",la,[i[7]||(i[7]=e("span",null,"Num of WOs",-1)),e("span",null,o(t.maintenanceBreakdowns.total_repair_orders),1)]),e("div",ia,[i[8]||(i[8]=e("span",null,"Current Costs",-1)),e("span",null,"$"+o(c(t.maintenanceBreakdowns.total_invoice_amount)),1)]),e("div",da,[i[9]||(i[9]=e("span",null,"Missing Invoices",-1)),e("span",null,o(t.maintenanceBreakdowns.missing_invoices_count||0),1)])])]),e("div",ca,[i[17]||(i[17]=e("h3",{class:"text-base font-semibold mb-1"},"Netradyne Alerts Bonus Criteria",-1)),i[18]||(i[18]=e("div",{class:"text-xs text-muted-foreground mb-1"},"Green Zone Score",-1)),e("div",ua,[e("div",ma,o(l(t.safetyData.average_driver_score||"N/A")),1),m(d(F),{variant:_(b.value),class:"text-xs"},{default:v(()=>[x(o(s(b.value)),1)]),_:1},8,["variant"])]),i[19]||(i[19]=e("div",{class:"flex justify-between items-center text-sm font-semibold mb-2"},[e("span",null,"Alert Type"),e("div",{class:"flex items-center gap-2"},[e("span",{class:"w-12 text-right"},"Total"),e("span",{class:"w-16 text-right"},"P1KH")])],-1)),e("div",fa,[e("div",ga,[i[12]||(i[12]=e("span",null,"Distracted Driving",-1)),e("div",va,[e("span",ba,o(l(t.safetyData.driver_distraction)),1),e("span",ya,o(l((S=t.safetyData.rates)==null?void 0:S.driver_distraction)),1)])]),e("div",_a,[i[13]||(i[13]=e("span",null,"Speeding",-1)),e("div",pa,[e("span",xa,o(l(t.safetyData.speeding_violations)),1),e("span",wa,o(l((k=t.safetyData.rates)==null?void 0:k.speeding_violations)),1)])]),e("div",ha,[i[14]||(i[14]=e("span",null,"Sign Violation",-1)),e("div",ka,[e("span",Da,o(l(t.safetyData.sign_violations)),1),e("span",$a,o(l((w=t.safetyData.rates)==null?void 0:w.sign_violations)),1)])]),e("div",Sa,[i[15]||(i[15]=e("span",null,"Traffic Light Violation",-1)),e("div",Ta,[e("span",ja,o(l(t.safetyData.traffic_light_violation)),1),e("span",Ba,o(l((h=t.safetyData.rates)==null?void 0:h.traffic_light_violation)),1)])]),e("div",Ca,[i[16]||(i[16]=e("span",null,"Following Distance",-1)),e("div",Ra,[e("span",Na,o(l(t.safetyData.following_distance)),1),e("span",Fa,o(l((B=t.safetyData.rates)==null?void 0:B.following_distance)),1)])])]),e("div",Ma,[e("div",null,"Total Hours Analyzed: "+o(l(t.safetyData.total_hours||0)),1)])])])}}}),Oa={class:"bg-card rounded-lg border shadow-sm p-6 mb-6"},Wa={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Va={class:"p-4 border rounded-lg"},Pa={class:"flex items-center justify-between gap-3 mb-3"},Ea={class:"p-4 border rounded-lg"},qa={class:"flex items-center justify-between gap-3 mb-3"},La={class:"p-4 border rounded-lg"},za={class:"flex items-center justify-between gap-3 mb-3"},Ga=R({__name:"AdditionalMetricsCard",props:{performanceData:{type:Object,default:()=>({})},performanceRatings:{type:Object,default:()=>({})}},setup(t){const n=l=>l==null?"0":Math.round(parseFloat(l)).toString(),g=l=>{if(!l)return"Not Available";switch(l){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ")}},p=l=>{if(!l)return"outline";switch(l){case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},u=l=>{if(!l)return"text-gray-600";switch(l){case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}};return(l,c)=>(f(),y("div",Oa,[c[6]||(c[6]=e("h3",{class:"text-xl font-semibold mb-4"},"Additional Performance Metrics",-1)),e("div",Wa,[e("div",Va,[c[0]||(c[0]=e("h4",{class:"text-lg font-medium mb-2"},"VCR-P",-1)),c[1]||(c[1]=e("div",{class:"text-sm text-muted-foreground mb-1"},"Count",-1)),e("div",Pa,[e("div",{class:M(["text-3xl font-bold",u(t.performanceRatings.vcr_preventable)])},o(n(t.performanceData.vcr_preventable)),3),m(d(F),{variant:p(t.performanceRatings.vcr_preventable),class:"text-xs"},{default:v(()=>[x(o(g(t.performanceRatings.vcr_preventable)),1)]),_:1},8,["variant"])])]),e("div",Ea,[c[2]||(c[2]=e("h4",{class:"text-lg font-medium mb-2"},"Open BOC",-1)),c[3]||(c[3]=e("div",{class:"text-sm text-muted-foreground mb-1"},"Count",-1)),e("div",qa,[e("div",{class:M(["text-3xl font-bold",u(t.performanceRatings.open_boc)])},o(n(t.performanceData.open_boc)),3),m(d(F),{variant:p(t.performanceRatings.open_boc),class:"text-xs"},{default:v(()=>[x(o(g(t.performanceRatings.open_boc)),1)]),_:1},8,["variant"])])]),e("div",La,[c[4]||(c[4]=e("h4",{class:"text-lg font-medium mb-2"},"VMCR-P",-1)),c[5]||(c[5]=e("div",{class:"text-sm text-muted-foreground mb-1"},"Count",-1)),e("div",za,[e("div",{class:M(["text-3xl font-bold",u(t.performanceRatings.vmcr_p)])},o(n(t.performanceData.vmcr_p)),3),m(d(F),{variant:p(t.performanceRatings.vmcr_p),class:"text-xs"},{default:v(()=>[x(o(g(t.performanceRatings.vmcr_p)),1)]),_:1},8,["variant"])])])])]))}}),Ha={class:"container mx-auto p-6"},Ia={class:"flex items-center justify-between mb-6"},us=R({__name:"Summary",props:{tenantSlug:String,summaries:Object,delayBreakdowns:Object,rejectionBreakdowns:Object,maintenanceBreakdowns:Object,dateFilter:String,dateRange:Object},setup(t){const n=t,g=P("on-time"),p=P(n.dateFilter||"yesterday"),u=$(()=>{const i={yesterday:"yesterday","current-week":"current_week",t6w:"rolling_6_weeks",quarterly:"quarterly"}[p.value]||p.value;return _(i)}),l=r=>{g.value=r},c=r=>{p.value=r,E.visit(route("dashboard",{tenantSlug:n.tenantSlug,dateFilter:r}),{preserveState:!0,preserveScroll:!0,only:["summaries","delayBreakdowns","rejectionBreakdowns","maintenanceBreakdowns","dateFilter","dateRange"]})},s=[{title:n.tenantSlug?"Dashboard":"Admin Dashboard",href:n.tenantSlug?route("dashboard",{tenantSlug:n.tenantSlug}):route("admin.dashboard")},{title:"Performance Summary",href:route("dashboard",{tenantSlug:n.tenantSlug})}],a=r=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r),_=r=>{var S,k;if((k=(S=n.summaries)==null?void 0:S[r])!=null&&k.date_range){const w=new Date(n.summaries[r].date_range.start+"T12:00:00"),h=new Date(n.summaries[r].date_range.end+"T12:00:00");return`${b(w)} - ${b(h)}`}const i=new Date;switch(r){case"yesterday":{const w=new Date(i);return w.setDate(w.getDate()-1),b(w)}case"current_week":{const w=new Date(i);w.setDate(i.getDate()-i.getDay());const h=new Date(w);return h.setDate(w.getDate()+6),`${b(w)} - ${b(h)}`}case"rolling_6_weeks":{const w=new Date(i);w.setDate(i.getDate()-i.getDay()+6);const h=new Date(w);return h.setDate(w.getDate()-6*7+1),`${b(h)} - ${b(w)}`}case"quarterly":{const w=new Date(i),h=new Date(i);return h.setMonth(h.getMonth()-3),`${b(h)} - ${b(w)}`}default:return""}},b=r=>new Intl.DateTimeFormat("en-US",{month:"numeric",day:"numeric",year:"numeric"}).format(r),D=$(()=>{var w,h;if(!((h=(w=n.summaries)==null?void 0:w.performance)!=null&&h.ratings))return"Not Available";const r=n.summaries.performance.ratings,i={fantastic_plus:5,fantastic:4,good:3,fair:2,poor:1},S=["average_acceptance","average_on_time","average_maintenance_variance_to_spend","open_boc","vcr_preventable","vmcr_p"];let k="fantastic_plus";for(const B of S)r[B]&&i[r[B]]<i[k]&&(k=r[B]);switch(k){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return"Not Available"}});return(r,i)=>(f(),N(de,{breadcrumbs:s,tenantSlug:t.tenantSlug},{default:v(()=>{var S,k,w,h,B,A,V,H,I,U,Q,K,J,Y,Z;return[m(d(ie),{title:"Performance Summary Dashboard"}),e("div",Ha,[e("div",Ia,[i[0]||(i[0]=e("h1",{class:"text-2xl font-bold"},null,-1)),m(d(F),{variant:"outline",class:"text-sm"},{default:v(()=>[m(ce,{name:"calendar",class:"mr-1 h-4 w-4"}),x(" Last updated: "+o(a(new Date)),1)]),_:1})]),m(Lt,{operationalExcellenceScore:D.value},null,8,["operationalExcellenceScore"]),m(Kt,{onTabChange:c,dateRangeText:u.value,weekNumber:(S=t.dateRange)==null?void 0:S.weekNumber,startWeekNumber:(k=t.dateRange)==null?void 0:k.startWeekNumber,endWeekNumber:(w=t.dateRange)==null?void 0:w.endWeekNumber,year:(h=t.dateRange)==null?void 0:h.year,activeTabId:p.value},null,8,["dateRangeText","weekNumber","startWeekNumber","endWeekNumber","year","activeTabId"]),t.summaries?(f(),N(Aa,{key:0,performanceData:((B=t.summaries.performance)==null?void 0:B.data)||{},performanceRatings:((A=t.summaries.performance)==null?void 0:A.ratings)||{},safetyData:t.summaries.safety||{},delayBreakdowns:((V=t.delayBreakdowns)==null?void 0:V.by_code)||[],rejectionBreakdowns:((H=t.rejectionBreakdowns)==null?void 0:H.by_reason)||[],maintenanceBreakdowns:t.maintenanceBreakdowns||{}},null,8,["performanceData","performanceRatings","safetyData","delayBreakdowns","rejectionBreakdowns","maintenanceBreakdowns"])):C("",!0),t.summaries?(f(),N(Ga,{key:1,performanceData:((I=t.summaries.performance)==null?void 0:I.data)||{},performanceRatings:((U=t.summaries.performance)==null?void 0:U.ratings)||{}},null,8,["performanceData","performanceRatings"])):C("",!0),m(he,{onTabChange:l}),e("div",null,[g.value==="on-time"?(f(),N(Ve,{key:0,delayBreakdownsByDriver:((Q=t.delayBreakdowns)==null?void 0:Q.by_driver)||[],delayBreakdownsByCode:((K=t.delayBreakdowns)==null?void 0:K.by_code)||[],tenantSlug:t.tenantSlug},null,8,["delayBreakdownsByDriver","delayBreakdownsByCode","tenantSlug"])):C("",!0),g.value==="acceptance"?(f(),N(Ue,{key:1,rejectionBreakdownsByDriver:((J=t.rejectionBreakdowns)==null?void 0:J.by_driver)||[],rejectionBreakdownsByReason:((Y=t.rejectionBreakdowns)==null?void 0:Y.by_reason)||[],tenantSlug:t.tenantSlug},null,8,["rejectionBreakdownsByDriver","rejectionBreakdownsByReason","tenantSlug"])):C("",!0),g.value==="safety"?(f(),N(ct,{key:2,safetyData:((Z=t.summaries)==null?void 0:Z.safety)||{},tenantSlug:t.tenantSlug},null,8,["safetyData","tenantSlug"])):C("",!0),g.value==="maintenance"?(f(),N(Et,{key:3,maintenanceData:t.maintenanceBreakdowns||{},tenantSlug:t.tenantSlug},null,8,["maintenanceData","tenantSlug"])):C("",!0)])])]}),_:1},8,["tenantSlug"]))}});export{us as default};
