import{a7 as p,N as d,an as n,a6 as $,a9 as z,aa as M,af as k,a1 as t,L as w,O as o,ae as v,I as e,J as B,B as U,A as T,E as Q,aR as P,a8 as Y,aS as N}from"./vendor-xy97mY0-.js";import{P as fe,W as Z,C as H,m as pe}from"./vendor-vue-BRPOKWly.js";import{_ as ve}from"./AppLayout.vue_vue_type_script_setup_true_lang-BlN99Ugb.js";import{_ as A,a as R}from"./Label.vue_vue_type_script_setup_true_lang-BAsbsLwI.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-BW5qRT-D.js";import{_ as K}from"./Checkbox.vue_vue_type_script_setup_true_lang-D9r_l7BE.js";import{_ as ge,a as _e,b as be,c as ye,d as ee}from"./SelectValue.vue_vue_type_script_setup_true_lang-CvRkE8YG.js";import{_ as E}from"./InputError.vue_vue_type_script_setup_true_lang-BJZvQ1On.js";import{L as xe,S as he,U as $e,P as I,a as ke,B as we}from"./vendor-icons-CrF1H9yF.js";import{_ as W}from"./Card.vue_vue_type_script_setup_true_lang-DYwS7A8-.js";import{_ as q}from"./CardContent.vue_vue_type_script_setup_true_lang-DuDvULMo.js";import{_ as J,a as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-Wjlz8bZz.js";import{_ as Se}from"./Separator.vue_vue_type_script_setup_true_lang-DNKMpxOI.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-d3-DpcuoaSC.js";import"./vendor-axios-t--hEgTQ.js";import"./vendor-lodash-DCUXXPMP.js";import"./utils-OMMm8ro2.js";import"./vendor-ui-CqtnUFeu.js";import"./Icon.vue_vue_type_script_setup_true_lang-ChfPiT8z.js";import"./app-CzUrxAd9.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-evYd1tA8.js";const Ue={class:"rounded-md border"},Ae={class:"w-full caption-bottom text-sm"},je={class:"[&_tr:last-child]:border-0"},ze={class:"p-4 align-middle font-medium"},Le={class:"p-4 align-middle"},Ve={class:"p-4 align-middle text-right"},Me={class:"flex justify-end space-x-2"},Ee={key:0,class:"mt-6 flex justify-center"},Re={class:"flex items-center space-x-1"},De={__name:"UserList",props:{users:Object,isSuperAdmin:{type:Boolean,default:!1}},setup(f){const b=l=>{l&&Z.get(l,{},{only:["users"]})};return(l,u)=>(d(),p("div",null,[n("div",Ue,[n("table",Ae,[u[3]||(u[3]=n("thead",{class:"[&_tr]:border-b"},[n("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[n("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Name"),n("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Email"),n("th",{class:"h-12 px-4 text-right pr-16 align-middle font-medium text-muted-foreground"},"Actions")])],-1)),n("tbody",je,[(d(!0),p(z,null,M(f.users.data,s=>(d(),p("tr",{key:s.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[n("td",ze,k(s.name),1),n("td",Le,k(s.email),1),n("td",Ve,[n("div",Me,[t(e(_),{onClick:i=>l.$emit("edit",s),variant:"outline",size:"sm"},{default:o(()=>u[0]||(u[0]=[v(" Edit ")])),_:2},1032,["onClick"]),t(e(_),{onClick:i=>l.$emit("delete",s),variant:"destructive",size:"sm"},{default:o(()=>u[1]||(u[1]=[v(" Delete ")])),_:2},1032,["onClick"]),f.isSuperAdmin?(d(),w(e(fe),{key:0,href:l.route("impersonate.start",s.id),as:"button"},{default:o(()=>[t(e(_),{variant:"secondary",size:"sm"},{default:o(()=>u[2]||(u[2]=[v(" Impersonate ")])),_:1})]),_:2},1032,["href"])):$("",!0)])])]))),128))])])]),f.users.links?(d(),p("div",Ee,[n("nav",Re,[(d(!0),p(z,null,M(f.users.links,s=>(d(),w(e(_),{key:s.label,onClick:i=>b(s.url),disabled:!s.url,variant:s.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:s.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):$("",!0)]))}},Te={class:"rounded-md border"},Pe={class:"w-full caption-bottom text-sm"},Oe={class:"[&_tr:last-child]:border-0"},Be={class:"p-4 align-middle font-medium"},Ne={class:"p-4 align-middle"},He={class:"flex flex-wrap gap-1"},Xe={class:"p-4 align-middle text-right"},Fe={class:"flex justify-end space-x-2"},Ie={key:0,class:"mt-6 flex justify-center"},We={class:"flex items-center space-x-1"},qe={__name:"RoleList",props:{roles:Object},setup(f){const b=l=>{l&&Z.get(l,{},{only:["roles"]})};return(l,u)=>(d(),p("div",null,[n("div",Te,[n("table",Pe,[u[2]||(u[2]=n("thead",{class:"[&_tr]:border-b"},[n("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[n("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Role Name"),n("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Permissions"),n("th",{class:"h-12 px-4 text-right pr-16 align-middle font-medium text-muted-foreground"},"Actions")])],-1)),n("tbody",Oe,[(d(!0),p(z,null,M(f.roles.data,s=>(d(),p("tr",{key:s.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[n("td",Be,k(s.name),1),n("td",Ne,[n("div",He,[(d(!0),p(z,null,M(s.permissions,i=>(d(),p("span",{key:i.id,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground"},k(i.name),1))),128))])]),n("td",Xe,[n("div",Fe,[t(e(_),{onClick:i=>l.$emit("edit",s),variant:"outline",size:"sm"},{default:o(()=>u[0]||(u[0]=[v(" Edit ")])),_:2},1032,["onClick"]),t(e(_),{onClick:i=>l.$emit("delete",s),variant:"destructive",size:"sm"},{default:o(()=>u[1]||(u[1]=[v(" Delete ")])),_:2},1032,["onClick"])])])]))),128))])])]),f.roles.links?(d(),p("div",Ie,[n("nav",We,[(d(!0),p(z,null,M(f.roles.links,s=>(d(),w(e(_),{key:s.label,onClick:i=>b(s.url),disabled:!s.url,variant:s.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:s.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):$("",!0)]))}},Je={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},Ge={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md overflow-y-auto max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},Ke={class:"flex justify-between items-center mb-4"},Qe={class:"text-2xl font-bold text-foreground"},Ye={class:"space-y-2"},Ze={class:"space-y-2"},es={key:0,class:"space-y-2"},ss={key:1,class:"space-y-2"},ts={class:"space-y-2"},ns={class:"relative"},ls={class:"flex items-center space-x-2"},as={class:"h-40 border rounded-md p-2 overflow-y-auto"},os={class:"space-y-2"},rs={class:"relative"},is={class:"flex items-center space-x-2"},ds={class:"h-40 border rounded-md p-2 overflow-y-auto"},us={key:0,class:"ml-2 text-xs px-2 py-0.5 rounded-full border border-gray-200 bg-gray-100 dark:border-gray-700 dark:bg-gray-800 text-gray-600 dark:text-gray-300"},ms={class:"flex justify-end space-x-3 pt-4"},cs=B({__name:"UserForm",props:{user:{type:Object,default:null},tenants:{type:Array,default:()=>[]},roles:{type:Array,default:()=>[]},permissions:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close","saved"],setup(f,{emit:b}){const l=f,u=b,s=H({name:l.user?l.user.name:"",email:l.user?l.user.email:"",password:"",tenant_id:l.user?l.user.tenant_id:l.tenants.length?l.tenants[0].id:null,roles:l.user&&l.user.roles?l.user.roles.map(r=>r.id):[],user_permissions:l.user&&l.user.permissions?l.user.permissions.map(r=>r.name):[]}),i=U(""),m=U(""),g=T(()=>{if(!i.value.trim())return l.roles;const r=i.value.toLowerCase();return l.roles.filter(a=>a.name.toLowerCase().includes(r))}),C=T(()=>{if(!m.value.trim())return l.permissions;const r=m.value.toLowerCase();return l.permissions.filter(a=>a.name.toLowerCase().includes(r))}),L=T(()=>{const r=new Set;return l.roles.forEach(a=>{s.roles.includes(a.id)&&a.permissions&&a.permissions.forEach(D=>{r.add(D.name)})}),Array.from(r)});Q(()=>l.user,r=>{r?(s.name=r.name,s.email=r.email,s.tenant_id=r.tenant_id,s.roles=r.roles?r.roles.map(a=>a.id):[],s.user_permissions=r.permissions?r.permissions.map(a=>a.name):[]):(s.name="",s.email="",s.password="",s.tenant_id=l.tenants.length?l.tenants[0].id:null,s.roles=[],s.user_permissions=[])},{immediate:!0});const j=()=>{l.user?l.isSuperAdmin?s.put(route("admin.users.update",l.user),{onSuccess:()=>{u("saved")}}):s.put(route("users.update",[l.tenantSlug,l.user]),{onSuccess:()=>{u("saved")}}):l.isSuperAdmin?s.post(route("admin.users.store"),{onSuccess:()=>{u("saved")}}):s.post(route("users.store",l.tenantSlug),{onSuccess:()=>{u("saved")}})},V=r=>{const a=s.roles.indexOf(r);a===-1?s.roles.push(r):s.roles.splice(a,1)},y=r=>{if(L.value.includes(r))return;const a=s.user_permissions.indexOf(r);a===-1?s.user_permissions.push(r):s.user_permissions.splice(a,1)};return(r,a)=>{const D=P("X"),S=P("Loader2");return d(),p("div",Je,[n("div",Ge,[n("div",Ke,[n("h2",Qe,k(f.user?"Edit User":"Create User"),1),t(e(_),{variant:"ghost",size:"icon",onClick:a[0]||(a[0]=()=>u("close"))},{default:o(()=>[t(D,{class:"h-5 w-5"})]),_:1})]),n("form",{onSubmit:Y(j,["prevent"]),class:"space-y-4"},[n("div",Ye,[t(e(A),{for:"name"},{default:o(()=>a[10]||(a[10]=[v("Name")])),_:1}),t(e(R),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":a[1]||(a[1]=c=>e(s).name=c),placeholder:"Enter name",class:"w-full"},null,8,["modelValue"]),t(E,{message:e(s).errors.name},null,8,["message"])]),n("div",Ze,[t(e(A),{for:"email"},{default:o(()=>a[11]||(a[11]=[v("Email")])),_:1}),t(e(R),{id:"email",modelValue:e(s).email,"onUpdate:modelValue":a[2]||(a[2]=c=>e(s).email=c),type:"email",placeholder:"Enter email",class:"w-full"},null,8,["modelValue"]),t(E,{message:e(s).errors.email},null,8,["message"])]),f.user?$("",!0):(d(),p("div",es,[t(e(A),{for:"password"},{default:o(()=>a[12]||(a[12]=[v("Password")])),_:1}),t(e(R),{id:"password",modelValue:e(s).password,"onUpdate:modelValue":a[3]||(a[3]=c=>e(s).password=c),type:"password",placeholder:"Enter password",class:"w-full"},null,8,["modelValue"]),t(E,{message:e(s).errors.password},null,8,["message"])])),f.isSuperAdmin?(d(),p("div",ss,[t(e(A),{for:"tenant"},{default:o(()=>a[13]||(a[13]=[v("Company Name")])),_:1}),t(e(ge),{modelValue:e(s).tenant_id,"onUpdate:modelValue":a[4]||(a[4]=c=>e(s).tenant_id=c)},{default:o(()=>[t(e(_e),null,{default:o(()=>[t(e(be),{placeholder:"Select a company"})]),_:1}),t(e(ye),null,{default:o(()=>[t(e(ee),{value:null},{default:o(()=>a[14]||(a[14]=[v("None")])),_:1}),(d(!0),p(z,null,M(f.tenants,c=>(d(),w(e(ee),{value:c.id,key:c.id},{default:o(()=>[v(k(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(E,{message:e(s).errors.tenant_id},null,8,["message"])])):$("",!0),n("div",ts,[t(e(A),null,{default:o(()=>a[15]||(a[15]=[v("Roles")])),_:1}),n("div",ns,[n("div",ls,[t(e(R),{modelValue:i.value,"onUpdate:modelValue":a[5]||(a[5]=c=>i.value=c),placeholder:"Search roles...",class:"w-full"},null,8,["modelValue"]),i.value?(d(),w(e(_),{key:0,type:"button",variant:"ghost",size:"icon",onClick:a[6]||(a[6]=c=>i.value=""),class:"absolute right-2"},{default:o(()=>[t(D,{class:"h-4 w-4"})]),_:1})):$("",!0)])]),n("div",as,[(d(!0),p(z,null,M(g.value,c=>(d(),p("div",{key:c.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[t(e(K),{id:`role-${c.id}`,checked:e(s).roles.includes(c.id),"onUpdate:checked":X=>V(c.id),class:"mr-2"},null,8,["id","checked","onUpdate:checked"]),t(e(A),{for:`role-${c.id}`,class:"cursor-pointer"},{default:o(()=>[v(k(c.name),1)]),_:2},1032,["for"])]))),128))]),t(E,{message:e(s).errors.roles},null,8,["message"])]),n("div",os,[t(e(A),null,{default:o(()=>a[16]||(a[16]=[v("Permissions")])),_:1}),n("div",rs,[n("div",is,[t(e(R),{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=c=>m.value=c),placeholder:"Search permissions...",class:"w-full"},null,8,["modelValue"]),m.value?(d(),w(e(_),{key:0,type:"button",variant:"ghost",size:"icon",onClick:a[8]||(a[8]=c=>m.value=""),class:"absolute right-2"},{default:o(()=>[t(D,{class:"h-4 w-4"})]),_:1})):$("",!0)])]),n("div",ds,[(d(!0),p(z,null,M(C.value,c=>(d(),p("div",{key:c.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[t(e(K),{id:`permission-${c.name}`,checked:e(s).user_permissions.includes(c.name),"onUpdate:checked":X=>y(c.name),disabled:L.value.includes(c.name),class:"mr-2"},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(A),{for:`permission-${c.name}`,class:"cursor-pointer"},{default:o(()=>[v(k(c.name)+" ",1),L.value.includes(c.name)?(d(),p("span",us," inherited ")):$("",!0)]),_:2},1032,["for"])]))),128))]),t(E,{message:e(s).errors.user_permissions},null,8,["message"])]),n("div",ms,[t(e(_),{type:"button",onClick:a[9]||(a[9]=()=>u("close")),variant:"outline"},{default:o(()=>a[17]||(a[17]=[v(" Cancel ")])),_:1}),t(e(_),{type:"submit",disabled:e(s).processing},{default:o(()=>[e(s).processing?(d(),w(S,{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(s).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])])}}}),fs={class:"rounded-md border"},ps={class:"w-full caption-bottom text-sm"},vs={class:"[&_tr:last-child]:border-0"},gs={class:"p-4 align-middle font-medium"},_s={class:"p-4 align-middle"},bs={class:"p-4 align-middle text-right"},ys={class:"flex justify-end space-x-2"},xs={key:0,class:"mt-6 flex justify-center"},hs={class:"flex items-center space-x-1"},$s={__name:"TenantList",props:{tenants:{type:Object,default:()=>({data:[],links:[]})}},setup(f){const b=f,l=Array.isArray(b.tenants)?b.tenants:b.tenants.data||[],u=s=>{s&&Z.get(s,{},{only:["tenants"]})};return(s,i)=>(d(),p("div",null,[n("div",fs,[n("table",ps,[i[2]||(i[2]=n("thead",{class:"[&_tr]:border-b"},[n("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[n("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Company Name"),n("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Slug"),n("th",{class:"h-12 px-4 text-right pr-16 align-middle font-medium text-muted-foreground"},"Actions")])],-1)),n("tbody",vs,[(d(!0),p(z,null,M(e(l),m=>(d(),p("tr",{key:m.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[n("td",gs,k(m.name),1),n("td",_s,k(m.slug),1),n("td",bs,[n("div",ys,[t(e(_),{onClick:g=>s.$emit("edit",m),variant:"outline",size:"sm"},{default:o(()=>i[0]||(i[0]=[v(" Edit ")])),_:2},1032,["onClick"]),t(e(_),{onClick:g=>s.$emit("delete",m),variant:"destructive",size:"sm"},{default:o(()=>i[1]||(i[1]=[v(" Delete ")])),_:2},1032,["onClick"])])])]))),128))])])]),f.tenants.links?(d(),p("div",xs,[n("nav",hs,[(d(!0),p(z,null,M(f.tenants.links,m=>(d(),w(e(_),{key:m.label,onClick:g=>u(m.url),disabled:!m.url,variant:m.active?"default":"outline",size:"sm",class:"min-w-[40px]",innerHTML:m.label},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):$("",!0)]))}},ks={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},ws={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md overflow-y-auto max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},Ss={class:"flex justify-between items-center mb-4"},Cs={class:"text-2xl font-bold text-foreground"},Us={class:"space-y-2"},As={key:0,class:"space-y-2"},js={class:"flex justify-end space-x-3 pt-4"},zs=B({__name:"TenantForm",props:{tenant:{type:Object,default:null}},emits:["close","saved"],setup(f,{emit:b}){const l=f,u=b,s=H({name:l.tenant?l.tenant.name:"",slug:l.tenant?l.tenant.slug:""});Q(()=>l.tenant,m=>{m?(s.name=m.name,s.slug=m.slug):(s.name="",s.slug="")},{immediate:!0});const i=()=>{l.tenant?s.put(route("admin.tenants.update",l.tenant),{onSuccess:()=>{u("saved")}}):s.post(route("admin.tenants.store"),{onSuccess:()=>{u("saved")}})};return(m,g)=>{const C=P("X"),L=P("Loader2");return d(),p("div",ks,[n("div",ws,[n("div",Ss,[n("h2",Cs,k(f.tenant?"Edit Company":"Create Company"),1),t(e(_),{variant:"ghost",size:"icon",onClick:g[0]||(g[0]=()=>u("close"))},{default:o(()=>[t(C,{class:"h-5 w-5"})]),_:1})]),n("form",{onSubmit:Y(i,["prevent"]),class:"space-y-4"},[n("div",Us,[t(e(A),{for:"name"},{default:o(()=>g[4]||(g[4]=[v("Company Name")])),_:1}),t(e(R),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":g[1]||(g[1]=j=>e(s).name=j),placeholder:"Enter company name",class:"w-full"},null,8,["modelValue"]),t(E,{message:e(s).errors.name},null,8,["message"])]),f.tenant?(d(),p("div",As,[t(e(A),{for:"slug"},{default:o(()=>g[5]||(g[5]=[v("Slug")])),_:1}),t(e(R),{id:"slug",modelValue:e(s).slug,"onUpdate:modelValue":g[2]||(g[2]=j=>e(s).slug=j),placeholder:"Enter company slug",class:"w-full"},null,8,["modelValue"]),t(E,{message:e(s).errors.slug},null,8,["message"])])):$("",!0),n("div",js,[t(e(_),{type:"button",onClick:g[3]||(g[3]=()=>u("close")),variant:"outline"},{default:o(()=>g[6]||(g[6]=[v(" Cancel ")])),_:1}),t(e(_),{type:"submit",disabled:e(s).processing},{default:o(()=>[e(s).processing?(d(),w(L,{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(s).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])])}}}),Ls={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},Vs={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md overflow-y-auto max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},Ms={class:"flex justify-between items-center mb-4"},Es={class:"text-2xl font-bold text-foreground"},Rs={class:"space-y-2"},Ds={class:"space-y-2"},Ts={class:"relative"},Ps={class:"flex items-center space-x-2"},Os={class:"h-40 border rounded-md p-2 overflow-y-auto"},Bs={class:"flex justify-end space-x-3 pt-4"},Ns=B({__name:"RoleForm",props:{role:{type:Object,default:null},permissions:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["saved","close"],setup(f,{emit:b}){var j,V;const l=b,u=f,{tenantSlug:s}=u,i=H({name:u.role?u.role.name:"",permissions:((V=(j=u.role)==null?void 0:j.permissions)==null?void 0:V.map(y=>y.name))||[]}),m=U(""),g=T(()=>{if(!m.value.trim())return u.permissions;const y=m.value.toLowerCase();return u.permissions.filter(r=>r.name.toLowerCase().includes(y))});Q(()=>u.role,y=>{var r;y?(i.name=y.name,i.permissions=((r=y.permissions)==null?void 0:r.map(a=>a.name))||[]):(i.name="",i.permissions=[])},{immediate:!0});const C=()=>{u.role?u.isSuperAdmin?i.put(route("admin.roles.update",u.role.id),{onSuccess:()=>{l("saved")}}):i.put(route("roles.update",[s,u.role.id]),{onSuccess:()=>{l("saved")}}):u.isSuperAdmin?i.post(route("admin.roles.store"),{onSuccess:()=>{l("saved")}}):i.post(route("roles.store",s),{onSuccess:()=>{l("saved")}})},L=y=>{const r=i.permissions.indexOf(y);r===-1?i.permissions.push(y):i.permissions.splice(r,1)};return(y,r)=>{const a=P("X"),D=P("Loader2");return d(),p("div",Ls,[n("div",Vs,[n("div",Ms,[n("h2",Es,k(f.role?"Edit Role":"Create Role"),1),t(e(_),{variant:"ghost",size:"icon",onClick:r[0]||(r[0]=()=>l("close"))},{default:o(()=>[t(a,{class:"h-5 w-5"})]),_:1})]),n("form",{onSubmit:Y(C,["prevent"]),class:"space-y-4"},[n("div",Rs,[t(e(A),{for:"name"},{default:o(()=>r[5]||(r[5]=[v("Role Name")])),_:1}),t(e(R),{id:"name",modelValue:e(i).name,"onUpdate:modelValue":r[1]||(r[1]=S=>e(i).name=S),placeholder:"Enter role name",class:"w-full"},null,8,["modelValue"]),t(E,{message:e(i).errors.name},null,8,["message"])]),n("div",Ds,[t(e(A),null,{default:o(()=>r[6]||(r[6]=[v("Permissions")])),_:1}),n("div",Ts,[n("div",Ps,[t(e(R),{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=S=>m.value=S),placeholder:"Search permissions...",class:"w-full"},null,8,["modelValue"]),m.value?(d(),w(e(_),{key:0,type:"button",variant:"ghost",size:"icon",onClick:r[3]||(r[3]=S=>m.value=""),class:"absolute right-2"},{default:o(()=>[t(a,{class:"h-4 w-4"})]),_:1})):$("",!0)])]),n("div",Os,[(d(!0),p(z,null,M(g.value,S=>(d(),p("div",{key:S.id,class:"flex items-center py-1 px-2 hover:bg-muted/50 rounded transition-colors"},[t(e(K),{id:`permission-${S.name}`,checked:e(i).permissions.includes(S.name),"onUpdate:checked":c=>L(S.name),class:"mr-2"},null,8,["id","checked","onUpdate:checked"]),t(e(A),{for:`permission-${S.name}`,class:"cursor-pointer"},{default:o(()=>[v(k(S.name),1)]),_:2},1032,["for"])]))),128))]),t(E,{message:e(i).errors.permissions},null,8,["message"])]),n("div",Bs,[t(e(_),{type:"button",onClick:r[4]||(r[4]=()=>l("close")),variant:"outline"},{default:o(()=>r[7]||(r[7]=[v(" Cancel ")])),_:1}),t(e(_),{type:"submit",disabled:e(i).processing},{default:o(()=>[e(i).processing?(d(),w(D,{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(i).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32)])])}}}),Hs={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},Xs={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md animate-in fade-in zoom-in-95 duration-200 border border-border"},Fs={class:"flex flex-col space-y-4"},Is={class:"text-muted-foreground"},Ws={class:"flex justify-end space-x-3 pt-2"},qs=B({__name:"ConfirmDeleteModal",props:{message:{type:String,default:"Are you sure you want to delete this item?"},deleteUrl:{type:String,required:!0},tenantSlug:{type:String,default:null}},emits:["cancel","confirmed"],setup(f,{emit:b}){const l=f,u=b,s=H({}),i=()=>{s.delete(l.deleteUrl,{onSuccess:()=>{u("confirmed")}})},m=()=>{u("cancel")};return(g,C)=>(d(),p("div",Hs,[n("div",Xs,[n("div",Fs,[C[1]||(C[1]=n("h2",{class:"text-xl font-bold text-foreground"},"Confirm Deletion",-1)),n("p",Is,k(f.message),1),n("div",Ws,[t(e(_),{type:"button",onClick:m,variant:"outline"},{default:o(()=>C[0]||(C[0]=[v(" Cancel ")])),_:1}),t(e(_),{type:"button",variant:"destructive",onClick:i,disabled:e(s).processing},{default:o(()=>[e(s).processing?(d(),w(e(xe),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):$("",!0),v(" "+k(e(s).processing?"Deleting...":"Delete"),1)]),_:1},8,["disabled"])])])])]))}}),Js={class:"container mx-auto p-6 space-y-8"},Gs={class:"relative max-w-md"},Ks={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Qs={class:"flex items-center space-x-2"},Ys={class:"flex items-center space-x-2"},Zs={class:"flex items-center space-x-2"},et=B({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(f){const b=f,{tenantSlug:l}=b,u=[{title:l?"Dashboard":"Admin Dashboard",href:l?`/${l}/dashboard`:"/dashboard"},{title:"User Management",href:l?`/${l}/admin/user-management`:"/admin/user-management"}],s=U(b.search||""),i=U(!1),m=U(!1),g=U(!1),C=U(null),L=U(null),j=U(null),V=b.SuperAdmin,y=U(!1),r=U(""),a=U(""),D=T(()=>{if(!s.value.trim())return b.users;const x=s.value.toLowerCase(),h=b.users.data.filter(O=>O.name.toLowerCase().includes(x)||O.email.toLowerCase().includes(x));return{...b.users,data:h}}),S=()=>{C.value=null,i.value=!0},c=()=>{i.value=!1},X=()=>{j.value=null,g.value=!0},se=()=>{g.value=!1},te=()=>{L.value=null,m.value=!0},ne=()=>{m.value=!1},le=x=>{C.value=x,i.value=!0},ae=x=>{j.value=x,g.value=!0},oe=x=>{L.value=x,m.value=!0},re=x=>{r.value=V?route("admin.users.destroy",x):route("users.destroy",[l,x]),a.value=`Are you sure you want to delete user ${x.name}?`,y.value=!0},ie=x=>{r.value=V?route("admin.roles.destroy",x):route("roles.destroy",[l,x]),a.value=`Are you sure you want to delete role ${x.name}?`,y.value=!0},de=x=>{r.value=route("admin.tenants.destroy",x),a.value=`Are you sure you want to delete tenant ${x.name}?`,y.value=!0},ue=()=>{y.value=!1},F=()=>{m.value=!1,i.value=!1,g.value=!1},me=T(()=>b.roles.data),ce=T(()=>b.tenants.data);return(x,h)=>(d(),p(z,null,[t(e(pe),{title:"Users Management"}),t(ve,{breadcrumbs:u,tenantSlug:e(l)},{default:o(()=>[n("div",Js,[h[8]||(h[8]=n("div",{class:"space-y-2"},[n("h1",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"}," User and Role Management "),n("p",{class:"text-gray-500 dark:text-gray-400"}," Manage users, roles, and permissions for your application. ")],-1)),t(e(Se)),n("div",Gs,[n("div",Ks,[t(e(he),{class:"h-5 w-5 text-gray-400"})]),t(R,{modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=O=>s.value=O),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])]),t(e(W),null,{default:o(()=>[t(e(J),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(G),{class:"text-xl font-semibold"},{default:o(()=>[n("div",Qs,[t(e($e),{class:"h-5 w-5"}),h[2]||(h[2]=n("span",null,"Users",-1))])]),_:1}),t(_,{onClick:S,variant:"default",size:"sm",class:"gap-1"},{default:o(()=>[t(e(I),{class:"h-4 w-4"}),h[3]||(h[3]=n("span",null,"Add User",-1))]),_:1})]),_:1}),t(e(q),null,{default:o(()=>[t(De,{users:D.value,isSuperAdmin:e(V),onEdit:le,onDelete:re},null,8,["users","isSuperAdmin"])]),_:1})]),_:1}),t(e(W),null,{default:o(()=>[t(e(J),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(G),{class:"text-xl font-semibold"},{default:o(()=>[n("div",Ys,[t(e(ke),{class:"h-5 w-5"}),h[4]||(h[4]=n("span",null,"Roles",-1))])]),_:1}),t(_,{onClick:te,variant:"default",size:"sm",class:"gap-1"},{default:o(()=>[t(e(I),{class:"h-4 w-4"}),h[5]||(h[5]=n("span",null,"Add Role",-1))]),_:1})]),_:1}),t(e(q),null,{default:o(()=>[t(qe,{roles:f.roles,onEdit:oe,onDelete:ie},null,8,["roles"])]),_:1})]),_:1}),e(V)?(d(),w(e(W),{key:0},{default:o(()=>[t(e(J),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(G),{class:"text-xl font-semibold"},{default:o(()=>[n("div",Zs,[t(e(we),{class:"h-5 w-5"}),h[6]||(h[6]=n("span",null,"Companies",-1))])]),_:1}),t(_,{onClick:X,variant:"default",size:"sm",class:"gap-1"},{default:o(()=>[t(e(I),{class:"h-4 w-4"}),h[7]||(h[7]=n("span",null,"Add Company",-1))]),_:1})]),_:1}),t(e(q),null,{default:o(()=>[t($s,{tenants:f.tenants,onEdit:ae,onDelete:de},null,8,["tenants"])]),_:1})]),_:1})):$("",!0),t(N,{name:"fade"},{default:o(()=>[i.value?(d(),w(cs,{key:0,user:C.value,roles:me.value,permissions:f.permissions,tenants:ce.value,isSuperAdmin:e(V),tenantSlug:e(l),onClose:c,onSaved:F},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])):$("",!0)]),_:1}),t(N,{name:"fade"},{default:o(()=>[g.value?(d(),w(zs,{key:0,tenants:f.tenants,tenant:j.value,onClose:se,onSaved:F},null,8,["tenants","tenant"])):$("",!0)]),_:1}),t(N,{name:"fade"},{default:o(()=>[m.value?(d(),w(Ns,{key:0,role:L.value,permissions:f.permissions,isSuperAdmin:e(V),tenantSlug:e(l),onClose:ne,onSaved:F},null,8,["role","permissions","isSuperAdmin","tenantSlug"])):$("",!0)]),_:1}),t(N,{name:"fade"},{default:o(()=>[y.value?(d(),w(qs,{key:0,deleteUrl:r.value,message:a.value,tenantSlug:e(l),onCancel:h[1]||(h[1]=O=>y.value=!1),onConfirmed:ue},null,8,["deleteUrl","message","tenantSlug"])):$("",!0)]),_:1})])]),_:1},8,["tenantSlug"])],64))}}),kt=Ce(et,[["__scopeId","data-v-71f1e202"]]);export{kt as default};
