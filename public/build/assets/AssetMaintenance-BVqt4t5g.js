import{x as Ie,a as $t,W as ge,g as qt}from"./vendor-vue-o4TX1eGc.js";import{_ as Pt}from"./AppLayout.vue_vue_type_script_setup_true_lang-CnGqbpRt.js";import{d as et,r as h,c as q,w as Xe,A as Vt,K as At,L as u,e as o,b as w,k as x,X as s,l as t,f as a,u as e,S as r,U as m,P as Ee,ak as Dt,D as j,Y as X,M as A,N as U,bF as Je,b2 as $e,bI as ht,bH as Ct,O as jt,n as Lt,j as Wt}from"./vendor-C-CW143M.js";import{_ as i}from"./Icon.vue_vue_type_script_setup_true_lang-B7IfTNIf.js";import{_ as be,a as ye,b as P,c as V,d as ke,e as S}from"./TableRow.vue_vue_type_script_setup_true_lang-D19AmMrD.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-B-CPTRto.js";import{_ as _e}from"./Card.vue_vue_type_script_setup_true_lang-Cp4wUgFE.js";import{_ as It}from"./CardHeader.vue_vue_type_script_setup_true_lang-CNgbOXgy.js";import{_ as Mt}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcA2pWrU.js";import{_ as he}from"./CardContent.vue_vue_type_script_setup_true_lang-DxPj8Tg7.js";import{_ as ue,a as me,b as fe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DjSCH9m8.js";import{_ as pe,a as ve}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BSj40beh.js";import{_ as Se}from"./DialogFooter.vue_vue_type_script_setup_true_lang-RSN6g_4k.js";import{_ as I}from"./Label.vue_vue_type_script_setup_true_lang-CZjK18aI.js";import{_ as Z}from"./Input.vue_vue_type_script_setup_true_lang-taOxs2kk.js";import{_ as Me,a as Oe,b as Ue}from"./AlertDescription.vue_vue_type_script_setup_true_lang-Bni7FoRm.js";import{_ as gt}from"./SortIndicator-DCv-tJVv.js";import{_ as je}from"./Badge.vue_vue_type_script_setup_true_lang-Cb4j4dNt.js";import{_ as Qt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as St}from"./app-CqI_EGj4.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-CmSxFldp.js";import"./vendor-ui-DUlj4Wsf.js";import"./useInitials-DzeGKvtI.js";import"./vendor-icons-Dyo-jBRF.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C-8K70bD.js";const Ht={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},Yt={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},Gt={class:"flex items-center gap-3"},Kt={class:"flex flex-wrap gap-3"},Zt={class:"flex justify-between items-center"},Xt={class:"text-sm hidden sm:inline"},Jt={class:"flex flex-col gap-6"},es={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},ts={class:"relative"},ss={class:"relative"},ls={class:"overflow-x-auto"},as={class:"flex items-center justify-center"},ns=["checked"],rs={class:"flex items-center space-x-1"},os={key:4,class:"ml-2"},ds={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},is={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},us={key:5,class:"ml-2 opacity-50"},ms={class:"flex flex-col items-center justify-center text-muted-foreground"},fs=["value"],ps={class:"flex space-x-2"},vs={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},cs={class:"flex items-center gap-4 text-sm text-muted-foreground"},xs={class:"flex items-center gap-1"},gs={class:"flex items-center gap-1"},ws={class:"relative"},bs=["value"],ys={class:"flex space-x-1"},ks={class:"flex items-center gap-2"},_s={key:0,class:"col-span-2 sm:col-span-1"},hs={class:"relative"},Cs=["value"],Ss={class:"col-span-2 sm:col-span-1"},$s={class:"col-span-2 sm:col-span-1"},Vs={class:"relative"},As={class:"col-span-2 sm:col-span-1"},Ds={class:"relative"},Is={class:"col-span-2 sm:col-span-1"},Ms={class:"relative"},Os={class:"col-span-2 sm:col-span-1"},Us={class:"col-span-2 sm:col-span-1"},Ns={class:"col-span-2 sm:col-span-1"},Ts={class:"relative"},Fs={class:"col-span-2 sm:col-span-1"},zs={class:"relative"},Es={class:"col-span-2 sm:col-span-1"},Bs={class:"relative"},Rs={class:"col-span-2 sm:col-span-1"},qs={class:"relative"},Ps={class:"col-span-2 sm:col-span-1"},js={class:"col-span-2 sm:col-span-1"},Ls={class:"col-span-2 sm:col-span-1"},Ws={class:"relative"},Qs={class:"col-span-2 mt-4 flex justify-end gap-3"},Hs={class:"flex items-center gap-2"},Ys={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},Gs={key:0},Ks={class:"space-y-4"},Zs={class:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20"},Xs={class:"cursor-pointer"},Js=["disabled"],el={class:"flex items-center gap-2 text-sm text-muted-foreground"},tl=["href"],sl={key:0,class:"flex items-center justify-center gap-2 p-4"},ll={key:1,class:"space-y-4"},al={key:0,class:"rounded-lg border p-3"},nl={class:"flex items-center justify-between"},rl={class:"text-xs text-muted-foreground"},ol={class:"mt-2 flex flex-wrap gap-2"},dl={class:"grid grid-cols-3 gap-4"},il={class:"text-2xl font-bold"},ul={class:"text-2xl font-bold text-green-600"},ml={class:"text-2xl font-bold text-red-600"},fl={key:2},pl={class:"flex items-center justify-between mb-3"},vl={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},cl={class:"border rounded-lg overflow-hidden"},xl={class:"max-h-96 overflow-y-auto"},gl={class:"flex flex-wrap gap-x-3 gap-y-1"},wl={class:"font-medium text-foreground"},bl={key:0,class:"italic text-muted-foreground"},yl={class:"space-y-1"},kl={key:0,class:"text-xs text-muted-foreground"},_l={key:3},hl={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},Cl={class:"border rounded-lg overflow-hidden"},Sl={class:"flex flex-wrap gap-x-3 gap-y-1"},$l={class:"font-medium"},Vl={key:0,class:"italic text-muted-foreground"},Al={class:"border-t p-4 flex justify-end gap-3"},Dl={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Il=et({__name:"TrucksComponent",props:{entries:{},tenantSlug:{},SuperAdmin:{type:Boolean},tenants:{},perPage:{},permissions:{}},emits:["update:perPage"],setup(O,{emit:c}){const D=O,E=h({search:"",type:"",make:""}),R=h("truckid"),B=h("asc"),L=h(1),G=h(10),M=h(10),W=h([]),J=h(!1),Y=h(""),F=h(""),te=h(!1),oe=h(!1),de=h(!1),z=h(null),re=h(!1),ee=h(!1),b=Ie({id:null,truckid:null,type:"daycab",make:"international",fuel:"diesel",license:null,vin:"",tenant_id:D.SuperAdmin?"":null,status:"active",inspection_status:"good",inspection_expiry_date:new Date().toISOString().split("T")[0]});Ie({csv_file:null});const se=h(null),le=$t(),y=h(!1),N=h(null),C=h(!1),v=h(!1),_=q(()=>D.entries.filter(g=>{var n,f;return!(E.value.search&&!String(g.truckid).includes(E.value.search)&&!(g.vin||"").toLowerCase().includes(E.value.search.toLowerCase())||E.value.type&&((n=g.type)==null?void 0:n.toLowerCase())!=E.value.type||E.value.make&&((f=g.make)==null?void 0:f.toLowerCase())!=E.value.make)})),K=q(()=>[..._.value].sort((g,n)=>{let f=g[R.value],T=n[R.value];return f==null?1:T==null?-1:(typeof f=="string"&&(f=f.toLowerCase(),T=T.toLowerCase()),f<T?B.value==="asc"?-1:1:f>T?B.value==="asc"?1:-1:0)})),H=q(()=>Math.ceil(K.value.length/G.value)),ce=q(()=>{const g=(L.value-1)*G.value,n=g+G.value;return K.value.slice(g,n)}),Ne=q(()=>ce.value.length>0&&ce.value.every(g=>W.value.includes(g.id))),Te=["truckid","type","make","fuel","license","vin","inspection_status","inspection_expiry_date","status"];Xe(Y,g=>g&&setTimeout(()=>Y.value="",5e3)),Xe(G,g=>{M.value=g});function tt(g){return g.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}function He(g){return g?new Date(g+"T00:00:00").toLocaleDateString():"—"}function Fe(g,n){if(n==="inspection_status")return g.inspection_status==="good"?"Good":"Expired";if(n==="inspection_expiry_date")return He(g[n]);if(n==="fuel"&&g.fuel==="cng")return"CNG";const f=g[n];return typeof f=="string"?f.charAt(0).toUpperCase()+f.slice(1):f}const Be=()=>{L.value=1};function Ae(){E.value={search:"",type:"",make:""},Be()}function Le(g){R.value===g?B.value=B.value==="asc"?"desc":"asc":(R.value=g,B.value="asc")}const st=()=>{G.value=M.value,Be()},Re=g=>{g>=1&&g<=H.value&&(L.value=g)};function lt(g){g.target.checked?ce.value.forEach(f=>{W.value.includes(f.id)||W.value.push(f.id)}):W.value=W.value.filter(f=>!ce.value.some(T=>T.id===f))}function at(){b.reset(),b.clearErrors(),b.id=null,te.value=!0}function nt(g){b.reset(),b.clearErrors(),b.id=g.id,b.truckid=g.truckid,b.type=g.type?g.type.toLowerCase():"",b.make=g.make?g.make.toLowerCase():"",b.fuel=g.fuel,b.license=g.license,b.vin=g.vin,b.status=g.status,b.tenant_id=g.tenant_id,b.inspection_status=g.inspection_status||"good",b.inspection_expiry_date=g.inspection_expiry_date||new Date().toISOString().split("T")[0],te.value=!0}function rt(){te.value=!1}function ot(){const g={...b.data(),truckid:Number(b.truckid),license:Number(b.license)},n=b.id?"put":"post",f=b.id?D.SuperAdmin?route("truck.update.admin",[b.id]):route("truck.update",[D.tenantSlug,b.id]):route(D.SuperAdmin?"truck.store.admin":"truck.store",{tenantSlug:D.tenantSlug});re.value=!0,b[n](f,{data:g,onSuccess:()=>{Y.value=b.id?"Truck updated.":"Truck created.",rt()},onError:()=>F.value="Save failed",onFinish:()=>re.value=!1})}function dt(g){z.value=g,oe.value=!0}function Ye(){if(!z.value)return;const g=D.SuperAdmin?route("truck.destroy.admin",[z.value.id]):route("truck.destroy",[D.tenantSlug,z.value.id]);b.delete(g,{onSuccess:()=>{Y.value="Deleted successfully",oe.value=!1}})}function qe(){W.value.length&&(de.value=!0)}function it(){const g=route(D.SuperAdmin?"truck.destroyBulk.admin":"truck.destroyBulk",{tenantSlug:D.tenantSlug});Ie({ids:W.value}).delete(g,{onSuccess:()=>{Y.value=`${W.value.length} deleted`,W.value=[],de.value=!1}})}function ut(){var g,n;if(!ce.value.length){F.value="No data to export";return}(g=se.value)==null||g.setAttribute("action",route(D.SuperAdmin?"truck.export.admin":"truck.export",{tenantSlug:D.tenantSlug})),(n=se.value)==null||n.submit()}const mt=q(()=>"/storage/upload-data-temps/Trucks Template.csv");Vt(()=>{const g=n=>{J.value&&!n.target.closest(".relative")&&(J.value=!1)};document.addEventListener("click",g),At(()=>document.removeEventListener("click",g))});const ft=q(()=>{if(H.value<=7)return Array.from({length:H.value},(T,De)=>De+1);const g=[];g.push(1),L.value>3&&g.push("...");const n=Math.max(2,L.value-1),f=Math.min(H.value-1,L.value+1);for(let T=n;T<=f;T++)g.push(T);return L.value<H.value-2&&g.push("..."),H.value>1&&g.push(H.value),g}),ie=q(()=>D.permissions.map(g=>g.name));function pt(g){var De;const n=(De=g.target.files)==null?void 0:De[0];if(!n)return;C.value=!0;const f=new FormData;f.append("file",n);const T=D.SuperAdmin?route("truck.validateImport.admin"):route("truck.validateImport",{tenantSlug:D.tenantSlug});ge.post(T,f,{forceFormData:!0,preserveScroll:!0,onFinish:()=>{C.value=!1,g.target.value=""},onError:()=>{C.value=!1,F.value="Failed to validate CSV file",g.target.value=""}})}function vt(){var n;if(!N.value||N.value.header_error||(((n=N.value.summary)==null?void 0:n.invalid)??0)>0)return;v.value=!0;const g=D.SuperAdmin?route("truck.confirmImport.admin"):route("truck.confirmImport",{tenantSlug:D.tenantSlug});ge.post(g,{},{preserveScroll:!0,onSuccess:()=>{var f;Y.value=`Successfully imported ${((f=N.value.summary)==null?void 0:f.valid)??0} rows`,Ge()},onError:()=>{F.value="Import failed"},onFinish:()=>{v.value=!1}})}function ct(){const g=D.SuperAdmin?route("truck.downloadErrorReport.admin"):route("truck.downloadErrorReport",{tenantSlug:D.tenantSlug});window.location.href=g}function Ge(){y.value=!1,N.value=null,C.value=!1,v.value=!1}return Xe(()=>{var g;return(g=le.props.flash)==null?void 0:g.importValidation},g=>{g&&(g.results&&(N.value=g.results,g.header_error&&(N.value.header_error=g.header_error),y.value=!0),g.message&&(F.value=g.message))},{immediate:!0}),(g,n)=>(o(),u("div",Ht,[Y.value?(o(),w(e(Ue),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Me),{class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"check_circle",class:"h-5 w-5 text-green-500"}),n[30]||(n[30]=r(" Success "))]),_:1}),t(e(Oe),null,{default:a(()=>[r(m(Y.value),1)]),_:1})]),_:1})):x("",!0),F.value?(o(),w(e(Ue),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Me),{class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"alert_circle",class:"h-5 w-5"}),n[31]||(n[31]=r(" Error "))]),_:1}),t(e(Oe),null,{default:a(()=>[r(m(F.value),1)]),_:1})]),_:1})):x("",!0),s("div",Yt,[s("div",Gt,[t(i,{name:"truck",class:"h-6 w-6 text-primary hidden sm:block"}),n[32]||(n[32]=s("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Truck Management ",-1))]),s("div",Kt,[ie.value.includes("trucks.create")?(o(),w(e(k),{key:0,onClick:at,variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),n[33]||(n[33]=r(" Create New Truck "))]),_:1})):x("",!0),W.value.length&&ie.value.includes("trucks.delete")?(o(),w(e(k),{key:1,onClick:qe,variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),r(" Delete Selected ("+m(W.value.length)+") ",1)]),_:1})):x("",!0),ie.value.includes("trucks.import")?(o(),w(e(k),{key:2,onClick:n[0]||(n[0]=f=>y.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),n[34]||(n[34]=r(" Import CSV "))]),_:1})):x("",!0),ie.value.includes("trucks.export")?(o(),w(e(k),{key:3,onClick:Ee(ut,["prevent"]),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),n[35]||(n[35]=r(" Download CSV "))]),_:1})):x("",!0)])]),t(e(_e),{class:"shadow-sm border"},{default:a(()=>[t(e(It),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:a(()=>[s("div",Zt,[t(e(Mt),{class:"text-lg md:text-xl lg:text-2xl flex items-center gap-2"},{default:a(()=>[t(i,{name:"filter",class:"h-5 w-5 text-muted-foreground"}),n[36]||(n[36]=r(" Filters "))]),_:1}),t(e(k),{variant:"ghost",size:"sm",onClick:n[1]||(n[1]=f=>ee.value=!ee.value),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:a(()=>[s("span",Xt,m(ee.value?"Hide Filters":"Show Filters"),1),t(i,{name:ee.value?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),t(Dt,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:a(()=>[ee.value?(o(),w(e(he),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:a(()=>[s("div",Jt,[s("div",es,[s("div",null,[t(e(I),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(i,{name:"search",class:"h-4 w-4 text-muted-foreground"}),n[37]||(n[37]=r(" Search "))]),_:1}),t(e(Z),{id:"search",type:"text",modelValue:E.value.search,"onUpdate:modelValue":n[2]||(n[2]=f=>E.value.search=f),placeholder:"Search by truck ID or VIN...",onInput:Be,class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),s("div",null,[t(e(I),{for:"type",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(i,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),n[38]||(n[38]=r(" Type "))]),_:1}),s("div",ts,[j(s("select",{id:"type","onUpdate:modelValue":n[3]||(n[3]=f=>E.value.type=f),onChange:Be,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},n[39]||(n[39]=[s("option",{value:""},"All Types",-1),s("option",{value:"daycab"},"Daycab",-1),s("option",{value:"sleepercab"},"Sleepercab",-1)]),544),[[X,E.value.type]]),n[40]||(n[40]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[t(e(I),{for:"make",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(i,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),n[41]||(n[41]=r(" Make "))]),_:1}),s("div",ss,[j(s("select",{id:"make","onUpdate:modelValue":n[4]||(n[4]=f=>E.value.make=f),onChange:Be,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},n[42]||(n[42]=[s("option",{value:""},"All Makes",-1),s("option",{value:"international"},"International",-1),s("option",{value:"kenworth"},"Kenworth",-1),s("option",{value:"peterbilt"},"Peterbilt",-1),s("option",{value:"volvo"},"Volvo",-1),s("option",{value:"freightliner"},"Freightliner",-1)]),544),[[X,E.value.make]]),n[43]||(n[43]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),t(e(k),{onClick:Ae,variant:"ghost",size:"sm",class:"self-start"},{default:a(()=>[t(i,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),n[44]||(n[44]=r(" Reset Filters "))]),_:1})])]),_:1})):x("",!0)]),_:1})]),_:1}),t(e(_e),{class:"mx-auto max-w-[90vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:a(()=>[t(e(he),{class:"p-0"},{default:a(()=>[s("div",ls,[t(e(be),{class:"relative h-[500px] overflow-auto"},{default:a(()=>[t(e(ye),null,{default:a(()=>[t(e(P),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:a(()=>[ie.value.includes("trucks.delete")?(o(),w(e(V),{key:0,class:"w-12"},{default:a(()=>[s("div",as,[s("input",{type:"checkbox",checked:Ne.value,onChange:lt,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ns)])]),_:1})):x("",!0),g.SuperAdmin?(o(),w(e(V),{key:1,class:"font-semibold"},{default:a(()=>n[45]||(n[45]=[r("Company")])),_:1})):x("",!0),(o(),u(A,null,U(Te,f=>t(e(V),{key:f,onClick:T=>Le(f),class:"cursor-pointer font-semibold"},{default:a(()=>[s("div",rs,[f==="inspection_status"?(o(),u(A,{key:0},[r("Annual Inspection Status")],64)):f==="inspection_expiry_date"?(o(),u(A,{key:1},[r("Annual Inspection Expiration Date")],64)):f==="status"?(o(),u(A,{key:2},[r("Status")],64)):(o(),u(A,{key:3},[r(m(tt(f)),1)],64)),R.value===f?(o(),u("div",os,[B.value==="asc"?(o(),u("svg",ds,n[46]||(n[46]=[s("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(o(),u("svg",is,n[47]||(n[47]=[s("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(o(),u("div",us,n[48]||(n[48]=[s("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M8 10l4-4 4 4"}),s("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),ie.value.includes("trucks.update")||ie.value.includes("trucks.delete")?(o(),w(e(V),{key:2,class:"font-semibold"},{default:a(()=>n[49]||(n[49]=[r("Actions")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[ce.value.length?x("",!0):(o(),w(e(P),{key:0},{default:a(()=>[t(e(S),{colspan:g.SuperAdmin?Te.length+3:Te.length+2,class:"py-8 text-center"},{default:a(()=>[s("div",ms,[t(i,{name:"search_x",class:"h-12 w-12 mb-2 opacity-30"}),n[50]||(n[50]=s("p",null,"No trucks found matching your criteria.",-1))])]),_:1},8,["colspan"])]),_:1})),(o(!0),u(A,null,U(ce.value,f=>(o(),w(e(P),{key:f.id,class:"hover:bg-muted/50"},{default:a(()=>[ie.value.includes("trucks.delete")?(o(),w(e(S),{key:0,class:"text-center"},{default:a(()=>[j(s("input",{type:"checkbox",value:f.id,"onUpdate:modelValue":n[5]||(n[5]=T=>W.value=T),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,fs),[[Je,W.value]])]),_:2},1024)):x("",!0),g.SuperAdmin?(o(),w(e(S),{key:1},{default:a(()=>{var T;return[r(m(((T=f.tenant)==null?void 0:T.name)||"—"),1)]}),_:2},1024)):x("",!0),(o(),u(A,null,U(Te,T=>t(e(S),{key:T,class:"whitespace-nowrap"},{default:a(()=>[T==="status"?(o(),u("span",{key:0,class:$e({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":f[T]==="active","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":f[T]==="inactive","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":f[T]==="Returned to AMZ"})},m(Fe(f,T)),3)):T==="inspection_status"?(o(),u("span",{key:1,class:$e({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":f[T]==="good","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":f[T]==="expired"})},m(f[T]==="good"?"Good":"Expired"),3)):(o(),u(A,{key:2},[r(m(Fe(f,T)),1)],64))]),_:2},1024)),64)),ie.value.includes("trucks.delete")||ie.value.includes("trucks.update")?(o(),w(e(S),{key:2},{default:a(()=>[s("div",ps,[ie.value.includes("trucks.update")?(o(),w(e(k),{key:0,variant:"warning",size:"sm",onClick:T=>nt(f),class:"shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"pencil",class:"mr-1 h-4 w-4"}),n[51]||(n[51]=r(" Edit "))]),_:2},1032,["onClick"])):x("",!0),ie.value.includes("trucks.delete")?(o(),w(e(k),{key:1,variant:"destructive",size:"sm",onClick:T=>dt(f),class:"shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"trash",class:"mr-1 h-4 w-4"}),n[52]||(n[52]=r(" Delete "))]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),s("div",vs,[s("div",cs,[s("span",xs,[t(i,{name:"list",class:"h-4 w-4"}),r(" Showing "+m(ce.value.length)+" of "+m(K.value.length)+" entries ",1)]),s("span",gs,[t(i,{name:"layout-grid",class:"h-4 w-4"}),n[53]||(n[53]=r(" Per page: "))]),s("div",ws,[j(s("select",{"onUpdate:modelValue":n[6]||(n[6]=f=>M.value=f),onChange:st,class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(o(),u(A,null,U([10,25,50,100],f=>s("option",{key:f,value:f},m(f),9,bs)),64))],544),[[X,M.value,void 0,{number:!0}]]),n[54]||(n[54]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",ys,[t(e(k),{size:"sm",variant:"ghost",onClick:n[7]||(n[7]=f=>Re(L.value-1)),disabled:L.value===1,class:"flex items-center gap-1"},{default:a(()=>[t(i,{name:"chevron-left",class:"h-4 w-4"}),n[55]||(n[55]=r(" Prev "))]),_:1},8,["disabled"]),(o(!0),u(A,null,U(ft.value,f=>(o(),w(e(k),{key:f,size:"sm",variant:"ghost",onClick:T=>Re(f),class:$e({"border-primary bg-primary/10 text-primary font-medium":f===L.value})},{default:a(()=>[r(m(f),1)]),_:2},1032,["onClick","class"]))),128)),t(e(k),{size:"sm",variant:"ghost",onClick:n[8]||(n[8]=f=>Re(L.value+1)),disabled:L.value===H.value,class:"flex items-center gap-1"},{default:a(()=>[n[56]||(n[56]=r(" Next ")),t(i,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})]),_:1}),t(e(fe),{open:te.value,"onUpdate:open":n[24]||(n[24]=f=>te.value=f)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:a(()=>[t(e(pe),{class:"px-4 sm:px-6 border-b pb-4"},{default:a(()=>[s("div",ks,[t(i,{name:e(b).id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),t(e(ve),{class:"text-lg sm:text-xl"},{default:a(()=>[r(m(e(b).id?"Edit Truck":"Create Truck"),1)]),_:1})]),t(e(me),{class:"text-xs sm:text-sm mt-1"},{default:a(()=>[r("Fill in the details to "+m(e(b).id?"update":"create")+" a truck.",1)]),_:1})]),_:1}),s("form",{onSubmit:Ee(ot,["prevent"]),class:"grid max-h-[75vh] grid-cols-1 gap-4 overflow-y-auto p-4 sm:grid-cols-2 sm:gap-5 sm:p-6"},[n[90]||(n[90]=s("div",{class:"col-span-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"},"Basic Information")],-1)),g.SuperAdmin?(o(),u("div",_s,[t(e(I),{for:"tenant",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"building",class:"h-4 w-4 text-muted-foreground"}),n[57]||(n[57]=r(" Company Name "))]),_:1}),s("div",hs,[j(s("select",{id:"tenant","onUpdate:modelValue":n[9]||(n[9]=f=>e(b).tenant_id=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[n[58]||(n[58]=s("option",{value:""},"Select Company",-1)),(o(!0),u(A,null,U(g.tenants,f=>(o(),u("option",{key:f.id,value:f.id},m(f.name),9,Cs))),128))],512),[[X,e(b).tenant_id]]),n[59]||(n[59]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),s("div",Ss,[t(e(I),{for:"truckid",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),n[60]||(n[60]=r(" Truck ID "))]),_:1}),t(e(Z),{id:"truckid",modelValue:e(b).truckid,"onUpdate:modelValue":n[10]||(n[10]=f=>e(b).truckid=f),modelModifiers:{number:!0},type:"number",required:"",placeholder:"Enter truck ID number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),s("div",$s,[t(e(I),{for:"type",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),n[61]||(n[61]=r(" Type "))]),_:1}),s("div",Vs,[j(s("select",{id:"type","onUpdate:modelValue":n[11]||(n[11]=f=>e(b).type=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[62]||(n[62]=[s("option",{value:"daycab"},"Daycab",-1),s("option",{value:"sleepercab"},"Sleepercab",-1)]),512),[[X,e(b).type]]),n[63]||(n[63]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",As,[t(e(I),{for:"make",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),n[64]||(n[64]=r(" Make "))]),_:1}),s("div",Ds,[j(s("select",{id:"make","onUpdate:modelValue":n[12]||(n[12]=f=>e(b).make=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[65]||(n[65]=[s("option",{value:"international"},"International",-1),s("option",{value:"kenworth"},"Kenworth",-1),s("option",{value:"peterbilt"},"Peterbilt",-1),s("option",{value:"volvo"},"Volvo",-1),s("option",{value:"freightliner"},"Freightliner",-1)]),512),[[X,e(b).make]]),n[66]||(n[66]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),n[91]||(n[91]=s("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"}," Additional Information ")],-1)),s("div",Is,[t(e(I),{for:"fuel",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"fuel",class:"h-4 w-4 text-muted-foreground"}),n[67]||(n[67]=r(" Fuel "))]),_:1}),s("div",Ms,[j(s("select",{id:"fuel","onUpdate:modelValue":n[13]||(n[13]=f=>e(b).fuel=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[68]||(n[68]=[s("option",{value:"diesel"},"Diesel",-1),s("option",{value:"cng"},"CNG",-1)]),512),[[X,e(b).fuel]]),n[69]||(n[69]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Os,[t(e(I),{for:"license",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"id_card",class:"h-4 w-4 text-muted-foreground"}),n[70]||(n[70]=r(" License "))]),_:1}),t(e(Z),{id:"license",modelValue:e(b).license,"onUpdate:modelValue":n[14]||(n[14]=f=>e(b).license=f),modelModifiers:{number:!0},type:"number",min:"0",required:"",placeholder:"Enter license number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),s("div",Us,[t(e(I),{for:"vin",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"fingerprint",class:"h-4 w-4 text-muted-foreground"}),n[71]||(n[71]=r(" VIN "))]),_:1}),t(e(Z),{id:"vin",modelValue:e(b).vin,"onUpdate:modelValue":n[15]||(n[15]=f=>e(b).vin=f),type:"text",required:"",placeholder:"Enter vehicle identification number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),n[92]||(n[92]=s("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"},"Inspection Details")],-1)),s("div",Ns,[t(e(I),{for:"inspection_status",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"clipboard_check",class:"h-4 w-4 text-muted-foreground"}),n[72]||(n[72]=r(" Annual Inspection Status "))]),_:1}),s("div",Ts,[j(s("select",{id:"inspection_status","onUpdate:modelValue":n[16]||(n[16]=f=>e(b).inspection_status=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[73]||(n[73]=[s("option",{value:"good"},"Good",-1),s("option",{value:"expired"},"Expired",-1)]),512),[[X,e(b).inspection_status]]),n[74]||(n[74]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Fs,[t(e(I),{for:"status",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),n[75]||(n[75]=r(" Status "))]),_:1}),s("div",zs,[j(s("select",{id:"status","onUpdate:modelValue":n[17]||(n[17]=f=>e(b).status=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[76]||(n[76]=[s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"Returned to AMZ"},"Returned to AMZ",-1)]),512),[[X,e(b).status]]),n[77]||(n[77]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Es,[t(e(I),{for:"make",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),n[78]||(n[78]=r(" Make "))]),_:1}),s("div",Bs,[j(s("select",{id:"make","onUpdate:modelValue":n[18]||(n[18]=f=>e(b).make=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[79]||(n[79]=[s("option",{value:"international"},"International",-1),s("option",{value:"kenworth"},"Kenworth",-1),s("option",{value:"peterbilt"},"Peterbilt",-1),s("option",{value:"volvo"},"Volvo",-1),s("option",{value:"freightliner"},"Freightliner",-1)]),512),[[X,e(b).make]]),n[80]||(n[80]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),n[93]||(n[93]=s("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"}," Additional Information ")],-1)),s("div",Rs,[t(e(I),{for:"fuel",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"fuel",class:"h-4 w-4 text-muted-foreground"}),n[81]||(n[81]=r(" Fuel "))]),_:1}),s("div",qs,[j(s("select",{id:"fuel","onUpdate:modelValue":n[19]||(n[19]=f=>e(b).fuel=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[82]||(n[82]=[s("option",{value:"diesel"},"Diesel",-1),s("option",{value:"cng"},"CNG",-1)]),512),[[X,e(b).fuel]]),n[83]||(n[83]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Ps,[t(e(I),{for:"license",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"id_card",class:"h-4 w-4 text-muted-foreground"}),n[84]||(n[84]=r(" License "))]),_:1}),t(e(Z),{id:"license",modelValue:e(b).license,"onUpdate:modelValue":n[20]||(n[20]=f=>e(b).license=f),modelModifiers:{number:!0},type:"number",min:"0",required:"",placeholder:"Enter license number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),s("div",js,[t(e(I),{for:"vin",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"fingerprint",class:"h-4 w-4 text-muted-foreground"}),n[85]||(n[85]=r(" VIN "))]),_:1}),t(e(Z),{id:"vin",modelValue:e(b).vin,"onUpdate:modelValue":n[21]||(n[21]=f=>e(b).vin=f),type:"text",required:"",placeholder:"Enter vehicle identification number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),n[94]||(n[94]=s("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"},"Inspection Details")],-1)),s("div",Ls,[t(e(I),{for:"inspection_status",class:"flex items-center gap-1.5 mb-1.5"},{default:a(()=>[t(i,{name:"clipboard_check",class:"h-4 w-4 text-muted-foreground"}),n[86]||(n[86]=r(" Annual Inspection Status "))]),_:1}),s("div",Ws,[j(s("select",{id:"inspection_status","onUpdate:modelValue":n[22]||(n[22]=f=>e(b).inspection_status=f),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},n[87]||(n[87]=[s("option",{value:"good"},"Good",-1),s("option",{value:"expired"},"Expired",-1)]),512),[[X,e(b).inspection_status]]),n[88]||(n[88]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Qs,[t(e(k),{type:"button",variant:"outline",onClick:n[23]||(n[23]=f=>te.value=!1),class:"transition-all hover:shadow-sm"},{default:a(()=>[t(i,{name:"x",class:"mr-2 h-4 w-4"}),n[89]||(n[89]=r(" Cancel "))]),_:1}),t(e(k),{type:"submit",variant:"default",class:"transition-all hover:shadow-sm"},{default:a(()=>[t(i,{name:e(b).id?"pencil":"plus",class:"mr-2 h-4 w-4"},null,8,["name"]),r(" "+m(e(b).id?"Update":"Create"),1)]),_:1})])],32)]),_:1})]),_:1},8,["open"]),t(e(fe),{open:oe.value,"onUpdate:open":n[26]||(n[26]=f=>oe.value=f)},{default:a(()=>[t(e(ue),null,{default:a(()=>[t(e(pe),null,{default:a(()=>[t(e(ve),null,{default:a(()=>n[95]||(n[95]=[r("Confirm Deletion")])),_:1}),t(e(me),null,{default:a(()=>n[96]||(n[96]=[r("Are you sure you want to delete this truck? This action cannot be undone.")])),_:1})]),_:1}),t(e(Se),{class:"mt-4"},{default:a(()=>[t(e(k),{variant:"outline",onClick:n[25]||(n[25]=f=>oe.value=!1)},{default:a(()=>n[97]||(n[97]=[r("Cancel")])),_:1}),t(e(k),{variant:"destructive",onClick:Ye},{default:a(()=>n[98]||(n[98]=[r("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:de.value,"onUpdate:open":n[28]||(n[28]=f=>de.value=f)},{default:a(()=>[t(e(ue),null,{default:a(()=>[t(e(pe),null,{default:a(()=>[t(e(ve),null,{default:a(()=>n[99]||(n[99]=[r("Confirm Bulk Deletion")])),_:1}),t(e(me),null,{default:a(()=>[r("Are you sure you want to delete "+m(W.value.length)+" trucks? This action cannot be undone.",1)]),_:1})]),_:1}),t(e(Se),{class:"mt-4"},{default:a(()=>[t(e(k),{variant:"outline",onClick:n[27]||(n[27]=f=>de.value=!1)},{default:a(()=>n[100]||(n[100]=[r("Cancel")])),_:1}),t(e(k),{variant:"destructive",onClick:it},{default:a(()=>n[101]||(n[101]=[r("Delete Selected")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:y.value,"onUpdate:open":n[29]||(n[29]=f=>y.value=f)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:a(()=>{var f,T,De;return[t(e(pe),{class:"px-4 sm:px-6 border-b pb-3"},{default:a(()=>[s("div",Hs,[t(i,{name:"upload",class:"h-5 w-5 text-primary"}),t(e(ve),{class:"text-lg sm:text-xl font-semibold"},{default:a(()=>n[102]||(n[102]=[r(" Import Trucks ")])),_:1})]),t(e(me),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:a(()=>n[103]||(n[103]=[r(" Upload a CSV file to import trucks. The file will be validated before import. ")])),_:1})]),_:1}),s("div",Ys,[N.value?(o(),u("div",ll,[(f=N.value.headers)!=null&&f.length?(o(),u("div",al,[s("div",nl,[n[107]||(n[107]=s("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),s("div",rl,m(N.value.headers.length)+" columns ",1)]),s("div",ol,[(o(!0),u(A,null,U(N.value.headers,ae=>(o(),u("span",{key:ae,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},m(ae),1))),128))])])):x("",!0),s("div",dl,[t(e(_e),{class:"border-2"},{default:a(()=>[t(e(he),{class:"p-4 text-center"},{default:a(()=>[s("div",il,m(N.value.summary.total),1),n[108]||(n[108]=s("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),t(e(_e),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:a(()=>[t(e(he),{class:"p-4 text-center"},{default:a(()=>[s("div",ul,m(N.value.summary.valid),1),n[109]||(n[109]=s("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),t(e(_e),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:a(()=>[t(e(he),{class:"p-4 text-center"},{default:a(()=>[s("div",ml,m(N.value.summary.invalid),1),n[110]||(n[110]=s("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),N.value.header_error?(o(),w(e(Ue),{key:1,variant:"destructive"},{default:a(()=>[t(e(Me),{class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"alert_circle",class:"h-5 w-5"}),n[111]||(n[111]=r(" Header Error "))]),_:1}),t(e(Oe),null,{default:a(()=>[r(m(N.value.header_error),1)]),_:1})]),_:1})):x("",!0),(T=N.value.invalid)!=null&&T.length?(o(),u("div",fl,[s("div",pl,[s("h3",vl,[t(i,{name:"alert-triangle",class:"h-5 w-5"}),r(" Validation Errors ("+m(N.value.invalid.length)+") ",1)]),t(e(k),{onClick:ct,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"download",class:"h-4 w-4"}),n[112]||(n[112]=r(" Download Error Report "))]),_:1})]),s("div",cl,[s("div",xl,[t(e(be),null,{default:a(()=>[t(e(ye),{class:"sticky top-0 bg-background"},{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(V),{class:"w-20"},{default:a(()=>n[113]||(n[113]=[r("Row #")])),_:1}),t(e(V),null,{default:a(()=>n[114]||(n[114]=[r("Preview")])),_:1}),t(e(V),null,{default:a(()=>n[115]||(n[115]=[r("Errors")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[(o(!0),u(A,null,U(N.value.invalid,ae=>(o(),w(e(P),{key:ae.rowNumber,class:"hover:bg-muted/50"},{default:a(()=>[t(e(S),{class:"font-medium"},{default:a(()=>[r(m(ae.rowNumber),1)]),_:2},1024),t(e(S),{class:"text-sm text-muted-foreground"},{default:a(()=>{var Ve;return[s("div",gl,[(o(!0),u(A,null,U(ae.preview||[],Ce=>(o(),u("span",{key:Ce.key,class:"whitespace-nowrap"},[s("span",wl,m(Ce.label)+":",1),r(" "+m(Ce.value),1)]))),128)),(Ve=ae.preview)!=null&&Ve.length?x("",!0):(o(),u("span",bl,"—"))])]}),_:2},1024),t(e(S),null,{default:a(()=>{var Ve;return[s("div",yl,[(o(!0),u(A,null,U(ae.errors||[],(Ce,Pe)=>(o(),u("div",{key:Pe,class:"text-xs text-red-600 flex items-start gap-1"},[t(i,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),s("span",null,m(Ce),1)]))),128)),(Ve=ae.errors)!=null&&Ve.length?x("",!0):(o(),u("div",kl," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):x("",!0),(De=N.value.valid)!=null&&De.length?(o(),u("div",_l,[s("h3",hl,[t(i,{name:"check-circle",class:"h-5 w-5"}),r(" Valid Rows ("+m(N.value.valid.length)+") ",1)]),n[118]||(n[118]=s("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),s("div",Cl,[t(e(be),null,{default:a(()=>[t(e(ye),null,{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(V),null,{default:a(()=>n[116]||(n[116]=[r("Row #")])),_:1}),t(e(V),null,{default:a(()=>n[117]||(n[117]=[r("Preview")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[(o(!0),u(A,null,U(N.value.valid.slice(0,5),ae=>(o(),w(e(P),{key:ae.rowNumber},{default:a(()=>[t(e(S),{class:"font-medium"},{default:a(()=>[r(m(ae.rowNumber),1)]),_:2},1024),t(e(S),{class:"text-sm"},{default:a(()=>{var Ve;return[s("div",Sl,[(o(!0),u(A,null,U(ae.preview||[],Ce=>(o(),u("span",{key:Ce.key,class:"whitespace-nowrap"},[s("span",$l,m(Ce.label)+":",1),r(" "+m(Ce.value),1)]))),128)),(Ve=ae.preview)!=null&&Ve.length?x("",!0):(o(),u("span",Vl,"—"))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):x("",!0)])):(o(),u("div",Gs,[s("div",Ks,[s("div",Zs,[t(i,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),s("label",Xs,[n[104]||(n[104]=s("span",{class:"text-sm font-medium text-primary hover:underline"},"Choose CSV file",-1)),s("input",{type:"file",class:"hidden",onChange:pt,accept:".csv,.txt",disabled:C.value},null,40,Js)]),n[105]||(n[105]=s("p",{class:"text-xs text-muted-foreground mt-2"},"or drag and drop",-1))]),s("div",el,[t(i,{name:"info",class:"h-4 w-4"}),s("a",{href:mt.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,tl)]),C.value?(o(),u("div",sl,n[106]||(n[106]=[s("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),s("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):x("",!0)])]))]),s("div",Al,[t(e(k),{onClick:Ge,variant:"outline",disabled:v.value},{default:a(()=>n[119]||(n[119]=[r("Close")])),_:1},8,["disabled"]),N.value&&N.value.summary.valid>0?(o(),w(e(k),{key:0,onClick:vt,variant:"default",disabled:v.value||N.value.summary.invalid>0||!!N.value.header_error,class:"flex items-center gap-2"},{default:a(()=>[v.value?(o(),u("div",Dl)):(o(),w(i,{key:1,name:"check",class:"h-4 w-4"})),r(" "+m(v.value?"Importing...":`Import ${N.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):x("",!0)])]}),_:1})]),_:1},8,["open"]),s("form",{ref_key:"exportForm",ref:se,method:"GET",class:"hidden"},null,512)]))}}),Ml={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},Ol={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},Ul={class:"flex items-center gap-3"},Nl={class:"flex flex-wrap gap-3"},Tl={key:2,class:"mb-6"},Fl={class:"rounded-md border-l-4 border-red-500 bg-red-50 p-4 shadow-sm dark:border-red-400 dark:bg-red-900/30"},zl={class:"flex items-center"},El={class:"flex-shrink-0"},Bl={class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100 dark:bg-red-800"},Rl={class:"ml-3"},ql={class:"mt-1 text-sm text-red-700 dark:text-red-200"},Pl={class:"mt-2"},jl={class:"flex flex-wrap gap-2"},Ll={key:0,class:"text-sm text-muted-foreground mt-2"},Wl={key:0},Ql={key:1},Hl={key:2},Yl={key:3,class:"ml-1"},Gl={key:3,class:"mx-auto mb-6 grid max-w-[95vw] grid-cols-1 gap-4 md:max-w-[64vw] md:grid-cols-2 lg:max-w-full"},Kl={class:"rounded-lg border bg-card shadow-sm"},Zl={class:"p-4"},Xl={class:"space-y-3"},Jl={class:"text-sm"},ea={key:0,class:"text-center text-muted-foreground"},ta={class:"rounded-lg border bg-card shadow-sm"},sa={class:"p-4"},la={class:"space-y-3"},aa={class:"text-sm"},na={key:0,class:"text-center text-muted-foreground"},ra={key:4,class:"mx-auto mb-6 max-w-[90vw] overflow-x-auto rounded-lg border bg-card p-4 shadow-sm md:max-w-[64vw] lg:max-w-full"},oa={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},da={key:5,class:"mx-auto mb-6 max-w-[95vw] overflow-x-auto rounded-lg border bg-card shadow-sm md:max-w-[64vw] lg:max-w-full"},ia={class:"flex items-center justify-between border-b p-4"},ua={class:"flex items-start justify-between"},ma={class:"flex flex-col items-center space-y-1"},fa={key:0,class:"mb-6 rounded-lg border bg-card shadow-sm"},pa={class:"overflow-x-auto"},va={class:"max-h-60 overflow-y-auto sm:max-h-80 md:max-h-96"},ca={key:6,class:"mb-6 rounded-lg border bg-card shadow-sm"},xa={class:"flex justify-between items-center"},ga={class:"flex items-center gap-2"},wa={key:0,class:"ml-4 flex flex-wrap gap-2"},ba={class:"text-sm hidden sm:inline"},ya={class:"flex flex-col gap-6"},ka={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},_a={class:"relative"},ha=["value"],Ca={class:"relative"},Sa=["value"],$a={class:"flex justify-end space-x-2"},Va={class:"overflow-x-auto"},Aa={class:"flex items-center justify-center"},Da=["checked"],Ia={class:"flex items-center space-x-1"},Ma={class:"flex items-center space-x-1"},Oa={class:"flex items-center space-x-1"},Ua={class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Na=["value"],Ta={key:0},Fa={key:0},za={key:1},Ea={class:"flex space-x-2"},Ba={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},Ra={class:"flex items-center gap-4 text-sm text-muted-foreground"},qa={class:"flex items-center gap-1"},Pa={class:"flex items-center gap-1"},ja={class:"relative"},La=["value"],Wa={class:"flex space-x-1"},Qa=["innerHTML"],Ha={key:8,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Ya={class:"flex items-center gap-2"},Ga={class:"max-h-[70vh] overflow-y-auto px-4 sm:px-6"},Ka={key:0,class:"col-span-2 mb-1"},Za={class:"relative"},Xa=["value"],Ja={class:"col-span-2 border-b pb-1 mb-2 flex items-center gap-2"},en={class:"grid grid-cols-2 gap-3 col-span-2"},tn={class:"relative"},sn=["value"],ln={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},an={class:"col-span-2"},nn={class:"flex flex-wrap gap-1 mb-2 bg-muted/30 p-2 rounded-md min-h-[40px]"},rn=["onClick"],on={key:0,class:"text-muted-foreground text-sm italic"},dn={class:"relative"},un=["value"],mn={class:"col-span-2"},fn={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},pn={class:"grid grid-cols-2 gap-3 col-span-2"},vn={class:"relative"},cn=["value"],xn={class:"relative"},gn=["value"],wn={class:"relative"},bn={class:"grid grid-cols-2 gap-3 col-span-2"},yn={class:"relative"},kn={class:"flex items-center space-x-2"},_n={key:1,class:"col-span-2"},hn={class:"border-b pb-1 mb-2 mt-1 flex items-center gap-2"},Cn={class:"flex items-center space-x-2"},Sn={key:0,class:"mt-2"},$n={class:"space-y-4 sm:space-y-6"},Vn={class:"space-y-1 sm:space-y-2"},An={class:"rounded-md border"},Dn={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},In={key:0,class:"ml-1 text-xs text-red-500"},Mn={class:"flex space-x-1 sm:space-x-2"},On={class:"space-y-4 sm:space-y-6"},Un={class:"space-y-1 sm:space-y-2"},Nn={class:"overflow-hidden rounded-md border"},Tn={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Fn={key:0,class:"ml-1 text-xs text-red-500"},zn={class:"flex space-x-1 sm:space-x-2"},En={class:"space-y-4 sm:space-y-6"},Bn={class:"space-y-1 sm:space-y-2"},Rn={class:"overflow-hidden rounded-md border"},qn={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Pn={key:0,class:"ml-1 text-xs text-red-500"},jn={class:"flex space-x-1 sm:space-x-2"},Ln={class:"max-h-[60vh] overflow-x-auto overflow-y-auto"},Wn={class:"flex items-center gap-2"},Qn={key:1,class:"py-8 text-center text-muted-foreground"},Hn={class:"flex items-center gap-2"},Yn={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},Gn={key:0},Kn={class:"space-y-4"},Zn={class:"rounded-lg border p-4 bg-muted/10 space-y-3"},Xn={class:"flex items-center gap-2"},Jn={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},er=["disabled"],tr=["disabled"],sr={key:0,class:"pt-2 border-t"},lr={class:"relative"},ar=["disabled"],nr=["value"],rr={class:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20"},or={class:"cursor-pointer"},dr=["disabled"],ir={key:0,class:"flex items-center gap-2 text-sm text-muted-foreground"},ur={key:1,class:"flex items-center justify-center gap-2 p-4"},mr={key:1,class:"space-y-4"},fr={class:"flex items-center justify-between"},pr={class:"flex items-center gap-2"},vr={key:0,class:"rounded-lg border p-3"},cr={class:"flex items-center justify-between"},xr={class:"text-xs text-muted-foreground"},gr={class:"mt-2 flex flex-wrap gap-2"},wr={class:"grid grid-cols-3 gap-4"},br={class:"text-2xl font-bold"},yr={class:"text-2xl font-bold text-green-600"},kr={class:"text-2xl font-bold text-red-600"},_r={key:2},hr={class:"flex items-center justify-between mb-3"},Cr={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},Sr={class:"border rounded-lg overflow-hidden"},$r={class:"max-h-96 overflow-y-auto"},Vr={class:"flex flex-wrap gap-x-3 gap-y-1"},Ar={class:"font-medium text-foreground"},Dr={class:"space-y-1"},Ir={class:"space-y-1"},Mr={key:0,class:"text-xs text-muted-foreground"},Or={key:3},Ur={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},Nr={class:"border rounded-lg overflow-hidden"},Tr={class:"flex flex-wrap gap-x-3 gap-y-1"},Fr={class:"font-medium"},zr={class:"border-t p-4 flex justify-end gap-3"},Er={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Br="/storage/upload-data-temps/Repair Orders Template.csv",Rr=et({__name:"RepairOrdersComponent",props:{repairOrders:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},SuperAdmin:{type:Boolean,default:!1},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({search:"",vendor_id:"",status_id:""})},perPage:{type:Number,default:10},openedComponent:{type:String,default:"trucks"},permissions:{type:Array,default:()=>[]},importValidation:{type:Object,default:null}},setup(O){const c=O,D=h({...c.filters,dateFilter:c.dateFilter}),E=h(c.perPage),R=h([]),B=h(!1),L=h(""),G=h(""),M=h(!1),W=h(!1),J=h(!1),Y=h(!1),F=h(!1),te=h(!1),oe=h(!1),de=h(!1),z=h(null),re=h(!1),ee=h(!1),b=h("template"),se=h(""),le=h("Create"),y=Ie({id:null,tenant_id:c.SuperAdmin?"":null,ro_number:"",ro_open_date:"",ro_close_date:"",truck_id:null,vendor_id:null,wo_number:"",wo_status_id:null,invoice:"",invoice_amount:"",invoice_received:!1,on_qs:"no",qs_invoice_date:"",disputed:!1,dispute_outcome:"",repairs_made:"",area_of_concerns:[]}),N=Ie({concern:""}),C=Ie({vendor_name:""}),v=Ie({name:""}),_=q(()=>c.SuperAdmin),K=q(()=>c.repairOrders.data.length>0),H=q(()=>K.value&&c.repairOrders.data.every(p=>R.value.includes(p.id))),ce=[{label:"Yesterday",value:"yesterday"},{label:"WTD",value:"current-week"},{label:"T6W",value:"6w"},{label:"Quarterly",value:"quarterly"}],Ne=p=>{if(!p)return"";const l=p.split("-");if(l.length!==3)return p;const[ne,d,$]=l;return`${Number(d)}/${Number($)}/${ne}`};function Te(p){return p?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p):"$0.00"}function tt(p){D.value.dateFilter=p,Fe()}const He=q(()=>{const p=z.value;return p?(p.invalid||[]).some(l=>(l.warnings||[]).length>0):!1});function Fe(){const p=c.SuperAdmin?"repair_orders.index.admin":"repair_orders.index",l={...c.SuperAdmin?{}:{tenantSlug:c.tenantSlug},...D.value,perPage:E.value,dateFilter:D.value.dateFilter,openedComponent:"repairOrders"};ge.visit(route(p,l),{only:["repairOrders","filters","perPage","dateFilter","weekNumber","startWeekNumber","endWeekNumber","year","workOrdersByTruck","workOrderByAreasOfConcern","openedComponent","dateRange"]})}function Be(){D.value={...D.value,search:"",vendor_id:"",status_id:""},Fe()}const Ae=h({column:"ro_number",direction:"asc"});function Le(p){Ae.value.column===p?Ae.value.direction=Ae.value.direction==="asc"?"desc":"asc":Ae.value={column:p,direction:"asc"},Fe()}function st(){Fe()}function Re(p){if(!p)return;const l=new URL(p),ne=l.origin+l.pathname;ge.get(ne,{...D.value,perPage:E.value,dateFilter:D.value.dateFilter,openedComponent:"repairOrders",page:l.searchParams.get("page")||1},{preserveScroll:!0})}function lt(p){const l=p.target.checked;R.value=l?c.repairOrders.data.map(ne=>ne.id):[]}const at=$t();function nt(){if(!K.value){G.value="No data";return}window.location.href=c.tenantSlug?route("repair_orders.export",{tenantSlug:c.tenantSlug}):route("repair_orders.export.admin")}function rt(){y.reset(),le.value="Create",W.value=!0}function ot(p){y.reset(),y.id=p.id,y.tenant_id=p.tenant_id,y.ro_number=p.ro_number,y.ro_open_date=p.ro_open_date,y.ro_close_date=p.ro_close_date||"",y.truck_id=p.truck_id,y.vendor_id=p.vendor_id,y.wo_number=p.wo_number??"",y.wo_status_id=p.wo_status_id??null,y.invoice=p.invoice||"",y.invoice_amount=p.invoice_amount||"",y.invoice_received=!!p.invoice_received,y.on_qs=p.on_qs||"no",y.qs_invoice_date=p.qs_invoice_date||"",y.disputed=!!p.disputed,y.dispute_outcome=p.dispute_outcome||"",y.repairs_made=p.repairs_made||"",y.area_of_concerns=[],p.areas_of_concern&&Array.isArray(p.areas_of_concern)&&(y.area_of_concerns=p.areas_of_concern.map(l=>l.id)),le.value="Update",W.value=!0}function dt(){y.reset(),W.value=!1}function Ye(){y.wo_status_id===""&&(y.wo_status_id=null),y.wo_number===null&&(y.wo_number="");const p=le.value==="Update"?c.tenantSlug?route("repair_orders.update",[c.tenantSlug,y.id]):route("repair_orders.update.admin",y.id):c.tenantSlug?route("repair_orders.store",{tenantSlug:c.tenantSlug}):route("repair_orders.store.admin");y[le.value==="Update"?"put":"post"](p,{onSuccess:()=>{L.value=`${le.value}d!`,W.value=!1}})}let qe=null;function it(p){qe=p,J.value=!0}function ut(){if(qe===null)return;const p=c.tenantSlug?route("repair_orders.destroy",[c.tenantSlug,qe]):route("repair_orders.destroy.admin",qe);ge.delete(p,{onSuccess:()=>{L.value="Deleted",J.value=!1}})}function mt(){Y.value=!0}function ft(){const p=c.tenantSlug?route("repair_orders.destroyBulk",{tenantSlug:c.tenantSlug}):route("repair_orders.destroyBulk.admin");Ie({ids:R.value}).delete(p,{onSuccess:()=>{L.value=`${R.value.length} deleted`,R.value=[],Y.value=!1}})}function ie(){N.reset(),F.value=!0}function pt(){N.post(route("area_of_concerns.store.admin"),{onSuccess:()=>N.reset()})}function vt(p){ge.delete(route("area_of_concerns.destroy.admin",p))}function ct(p){ge.post(route("area_of_concerns.restore.admin",p))}function Ge(){C.reset(),te.value=!0}function g(){C.post(route("vendors.store.admin"),{onSuccess:()=>C.reset()})}function n(p){ge.delete(route("vendors.destroy.admin",p))}function f(p){ge.post(route("vendors.restore.admin",p))}function T(){v.reset(),oe.value=!0}function De(){v.post(route("wo_statuses.store.admin"),{onSuccess:()=>v.reset()})}function ae(p){ge.delete(route("wo_statuses.destroy.admin",p))}function Ve(p){ge.post(route("wo_statuses.restore.admin",p))}const Ce=q(()=>c.canceledQSInvoices.length>0),Pe=h(!1),Ot=q(()=>Object.fromEntries(c.areasOfConcern.map(p=>[p.id,p.concern]))),Ut=q(()=>c.areasOfConcern.filter(p=>!y.area_of_concerns.includes(p.id)));function Nt(p){const l=Number(p.target.value);l&&!y.area_of_concerns.includes(l)&&y.area_of_concerns.push(l),p.target.value=""}function Tt(p){y.area_of_concerns=y.area_of_concerns.filter(l=>l!==p)}const wt=q(()=>(c.dateFilter==="yesterday"||c.dateFilter==="current-week")&&c.weekNumber&&c.year?`Week ${c.weekNumber}, ${c.year}`:(c.dateFilter==="6w"||c.dateFilter==="quarterly")&&c.startWeekNumber&&c.endWeekNumber&&c.year?`Weeks ${c.startWeekNumber}-${c.endWeekNumber}, ${c.year}`:"");Vt(()=>{const p=l=>{M.value&&!l.target.closest(".relative")&&(M.value=!1)};document.addEventListener("click",p),At(()=>document.removeEventListener("click",p))}),setTimeout(()=>L.value="",5e3);const bt=q(()=>(c.workOrderByAreasOfConcern||[]).slice(0,5)),yt=q(()=>(c.workOrdersByTruck||[]).slice(0,5)),Ke=h(null),Ze=h(null),We=h(!1),Qe=q(()=>c.outstandingInvoices.filter(p=>{const l=Ke.value!=null?Number(p.invoice_amount)>=Ke.value:!0,ne=Ze.value?new Date(p.qs_invoice_date)>new Date(Ze.value):!0;return l&&ne})),Ft=q(()=>Qe.value.reduce((p,l)=>p+Number(l.invoice_amount||0),0)),xe=q(()=>c.permissions.map(p=>p.name)),kt=q(()=>{const p=[];D.value.search&&p.push(`Search: "${D.value.search}"`);const l=c.vendors.find(d=>d.id==D.value.vendor_id);l&&p.push(`Vendor: ${l.vendor_name}`);const ne=c.woStatuses.find(d=>d.id==D.value.status_id);return ne&&p.push(`Status: ${ne.name}`),p});function zt(p){var ze;const l=p.target,ne=(ze=l.files)==null?void 0:ze[0];if(!ne)return;if(_.value&&b.value==="quicksight"&&!se.value){G.value="Please select a company before validating a QuickSight CSV.",l.value="";return}re.value=!0;const d=new FormData;d.append("file",ne),d.append("importType",b.value),_.value&&b.value==="quicksight"&&d.append("tenant_id",String(se.value));const $=c.tenantSlug?route("repair_orders.validateImport",{tenantSlug:c.tenantSlug}):route("repair_orders.validateImport.admin");ge.post($,d,{forceFormData:!0,preserveScroll:!0,only:["flash"],onBefore:()=>{re.value=!0},onSuccess:()=>{re.value=!1},onError:()=>{re.value=!1,G.value="Failed to validate CSV file"}}),l.value=""}function Et(){if(!z.value||z.value.summary.invalid>0)return;if(_.value&&b.value==="quicksight"&&!se.value){G.value="Please select a company before importing a QuickSight CSV.";return}ee.value=!0;const p=c.tenantSlug?route("repair_orders.confirmImport",{tenantSlug:c.tenantSlug}):route("repair_orders.confirmImport.admin");ge.post(p,{importType:b.value,..._.value&&b.value==="quicksight"?{tenant_id:se.value}:{}},{preserveScroll:!0,onSuccess:()=>{ee.value=!1,L.value=`Successfully imported ${z.value.summary.valid} repair orders`,_t()},onError:()=>{ee.value=!1,G.value="Failed to import repair orders"}})}function Bt(){const p=c.tenantSlug?route("repair_orders.downloadErrorReport",{tenantSlug:c.tenantSlug}):route("repair_orders.downloadErrorReport.admin");window.location.href=p}function _t(){de.value=!1,z.value=null,re.value=!1,ee.value=!1,b.value="template",se.value=""}return Xe(()=>{var p;return(p=at.props.flash)==null?void 0:p.importValidation},p=>{if(p){if(p.results){z.value=p.results,p.header_error&&(z.value.header_error=p.header_error),de.value=!0;return}p.message&&(G.value=p.message)}},{immediate:!0}),(p,l)=>{var ne;return o(),u(A,null,[s("div",Ml,[L.value?(o(),w(e(Ue),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Me),{class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"check_circle",class:"h-5 w-5 text-green-500"}),l[53]||(l[53]=r(" Success "))]),_:1}),t(e(Oe),null,{default:a(()=>[r(m(L.value),1)]),_:1})]),_:1})):x("",!0),G.value?(o(),w(e(Ue),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Me),{class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"alert_circle",class:"h-5 w-5"}),l[54]||(l[54]=r(" Error "))]),_:1}),t(e(Oe),null,{default:a(()=>[r(m(G.value),1)]),_:1})]),_:1})):x("",!0),s("div",Ol,[s("div",Ul,[t(i,{name:"clipboard-list",class:"h-6 w-6 text-primary hidden sm:block"}),l[55]||(l[55]=s("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Repair Orders ",-1))]),s("div",Nl,[xe.value.includes("repair-orders.create")?(o(),w(e(k),{key:0,onClick:rt,variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),l[56]||(l[56]=r(" Create New "))]),_:1})):x("",!0),R.value.length&&xe.value.includes("repair-orders.delete")?(o(),w(e(k),{key:1,onClick:mt,variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),r(" Delete Selected ("+m(R.value.length)+") ",1)]),_:1})):x("",!0),_.value?(o(),w(e(k),{key:2,onClick:ie,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),l[57]||(l[57]=r(" Areas "))]),_:1})):x("",!0),_.value?(o(),w(e(k),{key:3,onClick:Ge,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),l[58]||(l[58]=r(" Vendors "))]),_:1})):x("",!0),_.value?(o(),w(e(k),{key:4,onClick:T,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),l[59]||(l[59]=r(" Statuses "))]),_:1})):x("",!0),xe.value.includes("repair-orders.import")?(o(),w(e(k),{key:5,onClick:l[0]||(l[0]=d=>de.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),l[60]||(l[60]=r(" Import CSV "))]),_:1})):x("",!0),xe.value.includes("repair-orders.export")?(o(),w(e(k),{key:6,onClick:Ee(nt,["prevent"]),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:a(()=>[t(i,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),l[61]||(l[61]=r(" Download CSV "))]),_:1})):x("",!0)])]),Ce.value&&!O.SuperAdmin&&xe.value.includes("repair-orders.update")?(o(),u("div",Tl,[s("div",Fl,[s("div",zl,[s("div",El,[s("div",Bl,[t(i,{name:"triangleAlert",class:"h-6 w-6 text-red-600 dark:text-red-300"})])]),s("div",Rl,[l[63]||(l[63]=s("h3",{class:"text-lg font-medium text-red-800 dark:text-red-300"}," Attention Required ",-1)),s("div",ql,m(((ne=c.canceledQSInvoices)==null?void 0:ne.length)||0)+" invoices found with canceled WO status but still on QS. These need immediate attention. ",1),s("div",Pl,[t(e(k),{onClick:l[1]||(l[1]=d=>Pe.value=!0),variant:"destructive",size:"sm"},{default:a(()=>l[62]||(l[62]=[r(" View Details ")])),_:1})])])])])])):x("",!0),t(e(_e),{class:"shadow-sm border bg-card"},{default:a(()=>[t(e(he),{class:"p-3 md:p-4"},{default:a(()=>[s("div",jl,[(o(),u(A,null,U(ce,d=>t(e(k),{key:d.value,size:"sm",variant:"outline",class:$e({"border-primary bg-primary/10 text-primary":D.value.dateFilter===d.value}),onClick:$=>tt(d.value)},{default:a(()=>[r(m(d.label),1)]),_:2},1032,["class","onClick"])),64))]),O.dateRange?(o(),u("div",Ll,[O.dateFilter==="yesterday"&&O.dateRange.start?(o(),u("span",Wl," Showing data from "+m(Ne(O.dateRange.start)),1)):O.dateRange.start&&O.dateRange.end?(o(),u("span",Ql," Showing data from "+m(Ne(O.dateRange.start))+" to "+m(Ne(O.dateRange.end)),1)):(o(),u("span",Hl,m(O.dateRange.label),1)),wt.value?(o(),u("span",Yl,"("+m(wt.value)+")",1)):x("",!0)])):x("",!0)]),_:1})]),_:1}),(O.dateFilter==="quarterly"||O.dateFilter==="6w")&&!O.SuperAdmin?(o(),u("div",Gl,[s("div",Kl,[l[65]||(l[65]=s("div",{class:"border-b p-4"},[s("h3",{class:"text-lg font-semibold"},"Top 5 Frequent Repairs")],-1)),s("div",Zl,[s("ul",Xl,[l[64]||(l[64]=s("div",{class:"flex items-center justify-between"},[s("span",{class:"text-sm"},"Parts:"),s("span",{class:"text-sm"},"Work Orders:")],-1)),(o(!0),u(A,null,U(bt.value,(d,$)=>(o(),u("li",{key:$,class:"flex items-center justify-between pr-4"},[s("span",Jl,m(d.concern),1),t(e(je),{variant:"outline"},{default:a(()=>[r(m(d.count),1)]),_:2},1024)]))),128)),bt.value.length===0?(o(),u("li",ea," No data available ")):x("",!0)])])]),s("div",ta,[l[67]||(l[67]=s("div",{class:"border-b p-4"},[s("h3",{class:"text-lg font-semibold"},"Top 5 Frequently Repaired Tractors")],-1)),s("div",sa,[s("ul",la,[l[66]||(l[66]=s("div",{class:"flex items-center justify-between"},[s("span",{class:"text-sm"},"Asset ID:"),s("span",{class:"text-sm"},"Work Orders:")],-1)),(o(!0),u(A,null,U(yt.value,(d,$)=>(o(),u("li",{key:$,class:"flex items-center justify-between pr-4"},[s("span",aa,m(d.truckid),1),t(e(je),{variant:"outline"},{default:a(()=>[r(m(d.work_order_count),1)]),_:2},1024)]))),128)),yt.value.length===0?(o(),u("li",na," No data available ")):x("",!0)])])])])):x("",!0),O.SuperAdmin?x("",!0):(o(),u("div",ra,[l[70]||(l[70]=s("h3",{class:"mb-4 text-lg font-semibold"},"Outstanding Invoices Filter",-1)),s("div",oa,[s("div",null,[t(e(I),{for:"min-invoice-amount"},{default:a(()=>l[68]||(l[68]=[r("Minimum Invoice Amount ($)")])),_:1}),t(e(Z),{id:"min-invoice-amount",modelValue:Ke.value,"onUpdate:modelValue":l[2]||(l[2]=d=>Ke.value=d),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"Enter minimum amount",class:"mt-1"},null,8,["modelValue"])]),s("div",null,[t(e(I),{for:"outstanding-since"},{default:a(()=>l[69]||(l[69]=[r("Outstanding Since")])),_:1}),t(e(Z),{id:"outstanding-since",modelValue:Ze.value,"onUpdate:modelValue":l[3]||(l[3]=d=>Ze.value=d),type:"date",class:"mt-1"},null,8,["modelValue"])])])])),!O.SuperAdmin&&Qe.value.length>0?(o(),u("div",da,[s("div",ia,[l[71]||(l[71]=s("h3",{class:"text-lg font-semibold"},"Outstanding Invoices",-1)),s("div",ua,[s("div",ma,[t(e(je),{variant:"outline",class:"text-sm"},{default:a(()=>[r(m(Qe.value.length)+" invoices ",1)]),_:1}),t(e(je),{variant:"outline",class:"text-sm"},{default:a(()=>[r(" total: $"+m(Ft.value.toFixed(2)),1)]),_:1})]),t(e(k),{variant:"ghost",size:"sm",onClick:l[4]||(l[4]=d=>We.value=!We.value),class:"ml-4 mt-1"},{default:a(()=>[r(m(We.value?"Hide Invoices":"Show Invoices")+" ",1),t(i,{name:We.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),We.value?(o(),u("div",fa,[s("div",pa,[s("div",va,[t(e(be),{class:"min-w-full"},{default:a(()=>[t(e(ye),null,{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(V),null,{default:a(()=>l[72]||(l[72]=[r("RO Number")])),_:1}),t(e(V),null,{default:a(()=>l[73]||(l[73]=[r("Vendor")])),_:1}),t(e(V),null,{default:a(()=>l[74]||(l[74]=[r("Week")])),_:1}),t(e(V),{class:"text-right"},{default:a(()=>l[75]||(l[75]=[r("Amount")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[(o(!0),u(A,null,U(Qe.value,d=>(o(),w(e(P),{key:d.ro_number},{default:a(()=>[t(e(S),null,{default:a(()=>[r(m(d.ro_number),1)]),_:2},1024),t(e(S),null,{default:a(()=>[r(m(d.vendor_name),1)]),_:2},1024),t(e(S),null,{default:a(()=>[r("W"+m(d.week_number)+"/"+m(d.year),1)]),_:2},1024),t(e(S),{class:"text-right"},{default:a(()=>[r(m(Te(d.invoice_amount)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):x("",!0)])):x("",!0),!O.SuperAdmin&&Qe.value.length===0?(o(),u("div",ca,l[76]||(l[76]=[s("div",{class:"border-b p-4"},[s("h3",{class:"text-lg font-semibold"},"Outstanding Invoices")],-1),s("div",{class:"p-4 text-center text-muted-foreground"}," No outstanding invoices match the current criteria ",-1)]))):x("",!0),t(e(_e),{class:"shadow-sm border"},{default:a(()=>[t(e(It),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:a(()=>[s("div",xa,[s("div",ga,[t(e(Mt),{class:"text-lg md:text-xl lg:text-2xl"},{default:a(()=>l[77]||(l[77]=[r("Filters")])),_:1}),!B.value&&kt.value.length?(o(),u("div",wa,[(o(!0),u(A,null,U(kt.value,(d,$)=>(o(),u("div",{key:$,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},m(d),1))),128))])):x("",!0)]),t(e(k),{variant:"ghost",size:"sm",onClick:l[5]||(l[5]=d=>B.value=!B.value),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:a(()=>[s("span",ba,m(B.value?"Hide Filters":"Show Filters"),1),t(i,{name:B.value?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),t(Dt,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:a(()=>[B.value?(o(),w(e(he),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:a(()=>[s("div",ya,[s("div",ka,[s("div",null,[t(e(I),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(i,{name:"search",class:"h-4 w-4 text-muted-foreground"}),l[78]||(l[78]=r(" Search "))]),_:1}),t(e(Z),{id:"search",type:"text",modelValue:D.value.search,"onUpdate:modelValue":l[6]||(l[6]=d=>D.value.search=d),placeholder:"RO#, Invoice...",class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),s("div",null,[t(e(I),{for:"vendor",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(i,{name:"building",class:"h-4 w-4 text-muted-foreground"}),l[79]||(l[79]=r(" Vendor "))]),_:1}),s("div",_a,[j(s("select",{id:"vendor","onUpdate:modelValue":l[7]||(l[7]=d=>D.value.vendor_id=d),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[l[80]||(l[80]=s("option",{value:""},"All Vendors",-1)),(o(!0),u(A,null,U(O.vendors,d=>(o(),u("option",{key:d.id,value:d.id},m(d.vendor_name),9,ha))),128))],512),[[X,D.value.vendor_id]]),l[81]||(l[81]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[t(e(I),{for:"status",class:"flex items-center gap-1.5 mb-2"},{default:a(()=>[t(i,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),l[82]||(l[82]=r(" Status "))]),_:1}),s("div",Ca,[j(s("select",{id:"status","onUpdate:modelValue":l[8]||(l[8]=d=>D.value.status_id=d),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[l[83]||(l[83]=s("option",{value:""},"All Statuses",-1)),(o(!0),u(A,null,U(O.woStatuses,d=>(o(),u("option",{key:d.id,value:d.id},m(d.name),9,Sa))),128))],512),[[X,D.value.status_id]]),l[84]||(l[84]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),s("div",$a,[t(e(k),{onClick:Be,variant:"ghost",size:"sm"},{default:a(()=>[t(i,{name:"rotate-ccw",class:"mr-2 h-4 w-4"}),l[85]||(l[85]=r(" Reset Filters "))]),_:1}),t(e(k),{onClick:Fe,variant:"default",size:"sm"},{default:a(()=>[t(i,{name:"filter",class:"mr-2 h-4 w-4"}),l[86]||(l[86]=r(" Apply Filters "))]),_:1})])])]),_:1})):x("",!0)]),_:1})]),_:1}),K.value?(o(),w(e(_e),{key:7,class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:a(()=>[t(e(he),{class:"p-0"},{default:a(()=>[s("div",Va,[t(e(be),{class:"relative h-[500px] overflow-auto"},{default:a(()=>[t(e(ye),null,{default:a(()=>[t(e(P),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:a(()=>[xe.value.includes("repair-orders.delete")?(o(),w(e(V),{key:0,class:"w-12"},{default:a(()=>[s("div",Aa,[s("input",{type:"checkbox",checked:H.value,onChange:lt,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Da)])]),_:1})):x("",!0),t(e(V),{onClick:l[9]||(l[9]=d=>Le("ro_number")),class:"cursor-pointer font-semibold"},{default:a(()=>[s("div",Ia,[l[87]||(l[87]=r(" RO# ")),t(gt,{column:"ro_number",sortState:Ae.value},null,8,["sortState"])])]),_:1}),_.value?(o(),w(e(V),{key:1,class:"font-semibold"},{default:a(()=>l[88]||(l[88]=[r("Company")])),_:1})):x("",!0),t(e(V),{onClick:l[10]||(l[10]=d=>Le("ro_open_date")),class:"cursor-pointer font-semibold"},{default:a(()=>[s("div",Ma,[l[89]||(l[89]=r(" Open Date ")),t(gt,{column:"ro_open_date",sortState:Ae.value},null,8,["sortState"])])]),_:1}),t(e(V),{onClick:l[11]||(l[11]=d=>Le("ro_close_date")),class:"cursor-pointer font-semibold"},{default:a(()=>[s("div",Oa,[l[90]||(l[90]=r(" Close Date ")),t(gt,{column:"ro_close_date",sortState:Ae.value},null,8,["sortState"])])]),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[91]||(l[91]=[r("Truck")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[92]||(l[92]=[r("Vendor")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[93]||(l[93]=[r("Areas of Concern")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[94]||(l[94]=[r("WO#")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[95]||(l[95]=[r("WO Status")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[96]||(l[96]=[r("Invoice")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[97]||(l[97]=[r("Amount")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[98]||(l[98]=[r("Invoice Received")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[99]||(l[99]=[r("On QS")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[100]||(l[100]=[r("QS Invoice Date")])),_:1}),t(e(V),{class:"font-semibold"},{default:a(()=>l[101]||(l[101]=[r("Disputed")])),_:1}),xe.value.includes("repair-orders.delete")||xe.value.includes("repair-orders.update")?(o(),w(e(V),{key:2,class:"font-semibold"},{default:a(()=>l[102]||(l[102]=[r("Actions")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[O.repairOrders.data.length?x("",!0):(o(),w(e(P),{key:0},{default:a(()=>[t(e(S),{colspan:_.value?16:15,class:"py-8 text-center"},{default:a(()=>[s("div",Ua,[t(i,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),l[103]||(l[103]=s("h2",{class:"text-lg font-medium"},"No repair orders found.",-1)),l[104]||(l[104]=s("p",{class:"text-muted-foreground mt-2"}," There is no data to display at this time. ",-1))])]),_:1},8,["colspan"])]),_:1})),(o(!0),u(A,null,U(O.repairOrders.data,d=>(o(),w(e(P),{key:d.id,class:"hover:bg-muted/50 transition-colors"},{default:a(()=>[xe.value.includes("repair-orders.delete")?(o(),w(e(S),{key:0},{default:a(()=>[j(s("input",{type:"checkbox",value:d.id,"onUpdate:modelValue":l[12]||(l[12]=$=>R.value=$),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,8,Na),[[Je,R.value]])]),_:2},1024)):x("",!0),t(e(S),{class:"whitespace-nowrap font-medium"},{default:a(()=>[r(m(d.ro_number),1)]),_:2},1024),_.value?(o(),w(e(S),{key:1,class:"whitespace-nowrap"},{default:a(()=>{var $;return[r(m((($=d.tenant)==null?void 0:$.name)||"—"),1)]}),_:2},1024)):x("",!0),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(Ne(d.ro_open_date)),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(d.ro_close_date?Ne(d.ro_close_date):"N/A"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>{var $;return[r(m((($=d.truck)==null?void 0:$.truckid)||"—"),1)]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>{var $;return[r(m((($=d.vendor)==null?void 0:$.vendor_name)||"—"),1)]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>{var $;return[($=d.areas_of_concern)!=null&&$.length?(o(),u("span",Ta,[(o(!0),u(A,null,U(d.areas_of_concern,(ze,Q)=>(o(),u("span",{key:ze.id},[r(m(ze.concern),1),Q<d.areas_of_concern.length-1?(o(),u("span",Fa,", ")):x("",!0)]))),128))])):(o(),u("span",za,"—"))]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(d.wo_number||"—"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>{var $;return[r(m((($=d.wo_status)==null?void 0:$.name)||"—"),1)]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(d.invoice||"—"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(Te(d.invoice_amount)),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(d.invoice_received?"Yes":"No"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(d.on_qs?d.on_qs.charAt(0).toUpperCase()+d.on_qs.slice(1):"No"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(d.qs_invoice_date?Ne(d.qs_invoice_date):"N/A"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:a(()=>[r(m(d.disputed?"Yes":"No"),1)]),_:2},1024),xe.value.includes("repair-orders.update")||xe.value.includes("repair-orders.delete")?(o(),w(e(S),{key:2},{default:a(()=>[s("div",Ea,[xe.value.includes("repair-orders.update")?(o(),w(e(k),{key:0,size:"sm",variant:"warning",onClick:$=>ot(d),class:"h-8 px-2"},{default:a(()=>[t(i,{name:"pencil",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),xe.value.includes("repair-orders.delete")?(o(),w(e(k),{key:1,size:"sm",variant:"destructive",onClick:$=>it(d.id),class:"h-8 px-2"},{default:a(()=>[t(i,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),s("div",Ba,[s("div",Ra,[s("span",qa,[t(i,{name:"list",class:"h-4 w-4"}),r(" Showing "+m(O.repairOrders.data.length)+" of "+m(O.repairOrders.total)+" entries ",1)]),s("span",Pa,[t(i,{name:"layout-grid",class:"h-4 w-4"}),l[105]||(l[105]=r(" Per page: "))]),s("div",ja,[j(s("select",{"onUpdate:modelValue":l[13]||(l[13]=d=>E.value=d),onChange:st,class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(o(),u(A,null,U([10,25,50,100],d=>s("option",{key:d,value:d},m(d),9,La)),64))],544),[[X,E.value,void 0,{number:!0}]]),l[106]||(l[106]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Wa,[t(e(k),{size:"sm",variant:"ghost",onClick:l[14]||(l[14]=d=>Re(O.repairOrders.prev_page_url)),disabled:!O.repairOrders.prev_page_url,class:"flex items-center gap-1"},{default:a(()=>[t(i,{name:"chevron-left",class:"h-4 w-4"}),l[107]||(l[107]=r(" Prev "))]),_:1},8,["disabled"]),(o(!0),u(A,null,U(O.repairOrders.links.slice(1,-1),d=>(o(),w(e(k),{key:d.label,size:"sm",variant:"ghost",onClick:$=>Re(d.url),disabled:!d.url,class:$e({"border-primary bg-primary/10 text-primary font-medium":d.active})},{default:a(()=>[s("span",{innerHTML:d.label},null,8,Qa)]),_:2},1032,["onClick","disabled","class"]))),128)),t(e(k),{size:"sm",variant:"ghost",onClick:l[15]||(l[15]=d=>Re(O.repairOrders.next_page_url)),disabled:!O.repairOrders.next_page_url,class:"flex items-center gap-1"},{default:a(()=>[l[108]||(l[108]=r(" Next ")),t(i,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})):(o(),u("div",Ha,[t(i,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),l[109]||(l[109]=s("h2",{class:"text-lg font-medium"},"There is No Data to give Information about.",-1))])),t(e(fe),{open:W.value,"onUpdate:open":l[33]||(l[33]=d=>W.value=d)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:a(()=>[t(e(pe),{class:"px-4 sm:px-6 border-b pb-3"},{default:a(()=>[s("div",Ya,[t(i,{name:e(y).id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),t(e(ve),{class:"text-lg sm:text-xl font-semibold"},{default:a(()=>[r(m(le.value)+" Repair Order",1)]),_:1})]),t(e(me),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:a(()=>[r("Fill in the details to "+m(le.value.toLowerCase())+" a repair order.",1)]),_:1})]),_:1}),s("div",Ga,[s("form",{onSubmit:Ee(Ye,["prevent"]),class:"grid grid-cols-1 gap-3 p-3 sm:grid-cols-2 sm:gap-4 sm:p-4"},[_.value?(o(),u("div",Ka,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"building",class:"h-4 w-4 text-muted-foreground"}),l[110]||(l[110]=r(" Company "))]),_:1}),s("div",Za,[j(s("select",{"onUpdate:modelValue":l[16]||(l[16]=d=>e(y).tenant_id=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm ring-offset-background focus-visible:ring-2"},[l[111]||(l[111]=s("option",{disabled:"",value:""},"Select",-1)),(o(!0),u(A,null,U(O.tenants,d=>(o(),u("option",{key:d.id,value:d.id},m(d.name),9,Xa))),128))],512),[[X,e(y).tenant_id]]),l[112]||(l[112]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),s("div",Ja,[t(i,{name:"info",class:"h-4 w-4 text-primary"}),l[113]||(l[113]=s("h3",{class:"text-md font-semibold text-primary"},"Basic Information",-1))]),s("div",en,[s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),l[114]||(l[114]=r(" RO# "))]),_:1}),t(e(Z),{modelValue:e(y).ro_number,"onUpdate:modelValue":l[17]||(l[17]=d=>e(y).ro_number=d),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),l[115]||(l[115]=r(" Truck "))]),_:1}),s("div",tn,[j(s("select",{"onUpdate:modelValue":l[18]||(l[18]=d=>e(y).truck_id=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[l[116]||(l[116]=s("option",{disabled:"",value:""},"Select",-1)),(o(!0),u(A,null,U(O.trucks,d=>(o(),u("option",{key:d.id,value:d.id},m(d.truckid),9,sn))),128))],512),[[X,e(y).truck_id]]),l[117]||(l[117]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"calendar",class:"h-4 w-4 text-muted-foreground"}),l[118]||(l[118]=r(" Open Date "))]),_:1}),t(e(Z),{type:"date",modelValue:e(y).ro_open_date,"onUpdate:modelValue":l[19]||(l[19]=d=>e(y).ro_open_date=d),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"calendar-check",class:"h-4 w-4 text-muted-foreground"}),l[119]||(l[119]=r(" Close Date "))]),_:1}),t(e(Z),{type:"date",modelValue:e(y).ro_close_date,"onUpdate:modelValue":l[20]||(l[20]=d=>e(y).ro_close_date=d),class:"h-9 w-full"},null,8,["modelValue"])])]),s("div",ln,[t(i,{name:"wrench",class:"h-4 w-4 text-primary"}),l[120]||(l[120]=s("h3",{class:"text-md font-semibold text-primary"},"Repair Details",-1))]),s("div",an,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"alert-triangle",class:"h-4 w-4 text-muted-foreground"}),l[121]||(l[121]=r(" Areas of Concern "))]),_:1}),s("div",nn,[(o(!0),u(A,null,U(e(y).area_of_concerns,d=>(o(),u("span",{key:d,class:"badge bg-primary/10 text-primary px-2 py-1 rounded-md flex items-center"},[r(m(Ot.value[d]),1),s("button",{onClick:$=>Tt(d),class:"ml-1 hover:text-red-500 focus:outline-none"}," × ",8,rn)]))),128)),e(y).area_of_concerns.length?x("",!0):(o(),u("span",on,"No areas selected"))]),s("div",dn,[s("select",{onChange:l[21]||(l[21]=d=>Nt(d)),class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[l[122]||(l[122]=s("option",{value:""},"Select an area to add",-1)),(o(!0),u(A,null,U(Ut.value,d=>(o(),u("option",{key:d.id,value:d.id},m(d.concern),9,un))),128))],32),l[123]||(l[123]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",mn,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"clipboard-check",class:"h-4 w-4 text-muted-foreground"}),l[124]||(l[124]=r(" Repairs Made "))]),_:1}),j(s("textarea",{"onUpdate:modelValue":l[22]||(l[22]=d=>e(y).repairs_made=d),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[ht,e(y).repairs_made]])]),s("div",fn,[t(i,{name:"receipt",class:"h-4 w-4 text-primary"}),l[125]||(l[125]=s("h3",{class:"text-md font-semibold text-primary"}," Vendor & Invoice Information ",-1))]),s("div",pn,[s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"building-2",class:"h-4 w-4 text-muted-foreground"}),l[126]||(l[126]=r(" Vendor "))]),_:1}),s("div",vn,[j(s("select",{"onUpdate:modelValue":l[23]||(l[23]=d=>e(y).vendor_id=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[l[127]||(l[127]=s("option",{disabled:"",value:""},"Select",-1)),(o(!0),u(A,null,U(O.vendors,d=>(o(),u("option",{key:d.id,value:d.id},m(d.vendor_name),9,cn))),128))],512),[[X,e(y).vendor_id]]),l[128]||(l[128]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"file-text",class:"h-4 w-4 text-muted-foreground"}),l[129]||(l[129]=r(" WO# "))]),_:1}),t(e(Z),{modelValue:e(y).wo_number,"onUpdate:modelValue":l[24]||(l[24]=d=>e(y).wo_number=d),class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),l[130]||(l[130]=r(" WO Status "))]),_:1}),s("div",xn,[j(s("select",{"onUpdate:modelValue":l[25]||(l[25]=d=>e(y).wo_status_id=d),class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[l[131]||(l[131]=s("option",{value:null},"— None —",-1)),(o(!0),u(A,null,U(O.woStatuses,d=>(o(),u("option",{key:d.id,value:d.id},m(d.name),9,gn))),128))],512),[[X,e(y).wo_status_id]]),l[132]||(l[132]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"check-square",class:"h-4 w-4 text-muted-foreground"}),l[133]||(l[133]=r(" On QS "))]),_:1}),s("div",wn,[j(s("select",{"onUpdate:modelValue":l[26]||(l[26]=d=>e(y).on_qs=d),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},l[134]||(l[134]=[s("option",{value:"yes"},"Yes",-1),s("option",{value:"no"},"No",-1),s("option",{value:"not expected"},"Not Expected",-1)]),512),[[X,e(y).on_qs]]),l[135]||(l[135]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),s("div",bn,[s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"file-invoice",class:"h-4 w-4 text-muted-foreground"}),l[136]||(l[136]=r(" Invoice "))]),_:1}),t(e(Z),{modelValue:e(y).invoice,"onUpdate:modelValue":l[27]||(l[27]=d=>e(y).invoice=d),class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"dollar-sign",class:"h-4 w-4 text-muted-foreground"}),l[137]||(l[137]=r(" Amount "))]),_:1}),s("div",yn,[l[138]||(l[138]=s("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground"},"$",-1)),t(e(Z),{type:"number",step:"0.01",modelValue:e(y).invoice_amount,"onUpdate:modelValue":l[28]||(l[28]=d=>e(y).invoice_amount=d),class:"pl-7 h-9 w-full"},null,8,["modelValue"])])]),s("div",kn,[j(s("input",{type:"checkbox","onUpdate:modelValue":l[29]||(l[29]=d=>e(y).invoice_received=d),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[Je,e(y).invoice_received]]),t(e(I),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:a(()=>[t(i,{name:"inbox",class:"h-4 w-4 text-muted-foreground"}),l[139]||(l[139]=r(" Invoice Received "))]),_:1})]),s("div",null,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"calendar-days",class:"h-4 w-4 text-muted-foreground"}),l[140]||(l[140]=r(" QS Invoice Date "))]),_:1}),t(e(Z),{type:"date",modelValue:e(y).qs_invoice_date,"onUpdate:modelValue":l[30]||(l[30]=d=>e(y).qs_invoice_date=d),class:"h-9 w-full"},null,8,["modelValue"])])]),le.value==="Update"?(o(),u("div",_n,[s("div",hn,[t(i,{name:"alert-octagon",class:"h-4 w-4 text-primary"}),l[141]||(l[141]=s("h3",{class:"text-md font-semibold text-primary"},"Dispute Information",-1))]),s("div",Cn,[j(s("input",{type:"checkbox","onUpdate:modelValue":l[31]||(l[31]=d=>e(y).disputed=d),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[Je,e(y).disputed]]),t(e(I),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:a(()=>[t(i,{name:"alert-circle",class:"h-4 w-4 text-muted-foreground"}),l[142]||(l[142]=r(" Disputed? "))]),_:1})]),e(y).disputed?(o(),u("div",Sn,[t(e(I),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:a(()=>[t(i,{name:"message-square",class:"h-4 w-4 text-muted-foreground"}),l[143]||(l[143]=r(" Dispute Outcome "))]),_:1}),j(s("textarea",{"onUpdate:modelValue":l[32]||(l[32]=d=>e(y).dispute_outcome=d),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[ht,e(y).dispute_outcome]])])):x("",!0)])):x("",!0)],32)]),t(e(Se),{class:"px-4 sm:px-6 flex justify-end gap-2 mt-2 pt-3 border-t"},{default:a(()=>[t(e(k),{variant:"outline",onClick:dt,class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:a(()=>l[144]||(l[144]=[r("Cancel")])),_:1}),t(e(k),{type:"submit",onClick:Ye,class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:a(()=>[r(m(le.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:J.value,"onUpdate:open":l[35]||(l[35]=d=>J.value=d)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[t(e(pe),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(ve),{class:"text-lg sm:text-xl"},{default:a(()=>l[145]||(l[145]=[r("Confirm Deletion")])),_:1}),t(e(me),{class:"text-xs sm:text-sm"},{default:a(()=>l[146]||(l[146]=[r("This action cannot be undone.")])),_:1})]),_:1}),t(e(Se),{class:"px-4 sm:px-6 flex gap-2"},{default:a(()=>[t(e(k),{variant:"outline",onClick:l[34]||(l[34]=d=>J.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>l[147]||(l[147]=[r("Cancel")])),_:1}),t(e(k),{variant:"destructive",onClick:ut,class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>l[148]||(l[148]=[r("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:Y.value,"onUpdate:open":l[37]||(l[37]=d=>Y.value=d)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[t(e(pe),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(ve),{class:"text-lg sm:text-xl"},{default:a(()=>[r("Delete "+m(R.value.length)+" Orders?",1)]),_:1}),t(e(me),{class:"text-xs sm:text-sm"},{default:a(()=>l[149]||(l[149]=[r("This action cannot be undone.")])),_:1})]),_:1}),t(e(Se),{class:"px-4 sm:px-6 flex gap-2"},{default:a(()=>[t(e(k),{variant:"outline",onClick:l[36]||(l[36]=d=>Y.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>l[150]||(l[150]=[r("Cancel")])),_:1}),t(e(k),{variant:"destructive",onClick:ft,class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>l[151]||(l[151]=[r("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:F.value,"onUpdate:open":l[40]||(l[40]=d=>F.value=d)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:a(()=>[t(e(pe),null,{default:a(()=>[t(e(ve),null,{default:a(()=>l[152]||(l[152]=[r("Manage Areas of Concern")])),_:1}),t(e(me),{class:"text-sm sm:text-base"},{default:a(()=>l[153]||(l[153]=[r("Add or remove areas of concern for repair orders.")])),_:1})]),_:1}),s("div",$n,[s("form",{onSubmit:Ee(pt,["prevent"]),class:"space-y-3 sm:space-y-4"},[s("div",Vn,[t(e(I),{for:"concern"},{default:a(()=>l[154]||(l[154]=[r("Area of Concern")])),_:1}),t(e(Z),{id:"concern",modelValue:e(N).concern,"onUpdate:modelValue":l[38]||(l[38]=d=>e(N).concern=d),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(k),{type:"submit",class:"w-full"},{default:a(()=>l[155]||(l[155]=[r("Add Area of Concern")])),_:1})],32),s("div",An,[s("div",Dn,[t(e(be),null,{default:a(()=>[t(e(ye),{class:"sticky top-0 z-10 bg-background"},{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(V),{class:"text-xs sm:text-sm"},{default:a(()=>l[156]||(l[156]=[r("Area of Concern")])),_:1}),t(e(V),{class:"w-20 text-xs sm:text-sm"},{default:a(()=>l[157]||(l[157]=[r("Actions")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[c.areasOfConcern.length?x("",!0):(o(),w(e(P),{key:0},{default:a(()=>[t(e(S),{colspan:"2",class:"py-4 text-center text-sm"},{default:a(()=>l[158]||(l[158]=[r("No areas of concern found.")])),_:1})]),_:1})),(o(!0),u(A,null,U(O.areasOfConcern,d=>(o(),w(e(P),{key:d.id},{default:a(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>[r(m(d.concern)+" ",1),d.deleted_at?(o(),u("span",In,"(Deleted)")):x("",!0)]),_:2},1024),t(e(S),null,{default:a(()=>[s("div",Mn,[d.deleted_at?(o(),w(e(k),{key:0,onClick:$=>ct(d.id),variant:"outline",size:"sm"},{default:a(()=>[t(i,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),d.deleted_at?x("",!0):(o(),w(e(k),{key:1,onClick:$=>vt(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(i,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(Se),null,{default:a(()=>[t(e(k),{onClick:l[39]||(l[39]=d=>F.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>l[159]||(l[159]=[r("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:te.value,"onUpdate:open":l[43]||(l[43]=d=>te.value=d)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:a(()=>[t(e(pe),null,{default:a(()=>[t(e(ve),null,{default:a(()=>l[160]||(l[160]=[r("Manage Vendors")])),_:1}),t(e(me),{class:"text-sm sm:text-base"},{default:a(()=>l[161]||(l[161]=[r("Add or remove vendors for repair orders.")])),_:1})]),_:1}),s("div",On,[s("form",{onSubmit:Ee(g,["prevent"]),class:"space-y-3 sm:space-y-4"},[s("div",Un,[t(e(I),{for:"vendor_name"},{default:a(()=>l[162]||(l[162]=[r("Vendor Name")])),_:1}),t(e(Z),{id:"vendor_name",modelValue:e(C).vendor_name,"onUpdate:modelValue":l[41]||(l[41]=d=>e(C).vendor_name=d),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(k),{type:"submit",class:"w-full"},{default:a(()=>l[163]||(l[163]=[r("Add Vendor")])),_:1})],32),s("div",Nn,[s("div",Tn,[t(e(be),null,{default:a(()=>[t(e(ye),{class:"sticky top-0 z-10 bg-background"},{default:a(()=>[t(e(P),{class:"sticky top-0 z-10 border-b bg-background"},{default:a(()=>[t(e(V),{class:"text-xs sm:text-sm"},{default:a(()=>l[164]||(l[164]=[r("Vendor Name")])),_:1}),t(e(V),{class:"text-xs sm:text-sm"},{default:a(()=>l[165]||(l[165]=[r("Actions")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[O.vendors.length===0?(o(),w(e(P),{key:0},{default:a(()=>[t(e(S),{colspan:"2",class:"py-4 text-center text-sm"},{default:a(()=>l[166]||(l[166]=[r("No vendors found.")])),_:1})]),_:1})):x("",!0),(o(!0),u(A,null,U(O.vendors,d=>(o(),w(e(P),{key:d.id},{default:a(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>[r(m(d.vendor_name)+" ",1),d.deleted_at?(o(),u("span",Fn,"(Deleted)")):x("",!0)]),_:2},1024),t(e(S),null,{default:a(()=>[s("div",zn,[d.deleted_at?(o(),w(e(k),{key:0,onClick:$=>f(d.id),variant:"outline",size:"sm"},{default:a(()=>[t(i,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),d.deleted_at?x("",!0):(o(),w(e(k),{key:1,onClick:$=>n(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(i,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),d.deleted_at?(o(),w(e(k),{key:2,onClick:$=>p.forceDeleteVendor(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(i,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(Se),null,{default:a(()=>[t(e(k),{onClick:l[42]||(l[42]=d=>te.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>l[167]||(l[167]=[r("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:oe.value,"onUpdate:open":l[46]||(l[46]=d=>oe.value=d)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:a(()=>[t(e(pe),null,{default:a(()=>[t(e(ve),null,{default:a(()=>l[168]||(l[168]=[r("Manage Work Order Statuses")])),_:1}),t(e(me),{class:"text-sm sm:text-base"},{default:a(()=>l[169]||(l[169]=[r(" Add or remove work order statuses for repair orders. ")])),_:1})]),_:1}),s("div",En,[s("form",{onSubmit:Ee(De,["prevent"]),class:"space-y-3 sm:space-y-4"},[s("div",Bn,[t(e(I),{for:"status_name"},{default:a(()=>l[170]||(l[170]=[r("Status Name")])),_:1}),t(e(Z),{id:"status_name",modelValue:e(v).name,"onUpdate:modelValue":l[44]||(l[44]=d=>e(v).name=d),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(k),{type:"submit",class:"w-full"},{default:a(()=>l[171]||(l[171]=[r("Add Work Order Status")])),_:1})],32),s("div",Rn,[s("div",qn,[t(e(be),null,{default:a(()=>[t(e(ye),{class:"sticky top-0 z-10 bg-background"},{default:a(()=>[t(e(P),{class:"sticky top-0 z-10 border-b bg-background"},{default:a(()=>[t(e(V),{class:"text-xs sm:text-sm"},{default:a(()=>l[172]||(l[172]=[r("Status Name")])),_:1}),t(e(V),{class:"text-xs sm:text-sm"},{default:a(()=>l[173]||(l[173]=[r("Actions")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[c.woStatuses.length?x("",!0):(o(),w(e(P),{key:0},{default:a(()=>[t(e(S),{colspan:"2",class:"py-4 text-center text-sm"},{default:a(()=>l[174]||(l[174]=[r("No work order statuses found.")])),_:1})]),_:1})),(o(!0),u(A,null,U(c.woStatuses,d=>(o(),w(e(P),{key:d.id},{default:a(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:a(()=>[r(m(d.name)+" ",1),d.deleted_at?(o(),u("span",Pn,"(Deleted)")):x("",!0)]),_:2},1024),t(e(S),null,{default:a(()=>[s("div",jn,[d.deleted_at?(o(),w(e(k),{key:0,onClick:$=>Ve(d.id),variant:"outline",size:"sm"},{default:a(()=>[t(i,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0),d.deleted_at?x("",!0):(o(),w(e(k),{key:1,onClick:$=>ae(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(i,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),d.deleted_at?(o(),w(e(k),{key:2,onClick:$=>p.forceDeleteStatus(d.id),variant:"destructive",size:"sm"},{default:a(()=>[t(i,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(Se),null,{default:a(()=>[t(e(k),{onClick:l[45]||(l[45]=d=>oe.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>l[175]||(l[175]=[r("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(fe),{open:Pe.value,"onUpdate:open":l[48]||(l[48]=d=>Pe.value=d)},{default:a(()=>[t(e(ue),{class:"max-h-[90vh] max-w-[95vw] overflow-y-auto md:max-w-[80vw] lg:max-w-4xl"},{default:a(()=>{var d;return[t(e(pe),null,{default:a(()=>[t(e(ve),{class:"flex items-center gap-2 text-lg md:text-xl"},{default:a(()=>[t(i,{name:"alert-triangle",class:"h-5 w-5 text-red-600"}),l[176]||(l[176]=r(" Canceled Invoices on QS "))]),_:1}),t(e(me),null,{default:a(()=>l[177]||(l[177]=[r(" These invoices have a canceled WO status but are still marked as on QS. Please review and take appropriate action. ")])),_:1})]),_:1}),s("div",Ln,[(d=c.canceledQSInvoices)!=null&&d.length?(o(),w(e(be),{key:0},{default:a(()=>[t(e(ye),null,{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(V),{class:"whitespace-nowrap"},{default:a(()=>l[178]||(l[178]=[r("RO Number")])),_:1}),t(e(V),{class:"whitespace-nowrap"},{default:a(()=>l[179]||(l[179]=[r("Vendor")])),_:1}),t(e(V),{class:"whitespace-nowrap text-right"},{default:a(()=>l[180]||(l[180]=[r("Amount")])),_:1}),t(e(V),{class:"whitespace-nowrap"},{default:a(()=>l[181]||(l[181]=[r("Week")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[(o(!0),u(A,null,U(c.canceledQSInvoices,$=>(o(),w(e(P),{key:$.ro_number,class:"hover:bg-red-50 dark:hover:bg-red-900/30"},{default:a(()=>[t(e(S),{class:"font-medium"},{default:a(()=>[s("div",Wn,[t(i,{name:"alert-triangle",class:"h-4 w-4 text-red-600 dark:text-red-400"}),r(" "+m($.ro_number),1)])]),_:2},1024),t(e(S),null,{default:a(()=>[r(m($.vendor_name),1)]),_:2},1024),t(e(S),{class:"text-right"},{default:a(()=>[r(m(Te($.invoice_amount)),1)]),_:2},1024),t(e(S),null,{default:a(()=>[r("W"+m($.week_number)+"/"+m($.year),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(o(),u("div",Qn," No canceled QS invoices found. "))]),t(e(Se),{class:"mt-4 flex flex-col gap-2 sm:flex-row"},{default:a(()=>[t(e(k),{onClick:l[47]||(l[47]=$=>Pe.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>l[182]||(l[182]=[r("Close")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]),t(e(fe),{open:de.value,"onUpdate:open":l[52]||(l[52]=d=>de.value=d)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:a(()=>{var d,$,ze;return[t(e(pe),{class:"px-4 sm:px-6 border-b pb-3"},{default:a(()=>[s("div",Hn,[t(i,{name:"upload",class:"h-5 w-5 text-primary"}),t(e(ve),{class:"text-lg sm:text-xl font-semibold"},{default:a(()=>l[183]||(l[183]=[r(" Import Repair Orders ")])),_:1})]),t(e(me),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:a(()=>l[184]||(l[184]=[r(" Choose an import format, then upload a CSV. The file will be validated before import. ")])),_:1})]),_:1}),s("div",Yn,[z.value?(o(),u("div",mr,[s("div",fr,[s("div",pr,[t(e(je),{variant:"outline",class:"text-xs"},{default:a(()=>[r(m(b.value==="template"?"Template Import":"QuickSight Import"),1)]),_:1}),_.value&&b.value==="quicksight"&&se.value?(o(),w(e(je),{key:0,variant:"outline",class:"text-xs"},{default:a(()=>[r(" Tenant ID: "+m(se.value),1)]),_:1})):x("",!0)])]),(d=z.value.headers)!=null&&d.length?(o(),u("div",vr,[s("div",cr,[l[196]||(l[196]=s("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),s("div",xr,m(z.value.headers.length)+" columns ",1)]),s("div",gr,[(o(!0),u(A,null,U(z.value.headers,Q=>(o(),u("span",{key:Q,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},m(Q),1))),128))])])):x("",!0),s("div",wr,[t(e(_e),{class:"border-2"},{default:a(()=>[t(e(he),{class:"p-4 text-center"},{default:a(()=>[s("div",br,m(z.value.summary.total),1),l[197]||(l[197]=s("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),t(e(_e),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:a(()=>[t(e(he),{class:"p-4 text-center"},{default:a(()=>[s("div",yr,m(z.value.summary.valid),1),l[198]||(l[198]=s("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),t(e(_e),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:a(()=>[t(e(he),{class:"p-4 text-center"},{default:a(()=>[s("div",kr,m(z.value.summary.invalid),1),l[199]||(l[199]=s("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),z.value.header_error?(o(),w(e(Ue),{key:1,variant:"destructive"},{default:a(()=>[t(e(Me),{class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"alert_circle",class:"h-5 w-5"}),l[200]||(l[200]=r(" Header Error "))]),_:1}),t(e(Oe),null,{default:a(()=>[r(m(z.value.header_error),1)]),_:1})]),_:1})):x("",!0),($=z.value.invalid)!=null&&$.length?(o(),u("div",_r,[s("div",hr,[s("h3",Cr,[t(i,{name:"alert-triangle",class:"h-5 w-5"}),r(" Validation Errors ("+m(z.value.invalid.length)+") ",1)]),t(e(k),{onClick:Bt,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"download",class:"h-4 w-4"}),l[201]||(l[201]=r(" Download Error Report "))]),_:1})]),s("div",Sr,[s("div",$r,[t(e(be),null,{default:a(()=>[t(e(ye),{class:"sticky top-0 bg-background"},{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(V),{class:"w-20"},{default:a(()=>l[202]||(l[202]=[r("Row #")])),_:1}),t(e(V),null,{default:a(()=>l[203]||(l[203]=[r("Preview")])),_:1}),t(e(V),null,{default:a(()=>l[204]||(l[204]=[r("Errors")])),_:1}),He.value?(o(),w(e(V),{key:0},{default:a(()=>l[205]||(l[205]=[r("Warnings")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[(o(!0),u(A,null,U(z.value.invalid,Q=>(o(),w(e(P),{key:Q.rowNumber,class:"hover:bg-muted/50"},{default:a(()=>[t(e(S),{class:"font-medium"},{default:a(()=>[r(m(Q.rowNumber),1)]),_:2},1024),t(e(S),{class:"text-sm text-muted-foreground"},{default:a(()=>[s("div",Vr,[(o(!0),u(A,null,U(Q.preview,we=>(o(),u("span",{key:we.key,class:"whitespace-nowrap"},[s("span",Ar,m(we.label)+":",1),r(" "+m(we.value),1)]))),128))])]),_:2},1024),t(e(S),null,{default:a(()=>[s("div",Dr,[(o(!0),u(A,null,U(Q.errors,(we,xt)=>(o(),u("div",{key:xt,class:"text-xs text-red-600 flex items-start gap-1"},[t(i,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),s("span",null,m(we),1)]))),128))])]),_:2},1024),He.value?(o(),w(e(S),{key:0},{default:a(()=>{var we;return[s("div",Ir,[(o(!0),u(A,null,U(Q.warnings,(xt,Rt)=>(o(),u("div",{key:Rt,class:"text-xs text-yellow-600 flex items-start gap-1"},[t(i,{name:"alert-triangle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),s("span",null,m(xt),1)]))),128)),(we=Q.warnings)!=null&&we.length?x("",!0):(o(),u("div",Mr," — "))])]}),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1})]),_:1})])])])):x("",!0),(ze=z.value.valid)!=null&&ze.length?(o(),u("div",Or,[s("h3",Ur,[t(i,{name:"check-circle",class:"h-5 w-5"}),r(" Valid Rows ("+m(z.value.valid.length)+") ",1)]),l[208]||(l[208]=s("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),s("div",Nr,[t(e(be),null,{default:a(()=>[t(e(ye),null,{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(V),null,{default:a(()=>l[206]||(l[206]=[r("Row #")])),_:1}),t(e(V),null,{default:a(()=>l[207]||(l[207]=[r("Preview")])),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[(o(!0),u(A,null,U(z.value.valid.slice(0,5),Q=>(o(),w(e(P),{key:Q.rowNumber},{default:a(()=>[t(e(S),{class:"font-medium"},{default:a(()=>[r(m(Q.rowNumber),1)]),_:2},1024),t(e(S),{class:"text-sm"},{default:a(()=>[s("div",Tr,[(o(!0),u(A,null,U(Q.preview,we=>(o(),u("span",{key:we.key,class:"whitespace-nowrap"},[s("span",Fr,m(we.label)+":",1),r(" "+m(we.value),1)]))),128))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):x("",!0)])):(o(),u("div",Gn,[s("div",Kn,[s("div",Zn,[s("div",Xn,[t(i,{name:"sliders",class:"h-4 w-4 text-muted-foreground"}),l[185]||(l[185]=s("div",{class:"text-sm font-semibold"},"Import format",-1))]),s("div",Jn,[s("label",{class:$e(["flex items-start gap-3 rounded-md border p-3 cursor-pointer hover:bg-muted/20 transition-colors",b.value==="template"?"border-primary bg-primary/5":""])},[j(s("input",{type:"radio",class:"mt-1",value:"template","onUpdate:modelValue":l[49]||(l[49]=Q=>b.value=Q),disabled:re.value},null,8,er),[[Ct,b.value]]),l[186]||(l[186]=s("div",{class:"space-y-1"},[s("div",{class:"text-sm font-medium"},"Template Import"),s("div",{class:"text-xs text-muted-foreground"}," Uses the standard Repair Orders CSV template (download below). ")],-1))],2),s("label",{class:$e(["flex items-start gap-3 rounded-md border p-3 cursor-pointer hover:bg-muted/20 transition-colors",b.value==="quicksight"?"border-primary bg-primary/5":""])},[j(s("input",{type:"radio",class:"mt-1",value:"quicksight","onUpdate:modelValue":l[50]||(l[50]=Q=>b.value=Q),disabled:re.value},null,8,tr),[[Ct,b.value]]),l[187]||(l[187]=s("div",{class:"space-y-1"},[s("div",{class:"text-sm font-medium"},"QuickSight CSV Import"),s("div",{class:"text-xs text-muted-foreground"}," Upload a QuickSight-exported CSV and we’ll map columns automatically. ")],-1))],2)]),_.value&&b.value==="quicksight"?(o(),u("div",sr,[t(e(I),{class:"flex items-center gap-1.5 mb-2 text-sm font-medium"},{default:a(()=>[t(i,{name:"building",class:"h-4 w-4 text-muted-foreground"}),l[188]||(l[188]=r(" Company (required for QuickSight import) "))]),_:1}),s("div",lr,[j(s("select",{"onUpdate:modelValue":l[51]||(l[51]=Q=>se.value=Q),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",disabled:re.value},[l[189]||(l[189]=s("option",{value:""},"Select a company",-1)),(o(!0),u(A,null,U(O.tenants,Q=>(o(),u("option",{key:Q.id,value:Q.id},m(Q.name),9,nr))),128))],8,ar),[[X,se.value]]),l[190]||(l[190]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))]),_.value&&b.value==="quicksight"&&!se.value?(o(),w(e(Ue),{key:0,variant:"destructive",class:"mt-3"},{default:a(()=>[t(e(Me),{class:"flex items-center gap-2"},{default:a(()=>[t(i,{name:"alert_circle",class:"h-5 w-5"}),l[191]||(l[191]=r(" Required "))]),_:1}),t(e(Oe),null,{default:a(()=>l[192]||(l[192]=[r(" Please select a company before validating a QuickSight CSV. ")])),_:1})]),_:1})):x("",!0)])):x("",!0)]),s("div",rr,[t(i,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),s("label",or,[l[193]||(l[193]=s("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),s("input",{type:"file",class:"hidden",onChange:zt,accept:".csv",disabled:re.value||_.value&&b.value==="quicksight"&&!se.value},null,40,dr)]),l[194]||(l[194]=s("p",{class:"text-xs text-muted-foreground mt-2"},"or drag and drop",-1))]),b.value==="template"?(o(),u("div",ir,[t(i,{name:"info",class:"h-4 w-4"}),s("a",{href:Br,download:"",class:"text-primary hover:underline"}," Download CSV Template ")])):x("",!0),re.value?(o(),u("div",ur,l[195]||(l[195]=[s("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),s("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):x("",!0)])]))]),s("div",zr,[t(e(k),{onClick:_t,variant:"outline",disabled:ee.value},{default:a(()=>l[209]||(l[209]=[r(" Close ")])),_:1},8,["disabled"]),z.value&&z.value.summary.valid>0?(o(),w(e(k),{key:0,onClick:Et,variant:"default",disabled:ee.value||z.value.summary.invalid>0||!!z.value.header_error,class:"flex items-center gap-2"},{default:a(()=>[ee.value?(o(),u("div",Er)):(o(),w(i,{key:1,name:"check",class:"h-4 w-4"})),r(" "+m(ee.value?"Importing...":`Import ${z.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):x("",!0)])]}),_:1})]),_:1},8,["open"])],64)}}}),qr=Qt(Rr,[["__scopeId","data-v-6785a098"]]),Pr={class:"bg-card rounded-lg border shadow-sm p-4 md:p-6 mb-6"},jr={class:"flex justify-between items-center mb-4"},Lr={class:"overflow-x-auto max-h-80"},Wr={class:"flex justify-center space-x-2"},Qr={key:0,class:"border-t mt-4 px-4 py-3 bg-muted/20"},Hr={class:"flex flex-col sm:flex-row items-center justify-between gap-2"},Yr={class:"text-sm text-muted-foreground"},Gr={class:"flex flex-wrap gap-2"},Kr={class:"grid grid-cols-2 gap-4"},Zr={key:0,class:"grid grid-cols-2 gap-4"},Xr={class:"mt-1"},Jr={class:"mt-1"},eo=et({__name:"MilesDrivenTable",props:{milesEntries:{},tenantSlug:{},permissions:{}},setup(O){const c=O,D=h(!1),E=h("week_start_date"),R=h("desc"),B=h(1),L=h(10),G=h(!1),M=Ie({id:null,year:"",week_number:"",week_start_date:"",week_end_date:"",miles:"",notes:""}),W=q(()=>{const C=[...c.milesEntries];return C.sort((v,_)=>{let K=v[E.value],H=_[E.value];return K>H?R.value==="asc"?1:-1:K<H?R.value==="asc"?-1:1:0}),C}),J=q(()=>Math.ceil(W.value.length/L.value)),Y=q(()=>{const C=(B.value-1)*L.value,v=C+L.value;return W.value.slice(C,v)}),F=q(()=>{const C=[];if(J.value<=5)for(let _=1;_<=J.value;_++)C.push(_);else{let _=Math.max(1,B.value-Math.floor(2.5)),K=Math.min(J.value,_+5-1);K===J.value&&(_=Math.max(1,K-5+1));for(let H=_;H<=K;H++)C.push(H)}return C});function te(C){C<1||C>J.value||(B.value=C)}function oe(C){E.value===C?R.value=R.value==="asc"?"desc":"asc":(E.value=C,R.value="asc"),B.value=1}function de(C=null){if(M.reset(),M.clearErrors(),C){M.id=C.id,M.week_start_date=C.week_start_date,M.week_end_date=C.week_end_date,M.miles=C.miles,M.notes=C.notes;const v=new Date(C.week_start_date),_=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()));_.setUTCDate(_.getUTCDate()+4-(_.getUTCDay()||7));const K=_.getUTCFullYear(),H=Math.ceil(((_-Date.UTC(K,0,1))/864e5+1)/7)+1;M.year=K,M.week_number=H}D.value=!0}function z(){const C=+M.year,v=+M.week_number;if(!C||!v){M.week_start_date="",M.week_end_date="";return}const _=new Date(Date.UTC(C,0,4)),K=_.getUTCDay()||7;_.setUTCDate(_.getUTCDate()+(v-1)*7+(1-K));const H=new Date(_);H.setUTCDate(_.getUTCDate()-1);const ce=new Date(H);ce.setUTCDate(H.getUTCDate()+6),M.week_start_date=H.toISOString().slice(0,10),M.week_end_date=ce.toISOString().slice(0,10)}function re(){const C=M.id?"miles_driven.update":"miles_driven.store",v=M.id?{tenantSlug:c.tenantSlug,milesDriven:M.id}:{tenantSlug:c.tenantSlug};M[M.id?"put":"post"](St(C,v),{preserveScroll:!0,onSuccess:()=>{D.value=!1}})}const ee=h(null);function b(C){ee.value=C,G.value=!0}function se(){if(!ee.value)return;const C="miles_driven.destroy",v={tenantSlug:c.tenantSlug,milesDriven:ee.value.id};M.delete(St(C,v),{preserveScroll:!0,onSuccess:()=>{G.value=!1,ee.value=null}})}function le(C){if(!C)return"";const v=new Date(C);return new Date(v.getTime()+v.getTimezoneOffset()*6e4).toLocaleDateString()}function y(C){return Number(C).toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4})}const N=q(()=>c.permissions.map(C=>C.name));return(C,v)=>(o(),u("div",Pr,[s("div",jr,[v[14]||(v[14]=s("h3",{class:"text-base md:text-xl font-semibold"}," Miles Driven ",-1)),N.value.includes("miles-driven.create")?(o(),w(e(k),{key:0,onClick:v[0]||(v[0]=_=>de()),variant:"default"},{default:a(()=>[t(i,{name:"plus",class:"mr-2 h-4 w-4"}),v[13]||(v[13]=s("span",null,"Add Miles Driven",-1))]),_:1})):x("",!0)]),s("div",Lr,[t(e(be),{class:"w-full table-auto"},{default:a(()=>[t(e(ye),null,{default:a(()=>[t(e(P),{class:"sticky top-0 z-10 border-b bg-background"},{default:a(()=>[t(e(V),{class:"cursor-pointer px-4 py-2 text-left",onClick:v[1]||(v[1]=_=>oe("week_start_date"))},{default:a(()=>[v[15]||(v[15]=r(" Week Start ")),s("span",null,[E.value==="week_start_date"&&R.value==="asc"?(o(),w(i,{key:0,name:"chevron-up"})):E.value==="week_start_date"&&R.value==="desc"?(o(),w(i,{key:1,name:"chevron-down"})):(o(),w(i,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),t(e(V),{class:"cursor-pointer px-4 py-2 text-left",onClick:v[2]||(v[2]=_=>oe("week_end_date"))},{default:a(()=>[v[16]||(v[16]=r(" Week End ")),s("span",null,[E.value==="week_end_date"&&R.value==="asc"?(o(),w(i,{key:0,name:"chevron-up"})):E.value==="week_end_date"&&R.value==="desc"?(o(),w(i,{key:1,name:"chevron-down"})):(o(),w(i,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),t(e(V),{class:"cursor-pointer px-4 py-2 text-left",onClick:v[3]||(v[3]=_=>oe("miles"))},{default:a(()=>[v[17]||(v[17]=r(" Miles ")),s("span",null,[E.value==="miles"&&R.value==="asc"?(o(),w(i,{key:0,name:"chevron-up"})):E.value==="miles"&&R.value==="desc"?(o(),w(i,{key:1,name:"chevron-down"})):(o(),w(i,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),N.value.includes("miles-driven.update")||N.value.includes("miles-driven.delete")?(o(),w(e(V),{key:0,class:"text-center px-4 py-2"},{default:a(()=>v[18]||(v[18]=[r(" Actions ")])),_:1})):x("",!0)]),_:1})]),_:1}),t(e(ke),null,{default:a(()=>[(o(!0),u(A,null,U(Y.value,_=>(o(),w(e(P),{key:_.id,class:"border-b hover:bg-muted/20"},{default:a(()=>[t(e(S),{class:"px-4 py-3"},{default:a(()=>[r(m(le(_.week_start_date)),1)]),_:2},1024),t(e(S),{class:"px-4 py-3"},{default:a(()=>[r(m(le(_.week_end_date)),1)]),_:2},1024),t(e(S),{class:"px-4 py-3"},{default:a(()=>[r(m(y(_.miles)),1)]),_:2},1024),N.value.includes("miles-driven.update")||N.value.includes("miles-driven.delete")?(o(),w(e(S),{key:0,class:"text-center px-4 py-3"},{default:a(()=>[s("div",Wr,[N.value.includes("miles-driven.update")?(o(),w(e(k),{key:0,variant:"outline",size:"sm",onClick:K=>de(_)},{default:a(()=>[t(i,{name:"pencil",class:"mr-1 h-4 w-4"}),v[19]||(v[19]=s("span",null,"Edit",-1))]),_:2},1032,["onClick"])):x("",!0),N.value.includes("miles-driven.delete")?(o(),w(e(k),{key:1,variant:"destructive",size:"sm",onClick:K=>b(_)},{default:a(()=>[t(i,{name:"trash",class:"mr-1 h-4 w-4"}),v[20]||(v[20]=s("span",null,"Delete",-1))]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024)):x("",!0)]),_:2},1024))),128)),C.milesEntries.length?x("",!0):(o(),w(e(P),{key:0},{default:a(()=>[t(e(S),{colspan:5,class:"py-4 text-center text-muted-foreground"},{default:a(()=>v[21]||(v[21]=[r(" No miles driven records found ")])),_:1})]),_:1}))]),_:1})]),_:1})]),J.value>1?(o(),u("div",Qr,[s("div",Hr,[s("div",Yr," Showing "+m(Y.value.length)+" of "+m(C.milesEntries.length)+" entries ",1),s("div",Gr,[t(e(k),{onClick:v[4]||(v[4]=_=>te(B.value-1)),disabled:B.value===1,variant:"ghost",size:"sm"},{default:a(()=>v[22]||(v[22]=[r(" Previous ")])),_:1},8,["disabled"]),(o(!0),u(A,null,U(F.value,_=>(o(),w(e(k),{key:_,onClick:K=>te(_),variant:"ghost",size:"sm",class:$e({"border-primary bg-primary/10 text-primary":B.value===_})},{default:a(()=>[r(m(_),1)]),_:2},1032,["onClick","class"]))),128)),t(e(k),{onClick:v[5]||(v[5]=_=>te(B.value+1)),disabled:B.value===J.value,variant:"ghost",size:"sm"},{default:a(()=>v[23]||(v[23]=[r(" Next ")])),_:1},8,["disabled"])])])])):x("",!0),t(e(fe),{open:D.value,"onUpdate:open":v[10]||(v[10]=_=>D.value=_)},{default:a(()=>[t(e(ue),{class:"sm:max-w-md w-full max-h-[90vh] overflow-auto"},{default:a(()=>[t(e(pe),null,{default:a(()=>[t(e(ve),null,{default:a(()=>[r(m(e(M).id?"Edit Miles Driven":"Add Miles Driven"),1)]),_:1}),t(e(me),{class:"text-muted-foreground"},{default:a(()=>[r(m(e(M).id?"Update this record.":"Fill in the new miles driven record."),1)]),_:1})]),_:1}),s("form",{onSubmit:Ee(re,["prevent"]),class:"grid gap-4 py-4"},[s("div",Kr,[s("div",null,[t(e(I),{for:"year"},{default:a(()=>v[24]||(v[24]=[r("Year")])),_:1}),t(e(Z),{id:"year",type:"number",modelValue:e(M).year,"onUpdate:modelValue":v[6]||(v[6]=_=>e(M).year=_),modelModifiers:{number:!0},min:"2000",max:"2100",onInput:z},null,8,["modelValue"])]),s("div",null,[t(e(I),{for:"week_number"},{default:a(()=>v[25]||(v[25]=[r("Week #")])),_:1}),t(e(Z),{id:"week_number",type:"number",modelValue:e(M).week_number,"onUpdate:modelValue":v[7]||(v[7]=_=>e(M).week_number=_),modelModifiers:{number:!0},min:"1",max:"53",onInput:z},null,8,["modelValue"])])]),e(M).week_start_date?(o(),u("div",Zr,[s("div",null,[t(e(I),null,{default:a(()=>v[26]||(v[26]=[r("Start (Sun)")])),_:1}),s("p",Xr,m(le(e(M).week_start_date)),1)]),s("div",null,[t(e(I),null,{default:a(()=>v[27]||(v[27]=[r("End (Sat)")])),_:1}),s("p",Jr,m(le(e(M).week_end_date)),1)])])):x("",!0),s("div",null,[t(e(I),{for:"miles"},{default:a(()=>v[28]||(v[28]=[r("Miles")])),_:1}),t(e(Z),{id:"miles",modelValue:e(M).miles,"onUpdate:modelValue":v[8]||(v[8]=_=>e(M).miles=_),type:"number",step:"0.0001",min:"0",max:"999999.9999"},null,8,["modelValue"])]),t(e(Se),{class:"mt-4"},{default:a(()=>[t(e(k),{variant:"outline",type:"button",onClick:v[9]||(v[9]=_=>D.value=!1)},{default:a(()=>v[29]||(v[29]=[r(" Cancel ")])),_:1}),t(e(k),{type:"submit",disabled:e(M).processing},{default:a(()=>v[30]||(v[30]=[r("Submit")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),t(e(fe),{open:G.value,"onUpdate:open":v[12]||(v[12]=_=>G.value=_)},{default:a(()=>[t(e(ue),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[t(e(pe),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(ve),{class:"text-lg sm:text-xl"},{default:a(()=>v[31]||(v[31]=[r("Confirm Deletion")])),_:1}),t(e(me),{class:"text-xs sm:text-sm"},{default:a(()=>v[32]||(v[32]=[r(" Are you sure you want to delete this miles driven record? This action cannot be undone. ")])),_:1})]),_:1}),t(e(Se),{class:"px-4 sm:px-6"},{default:a(()=>[t(e(k),{type:"button",onClick:v[11]||(v[11]=_=>G.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>v[33]||(v[33]=[r(" Cancel ")])),_:1}),t(e(k),{type:"button",onClick:se,variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>v[34]||(v[34]=[r(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),to={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},so={class:"border-b"},lo={class:"flex justify-center space-x-8 px-0 pt-4"},ao={key:0,class:"flex justify-center items-center p-12"},no={key:1,class:"p-0"},Uo=et({__name:"AssetMaintenance",props:{entries:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},repairOrders:{type:Object,default:()=>({data:[],links:[]})},dateRange:{type:Object,default:null},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},dateFilter:{type:String,default:"yesterday"},tenantSlug:String,SuperAdmin:Boolean,perPage:{type:Number,default:10},openedComponent:{type:String,default:"repairOrders"},milesEntries:Array,permissions:Array},setup(O){const c=O,D=h(!1),E=h(""),R=h(""),B=h(c.openedComponent||"trucks"),L=q(()=>[{title:c.tenantSlug?"Dashboard":"Admin Dashboard",href:c.tenantSlug?route("dashboard",{tenantSlug:c.tenantSlug}):route("admin.dashboard")},{title:"Asset Maintenance",href:"#"}]),G=q(()=>B.value==="trucks"?Il:B.value==="milesDriven"?eo:qr),M=q(()=>c.permissions.map(Y=>Y.name)),W=q(()=>B.value==="trucks"?{entries:c.entries,tenantSlug:c.tenantSlug,SuperAdmin:c.SuperAdmin,tenants:c.tenants,trucks:c.trucks,vendors:c.vendors,areasOfConcern:c.areasOfConcern,permissions:c.permissions}:B.value==="milesDriven"?{milesEntries:c.milesEntries,tenantSlug:c.tenantSlug,permissions:c.permissions}:{repairOrders:c.repairOrders,tenantSlug:c.tenantSlug,SuperAdmin:c.SuperAdmin,tenants:c.tenants,trucks:c.trucks,vendors:c.vendors,areasOfConcern:c.areasOfConcern,dateRange:c.dateRange,woStatuses:c.woStatuses,weekNumber:c.weekNumber,startWeekNumber:c.startWeekNumber,endWeekNumber:c.endWeekNumber,year:c.year,canceledQSInvoices:c.canceledQSInvoices,outstandingInvoices:c.outstandingInvoices,workOrdersByTruck:c.workOrdersByTruck,workOrderByAreasOfConcern:c.workOrderByAreasOfConcern,filters:c.filters,dateFilter:c.dateFilter,perPage:c.perPage,permissions:c.permissions});function J(Y){D.value=!0,B.value=Y;const F=new URL(window.location.href);F.search="",F.searchParams.set("openedComponent",Y),window.history.replaceState({},"",F.href),setTimeout(()=>{D.value=!1},300)}return(Y,F)=>(o(),w(Pt,{breadcrumbs:L.value,tenantSlug:O.tenantSlug,permissions:c.permissions},{default:a(()=>[t(e(qt),{title:"Asset Maintenance"}),s("div",to,[E.value?(o(),w(e(Ue),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Me),null,{default:a(()=>F[3]||(F[3]=[r("Success")])),_:1}),t(e(Oe),null,{default:a(()=>[r(m(E.value),1)]),_:1})]),_:1})):x("",!0),R.value?(o(),w(e(Ue),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:a(()=>[t(e(Me),null,{default:a(()=>F[4]||(F[4]=[r("Error")])),_:1}),t(e(Oe),null,{default:a(()=>[r(m(R.value),1)]),_:1})]),_:1})):x("",!0),F[9]||(F[9]=s("div",{class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},[s("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Asset Maintenance "),s("div",{class:"flex flex-wrap gap-3 mt-2 sm:mt-0"})],-1)),t(e(_e),{class:"shadow-sm border bg-card"},{default:a(()=>[t(e(he),{class:"p-0"},{default:a(()=>[s("div",so,[s("div",lo,[M.value.includes("repair-orders.view")?(o(),w(e(k),{key:0,onClick:F[0]||(F[0]=te=>J("repairOrders")),variant:"ghost",class:$e([[B.value==="repairOrders"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-0 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:a(()=>[t(i,{name:"clipboardList",class:"mr-2 h-4 w-4"}),F[5]||(F[5]=s("span",null,"Repair Orders",-1))]),_:1},8,["class"])):x("",!0),M.value.includes("miles-driven.view")?(o(),w(e(k),{key:1,onClick:F[1]||(F[1]=te=>J("milesDriven")),variant:"ghost",class:$e([[B.value==="milesDriven"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:a(()=>[t(i,{name:"gauge",class:"mr-2 h-4 w-4"}),F[6]||(F[6]=s("span",null,"Miles Driven",-1))]),_:1},8,["class"])):x("",!0),M.value.includes("trucks.view")?(o(),w(e(k),{key:2,onClick:F[2]||(F[2]=te=>J("trucks")),variant:"ghost",class:$e([[B.value==="trucks"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:a(()=>[t(i,{name:"truck",class:"mr-2 h-4 w-4"}),F[7]||(F[7]=s("span",null,"Trucks",-1))]),_:1},8,["class"])):x("",!0)])]),D.value?(o(),u("div",ao,F[8]||(F[8]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):(o(),u("div",no,[(o(),w(jt(G.value),Lt(Wt(W.value)),null,16))]))]),_:1})]),_:1})])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}});export{Uo as default};
