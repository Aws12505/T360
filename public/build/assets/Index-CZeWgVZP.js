import{J as He,E as ye,a7 as v,N as u,an as o,a6 as D,a1 as t,O as n,ae as d,a4 as F,ao as M,I as a,a9 as $,aa as P,af as x,a8 as we,B as w,A as te,a0 as Ge,am as Je,L as U,aM as Q,aN as Qe}from"./vendor-xy97mY0-.js";import{C as R,m as he,W as T}from"./vendor-vue-BRPOKWly.js";import{_ as Ke}from"./AppLayout.vue_vue_type_script_setup_true_lang-DpiYyyA7.js";import{_ as c}from"./Button.vue_vue_type_script_setup_true_lang-BW5qRT-D.js";import{_ as le,a as oe,b as ne,c as ae,d as se,e as ue}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CL_BLXsN.js";import{_,a as O}from"./Label.vue_vue_type_script_setup_true_lang-BAsbsLwI.js";import{_ as Xe}from"./Checkbox.vue_vue_type_script_setup_true_lang-D9r_l7BE.js";import{_ as N}from"./Icon.vue_vue_type_script_setup_true_lang-ChfPiT8z.js";import{_ as Ze,a as et,b as me,c as fe,d as tt,e as de}from"./TableRow.vue_vue_type_script_setup_true_lang-B3yArJuB.js";import{_ as ve}from"./Card.vue_vue_type_script_setup_true_lang-DYwS7A8-.js";import{_ as lt,a as ot}from"./CardTitle.vue_vue_type_script_setup_true_lang-Wjlz8bZz.js";import{_ as pe}from"./CardContent.vue_vue_type_script_setup_true_lang-DuDvULMo.js";import{_ as xe,a as ke,b as Ce}from"./AlertDescription.vue_vue_type_script_setup_true_lang-D3Lka1oR.js";import"./vendor-d3-DpcuoaSC.js";import"./vendor-axios-t--hEgTQ.js";import"./vendor-lodash-DCUXXPMP.js";import"./utils-OMMm8ro2.js";import"./vendor-ui-CqtnUFeu.js";import"./app-B87I_JYh.js";import"./vendor-icons-CrF1H9yF.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-evYd1tA8.js";const nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},at={key:0,class:"col-span-full"},st={class:"relative"},dt=["value"],rt={class:"col-span-full"},it={class:"relative"},ut={class:"relative"},ft={class:"relative"},mt=["value"],vt={class:"relative"},pt={class:"flex items-center space-x-2"},yt={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},ct=He({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(y,{emit:f}){var A,V,z,h,S,B,Y;const k=y,j=f,m=R({id:(A=k.delay)==null?void 0:A.id,tenant_id:k.isSuperAdmin?(V=k.delay)==null?void 0:V.tenant_id:null,date:((z=k.delay)==null?void 0:z.date)||"",driver_name:((h=k.delay)==null?void 0:h.driver_name)||"",delay_type:((S=k.delay)==null?void 0:S.delay_type)||"origin",delay_category:((B=k.delay)==null?void 0:B.delay_category)||"1_120",delay_code_id:((Y=k.delay)==null?void 0:Y.delay_code_id)||null,disputed:k.delay&&k.delay.disputed!==null?parseInt(k.delay.disputed)===1:!1,driver_controllable:k.delay&&k.delay.driver_controllable!==null?parseInt(k.delay.driver_controllable)===1:null});ye(()=>k.delay,g=>{g?(m.id=g.id,m.tenant_id=g.tenant_id,m.date=g.date,m.driver_name=g.driver_name,m.delay_type=g.delay_type,m.delay_category=g.delay_category,m.delay_code_id=g.delay_code_id,m.disputed=g.disputed!==null?parseInt(g.disputed)===1:!1,m.driver_controllable=g.driver_controllable!==null?parseInt(g.driver_controllable)===1:null):m.reset()},{immediate:!0});const I=()=>{const g=!!m.id,r=k.isSuperAdmin?g?"ontime.update.admin":"ontime.store.admin":g?"ontime.update":"ontime.store",p=k.isSuperAdmin?g?{delay:m.id}:{}:g?{tenantSlug:k.tenantSlug,delay:m.id}:{tenantSlug:k.tenantSlug};m[g?"put":"post"](route(r,p),{onSuccess:()=>j("close")})};return(g,r)=>(u(),v("form",{onSubmit:we(I,["prevent"]),class:"space-y-6"},[o("div",nt,[y.isSuperAdmin?(u(),v("div",at,[t(_,null,{default:n(()=>r[9]||(r[9]=[d("Company Name")])),_:1}),o("div",st,[F(o("select",{"onUpdate:modelValue":r[0]||(r[0]=p=>a(m).tenant_id=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[r[10]||(r[10]=o("option",{value:null,disabled:""},"Select Company",-1)),(u(!0),v($,null,P(y.tenants,p=>(u(),v("option",{key:p.id,value:p.id},x(p.name),9,dt))),128))],512),[[M,a(m).tenant_id]]),r[11]||(r[11]=o("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[o("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):D("",!0),o("div",rt,[t(_,null,{default:n(()=>r[12]||(r[12]=[d("Date")])),_:1}),t(O,{type:"date",modelValue:a(m).date,"onUpdate:modelValue":r[1]||(r[1]=p=>a(m).date=p),class:"w-full"},null,8,["modelValue"])]),o("div",null,[t(_,null,{default:n(()=>r[13]||(r[13]=[d("Driver Name")])),_:1}),t(O,{modelValue:a(m).driver_name,"onUpdate:modelValue":r[2]||(r[2]=p=>a(m).driver_name=p),class:"w-full"},null,8,["modelValue"])]),o("div",null,[t(_,null,{default:n(()=>r[14]||(r[14]=[d("Delay Type")])),_:1}),o("div",it,[F(o("select",{"onUpdate:modelValue":r[3]||(r[3]=p=>a(m).delay_type=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},r[15]||(r[15]=[o("option",{value:"origin"},"Origin",-1),o("option",{value:"destination"},"Destination",-1)]),512),[[M,a(m).delay_type]]),r[16]||(r[16]=o("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[o("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),o("div",null,[t(_,null,{default:n(()=>r[17]||(r[17]=[d("Delay Category")])),_:1}),o("div",ut,[F(o("select",{"onUpdate:modelValue":r[4]||(r[4]=p=>a(m).delay_category=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},r[18]||(r[18]=[o("option",{value:"1_120"},"1–120 min",-1),o("option",{value:"121_600"},"121–600 min",-1),o("option",{value:"601_plus"},"601+ min",-1)]),512),[[M,a(m).delay_category]]),r[19]||(r[19]=o("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[o("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),o("div",null,[t(_,null,{default:n(()=>r[20]||(r[20]=[d("Delay Code")])),_:1}),o("div",ft,[F(o("select",{"onUpdate:modelValue":r[5]||(r[5]=p=>a(m).delay_code_id=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(u(!0),v($,null,P(y.delayCodes,p=>(u(),v("option",{key:p.id,value:p.id},x(p.code),9,mt))),128))],512),[[M,a(m).delay_code_id]]),r[21]||(r[21]=o("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[o("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),o("div",null,[t(_,null,{default:n(()=>r[22]||(r[22]=[d("Driver Controllable")])),_:1}),o("div",vt,[F(o("select",{"onUpdate:modelValue":r[6]||(r[6]=p=>a(m).driver_controllable=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},r[23]||(r[23]=[o("option",{value:null},"N/A",-1),o("option",{value:!0},"Yes",-1),o("option",{value:!1},"No",-1)]),512),[[M,a(m).driver_controllable]]),r[24]||(r[24]=o("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[o("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),o("div",pt,[t(Xe,{checked:a(m).disputed,"onUpdate:checked":r[7]||(r[7]=p=>a(m).disputed=p),id:"disputed"},null,8,["checked"]),t(_,{for:"disputed"},{default:n(()=>r[25]||(r[25]=[d("Disputed")])),_:1})])]),o("div",yt,[t(c,{type:"button",onClick:r[8]||(r[8]=p=>j("close")),variant:"outline",class:"w-full sm:w-auto"},{default:n(()=>r[26]||(r[26]=[d(" Cancel ")])),_:1}),t(c,{type:"submit",disabled:a(m).processing,class:"w-full sm:w-auto"},{default:n(()=>[d(x(a(m).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),gt={class:"max-w-7xl mx-auto p-6 space-y-8"},bt={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},xt={class:"flex flex-wrap gap-3"},kt={class:"relative"},Ct={key:0,class:"absolute right-0 mt-1 w-48 bg-background rounded-md shadow-lg border z-10"},wt={class:"py-1"},_t={class:"cursor-pointer block px-4 py-2 text-sm hover:bg-muted"},St=["href"],Dt=["action"],$t={class:"flex flex-col gap-2"},At={class:"flex flex-wrap gap-2"},Nt={key:0,class:"text-sm text-muted-foreground"},Ut={key:0},Ft={key:1},Vt={key:2},Tt={class:"flex flex-col justify-between gap-4"},Mt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full"},zt=["value"],Bt={class:"flex justify-end"},Et={class:"overflow-x-auto"},Lt={class:"flex items-center justify-center"},Pt=["checked"],jt={class:"flex items-center"},Rt={key:0,class:"ml-2"},Ot={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},It={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Yt={key:1,class:"ml-2 opacity-50"},Wt=["value"],qt={key:0,class:"ml-1 text-xs text-red-500"},Ht={class:"flex space-x-2"},Gt={key:0,class:"bg-muted/20 px-4 py-3 border-t"},Jt={class:"flex justify-between items-center"},Qt={class:"text-sm text-muted-foreground"},ht={class:"flex items-center gap-4"},Kt={class:"flex items-center gap-2"},Xt={class:"flex"},Zt=["innerHTML"],el={class:"mt-4 space-y-4"},tl={class:"flex items-center justify-between"},ll={class:"max-h-[400px] overflow-y-auto"},ol={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},nl={key:1,class:"space-y-2"},al=["onClick"],sl={class:"font-medium"},dl={key:0,class:"ml-2 text-xs text-red-500"},rl={key:0,class:"text-sm text-muted-foreground mt-1"},il={class:"opacity-0 group-hover:opacity-100 transition-opacity"},ul={key:0,class:"border rounded-md p-4 space-y-4"},fl={class:"text-sm font-medium"},ml={class:"space-y-3"},vl={class:"flex justify-end space-x-2"},Bl={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"full"}},setup(y){const f=y,k=[{title:f.tenantSlug?"Dashboard":"Admin Dashboard",href:f.tenantSlug?route("dashboard",{tenantSlug:f.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:f.tenantSlug?route("ontime.index",{tenantSlug:f.tenantSlug}):route("ontime.index.admin")}],j=w(!1),m=w(!1),I=w(null),A=w(""),V=w(""),z=w(!1),h=w(null),S=w([]),B=w(!1),Y=w(null),g=w(!1),r=w(null),p=w({code:"",description:""}),W=w(!1),ce=w(null),q=w("date"),H=w("desc"),b=w({search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}),re=["date","delay_type","driver_name","penalty","delay_code","disputed","driver_controllable"],G=te(()=>{let s=[...f.delays.data];if(b.value.search){const e=b.value.search.toLowerCase();s=s.filter(l=>{var i,C,L,ee;return((i=l.driver_name)==null?void 0:i.toLowerCase().includes(e))||((C=l.delay_type)==null?void 0:C.toLowerCase().includes(e))||((ee=(L=l.delay_code)==null?void 0:L.code)==null?void 0:ee.toLowerCase().includes(e))})}if(b.value.dateFrom&&(s=s.filter(e=>e.date&&e.date>=b.value.dateFrom)),b.value.dateTo&&(s=s.filter(e=>e.date&&e.date<=b.value.dateTo)),b.value.delayCode&&(s=s.filter(e=>{var l;return((l=e.delay_code)==null?void 0:l.id)===parseInt(b.value.delayCode)})),b.value.disputed!==""){const e=b.value.disputed==="true";s=s.filter(l=>l.disputed===e)}if(b.value.controllable!=="")if(b.value.controllable==="null")s=s.filter(e=>e.driver_controllable===null);else{const e=b.value.controllable==="true";s=s.filter(l=>l.driver_controllable===e)}return s.sort((e,l)=>{var L,ee;let i,C;return q.value==="delay_code"?(i=((L=e.delay_code)==null?void 0:L.code)||"",C=((ee=l.delay_code)==null?void 0:ee.code)||""):(i=e[q.value],C=l[q.value]),i===null?1:C===null?-1:(typeof i=="string"&&(i=i.toLowerCase(),C=C.toLowerCase()),i<C?H.value==="asc"?-1:1:i>C?H.value==="asc"?1:-1:0)}),s}),_e=te(()=>f.delay_codes.filter(s=>!s.deleted_at));function Se(s){q.value===s?H.value=H.value==="asc"?"desc":"asc":(q.value=s,H.value="asc")}function J(){}function De(){b.value={search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}}const K=w(f.delays.per_page||10),E=w(f.dateFilter||"full");function $e(){const s=f.tenantSlug?route("ontime.index",{tenantSlug:f.tenantSlug}):route("ontime.index.admin");T.get(s,{dateFilter:E.value,perPage:K.value},{preserveState:!0})}function X(s){E.value=s;const e=f.tenantSlug?route("ontime.index",{tenantSlug:f.tenantSlug}):route("ontime.index.admin");T.get(e,{dateFilter:s,perPage:K.value},{preserveState:!0})}function Ae(s){if(s){const e=new URL(s);e.searchParams.set("perPage",K.value),T.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["delays"]})}}function ie(s){if(!s)return"";const e=s.split("-");if(e.length!==3)return s;const[l,i,C]=e;return`${Number(i)}/${Number(C)}/${l}`}const ge=(s=null)=>{I.value=s,j.value=!0},Ne=s=>{h.value=s,z.value=!0},Ue=()=>{m.value=!0,g.value=!1,r.value=null},Fe=()=>{p.value={code:"",description:""},r.value=null,g.value=!0},Ve=s=>{p.value={code:s.code,description:s.description||""},r.value=s.id,g.value=!0},Te=()=>{g.value=!1,r.value=null},be=s=>{ce.value=s,W.value=!0},Me=s=>{const e=R({}),l=f.isSuperAdmin?"delay_codes.destroy.admin":"delay_codes.destroy",i=f.isSuperAdmin?{id:s}:{tenantSlug:f.tenantSlug,delay_code:s};e.delete(route(l,i),{onSuccess:()=>{A.value="Delay code deleted successfully.",W.value=!1,T.reload({only:["delay_codes"]})},onError:C=>{console.error(C)}})},ze=()=>{const s=R({code:p.value.code,description:p.value.description}),e=r.value?f.isSuperAdmin?"delay_codes.update.admin":"delay_codes.update":f.isSuperAdmin?"delay_codes.store.admin":"delay_codes.store",l=r.value?f.isSuperAdmin?{id:r.value}:{tenantSlug:f.tenantSlug,id:r.value}:f.isSuperAdmin?{}:{tenantSlug:f.tenantSlug};(r.value?s.put:s.post).call(s,route(e,l),{onSuccess:()=>{A.value=r.value?"Delay code updated successfully.":"Delay code created successfully.",g.value=!1,r.value=null,T.reload({only:["delay_codes"]})},onError:C=>{console.error(C)}})},Be=s=>{R({}).post(route(f.isSuperAdmin?"delay_codes.restore.admin":"delay_codes.restore",{id:s}),{onSuccess:()=>{A.value="Delay code restored successfully.",T.reload({only:["delay_codes"]})},onError:l=>{console.error(l)}})},Ee=s=>{R({}).delete(route(f.isSuperAdmin?"delay_codes.forceDelete.admin":"delay_codes.forceDelete",{id:s}),{onSuccess:()=>{A.value="Delay code permanently deleted successfully.",T.reload({only:["delay_codes"]})},onError:l=>{console.error(l)}})},Le=s=>{const e=R({}),l=f.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",i=f.isSuperAdmin?{delay:s}:{tenantSlug:f.tenantSlug,delay:s};e.delete(route(l,i),{preserveScroll:!0,onSuccess:()=>{A.value="Delay record deleted successfully.",z.value=!1}})};ye(A,s=>{s&&setTimeout(()=>{A.value=""},5e3)}),f.flash&&f.flash.error&&(V.value=f.flash.error),ye(V,s=>{s&&setTimeout(()=>{V.value=""},5e3)});const Pe=te(()=>G.value.length>0&&S.value.length===G.value.length);function je(s){s.target.checked?S.value=G.value.map(e=>e.id):S.value=[]}function Re(){S.value.length>0&&(B.value=!0)}function Oe(){const s=R({ids:S.value}),e=f.isSuperAdmin?"ontime.destroyBulk.admin":"ontime.destroyBulk",l=f.isSuperAdmin?{}:{tenantSlug:f.tenantSlug};s.delete(route(e,l),{preserveScroll:!0,onSuccess:()=>{A.value=`${S.value.length} delay records deleted successfully.`,S.value=[],B.value=!1,T.reload()},onError:i=>{console.error(i)}})}function Ie(s){const e=s.target.files[0];if(!e)return;const l=new FormData;l.append("csv_file",e);const i=f.isSuperAdmin?route("ontime.import.admin"):route("ontime.import",{tenantSlug:f.tenantSlug});T.post(i,l,{onSuccess:()=>{A.value="Delays imported successfully",s.target.value=""},onError:C=>{console.error(C),s.target.value=""}})}function Ye(){if(f.delays.data.length===0){V.value="No delay data found to export.";return}Y.value&&Y.value.submit()}const We=te(()=>f.tenantSlug?route("ontime.export",{tenantSlug:f.tenantSlug}):route("ontime.export.admin")),Z=w(!1),qe=te(()=>"/storage/upload-data-temps/Delays Template.csv");return Ge(()=>{const s=e=>{Z.value&&!e.target.closest(".relative")&&(Z.value=!1)};document.addEventListener("click",s),Je(()=>{document.removeEventListener("click",s)})}),(s,e)=>(u(),U(Ke,{breadcrumbs:k,tenantSlug:y.tenantSlug},{default:n(()=>[t(a(he),{title:"On-Time"}),o("div",gt,[A.value?(u(),U(a(xe),{key:0,variant:"success"},{default:n(()=>[t(a(ke),null,{default:n(()=>e[32]||(e[32]=[d("Success")])),_:1}),t(a(Ce),null,{default:n(()=>[d(x(A.value),1)]),_:1})]),_:1})):D("",!0),V.value?(u(),U(a(xe),{key:1,variant:"destructive"},{default:n(()=>[t(a(ke),null,{default:n(()=>e[33]||(e[33]=[d("Error")])),_:1}),t(a(Ce),null,{default:n(()=>[d(x(V.value),1)]),_:1})]),_:1})):D("",!0),o("div",bt,[e[39]||(e[39]=o("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"On-Time Management",-1)),o("div",xt,[t(c,{onClick:e[0]||(e[0]=l=>ge()),variant:"default"},{default:n(()=>[t(N,{name:"plus",class:"mr-2 h-4 w-4"}),e[34]||(e[34]=d(" Add Delay "))]),_:1}),S.value.length>0?(u(),U(c,{key:0,onClick:e[1]||(e[1]=l=>Re()),variant:"destructive"},{default:n(()=>[t(N,{name:"trash",class:"mr-2 h-4 w-4"}),d(" Delete Selected ("+x(S.value.length)+") ",1)]),_:1})):D("",!0),o("div",kt,[t(c,{onClick:e[2]||(e[2]=l=>Z.value=!Z.value),variant:"secondary"},{default:n(()=>[t(N,{name:"upload",class:"mr-2 h-4 w-4"}),e[35]||(e[35]=d(" Upload CSV ")),t(N,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),Z.value?(u(),v("div",Ct,[o("div",wt,[o("label",_t,[e[36]||(e[36]=o("span",null,"Upload CSV File",-1)),o("input",{type:"file",class:"hidden",onChange:Ie,accept:".csv"},null,32)]),o("a",{href:qe.value,download:"Delays Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,St)])])):D("",!0)]),t(c,{onClick:we(Ye,["prevent"]),variant:"outline"},{default:n(()=>[t(N,{name:"download",class:"mr-2 h-4 w-4"}),e[37]||(e[37]=d(" Download CSV "))]),_:1}),y.isSuperAdmin?(u(),U(c,{key:1,onClick:e[3]||(e[3]=l=>Ue()),variant:"outline"},{default:n(()=>[t(N,{name:"settings",class:"mr-2 h-4 w-4"}),e[38]||(e[38]=d(" Manage Delay Codes "))]),_:1})):D("",!0)])]),o("form",{ref_key:"exportForm",ref:Y,action:We.value,method:"GET",class:"hidden"},null,8,Dt),t(a(ve),null,{default:n(()=>[t(a(pe),{class:"p-4"},{default:n(()=>[o("div",$t,[o("div",At,[t(c,{onClick:e[4]||(e[4]=l=>X("yesterday")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":E.value==="yesterday"})},{default:n(()=>e[40]||(e[40]=[d(" Yesterday ")])),_:1},8,["class"]),t(c,{onClick:e[5]||(e[5]=l=>X("current-week")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":E.value==="current-week"})},{default:n(()=>e[41]||(e[41]=[d(" Current Week ")])),_:1},8,["class"]),t(c,{onClick:e[6]||(e[6]=l=>X("6w")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":E.value==="6w"})},{default:n(()=>e[42]||(e[42]=[d(" 6 Weeks ")])),_:1},8,["class"]),t(c,{onClick:e[7]||(e[7]=l=>X("quarterly")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":E.value==="quarterly"})},{default:n(()=>e[43]||(e[43]=[d(" Quarterly ")])),_:1},8,["class"]),t(c,{onClick:e[8]||(e[8]=l=>X("full")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":E.value==="full"})},{default:n(()=>e[44]||(e[44]=[d(" Full ")])),_:1},8,["class"])]),y.dateRange?(u(),v("div",Nt,[E.value==="yesterday"&&y.dateRange.start?(u(),v("span",Ut," Showing data from "+x(ie(y.dateRange.start)),1)):y.dateRange.start&&y.dateRange.end?(u(),v("span",Ft," Showing data from "+x(ie(y.dateRange.start))+" to "+x(ie(y.dateRange.end)),1)):(u(),v("span",Vt,x(y.dateRange.label),1))])):D("",!0)])]),_:1})]),_:1}),t(a(ve),null,{default:n(()=>[t(a(lt),null,{default:n(()=>[t(a(ot),null,{default:n(()=>e[45]||(e[45]=[d("Filters")])),_:1})]),_:1}),t(a(pe),null,{default:n(()=>[o("div",Tt,[o("div",Mt,[o("div",null,[t(a(_),{for:"search"},{default:n(()=>e[46]||(e[46]=[d("Search")])),_:1}),t(a(O),{id:"search",modelValue:b.value.search,"onUpdate:modelValue":e[9]||(e[9]=l=>b.value.search=l),type:"text",placeholder:"Search by driver or type...",onInput:J},null,8,["modelValue"])]),o("div",null,[t(a(_),{for:"dateFrom"},{default:n(()=>e[47]||(e[47]=[d("Date From")])),_:1}),t(a(O),{id:"dateFrom",modelValue:b.value.dateFrom,"onUpdate:modelValue":e[10]||(e[10]=l=>b.value.dateFrom=l),type:"date",onChange:J},null,8,["modelValue"])]),o("div",null,[t(a(_),{for:"dateTo"},{default:n(()=>e[48]||(e[48]=[d("Date To")])),_:1}),t(a(O),{id:"dateTo",modelValue:b.value.dateTo,"onUpdate:modelValue":e[11]||(e[11]=l=>b.value.dateTo=l),type:"date",onChange:J},null,8,["modelValue"])]),o("div",null,[t(a(_),{for:"delayCode"},{default:n(()=>e[49]||(e[49]=[d("Delay Code")])),_:1}),F(o("select",{id:"delayCode","onUpdate:modelValue":e[12]||(e[12]=l=>b.value.delayCode=l),onChange:J,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[50]||(e[50]=o("option",{value:""},"All Codes",-1)),(u(!0),v($,null,P(y.delay_codes,l=>(u(),v("option",{key:l.id,value:l.id},x(l.code),9,zt))),128))],544),[[M,b.value.delayCode]])]),o("div",null,[t(a(_),{for:"disputed"},{default:n(()=>e[51]||(e[51]=[d("Disputed Status")])),_:1}),F(o("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=l=>b.value.disputed=l),onChange:J,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[52]||(e[52]=[o("option",{value:""},"All",-1),o("option",{value:"true"},"Disputed",-1),o("option",{value:"false"},"Not Disputed",-1)]),544),[[M,b.value.disputed]])]),o("div",null,[t(a(_),{for:"controllable"},{default:n(()=>e[53]||(e[53]=[d("Driver Controllable")])),_:1}),F(o("select",{id:"controllable","onUpdate:modelValue":e[14]||(e[14]=l=>b.value.controllable=l),onChange:J,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[54]||(e[54]=[o("option",{value:""},"All",-1),o("option",{value:"true"},"Yes",-1),o("option",{value:"false"},"No",-1),o("option",{value:"null"},"N/A",-1)]),544),[[M,b.value.controllable]])])]),o("div",Bt,[t(c,{onClick:De,variant:"ghost",size:"sm"},{default:n(()=>[t(N,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[55]||(e[55]=d(" Reset Filters "))]),_:1})])])]),_:1})]),_:1}),t(a(ve),null,{default:n(()=>[t(a(pe),{class:"p-0"},{default:n(()=>[o("div",Et,[t(a(Ze),{class:"relative h-[500px] overflow-auto"},{default:n(()=>[t(a(et),null,{default:n(()=>[t(a(me),{class:"sticky top-0 bg-background border-b z-10 hover:bg-background"},{default:n(()=>[t(a(fe),{class:"w-[50px]"},{default:n(()=>[o("div",Lt,[o("input",{type:"checkbox",onChange:je,checked:Pe.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Pt)])]),_:1}),y.isSuperAdmin?(u(),U(a(fe),{key:0},{default:n(()=>e[56]||(e[56]=[d("Company Name")])),_:1})):D("",!0),(u(),v($,null,P(re,l=>t(a(fe),{key:l,class:"cursor-pointer",onClick:i=>Se(l)},{default:n(()=>[o("div",jt,[d(x(l.replace(/_/g," ").split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "))+" ",1),q.value===l?(u(),v("div",Rt,[H.value==="asc"?(u(),v("svg",Ot,e[57]||(e[57]=[o("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(u(),v("svg",It,e[58]||(e[58]=[o("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(u(),v("div",Yt,e[59]||(e[59]=[o("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M8 10l4-4 4 4"}),o("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),t(a(fe),null,{default:n(()=>e[60]||(e[60]=[d("Actions")])),_:1})]),_:1})]),_:1}),t(a(tt),null,{default:n(()=>[G.value.length===0?(u(),U(a(me),{key:0},{default:n(()=>[t(a(de),{colspan:y.isSuperAdmin?re.length+2:re.length+1,class:"text-center py-8"},{default:n(()=>e[61]||(e[61]=[d(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):D("",!0),(u(!0),v($,null,P(G.value,l=>(u(),U(a(me),{key:l.id,class:"hover:bg-muted/50"},{default:n(()=>[t(a(de),{class:"text-center"},{default:n(()=>[F(o("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[15]||(e[15]=i=>S.value=i),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Wt),[[Qe,S.value]])]),_:2},1024),y.isSuperAdmin?(u(),U(a(de),{key:0},{default:n(()=>{var i;return[d(x(((i=l.tenant)==null?void 0:i.name)||"—"),1)]}),_:2},1024)):D("",!0),(u(),v($,null,P(re,i=>t(a(de),{key:i,class:"whitespace-nowrap"},{default:n(()=>{var C,L;return[i==="date"?(u(),v($,{key:0},[d(x(ie(l[i])),1)],64)):i==="disputed"?(u(),v($,{key:1},[d(x(l[i]?"Yes":"No"),1)],64)):i==="driver_controllable"?(u(),v($,{key:2},[d(x(l[i]===null?"N/A":l[i]?"Yes":"No"),1)],64)):i==="delay_code"?(u(),v($,{key:3},[d(x(((C=l.delay_code)==null?void 0:C.code)||"—")+" ",1),(L=l.delay_code)!=null&&L.deleted_at?(u(),v("span",qt,"(Deleted Code)")):D("",!0)],64)):(u(),v($,{key:4},[d(x(l[i]),1)],64))]}),_:2},1024)),64)),t(a(de),null,{default:n(()=>[o("div",Ht,[t(c,{onClick:i=>ge(l),variant:"warning",size:"sm"},{default:n(()=>[t(N,{name:"pencil",class:"mr-1 h-4 w-4"}),e[62]||(e[62]=d(" Edit "))]),_:2},1032,["onClick"]),t(c,{onClick:i=>Ne(l.id),variant:"destructive",size:"sm"},{default:n(()=>[t(N,{name:"trash",class:"mr-1 h-4 w-4"}),e[63]||(e[63]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),y.delays.links?(u(),v("div",Gt,[o("div",Jt,[o("div",Qt," Showing "+x(G.value.length)+" of "+x(y.delays.data.length)+" entries ",1),o("div",ht,[o("div",Kt,[t(a(_),{for:"perPage",class:"text-sm"},{default:n(()=>e[64]||(e[64]=[d("Per page:")])),_:1}),F(o("select",{id:"perPage","onUpdate:modelValue":e[16]||(e[16]=l=>K.value=l),onChange:$e,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[65]||(e[65]=[o("option",{value:"10"},"10",-1),o("option",{value:"25"},"25",-1),o("option",{value:"50"},"50",-1),o("option",{value:"100"},"100",-1)]),544),[[M,K.value]])]),o("div",Xt,[(u(!0),v($,null,P(y.delays.links,l=>(u(),U(c,{key:l.label,onClick:i=>Ae(l.url),disabled:!l.url,variant:"ghost",size:"sm",class:Q(["mx-1",{"bg-primary/10 text-primary border-primary":l.active}])},{default:n(()=>[o("span",{innerHTML:l.label},null,8,Zt)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):D("",!0)]),_:1})]),_:1}),t(a(le),{open:j.value,"onUpdate:open":e[18]||(e[18]=l=>j.value=l)},{default:n(()=>[t(a(oe),{class:"sm:max-w-2xl"},{default:n(()=>[t(a(ne),null,{default:n(()=>[t(a(ae),null,{default:n(()=>[d(x(I.value?"Edit":"Add")+" Delay",1)]),_:1}),t(a(se),null,{default:n(()=>[d(" Fill in the details to "+x(I.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),t(ct,{delay:I.value,"delay-codes":_e.value,tenants:y.tenants,"is-super-admin":y.isSuperAdmin,"tenant-slug":y.tenantSlug,onClose:e[17]||(e[17]=l=>j.value=!1)},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),t(a(le),{open:m.value,"onUpdate:open":e[22]||(e[22]=l=>m.value=l)},{default:n(()=>[t(a(oe),{class:"sm:max-w-lg"},{default:n(()=>[t(a(ne),null,{default:n(()=>[t(a(ae),null,{default:n(()=>e[66]||(e[66]=[d("Manage Delay Codes")])),_:1}),t(a(se),null,{default:n(()=>e[67]||(e[67]=[d(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),o("div",el,[o("div",tl,[e[69]||(e[69]=o("h3",{class:"text-sm font-medium"},"Current Delay Codes",-1)),t(c,{onClick:Fe,size:"sm",variant:"outline"},{default:n(()=>[t(N,{name:"plus",class:"mr-2 h-4 w-4"}),e[68]||(e[68]=d(" Add New Code "))]),_:1})]),o("div",ll,[!y.delay_codes||y.delay_codes.length===0?(u(),v("div",ol," No delay codes found ")):(u(),v("div",nl,[(u(!0),v($,null,P(y.delay_codes,l=>(u(),v("div",{key:l.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[o("div",{class:"flex-1 cursor-pointer",onClick:i=>Ve(l)},[o("div",sl,[d(x(l.code)+" ",1),l.deleted_at?(u(),v("span",dl,"(Deleted)")):D("",!0)]),l.description?(u(),v("div",rl,x(l.description),1)):D("",!0)],8,al),o("div",il,[y.isSuperAdmin?(u(),v($,{key:0},[l.deleted_at?(u(),v($,{key:0},[t(c,{onClick:i=>Be(l.id),size:"sm",variant:"outline"},{default:n(()=>[t(N,{name:"refresh",class:"mr-2 h-4 w-4"}),e[70]||(e[70]=d(" Restore "))]),_:2},1032,["onClick"]),t(c,{onClick:i=>Ee(l.id),size:"sm",variant:"destructive"},{default:n(()=>[t(N,{name:"trash",class:"mr-2 h-4 w-4"}),e[71]||(e[71]=d(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(u(),U(c,{key:1,onClick:i=>be(l.id),size:"sm",variant:"destructive"},{default:n(()=>[t(N,{name:"trash",class:"mr-2 h-4 w-4"}),e[72]||(e[72]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):(u(),U(c,{key:1,onClick:i=>be(l.id),size:"sm",variant:"destructive"},{default:n(()=>[t(N,{name:"trash",class:"mr-2 h-4 w-4"}),e[73]||(e[73]=d(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))]),g.value?(u(),v("div",ul,[o("h3",fl,x(r.value?"Edit":"Add")+" Delay Code",1),o("div",ml,[o("div",null,[t(a(_),{for:"code"},{default:n(()=>e[74]||(e[74]=[d("Code")])),_:1}),t(a(O),{id:"code",modelValue:p.value.code,"onUpdate:modelValue":e[19]||(e[19]=l=>p.value.code=l),placeholder:"Enter code"},null,8,["modelValue"])]),o("div",null,[t(a(_),{for:"description"},{default:n(()=>e[75]||(e[75]=[d("Description")])),_:1}),t(a(O),{id:"description",modelValue:p.value.description,"onUpdate:modelValue":e[20]||(e[20]=l=>p.value.description=l),placeholder:"Enter description"},null,8,["modelValue"])]),o("div",vl,[t(c,{onClick:Te,variant:"ghost",size:"sm"},{default:n(()=>e[76]||(e[76]=[d("Cancel")])),_:1}),t(c,{onClick:ze,variant:"default",size:"sm"},{default:n(()=>e[77]||(e[77]=[d("Save")])),_:1})])])])):D("",!0)]),t(a(ue),{class:"mt-6"},{default:n(()=>[t(c,{onClick:e[21]||(e[21]=l=>m.value=!1),variant:"outline"},{default:n(()=>e[78]||(e[78]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(a(le),{open:W.value,"onUpdate:open":e[25]||(e[25]=l=>W.value=l)},{default:n(()=>[t(a(oe),null,{default:n(()=>[t(a(ne),null,{default:n(()=>[t(a(ae),null,{default:n(()=>e[79]||(e[79]=[d("Confirm Deletion")])),_:1}),t(a(se),null,{default:n(()=>e[80]||(e[80]=[d(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),t(a(ue),{class:"mt-4"},{default:n(()=>[t(c,{type:"button",onClick:e[23]||(e[23]=l=>W.value=!1),variant:"outline"},{default:n(()=>e[81]||(e[81]=[d(" Cancel ")])),_:1}),t(c,{type:"button",onClick:e[24]||(e[24]=l=>Me(ce.value)),variant:"destructive"},{default:n(()=>e[82]||(e[82]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(a(le),{open:z.value,"onUpdate:open":e[28]||(e[28]=l=>z.value=l)},{default:n(()=>[t(a(oe),null,{default:n(()=>[t(a(ne),null,{default:n(()=>[t(a(ae),null,{default:n(()=>e[83]||(e[83]=[d("Confirm Deletion")])),_:1}),t(a(se),null,{default:n(()=>e[84]||(e[84]=[d(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),t(a(ue),{class:"mt-4"},{default:n(()=>[t(c,{type:"button",onClick:e[26]||(e[26]=l=>z.value=!1),variant:"outline"},{default:n(()=>e[85]||(e[85]=[d(" Cancel ")])),_:1}),t(c,{type:"button",onClick:e[27]||(e[27]=l=>Le(h.value)),variant:"destructive"},{default:n(()=>e[86]||(e[86]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(a(le),{open:B.value,"onUpdate:open":e[31]||(e[31]=l=>B.value=l)},{default:n(()=>[t(a(oe),null,{default:n(()=>[t(a(ne),null,{default:n(()=>[t(a(ae),null,{default:n(()=>e[87]||(e[87]=[d("Confirm Bulk Deletion")])),_:1}),t(a(se),null,{default:n(()=>[d(" Are you sure you want to delete "+x(S.value.length)+" delay records? This action cannot be undone. ",1)]),_:1})]),_:1}),t(a(ue),{class:"mt-4"},{default:n(()=>[t(c,{type:"button",onClick:e[29]||(e[29]=l=>B.value=!1),variant:"outline"},{default:n(()=>e[88]||(e[88]=[d(" Cancel ")])),_:1}),t(c,{type:"button",onClick:e[30]||(e[30]=l=>Oe()),variant:"destructive"},{default:n(()=>e[89]||(e[89]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{Bl as default};
