import{H as c,i,X as t,P as g,a as N,J as $,K as L,a3 as Ze,r as S,A as Ce,w as ve,aj as et,f as R,B as a,G as _,e as tt,j as l,O as d,E as z,Y as P,u as r,I as je,W as st,ak as X,al as at}from"./vendor-DQlNQ5gH.js";import{x as ee,g as ot,W as Y}from"./vendor-vue-CQn6KzTb.js";import{_ as M}from"./Icon.vue_vue_type_script_setup_true_lang-D_7hXODg.js";import{_ as F,a as te}from"./Label.vue_vue_type_script_setup_true_lang-BRq5T-WA.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-B-8911bK.js";import{_ as lt}from"./Checkbox.vue_vue_type_script_setup_true_lang-BXBwirKi.js";import{_ as nt,a as rt,b as ce,c as le,d as it,e as Z}from"./TableRow.vue_vue_type_script_setup_true_lang-tbX_6Hnu.js";import{_ as me}from"./Card.vue_vue_type_script_setup_true_lang-yOexdr0W.js";import{_ as dt}from"./CardHeader.vue_vue_type_script_setup_true_lang-BXftwvVe.js";import{_ as ut}from"./CardTitle.vue_vue_type_script_setup_true_lang-OH7QXspQ.js";import{_ as pe}from"./CardContent.vue_vue_type_script_setup_true_lang-Dh-7LYTR.js";import{_ as ne,a as re,b as ie,c as de,d as ue}from"./DialogDescription.vue_vue_type_script_setup_true_lang-ffXSICao.js";import{_ as fe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CJ4mwW2I.js";import{_ as ke,a as we,b as he}from"./AlertDescription.vue_vue_type_script_setup_true_lang-DGF9dqnu.js";import{_ as ct}from"./AppLayout.vue_vue_type_script_setup_true_lang-DZFOoCwO.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-D2wO_Ovf.js";import"./vendor-icons-pKobgiP0.js";import"./vendor-ui-CGEGZLyF.js";import"./app-DgIy8214.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BpTGIYrD.js";const mt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 flex flex-col items-center justify-center"},pt={class:"text-sm font-semibold mb-2 text-foreground"},ft={class:"text-2xl font-bold text-primary"},vt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(f){return(n,b)=>(i(),c("div",mt,[t("h3",pt,g(f.title),1),t("p",ft,g(f.value),1)]))}},gt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},yt={class:"text-base text-center font-semibold mb-4"},xt={key:0,class:"text-center text-sm py-4 text-primary font-medium"},bt={class:"space-y-3"},_t={class:"text-sm"},kt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},totalRejections:{type:Number,default:0},rejectionType:{type:String,default:""}},setup(f){const n=f,b=N(()=>n.rejectionType==="load"?"No load rejections recorded. You're on track for Fantastic+ !":n.rejectionType==="block"?"No block rejections recorded. You're on track for Fantastic+ !":"No rejections recorded. You're on track for Fantastic+ !"),B=v=>{const T=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],j=[...n.drivers].sort((h,y)=>y.total_penalty-h.total_penalty).map(h=>h.total_penalty).indexOf(v);return T[j]||"#6b7280"};return(v,T)=>(i(),c("div",gt,[t("h3",yt,g(f.title),1),f.totalRejections==="0"?(i(),c("div",xt,g(b.value),1)):(i(),c($,{key:1},[T[0]||(T[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",bt,[(i(!0),c($,null,L(f.drivers,(C,j)=>(i(),c("div",{key:j,class:"flex justify-between items-center"},[t("span",_t,g(C.driver_name),1),t("span",{class:"text-sm font-medium",style:Ze({color:B(C.total_penalty)})},g(C.total_penalty),5)]))),128))])],64))]))}},wt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},ht={class:"text-base text-center font-semibold mb-4"},Ct={class:"h-64"},jt={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(f){const n=f,b=S(null);let B=null;const v=()=>{if(B&&B.destroy(),!b.value)return;const T=b.value.getContext("2d"),C=[];n.chartData.datasets.forEach(y=>{y.data&&y.data.length&&C.push(...y.data)});const j=C.length>0?Math.min(...C):0,h=C.length>0?Math.max(...C):100;B=new et(T,{type:"line",data:n.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(y){const V=y.raw||0,A=n.averageAcceptance||0,E=n.chartData.dateRangeLabel||"selected period",w=Number(A).toFixed(2);return[`Acceptance Score: ${V}`,`Average Score Over ${E}: ${w}`]}}}},scales:{y:{beginAtZero:!(j>10),min:Math.max(Math.floor(j-15),0),max:Math.min(110,Math.ceil(h+15)),ticks:{stepSize:5,padding:10,font:{size:11},callback:function(y){return y<120?y:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return Ce(()=>{v()}),ve(()=>n.chartData,()=>{v()},{deep:!0}),(T,C)=>(i(),c("div",wt,[t("h3",ht,g(f.title),1),t("div",Ct,[t("canvas",{ref_key:"chartCanvas",ref:b},null,512)])]))}},St={class:"space-y-2 md:space-y-4 lg:space-y-6 mb-2 md:mb-4 lg:mb-6"},$t={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4"},Dt={class:"grid grid-cols-1 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-6"},At={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null},currentDateFilter:{type:String,default:null},currentFilters:{type:Object,default:()=>({})}},setup(f){const n=f,b=N(()=>n.metricsData&&n.metricsData.by_category?[{title:"Total Rejected Stops",value:n.metricsData.totalRejections},{title:"Rejected +6 Hours Before Start Time",value:n.metricsData.moreThan6Count},{title:"Rejected 0-6 Hours Before Start Time",value:n.metricsData.within6Count},{title:"Rejected After Start Time",value:n.metricsData.afterStartCount}]:[]),B=N(()=>n.driversData&&n.driversData.length?n.driversData:[]),v=N(()=>n.chartData&&Object.keys(n.chartData).length?n.chartData:{}),T=N(()=>{var j;return((j=n.metricsData)==null?void 0:j.totalRejections)||0}),C=N(()=>{var j;return((j=n.currentFilters)==null?void 0:j.rejectionType)||null});return(j,h)=>(i(),c("div",St,[t("div",$t,[(i(!0),c($,null,L(b.value,(y,V)=>(i(),R(vt,{key:V,title:y.title,value:y.value},null,8,["title","value"]))),128))]),t("div",Dt,[a(kt,{title:"Bottom 5 Drivers",drivers:B.value,"total-rejections":T.value,"rejection-type":C.value,class:"lg:col-span-1"},null,8,["drivers","total-rejections","rejection-type"]),n.currentDateFilter!="Yesterday"?(i(),R(jt,{key:0,title:"Acceptance Score",chartData:v.value,averageAcceptance:f.averageAcceptance,class:"lg:col-span-3"},null,8,["chartData","averageAcceptance"])):_("",!0)])]))}},Nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Tt={key:0,class:"col-span-full"},Rt={class:"relative"},Ft=["value"],Mt={class:"col-span-full"},Ut={class:"relative"},Bt={class:"relative"},Vt={class:"relative"},zt=["value"],Lt={class:"relative"},Pt={class:"flex items-center space-x-2"},Et={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},Ot=tt({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(f,{emit:n}){var C,j,h,y,V,A,E;const b=f,B=n,v=ee({id:(C=b.rejection)==null?void 0:C.id,tenant_id:b.isSuperAdmin?(j=b.rejection)==null?void 0:j.tenant_id:null,date:((h=b.rejection)==null?void 0:h.date)||"",driver_name:((y=b.rejection)==null?void 0:y.driver_name)||"",rejection_type:((V=b.rejection)==null?void 0:V.rejection_type)||"block",rejection_category:((A=b.rejection)==null?void 0:A.rejection_category)||"more_than_6",reason_code_id:((E=b.rejection)==null?void 0:E.reason_code_id)||null,disputed:b.rejection&&b.rejection.disputed!==null?parseInt(b.rejection.disputed)===1:!1,driver_controllable:b.rejection&&b.rejection.driver_controllable!==null?parseInt(b.rejection.driver_controllable)===1:null});ve(()=>b.rejection,w=>{w?(v.id=w.id,v.tenant_id=w.tenant_id,v.date=w.date,v.driver_name=w.driver_name,v.rejection_type=w.rejection_type,v.rejection_category=w.rejection_category,v.reason_code_id=w.reason_code_id,v.disputed=w.disputed!==null?parseInt(w.disputed)===1:!1,v.driver_controllable=w.driver_controllable!==null?parseInt(w.driver_controllable)===1:null):v.reset()},{immediate:!0});const T=()=>{const w=!!v.id,u=b.isSuperAdmin?w?"acceptance.update.admin":"acceptance.store.admin":w?"acceptance.update":"acceptance.store",x=b.isSuperAdmin?w?{rejection:v.id}:{}:w?{tenantSlug:b.tenantSlug,rejection:v.id}:{tenantSlug:b.tenantSlug};v[w?"put":"post"](route(u,x),{onSuccess:()=>B("close")})};return(w,u)=>(i(),c("form",{onSubmit:je(T,["prevent"]),class:"space-y-6"},[t("div",Nt,[f.isSuperAdmin?(i(),c("div",Tt,[a(F,null,{default:l(()=>u[9]||(u[9]=[d("Company Name")])),_:1}),t("div",Rt,[z(t("select",{"onUpdate:modelValue":u[0]||(u[0]=x=>r(v).tenant_id=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[u[10]||(u[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),c($,null,L(f.tenants,x=>(i(),c("option",{key:x.id,value:x.id},g(x.name),9,Ft))),128))],512),[[P,r(v).tenant_id]]),u[11]||(u[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):_("",!0),t("div",Mt,[a(F,null,{default:l(()=>u[12]||(u[12]=[d("Date")])),_:1}),a(te,{type:"date",modelValue:r(v).date,"onUpdate:modelValue":u[1]||(u[1]=x=>r(v).date=x),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(F,null,{default:l(()=>u[13]||(u[13]=[d("Driver Name")])),_:1}),a(te,{modelValue:r(v).driver_name,"onUpdate:modelValue":u[2]||(u[2]=x=>r(v).driver_name=x),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(F,null,{default:l(()=>u[14]||(u[14]=[d("Rejection Type")])),_:1}),t("div",Ut,[z(t("select",{"onUpdate:modelValue":u[3]||(u[3]=x=>r(v).rejection_type=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[15]||(u[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[P,r(v).rejection_type]]),u[16]||(u[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(F,null,{default:l(()=>u[17]||(u[17]=[d("Rejection Category")])),_:1}),t("div",Bt,[z(t("select",{"onUpdate:modelValue":u[4]||(u[4]=x=>r(v).rejection_category=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[18]||(u[18]=[t("option",{value:"more_than_6"},"More than 6 hrs",-1),t("option",{value:"within_6"},"Within 6 hrs",-1),t("option",{value:"after_start"},"After start",-1)]),512),[[P,r(v).rejection_category]]),u[19]||(u[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(F,null,{default:l(()=>u[20]||(u[20]=[d("Reason Code")])),_:1}),t("div",Vt,[z(t("select",{"onUpdate:modelValue":u[5]||(u[5]=x=>r(v).reason_code_id=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),c($,null,L(f.reasons,x=>(i(),c("option",{key:x.id,value:x.id},g(x.reason_code),9,zt))),128))],512),[[P,r(v).reason_code_id]]),u[21]||(u[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(F,null,{default:l(()=>u[22]||(u[22]=[d("Driver Controllable")])),_:1}),t("div",Lt,[z(t("select",{"onUpdate:modelValue":u[6]||(u[6]=x=>r(v).driver_controllable=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[23]||(u[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[P,r(v).driver_controllable]]),u[24]||(u[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",Pt,[a(lt,{checked:r(v).disputed,"onUpdate:checked":u[7]||(u[7]=x=>r(v).disputed=x),id:"disputed"},null,8,["checked"]),a(F,{for:"disputed"},{default:l(()=>u[25]||(u[25]=[d("Disputed")])),_:1})])]),t("div",Et,[a(k,{type:"button",onClick:u[8]||(u[8]=x=>B("close")),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>u[26]||(u[26]=[d(" Cancel ")])),_:1}),a(k,{type:"submit",disabled:r(v).processing,class:"w-full sm:w-auto"},{default:l(()=>[d(g(r(v).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Wt={class:"mx-auto w-full max-w-screen-xl space-y-2 p-2 md:space-y-4 md:p-4 lg:space-y-6 lg:p-6"},Yt={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},It={class:"flex flex-wrap gap-3"},qt={class:"relative"},Ht={key:0,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},Gt={class:"py-1"},Jt={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},Kt=["href"],Qt=["action"],Xt={class:"flex flex-col items-center gap-2 md:items-start"},Zt={class:"flex flex-wrap gap-1 md:gap-2"},es={key:0,class:"text-sm text-muted-foreground"},ts={key:0},ss={key:1},as={key:2},os={key:3,class:"ml-1"},ls={key:2,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},ns={key:3},rs={class:"flex items-center justify-between"},is={class:"flex items-center gap-2"},ds={key:0,class:"ml-4 flex flex-wrap gap-2"},us={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cs={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ms={class:"capitalize"},ps={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fs={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},vs={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},gs={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ys={class:"flex flex-col gap-1 md:gap-4"},xs={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},bs={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-3"},_s=["value"],ks={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},ws={class:"flex justify-end"},hs={class:"overflow-x-auto"},Cs={class:"flex items-center justify-center"},js=["checked"],Ss={class:"flex items-center"},$s={key:0},Ds={key:1},As={key:2,class:"ml-2"},Ns={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ts={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Rs={key:3,class:"ml-2 opacity-50"},Fs=["value"],Ms={key:1,class:"capitalize"},Us={key:0,class:"ml-1 text-xs text-red-500"},Bs={class:"flex space-x-2"},Vs={key:0,class:"border-t bg-muted/20 px-4 py-3"},zs={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Ls={class:"flex items-center gap-4 text-sm text-muted-foreground"},Ps={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},Es=["value"],Os={class:"flex flex-wrap"},Ws=["innerHTML"],Ys={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},Is={class:"flex items-center justify-between"},qs={class:"max-h-[400px] overflow-y-auto rounded-md border"},Hs={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},Gs={key:1,class:"divide-y"},Js=["onClick"],Ks={class:"text-xs font-medium sm:text-sm"},Qs={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},Xs={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},Zs={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},ea={key:0,class:"space-y-4 rounded-md border p-4"},ta={class:"text-sm font-medium sm:text-base"},sa={class:"space-y-3"},aa={class:"flex justify-end space-x-2"},ja={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number}},setup(f){const n=f,b=N(()=>(y.value==="yesterday"||y.value==="current-week")&&n.weekNumber&&n.year?`Week ${n.weekNumber}, ${n.year}`:(y.value==="6w"||y.value==="quarterly")&&n.startWeekNumber&&n.endWeekNumber&&n.year?`Weeks ${n.startWeekNumber}-${n.endWeekNumber}, ${n.year}`:""),B=[{title:n.tenantSlug?"Dashboard":"Admin Dashboard",href:n.tenantSlug?route("dashboard",{tenantSlug:n.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:n.tenantSlug?route("acceptance.index",{tenantSlug:n.tenantSlug}):route("acceptance.index.admin")}],v=S(!1),T=S(!1),C=S(null),j=S(""),h=S(""),y=S(n.dateFilter||"full"),V=S(n.perPage),A=S([]),E=S(!1),w=S(null),u=S(!1),x=S(!1),U=S(null),O=S({reason_code:"",description:""}),J=S(!1),ge=S(null),se=["date","driver_name","rejection_type","reason_code","rejection_category","disputed","driver_controllable"],q=S("date"),H=S("desc"),m=S({search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""}),I=N(()=>{let o=[...n.rejections.data];if(m.value.search){const e=m.value.search.toLowerCase();o=o.filter(s=>{var p,D,W,Q,_e;return((p=s.driver_name)==null?void 0:p.toLowerCase().includes(e))||((D=s.rejection_type)==null?void 0:D.toLowerCase().includes(e))||((Q=(W=s.reason_code)==null?void 0:W.reason_code)==null?void 0:Q.toLowerCase().includes(e))||((_e=s.load_number)==null?void 0:_e.toLowerCase().includes(e))})}if(m.value.dateFrom&&(o=o.filter(e=>e.date&&e.date>=m.value.dateFrom)),m.value.dateTo&&(o=o.filter(e=>e.date&&e.date<=m.value.dateTo)),m.value.rejectionType&&(o=o.filter(e=>e.rejection_type===m.value.rejectionType)),m.value.reasonCode&&(o=o.filter(e=>e.reason_code&&e.reason_code.id===parseInt(m.value.reasonCode))),m.value.rejectionCategory&&(o=o.filter(e=>e.rejection_category===m.value.rejectionCategory)),m.value.disputed!==""){const e=m.value.disputed==="true";o=o.filter(s=>s.disputed===e)}if(m.value.driverControllable!=="")if(m.value.driverControllable==="null")o=o.filter(e=>e.driver_controllable===null);else{const e=m.value.driverControllable==="true";o=o.filter(s=>s.driver_controllable===e)}return o.sort((e,s)=>{var W,Q;let p=e[q.value],D=s[q.value];return q.value==="reason_code"&&(p=((W=e.reason_code)==null?void 0:W.reason_code)||"",D=((Q=s.reason_code)==null?void 0:Q.reason_code)||""),p===null?1:D===null?-1:(typeof p=="string"&&(p=p.toLowerCase(),D=D.toLowerCase()),p<D?H.value==="asc"?-1:1:p>D?H.value==="asc"?1:-1:0)}),o});function Se(o){q.value===o?H.value=H.value==="asc"?"desc":"asc":(q.value=o,H.value="asc")}function G(){}function $e(){m.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""}}const ye=(o=null)=>{C.value=o,v.value=!0},De=()=>{T.value=!0,x.value=!1,U.value=null},Ae=()=>{O.value={reason_code:"",description:""},U.value=null,x.value=!0},Ne=o=>{O.value={reason_code:o.reason_code,description:o.description||""},U.value=o.id,x.value=!0},Te=()=>{x.value=!1,U.value=null},Re=o=>{ge.value=o,J.value=!0},Fe=()=>{const o=ee({reason_code:O.value.reason_code,description:O.value.description}),e=U.value?n.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":n.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",s=U.value?n.isSuperAdmin?{code:U.value}:{tenantSlug:n.tenantSlug,code:U.value}:n.isSuperAdmin?{}:{tenantSlug:n.tenantSlug};(U.value?o.put:o.post).call(o,route(e,s),{onSuccess:()=>{h.value=U.value?"Reason code updated successfully.":"Reason code created successfully.",x.value=!1,U.value=null,Y.reload({only:["rejection_reason_codes"]})},onError:D=>{console.error(D)}})},Me=o=>{const e=ee({}),s=n.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",p=n.isSuperAdmin?{id:o}:{tenantSlug:n.tenantSlug,code:o};e.delete(route(s,p),{onSuccess:()=>{h.value="Reason code deleted successfully.",J.value=!1,Y.reload({only:["rejection_reason_codes"]})}})},Ue=o=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=ee({}),s=n.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",p=n.isSuperAdmin?{rejection:o}:{tenantSlug:n.tenantSlug,rejection:o};e.delete(route(s,p),{preserveScroll:!0,onSuccess:()=>{h.value="Rejection deleted successfully."}})},Be=o=>{if(o){const e=new URL(o);e.searchParams.set("perPage",V.value),e.searchParams.set("dateFilter",y.value),Y.get(e.href,{},{only:["rejections"]})}};function ae(o){y.value=o;const e=n.tenantSlug?route("acceptance.index",{tenantSlug:n.tenantSlug}):route("acceptance.index.admin");Y.get(e,{dateFilter:o,perPage:V.value},{preserveState:!0})}function Ve(){const o=n.tenantSlug?route("acceptance.index",{tenantSlug:n.tenantSlug}):route("acceptance.index.admin");Y.get(o,{dateFilter:y.value,perPage:V.value},{preserveState:!0})}function oe(o){if(!o)return"";const e=o.split("-");if(e.length!==3)return o;const[s,p,D]=e;return`${Number(p)}/${Number(D)}/${s}`}ve(h,o=>{o&&setTimeout(()=>{h.value=""},5e3)});const ze=N(()=>{var s,p;if(!((s=n.rejection_breakdown)!=null&&s.by_category)||!((p=n.rejection_breakdown)!=null&&p.by_category.total_rejections))return null;const o=n.rejection_breakdown.by_category,e=m.value.rejectionType;return e?{totalRejections:o[`total_${e}_rejections`]||0,moreThan6Count:o[`more_than_6_${e}_count`]||0,within6Count:o[`within_6_${e}_count`]||0,afterStartCount:o[`after_start_${e}_count`]||0,by_category:!0}:{totalRejections:o.total_rejections,moreThan6Count:o.more_than_6_count,within6Count:o.within_6_count,afterStartCount:o.after_start_count,by_category:!0}}),Le=N(()=>{var o,e,s;return m.value.rejectionType=="load"?((o=n.rejection_breakdown)==null?void 0:o.bottom_five_drivers.load)||[]:m.value.rejectionType=="block"?((e=n.rejection_breakdown)==null?void 0:e.bottom_five_drivers.block)||[]:((s=n.rejection_breakdown)==null?void 0:s.bottom_five_drivers.total)||[]}),Pe=N(()=>!n.line_chart_data||n.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:n.line_chart_data.map(o=>o.date),datasets:[{label:"Acceptance Performance",data:n.line_chart_data.map(o=>o.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function Ee(o){Y.post(route("rejection_reason_codes.restore.admin",{id:o}),{},{onSuccess:()=>{h.value="Reason code restored successfully",setTimeout(()=>h.value="",3e3)}})}function Oe(o){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&Y.delete(route("rejection_reason_codes.forceDelete.admin",{id:o}),{onSuccess:()=>{h.value="Reason code permanently deleted",setTimeout(()=>h.value="",3e3)}})}N(()=>n.rejection_reason_codes.filter(o=>!o.deleted_at));const We=N(()=>I.value.length>0&&A.value.length===I.value.length);function Ye(o){o.target.checked?A.value=I.value.map(e=>e.id):A.value=[]}function Ie(){A.value.length>0&&(E.value=!0)}function qe(){const o=ee({ids:A.value}),e=n.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",s=n.isSuperAdmin?{}:{tenantSlug:n.tenantSlug};o.delete(route(e,s),{preserveScroll:!0,onSuccess:()=>{h.value=`${A.value.length} rejection records deleted successfully.`,A.value=[],E.value=!1},onError:p=>{console.error(p)}})}function He(o){const e=o.target.files[0];if(!e)return;const s=new FormData;s.append("csv_file",e);const p=n.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:n.tenantSlug});Y.post(p,s,{onSuccess:()=>{h.value="Delays imported successfully",o.target.value=""},onError:D=>{console.error(D),o.target.value=""}})}function Ge(){if(I.value.length===0){j.value="No data available to export",setTimeout(()=>{j.value=""},3e3);return}w.value&&w.value.submit()}const Je=N(()=>n.tenantSlug?route("acceptance.export",{tenantSlug:n.tenantSlug}):route("acceptance.export.admin")),xe=N(()=>y.value==="yesterday"||y.value==="current-week"||y.value==="6w"||y.value==="quarterly"?n.rejections&&n.rejections.data&&n.rejections.data.length>0:!0),K=S(!1),Ke=N(()=>"/storage/upload-data-temps/Rejections Template.csv");Ce(()=>{const o=e=>{K.value&&!e.target.closest(".relative")&&(K.value=!1)};document.addEventListener("click",o),st(()=>{document.removeEventListener("click",o)})});const Qe=N(()=>m.value.search||m.value.dateFrom||m.value.dateTo||m.value.rejectionType||m.value.reasonCode||m.value.rejectionCategory||m.value.disputed||m.value.driverControllable);function Xe(o){if(!o)return"";const e=n.rejection_reason_codes.find(s=>s.id==o);return e?e.reason_code:""}function be(o){return o?{more_than_6:"More than 6 hrs",within_6:"Within 6 hrs",after_start:"After start"}[o]||o:"—"}return(o,e)=>(i(),R(ct,{breadcrumbs:B,tenantSlug:f.tenantSlug},{default:l(()=>[a(r(ot),{title:"Acceptance"}),t("div",Wt,[h.value?(i(),R(r(ke),{key:0,variant:"success"},{default:l(()=>[a(r(we),null,{default:l(()=>e[29]||(e[29]=[d("Success")])),_:1}),a(r(he),null,{default:l(()=>[d(g(h.value),1)]),_:1})]),_:1})):_("",!0),j.value?(i(),R(r(ke),{key:1,variant:"destructive"},{default:l(()=>[a(r(we),null,{default:l(()=>e[30]||(e[30]=[d("Error")])),_:1}),a(r(he),null,{default:l(()=>[d(g(j.value),1)]),_:1})]),_:1})):_("",!0),t("div",Yt,[e[36]||(e[36]=t("h1",{class:"text-lg font-bold text-gray-800 dark:text-gray-200 md:text-xl lg:text-2xl"},"Acceptance",-1)),t("div",It,[a(k,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=s=>ye()),variant:"default"},{default:l(()=>[a(M,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[31]||(e[31]=d(" Add Rejection "))]),_:1}),A.value.length>0?(i(),R(k,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=s=>Ie()),variant:"destructive"},{default:l(()=>[a(M,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+g(A.value.length)+") ",1)]),_:1})):_("",!0),t("div",qt,[a(k,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[2]||(e[2]=s=>K.value=!K.value),variant:"secondary"},{default:l(()=>[a(M,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[32]||(e[32]=d(" Upload CSV ")),a(M,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),K.value?(i(),c("div",Ht,[t("div",Gt,[t("label",Jt,[e[33]||(e[33]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:He,accept:".csv"},null,32)]),t("a",{href:Ke.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Kt)])])):_("",!0)]),a(k,{class:"px-2 py-0 md:px-4 md:py-2",onClick:je(Ge,["prevent"]),variant:"outline"},{default:l(()=>[a(M,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[34]||(e[34]=d(" Download CSV "))]),_:1}),f.isSuperAdmin?(i(),R(k,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=s=>De()),variant:"outline"},{default:l(()=>[a(M,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Manage Reason Codes "))]),_:1})):_("",!0)])]),t("form",{ref_key:"exportForm",ref:w,action:Je.value,method:"GET",class:"hidden"},null,8,Qt),a(r(me),null,{default:l(()=>[a(r(pe),{class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[t("div",Xt,[t("div",Zt,[a(k,{onClick:e[4]||(e[4]=s=>ae("yesterday")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":y.value==="yesterday"})},{default:l(()=>e[37]||(e[37]=[d(" Yesterday ")])),_:1},8,["class"]),a(k,{onClick:e[5]||(e[5]=s=>ae("current-week")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":y.value==="current-week"})},{default:l(()=>e[38]||(e[38]=[d(" WTD ")])),_:1},8,["class"]),a(k,{onClick:e[6]||(e[6]=s=>ae("6w")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":y.value==="6w"})},{default:l(()=>e[39]||(e[39]=[d(" T6W ")])),_:1},8,["class"]),a(k,{onClick:e[7]||(e[7]=s=>ae("quarterly")),variant:"outline",size:"sm",class:X({"border-primary bg-primary/10 text-primary":y.value==="quarterly"})},{default:l(()=>e[40]||(e[40]=[d(" Quarterly ")])),_:1},8,["class"])]),f.dateRange?(i(),c("div",es,[y.value==="yesterday"&&f.dateRange.start?(i(),c("span",ts," Showing data from "+g(oe(f.dateRange.start)),1)):f.dateRange.start&&f.dateRange.end?(i(),c("span",ss," Showing data from "+g(oe(f.dateRange.start))+" to "+g(oe(f.dateRange.end)),1)):(i(),c("span",as,g(f.dateRange.label),1)),b.value?(i(),c("span",os,"("+g(b.value)+")",1)):_("",!0)])):_("",!0)])]),_:1})]),_:1}),xe.value?_("",!0):(i(),c("div",ls,[a(M,{name:"database-x",class:"mb-4 h-16 w-16 text-muted-foreground"}),e[41]||(e[41]=t("h2",{class:"text-center text-2xl font-bold text-muted-foreground"},"There is No Data to give Information about.",-1))])),xe.value?(i(),c("div",ns,[a(r(me),{class:"mb-6"},{default:l(()=>[a(r(dt),{class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[t("div",rs,[t("div",is,[a(r(ut),{class:"text-lg md:text-xl lg:text-2xl"},{default:l(()=>e[42]||(e[42]=[d("Filters")])),_:1}),!u.value&&Qe.value?(i(),c("div",ds,[m.value.search?(i(),c("div",us," Search: "+g(m.value.search),1)):_("",!0),m.value.rejectionType?(i(),c("div",cs,[e[43]||(e[43]=d(" Type: ")),t("span",ms,g(m.value.rejectionType),1)])):_("",!0),m.value.reasonCode?(i(),c("div",ps," Reason: "+g(Xe(m.value.reasonCode)),1)):_("",!0),m.value.rejectionCategory?(i(),c("div",fs," Category: "+g(be(m.value.rejectionCategory)),1)):_("",!0),m.value.disputed?(i(),c("div",vs," Disputed: "+g(m.value.disputed==="true"?"Yes":"No"),1)):_("",!0),m.value.driverControllable?(i(),c("div",gs," Driver Controllable: "+g(m.value.driverControllable==="true"?"Yes":m.value.driverControllable==="false"?"No":"N/A"),1)):_("",!0)])):_("",!0)]),a(k,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=s=>u.value=!u.value)},{default:l(()=>[d(g(u.value?"Hide Filters":"Show Filters")+" ",1),a(M,{name:u.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),u.value?(i(),R(r(pe),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[t("div",ys,[t("div",xs,[t("div",null,[a(r(F),{for:"search"},{default:l(()=>e[44]||(e[44]=[d("Search")])),_:1}),a(r(te),{class:"h-9 w-full px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:m.value.search,"onUpdate:modelValue":e[9]||(e[9]=s=>m.value.search=s),type:"text",placeholder:"Search by driver name...",onInput:G},null,8,["modelValue"])])]),t("div",bs,[t("div",null,[a(r(F),{for:"rejectionType"},{default:l(()=>e[45]||(e[45]=[d("Rejection Type")])),_:1}),z(t("select",{id:"rejectionType","onUpdate:modelValue":e[10]||(e[10]=s=>m.value.rejectionType=s),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[46]||(e[46]=[t("option",{value:""},"All Types",-1),t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),544),[[P,m.value.rejectionType]])]),t("div",null,[a(r(F),{for:"reasonCode"},{default:l(()=>e[47]||(e[47]=[d("Reason Code")])),_:1}),z(t("select",{id:"reasonCode","onUpdate:modelValue":e[11]||(e[11]=s=>m.value.reasonCode=s),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[48]||(e[48]=t("option",{value:""},"All Reason Codes",-1)),(i(!0),c($,null,L(f.rejection_reason_codes,s=>(i(),c("option",{key:s.id,value:s.id},g(s.reason_code),9,_s))),128))],544),[[P,m.value.reasonCode]])]),t("div",null,[a(r(F),{for:"rejectionCategory"},{default:l(()=>e[49]||(e[49]=[d("Rejection From Start")])),_:1}),z(t("select",{id:"rejectionCategory","onUpdate:modelValue":e[12]||(e[12]=s=>m.value.rejectionCategory=s),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[50]||(e[50]=[t("option",{value:""},"All Categories",-1),t("option",{value:"more_than_6"},"More than 6 hours",-1),t("option",{value:"within_6"},"Within 6 hours",-1),t("option",{value:"after_start"},"After start time",-1)]),544),[[P,m.value.rejectionCategory]])])]),t("div",ks,[t("div",null,[a(r(F),{for:"disputed"},{default:l(()=>e[51]||(e[51]=[d("Disputed")])),_:1}),z(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=s=>m.value.disputed=s),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[52]||(e[52]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),544),[[P,m.value.disputed]])]),t("div",null,[a(r(F),{for:"driverControllable"},{default:l(()=>e[53]||(e[53]=[d("Driver Controllable")])),_:1}),z(t("select",{id:"driverControllable","onUpdate:modelValue":e[14]||(e[14]=s=>m.value.driverControllable=s),onChange:G,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[54]||(e[54]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"null"},"N/A",-1)]),544),[[P,m.value.driverControllable]])])]),t("div",ws,[a(k,{onClick:$e,variant:"ghost",size:"sm"},{default:l(()=>[a(M,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[55]||(e[55]=d(" Reset Filters "))]),_:1})])])]),_:1})):_("",!0)]),_:1}),f.isSuperAdmin?_("",!0):(i(),R(At,{key:0,metricsData:ze.value,driversData:Le.value,chartData:Pe.value,averageAcceptance:f.average_acceptance,currentDateFilter:n.dateRange.label,currentFilters:m.value},null,8,["metricsData","driversData","chartData","averageAcceptance","currentDateFilter","currentFilters"])),a(r(me),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:l(()=>[a(r(pe),{class:"p-0"},{default:l(()=>[t("div",hs,[a(r(nt),{class:"relative h-[500px] overflow-auto"},{default:l(()=>[a(r(rt),null,{default:l(()=>[a(r(ce),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:l(()=>[a(r(le),{class:"w-[50px]"},{default:l(()=>[t("div",Cs,[t("input",{type:"checkbox",onChange:Ye,checked:We.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,js)])]),_:1}),f.isSuperAdmin?(i(),R(r(le),{key:0},{default:l(()=>e[56]||(e[56]=[d("Company Name")])),_:1})):_("",!0),(i(),c($,null,L(se,s=>a(r(le),{key:s,class:"cursor-pointer",onClick:p=>Se(s)},{default:l(()=>[t("div",Ss,[s=="rejection_category"?(i(),c("div",$s,"Rejection From Start")):(i(),c("div",Ds,g(s.replace(/_/g," ").split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ")),1)),q.value===s?(i(),c("div",As,[H.value==="asc"?(i(),c("svg",Ns,e[57]||(e[57]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),c("svg",Ts,e[58]||(e[58]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),c("div",Rs,e[59]||(e[59]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),a(r(le),null,{default:l(()=>e[60]||(e[60]=[d("Actions")])),_:1})]),_:1})]),_:1}),a(r(it),null,{default:l(()=>[I.value.length===0?(i(),R(r(ce),{key:0},{default:l(()=>[a(r(Z),{colspan:f.isSuperAdmin?se.length+3:se.length+2,class:"py-8 text-center"},{default:l(()=>e[61]||(e[61]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):_("",!0),(i(!0),c($,null,L(I.value,s=>(i(),R(r(ce),{key:s.id,class:"hover:bg-muted/50"},{default:l(()=>[a(r(Z),{class:"text-center"},{default:l(()=>[z(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[15]||(e[15]=p=>A.value=p),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Fs),[[at,A.value]])]),_:2},1024),f.isSuperAdmin?(i(),R(r(Z),{key:0},{default:l(()=>{var p;return[d(g(((p=s.tenant)==null?void 0:p.name)||"—"),1)]}),_:2},1024)):_("",!0),(i(),c($,null,L(se,p=>a(r(Z),{key:p,class:"whitespace-nowrap"},{default:l(()=>{var D,W;return[p==="date"?(i(),c($,{key:0},[d(g(oe(s[p])),1)],64)):p==="rejection_type"?(i(),c("span",Ms,g(s[p]),1)):p==="reason_code"?(i(),c($,{key:2},[d(g(((D=s.reason_code)==null?void 0:D.reason_code)||"—")+" ",1),(W=s.reason_code)!=null&&W.deleted_at?(i(),c("span",Us,"(Deleted)")):_("",!0)],64)):p==="disputed"?(i(),c($,{key:3},[d(g(s[p]?"Yes":"No"),1)],64)):p==="driver_controllable"?(i(),c($,{key:4},[d(g(s[p]===null?"N/A":s[p]?"Yes":"No"),1)],64)):p==="rejection_category"?(i(),c($,{key:5},[d(g(be(s[p])),1)],64)):(i(),c($,{key:6},[d(g(s[p]),1)],64))]}),_:2},1024)),64)),a(r(Z),null,{default:l(()=>[t("div",Bs,[a(k,{size:"sm",onClick:p=>ye(s),variant:"warning"},{default:l(()=>[a(M,{name:"pencil",class:"mr-1 h-4 w-4"}),e[62]||(e[62]=d(" Edit "))]),_:2},1032,["onClick"]),a(k,{size:"sm",variant:"destructive",onClick:p=>Ue(s.id)},{default:l(()=>[a(M,{name:"trash",class:"mr-1 h-4 w-4"}),e[63]||(e[63]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),f.rejections.links?(i(),c("div",Vs,[t("div",zs,[t("div",Ls,[t("span",null,"Showing "+g(I.value.length)+" of "+g(f.rejections.data.length)+" entries",1),t("div",Ps,[e[64]||(e[64]=t("span",{class:"text-sm"},"Show:",-1)),z(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>V.value=s),onChange:Ve,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(i(),c($,null,L([10,25,50,100],s=>t("option",{key:s,value:s},g(s),9,Es)),64))],544),[[P,V.value]])])]),t("div",Os,[(i(!0),c($,null,L(f.rejections.links,s=>(i(),R(k,{key:s.label,onClick:p=>Be(s.url),disabled:!s.url,variant:"ghost",size:"sm",class:X(["mx-1",{"border-primary bg-primary/10 text-primary":s.active}])},{default:l(()=>[t("span",{innerHTML:s.label},null,8,Ws)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):_("",!0)]),_:1})]),_:1})])):_("",!0),a(r(ne),{open:v.value,"onUpdate:open":e[18]||(e[18]=s=>v.value=s)},{default:l(()=>[a(r(re),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:l(()=>[a(r(ie),{class:"px-4 sm:px-6"},{default:l(()=>[a(r(de),{class:"text-lg sm:text-xl"},{default:l(()=>[d(g(C.value?"Edit":"Add")+" Rejection",1)]),_:1}),a(r(ue),{class:"text-xs sm:text-sm"},{default:l(()=>[d(" Fill in the details to "+g(C.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),a(Ot,{rejection:C.value,reasons:f.rejection_reason_codes,tenants:f.tenants,"is-super-admin":f.isSuperAdmin,"tenant-slug":f.tenantSlug,onClose:e[17]||(e[17]=s=>v.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),f.isSuperAdmin?(i(),R(r(ne),{key:4,open:T.value,"onUpdate:open":e[22]||(e[22]=s=>T.value=s)},{default:l(()=>[a(r(re),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:l(()=>[a(r(ie),{class:"px-4 sm:px-6"},{default:l(()=>[a(r(de),{class:"text-lg sm:text-xl"},{default:l(()=>e[65]||(e[65]=[d("Manage Reason Codes")])),_:1}),a(r(ue),{class:"text-xs sm:text-sm"},{default:l(()=>e[66]||(e[66]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",Ys,[t("div",Is,[e[68]||(e[68]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Reason Codes",-1)),a(k,{onClick:Ae,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:l(()=>[a(M,{name:"plus",class:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e[67]||(e[67]=d(" Add New Code "))]),_:1})]),t("div",qs,[!f.rejection_reason_codes||f.rejection_reason_codes.length===0?(i(),c("div",Hs," No reason codes found ")):(i(),c("div",Gs,[(i(!0),c($,null,L(f.rejection_reason_codes,s=>(i(),c("div",{key:s.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:p=>Ne(s)},[t("div",Ks,[d(g(s.reason_code)+" ",1),s.deleted_at?(i(),c("span",Qs,"(Deleted)")):_("",!0)]),s.description?(i(),c("div",Xs,g(s.description),1)):_("",!0)],8,Js),t("div",Zs,[f.isSuperAdmin?(i(),c($,{key:0},[s.deleted_at?(i(),c($,{key:0},[a(k,{onClick:p=>Ee(s.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:l(()=>[a(M,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[69]||(e[69]=d(" Restore "))]),_:2},1032,["onClick"]),a(k,{onClick:p=>Oe(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:l(()=>[a(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[70]||(e[70]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(i(),R(k,{key:1,onClick:p=>Re(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:l(()=>[a(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[71]||(e[71]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):_("",!0)])]))),128))]))]),x.value?(i(),c("div",ea,[t("h3",ta,g(U.value?"Edit":"Add")+" Reason Code",1),t("div",sa,[t("div",null,[a(r(F),{for:"reason_code",class:"text-xs sm:text-sm"},{default:l(()=>e[72]||(e[72]=[d("Code")])),_:1}),a(r(te),{id:"reason_code",modelValue:O.value.reason_code,"onUpdate:modelValue":e[19]||(e[19]=s=>O.value.reason_code=s),placeholder:"Enter reason code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[a(r(F),{for:"description",class:"text-xs sm:text-sm"},{default:l(()=>e[73]||(e[73]=[d("Description")])),_:1}),a(r(te),{id:"description",modelValue:O.value.description,"onUpdate:modelValue":e[20]||(e[20]=s=>O.value.description=s),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",aa,[a(k,{onClick:Te,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:l(()=>e[74]||(e[74]=[d("Cancel")])),_:1}),a(k,{onClick:Fe,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:l(()=>e[75]||(e[75]=[d("Save")])),_:1})])])])):_("",!0)]),a(r(fe),{class:"px-4 sm:px-6"},{default:l(()=>[a(k,{onClick:e[21]||(e[21]=s=>T.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>e[76]||(e[76]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):_("",!0),a(r(ne),{open:J.value,"onUpdate:open":e[25]||(e[25]=s=>J.value=s)},{default:l(()=>[a(r(re),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[a(r(ie),{class:"px-4 sm:px-6"},{default:l(()=>[a(r(de),{class:"text-lg sm:text-xl"},{default:l(()=>e[77]||(e[77]=[d("Confirm Deletion")])),_:1}),a(r(ue),{class:"text-xs sm:text-sm"},{default:l(()=>e[78]||(e[78]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),a(r(fe),{class:"px-4 sm:px-6"},{default:l(()=>[a(k,{type:"button",onClick:e[23]||(e[23]=s=>J.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>e[79]||(e[79]=[d(" Cancel ")])),_:1}),a(k,{type:"button",onClick:e[24]||(e[24]=s=>Me(ge.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>e[80]||(e[80]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(r(ne),{open:E.value,"onUpdate:open":e[28]||(e[28]=s=>E.value=s)},{default:l(()=>[a(r(re),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[a(r(ie),{class:"px-4 sm:px-6"},{default:l(()=>[a(r(de),{class:"text-lg sm:text-xl"},{default:l(()=>e[81]||(e[81]=[d("Confirm Bulk Deletion")])),_:1}),a(r(ue),{class:"text-xs sm:text-sm"},{default:l(()=>[d(" Are you sure you want to delete "+g(A.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),a(r(fe),{class:"px-4 sm:px-6"},{default:l(()=>[a(k,{type:"button",onClick:e[26]||(e[26]=s=>E.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>e[82]||(e[82]=[d(" Cancel ")])),_:1}),a(k,{type:"button",onClick:e[27]||(e[27]=s=>qe()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>e[83]||(e[83]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{ja as default};
