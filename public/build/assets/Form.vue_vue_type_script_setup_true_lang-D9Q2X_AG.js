import{d as V,b as h,e as c,f as s,i as w,u as e,z as a,aj as M,X as m,F as g,H as v,O as y,S as i,U as p,E as I,G as X}from"./vendor-DrR5RGOb.js";import{x as A}from"./vendor-vue-BInP8APy.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as D}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{K as J,j as P,W as Q,q as R,H as Y,a as Z}from"./vendor-ui-iQj4qE_J.js";import{c as z}from"./utils-u708RIqT.js";import{C as ee,a as ae,L as se}from"./vendor-icons-CZvmGlJ0.js";import{_ as le}from"./Checkbox.vue_vue_type_script_setup_true_lang-DYsZx5V7.js";import{_ as k}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as S}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{_ as U}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";const N=V({__name:"Select",props:{modelValue:{}},emits:["update:modelValue"],setup(f,{emit:_}){const o=_;function $(b){o("update:modelValue",b)}return(b,j)=>(c(),h(e(J),{"model-value":b.modelValue,"onUpdate:modelValue":$},{default:s(()=>[w(b.$slots,"default")]),_:3},8,["model-value"]))}}),T=V({__name:"SelectContent",props:{class:{},position:{}},setup(f){const _=f;return(o,$)=>(c(),h(e(Q),null,{default:s(()=>[a(e(P),{class:M(e(z)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_.class)),position:o.position??"popper"},{default:s(()=>[w(o.$slots,"default")]),_:3},8,["class","position"])]),_:3}))}}),te={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},F=V({__name:"SelectItem",props:{value:{},class:{},disabled:{type:Boolean}},setup(f){const _=f;return(o,$)=>(c(),h(e(R),{value:o.value,disabled:o.disabled,class:M(e(z)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 text-foreground dark:text-white",_.class))},{default:s(()=>[m("span",te,[a(e(ee),{class:"h-4 w-4"})]),w(o.$slots,"default")]),_:3},8,["value","disabled","class"]))}}),H=V({__name:"SelectTrigger",props:{class:{},disabled:{type:Boolean}},setup(f){const _=f;return(o,$)=>(c(),h(e(Y),{class:M(e(z)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_.class)),disabled:o.disabled},{default:s(()=>[w(o.$slots,"default"),a(e(ae),{class:"h-4 w-4 opacity-50"})]),_:3},8,["class","disabled"]))}}),K=V({__name:"SelectValue",props:{class:{},placeholder:{}},setup(f){const _=f;return(o,$)=>(c(),h(e(Z),{placeholder:o.placeholder,class:M(e(z)("text-sm",_.class))},{default:s(()=>[w(o.$slots,"default")]),_:3},8,["placeholder","class"]))}}),oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},de={class:"flex flex-wrap gap-4"},re={class:"space-y-2"},ue={class:"flex justify-end space-x-3"},we=V({__name:"Form",props:{entry:{type:Object,default:()=>({})}},emits:["saved","cancel"],setup(f,{emit:_}){const o=f,$=_,b=["fantastic_plus","fantastic","good","fair","poor"],j=["acceptance","on_time","maintenance_variance","open_boc","vcr_preventable","vmcr_p"],E=["driver_distraction","speeding_violation","sign_violation","traffic_light_violation","following_distance"],L=["gold","silver","not_eligible"],q=[{label:"Less",value:"less"},{label:"Less or Equal",value:"less_or_equal"},{label:"Equal",value:"equal"},{label:"More or Equal",value:"more_or_equal"},{label:"More",value:"more"}],n=A({safety_bonus_eligible_levels:o.entry.safety_bonus_eligible_levels??[],mvts_divisor:o.entry.mvts_divisor??.135,...Object.fromEntries(j.flatMap(r=>b.flatMap(t=>[[`${r}_${t}`,o.entry[`${r}_${t}`]??""],[`${r}_${t}_operator`,o.entry[`${r}_${t}_operator`]??""]]))),...Object.fromEntries(E.flatMap(r=>L.flatMap(t=>[[`${r}_${t}`,o.entry[`${r}_${t}`]??""],[`${r}_${t}_operator`,o.entry[`${r}_${t}_operator`]??""]])))}),W=r=>{const t=n.safety_bonus_eligible_levels.indexOf(r);t===-1?n.safety_bonus_eligible_levels.push(r):n.safety_bonus_eligible_levels.splice(t,1)},G=()=>{n.post(route("performance-metrics.update"),{onSuccess:()=>$("saved")})},O=r=>{const t=q.find(l=>l.value===r);return t?t.label:"Select operator"};return(r,t)=>(c(),g("form",{onSubmit:X(G,["prevent"]),class:"w-full space-y-8"},[(c(),g(v,null,y(j,l=>a(e(k),{key:l,class:"shadow-sm"},{default:s(()=>[a(e(U),null,{default:s(()=>[a(e(C),{class:"capitalize"},{default:s(()=>[i(p(l.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),a(e(S),null,{default:s(()=>[m("div",oe,[(c(),g(v,null,y(b,d=>m("div",{key:`${l}-${d}`,class:"space-y-2"},[a(e(x),{for:`${l}-${d}`,class:"capitalize"},{default:s(()=>[i(p(d.replace(/_/g," ")),1)]),_:2},1032,["for"]),a(e(B),{id:`${l}-${d}`,modelValue:e(n)[`${l}_${d}`],"onUpdate:modelValue":u=>e(n)[`${l}_${d}`]=u,type:"number",step:"0.01",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(e(N),{modelValue:e(n)[`${l}_${d}_operator`],"onUpdate:modelValue":u=>e(n)[`${l}_${d}_operator`]=u},{default:s(()=>[a(e(H),{class:"w-full"},{default:s(()=>[a(e(K),null,{default:s(()=>[i(p(O(e(n)[`${l}_${d}_operator`])),1)]),_:2},1024)]),_:2},1024),a(e(T),null,{default:s(()=>[(c(),g(v,null,y(q,u=>a(e(F),{key:u.value,value:u.value},{default:s(()=>[i(p(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])]),_:2},1024)]),_:2},1024)),64)),(c(),g(v,null,y(E,l=>a(e(k),{key:l,class:"shadow-sm"},{default:s(()=>[a(e(U),null,{default:s(()=>[a(e(C),{class:"capitalize"},{default:s(()=>[i(p(l.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),a(e(S),null,{default:s(()=>[m("div",ne,[(c(),g(v,null,y(L,d=>m("div",{key:`${l}-${d}`,class:"space-y-2"},[a(e(x),{for:`${l}-${d}`,class:"capitalize"},{default:s(()=>[i(p(d.replace(/_/g," ")),1)]),_:2},1032,["for"]),a(e(B),{id:`${l}-${d}`,modelValue:e(n)[`${l}_${d}`],"onUpdate:modelValue":u=>e(n)[`${l}_${d}`]=u,type:"number",step:"0.01",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(e(N),{modelValue:e(n)[`${l}_${d}_operator`],"onUpdate:modelValue":u=>e(n)[`${l}_${d}_operator`]=u},{default:s(()=>[a(e(H),{class:"w-full"},{default:s(()=>[a(e(K),null,{default:s(()=>[i(p(O(e(n)[`${l}_${d}_operator`])),1)]),_:2},1024)]),_:2},1024),a(e(T),null,{default:s(()=>[(c(),g(v,null,y(q,u=>a(e(F),{key:u.value,value:u.value},{default:s(()=>[i(p(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])]),_:2},1024)]),_:2},1024)),64)),a(e(k),{class:"shadow-sm"},{default:s(()=>[a(e(U),null,{default:s(()=>[a(e(C),null,{default:s(()=>t[2]||(t[2]=[i("Safety Bonus Eligibility")])),_:1})]),_:1}),a(e(S),null,{default:s(()=>[m("div",de,[(c(),g(v,null,y(b,l=>m("div",{key:l,class:"flex items-center space-x-2"},[a(e(le),{id:`safety-bonus-${l}`,checked:e(n).safety_bonus_eligible_levels.includes(l),"onUpdate:checked":d=>W(l)},null,8,["id","checked","onUpdate:checked"]),a(e(x),{for:`safety-bonus-${l}`,class:"capitalize"},{default:s(()=>[i(p(l.replace(/_/g," ")),1)]),_:2},1032,["for"])])),64))])]),_:1})]),_:1}),a(e(k),{class:"shadow-sm"},{default:s(()=>[a(e(U),null,{default:s(()=>[a(e(C),null,{default:s(()=>t[3]||(t[3]=[i("MVtS Configuration")])),_:1})]),_:1}),a(e(S),null,{default:s(()=>[m("div",re,[a(e(x),{for:"mvts-divisor"},{default:s(()=>t[4]||(t[4]=[i("MVtS Divisor")])),_:1}),a(e(B),{id:"mvts-divisor",modelValue:e(n).mvts_divisor,"onUpdate:modelValue":t[0]||(t[0]=l=>e(n).mvts_divisor=l),type:"number",step:"0.001",min:"0.001",class:"w-full md:w-1/3"},null,8,["modelValue"]),t[5]||(t[5]=m("p",{class:"text-sm text-muted-foreground"}," This value is used to calculate the Maintenance Variance to Standard (MVtS) metric. Default value is 0.135. ",-1))])]),_:1})]),_:1}),m("div",ue,[a(e(D),{type:"button",onClick:t[1]||(t[1]=l=>$("cancel")),variant:"outline"},{default:s(()=>t[6]||(t[6]=[i(" Cancel ")])),_:1}),a(e(D),{type:"submit",disabled:e(n).processing},{default:s(()=>[e(n).processing?(c(),h(e(se),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):I("",!0),i(" "+p(e(n).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32))}});export{we as _};
