import{c as w,r as C,d as M,b as A,e as o,f,z as u,u as i,X as t,F as n,E as d,aj as z,G as P,S as h,U as a,C as N,H as U,O as E,Y as j,ah as G,D as F}from"./vendor-_LBoWcPD.js";import{x as H,g as Y}from"./vendor-vue-DhopVsWr.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-C0mLukR-.js";import{_ as O,a as R}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-CO7sizhr.js";import{_ as J}from"./Button.vue_vue_type_script_setup_true_lang-BTsGooBq.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-ct5fQ9S7.js";import{_ as S}from"./Label.vue_vue_type_script_setup_true_lang-CM72ee2b.js";import{_ as k}from"./Separator.vue_vue_type_script_setup_true_lang-C6WAv8py.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-BEwfQTMc.js";import"./vendor-ui-C-2WMSm6.js";import"./Icon.vue_vue_type_script_setup_true_lang-BH94pyx1.js";import"./vendor-icons-DEdOLZ3C.js";import"./useInitials-DzeGKvtI.js";import"./app-C2-wzv-3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C9DuGiAN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const y=C([]);function K(){const s=b=>{const m=Math.random().toString(36).substring(2,9),x={id:m,...b,duration:b.duration||5e3};return y.value=[...y.value,x],setTimeout(()=>{r(m)},x.duration),m},r=b=>{y.value=y.value.filter(m=>m.id!==b)};return{toasts:w(()=>y.value),toast:s,dismissToast:r}}const W={class:"space-y-6"},X={class:"border-b"},Q={class:"flex space-x-8"},Z={key:0,class:"space-y-6"},ee={key:0,class:"flex flex-col items-center space-y-3 p-4 border rounded-md bg-muted/50"},te={class:"w-32 h-32 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},se=["src"],ie={class:"grid gap-2"},oe={key:0,class:"text-sm text-destructive"},ne={class:"grid gap-2"},ae=["value"],re={key:0,class:"text-sm text-destructive"},de={class:"grid gap-2"},le={class:"flex items-start space-x-4"},ce={key:0,class:"w-24 h-24 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},me=["src"],ue={class:"flex-1"},ge={key:0,class:"text-sm text-destructive"},pe={class:"flex items-center gap-4"},be={key:0},fe={key:1},ve={class:"text-sm text-neutral-600"},ye={key:1,class:"space-y-6"},xe={key:0,class:"bg-card rounded-lg border shadow-sm p-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he={class:"space-y-2"},Se={class:"text-lg font-semibold"},ke={class:"text-sm text-muted-foreground"},we={class:"space-y-2 md:text-right"},Ce={class:"text-2xl font-bold"},Te={class:"space-y-3 col-span-1 md:col-span-2"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},ze={class:"bg-muted/50 p-3 rounded-md"},Ne={class:"font-medium"},De={class:"bg-muted/50 p-3 rounded-md"},$e={class:"font-medium"},Ve={class:"bg-muted/50 p-3 rounded-md"},Be={class:"font-medium"},Ie={class:"text-xs text-muted-foreground"},Le={key:0,class:"space-y-3 col-span-1 md:col-span-2"},Me={class:"bg-muted/50 p-3 rounded-md"},Pe={key:0},Ue={key:1},Ee={key:0},je={key:1},Ge={key:2},Fe={key:2},He={key:3,class:"mt-1 text-sm text-muted-foreground"},Ye={key:1,class:"bg-muted/50 p-6 rounded-lg border text-center"},dt=M({__name:"TenantSettings",props:{tenant:{type:Object,required:!0},tenantSlug:{type:String,required:!0},subscription:{type:Object,default:null},permissions:Array},setup(s){const r=s,b=w(()=>Array.isArray(r.permissions)?r.permissions.map(c=>c==null?void 0:c.name).filter(Boolean):[]),m=C("company");w(()=>[{title:r.tenantSlug?"Dashboard":"Admin Dashboard",href:r.tenantSlug?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")}]);const{toast:x}=K(),_=C(null),l=H({name:r.tenant.name,slug:r.tenant.slug,timezone:r.tenant.timezone??"America/Indiana/Indianapolis",image:null}),$={"America/New_York":"Eastern Time (ET)","America/Chicago":"Central Time (CT)","America/Denver":"Mountain Time (MT)","America/Los_Angeles":"Pacific Time (PT)","America/Anchorage":"Alaska Time (AKT)","Pacific/Honolulu":"Hawaii Time (HAST)","America/Phoenix":"Arizona Time (no DST)","America/Indiana/Indianapolis":"Eastern Time (Indiana)"},V=c=>{const e=c.target;if(e.files&&e.files[0]){l.image=e.files[0];const p=new FileReader;p.onload=g=>{var v;_.value=(v=g.target)==null?void 0:v.result},p.readAsDataURL(e.files[0])}},B=()=>{l.post(route("tenant.settings.update",r.tenantSlug),{onSuccess:()=>{x({title:"Success",description:"Company settings updated successfully"})},preserveScroll:!0})},I=(c,e="USD")=>c?new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD"}).format(c):"$0.00",T=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",L=(c,e)=>{if(!c||!e)return"N/A";const p=c.toString().padStart(2,"0"),g=e.toString().length===4?e.toString().slice(-2):e.toString();return`${p}/${g}`};return(c,e)=>(o(),A(q,{breadcrumbs:r.breadcrumbItems,tenantSlug:r.tenantSlug,permissions:r.permissions},{default:f(()=>[u(i(Y),{title:"Company"}),u(O,{permissions:r.permissions},{default:f(()=>{var p;return[t("div",W,[u(R,{title:"Company",description:"Manage your company information and subscription"}),u(i(k)),t("div",X,[t("div",Q,[t("button",{onClick:e[0]||(e[0]=g=>m.value="company"),class:z(["py-2 px-1 -mb-px font-medium text-sm",m.value==="company"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Company Settings ",2),t("button",{onClick:e[1]||(e[1]=g=>m.value="subscription"),class:z(["py-2 px-1 -mb-px font-medium text-sm",m.value==="subscription"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Subscription Details ",2)])]),m.value==="company"?(o(),n("div",Z,[(p=s.tenant)!=null&&p.image_path?(o(),n("div",ee,[e[4]||(e[4]=t("div",{class:"text-sm font-medium"},"Current Company Logo",-1)),t("div",te,[t("img",{src:`/storage/${s.tenant.image_path}`,alt:"Company Logo",class:"max-w-full max-h-full object-contain"},null,8,se)]),e[5]||(e[5]=t("div",{class:"text-xs text-muted-foreground"}," Logo is optimized and converted to SVG for better quality ",-1))])):d("",!0),t("form",{onSubmit:P(B,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[t("div",ie,[u(i(S),{for:"name"},{default:f(()=>e[6]||(e[6]=[h("Company Name")])),_:1}),u(i(D),{id:"name",modelValue:i(l).name,"onUpdate:modelValue":e[2]||(e[2]=g=>i(l).name=g),placeholder:"Enter company name",class:"mt-1 block w-full"},null,8,["modelValue"]),i(l).errors.name?(o(),n("p",oe,a(i(l).errors.name),1)):d("",!0)]),t("div",ne,[u(i(S),{for:"timezone"},{default:f(()=>e[7]||(e[7]=[h("Company Timezone")])),_:1}),N(t("select",{id:"timezone","onUpdate:modelValue":e[3]||(e[3]=g=>i(l).timezone=g),class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"},[(o(),n(U,null,E($,(g,v)=>t("option",{key:v,value:v},a(g),9,ae)),64))],512),[[j,i(l).timezone]]),i(l).errors.timezone?(o(),n("p",re,a(i(l).errors.timezone),1)):d("",!0)]),t("div",de,[u(i(S),{for:"image"},{default:f(()=>e[8]||(e[8]=[h("Update Company Logo")])),_:1}),t("div",le,[_.value?(o(),n("div",ce,[t("img",{src:_.value,alt:"New Company Logo Preview",class:"max-w-full max-h-full object-contain"},null,8,me)])):d("",!0),t("div",ue,[u(i(D),{id:"image",type:"file",onChange:V,accept:"image/jpeg,image/png,image/gif,image/svg+xml",class:"mt-1 block w-full"}),e[9]||(e[9]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Accepted formats: JPEG, PNG, GIF, SVG. Max size: 2MB. Will be optimized and converted to SVG. ",-1)),i(l).errors.image?(o(),n("p",ge,a(i(l).errors.image),1)):d("",!0)])])]),t("div",pe,[b.value&&b.value.includes("tenant-settings.update")?(o(),A(i(J),{key:0,type:"submit",disabled:i(l).processing},{default:f(()=>[i(l).processing?(o(),n("span",be,"Updating...")):(o(),n("span",fe,"Save Changes"))]),_:1},8,["disabled"])):d("",!0),u(G,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:f(()=>[N(t("p",ve,"Saved.",512),[[F,i(l).recentlySuccessful]])]),_:1})])],32)])):d("",!0),m.value==="subscription"?(o(),n("div",ye,[s.subscription?(o(),n("div",xe,[t("div",_e,[t("div",he,[t("h3",Se,a(s.subscription.name),1),t("p",ke,a(s.subscription.description||"No description available"),1)]),t("div",we,[t("div",Ce,a(I(s.subscription.price,s.subscription.currency_code)),1)]),t("div",Te,[u(i(k)),e[13]||(e[13]=t("h4",{class:"font-medium"},"Billing Information",-1)),t("div",Ae,[t("div",ze,[e[10]||(e[10]=t("div",{class:"text-xs text-muted-foreground"},"Next Billing",-1)),t("div",Ne,a(T(s.subscription.next_billing_at)),1)]),t("div",De,[e[11]||(e[11]=t("div",{class:"text-xs text-muted-foreground"},"Last Billing",-1)),t("div",$e,a(T(s.subscription.last_billing_at)),1)]),t("div",Ve,[e[12]||(e[12]=t("div",{class:"text-xs text-muted-foreground"},"Payment Method",-1)),t("div",Be,a(s.subscription.card_type)+" •••• "+a(s.subscription.last_four_digits),1),t("div",Ie,"Expires "+a(L(s.subscription.expiry_month,s.subscription.expiry_year)),1)])])]),s.subscription.billing_address?(o(),n("div",Le,[u(i(k)),e[14]||(e[14]=t("h4",{class:"font-medium"},"Billing Address",-1)),t("div",Me,[s.subscription.billing_address.street?(o(),n("div",Pe,a(s.subscription.billing_address.street),1)):d("",!0),s.subscription.billing_address.street2?(o(),n("div",Ue,a(s.subscription.billing_address.street2),1)):d("",!0),t("div",null,[s.subscription.billing_address.city?(o(),n("span",Ee,a(s.subscription.billing_address.city)+", ",1)):d("",!0),s.subscription.billing_address.state?(o(),n("span",je,a(s.subscription.billing_address.state),1)):d("",!0),s.subscription.billing_address.zip?(o(),n("span",Ge,a(s.subscription.billing_address.zip),1)):d("",!0)]),s.subscription.billing_address.country?(o(),n("div",Fe,a(s.subscription.billing_address.country),1)):d("",!0),s.subscription.billing_address.phone?(o(),n("div",He," Phone: "+a(s.subscription.billing_address.phone),1)):d("",!0)])])):d("",!0)])])):(o(),n("div",Ye,e[15]||(e[15]=[t("h3",{class:"text-lg font-medium mb-2"},"No Subscription Found",-1),t("p",{class:"text-muted-foreground"},"Your company doesn't have an active subscription.",-1)])))])):d("",!0)])]}),_:1},8,["permissions"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}});export{dt as default};
