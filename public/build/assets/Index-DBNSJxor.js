import{d as Me,C as K,f as me,a as c,o as u,b as l,g as A,e as n,w as o,h as r,i as F,v as V,u as s,F as j,r as U,t as x,j as ve,k as w,c as ee,l as R,m as Be,n as G,p as Le,W as P}from"./app--bSWE9if.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-DDmT9EkP.js";import{_ as te,a as le,b as ne,c as oe,d as se,e as de}from"./DialogTitle.vue_vue_type_script_setup_true_lang-YDnJ6uHF.js";import{_ as C,a as E}from"./Label.vue_vue_type_script_setup_true_lang-vyFiwHoL.js";import{_ as Pe}from"./Checkbox.vue_vue_type_script_setup_true_lang-XmQC75j_.js";import{_ as Ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-CUxGtrl9.js";import{_ as D}from"./Icon.vue_vue_type_script_setup_true_lang-BoqlFaeB.js";import{_ as Ie,a as he,b as ie,c as ae,d as Ye,e as J}from"./TableRow.vue_vue_type_script_setup_true_lang-CVsPY3Yo.js";import{_ as ue}from"./Card.vue_vue_type_script_setup_true_lang-CNE6nEKb.js";import{_ as We,a as Oe}from"./CardTitle.vue_vue_type_script_setup_true_lang-DljfQSGu.js";import{_ as ce}from"./CardContent.vue_vue_type_script_setup_true_lang-RAgMjrET.js";import{_ as qe,a as He,b as Ge}from"./AlertDescription.vue_vue_type_script_setup_true_lang-DQve0m5N.js";import"./index-DZHJ_HUJ.js";import"./check-BZ_8DhFK.js";import"./createLucideIcon-DvzHZPDZ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BN1lJoeG.js";import"./shield-BO6sc7L3.js";import"./loader-circle-yryCBTV6.js";import"./sun-BoK1RCE7.js";const Qe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Je={key:0,class:"col-span-full"},Ke={class:"relative"},Xe=["value"],Ze={class:"col-span-full"},et={class:"relative"},tt={class:"relative"},lt={class:"relative"},nt=["value"],ot={class:"relative"},st={class:"flex items-center space-x-2"},at={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},rt=Me({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(v,{emit:p}){var S,T,z,$,M,Y,N;const _=v,I=p,f=K({id:(S=_.rejection)==null?void 0:S.id,tenant_id:_.isSuperAdmin?(T=_.rejection)==null?void 0:T.tenant_id:null,date:((z=_.rejection)==null?void 0:z.date)||"",driver_name:(($=_.rejection)==null?void 0:$.driver_name)||"",rejection_type:((M=_.rejection)==null?void 0:M.rejection_type)||"block",rejection_category:((Y=_.rejection)==null?void 0:Y.rejection_category)||"more_than_6",reason_code_id:((N=_.rejection)==null?void 0:N.reason_code_id)||null,disputed:_.rejection&&_.rejection.disputed!==null?parseInt(_.rejection.disputed)===1:!1,driver_controllable:_.rejection&&_.rejection.driver_controllable!==null?parseInt(_.rejection.driver_controllable)===1:null});me(()=>_.rejection,g=>{g?(f.id=g.id,f.tenant_id=g.tenant_id,f.date=g.date,f.driver_name=g.driver_name,f.rejection_type=g.rejection_type,f.rejection_category=g.rejection_category,f.reason_code_id=g.reason_code_id,f.disputed=g.disputed!==null?parseInt(g.disputed)===1:!1,f.driver_controllable=g.driver_controllable!==null?parseInt(g.driver_controllable)===1:null):f.reset()},{immediate:!0});const h=()=>{const g=!!f.id,d=_.isSuperAdmin?g?"acceptance.update.admin":"acceptance.store.admin":g?"acceptance.update":"acceptance.store",y=_.isSuperAdmin?g?{rejection:f.id}:{}:g?{tenantSlug:_.tenantSlug,rejection:f.id}:{tenantSlug:_.tenantSlug};f[g?"put":"post"](route(d,y),{onSuccess:()=>I("close")})};return(g,d)=>(u(),c("form",{onSubmit:ve(h,["prevent"]),class:"space-y-6"},[l("div",Qe,[v.isSuperAdmin?(u(),c("div",Je,[n(C,null,{default:o(()=>d[9]||(d[9]=[r("Company Name")])),_:1}),l("div",Ke,[F(l("select",{"onUpdate:modelValue":d[0]||(d[0]=y=>s(f).tenant_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[d[10]||(d[10]=l("option",{value:null,disabled:""},"Select Company",-1)),(u(!0),c(j,null,U(v.tenants,y=>(u(),c("option",{key:y.id,value:y.id},x(y.name),9,Xe))),128))],512),[[V,s(f).tenant_id]]),d[11]||(d[11]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):A("",!0),l("div",Ze,[n(C,null,{default:o(()=>d[12]||(d[12]=[r("Date")])),_:1}),n(E,{type:"date",modelValue:s(f).date,"onUpdate:modelValue":d[1]||(d[1]=y=>s(f).date=y),class:"w-full"},null,8,["modelValue"])]),l("div",null,[n(C,null,{default:o(()=>d[13]||(d[13]=[r("Driver Name")])),_:1}),n(E,{modelValue:s(f).driver_name,"onUpdate:modelValue":d[2]||(d[2]=y=>s(f).driver_name=y),class:"w-full"},null,8,["modelValue"])]),l("div",null,[n(C,null,{default:o(()=>d[14]||(d[14]=[r("Rejection Type")])),_:1}),l("div",et,[F(l("select",{"onUpdate:modelValue":d[3]||(d[3]=y=>s(f).rejection_type=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},d[15]||(d[15]=[l("option",{value:"block"},"Block",-1),l("option",{value:"load"},"Load",-1)]),512),[[V,s(f).rejection_type]]),d[16]||(d[16]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[n(C,null,{default:o(()=>d[17]||(d[17]=[r("Rejection Category")])),_:1}),l("div",tt,[F(l("select",{"onUpdate:modelValue":d[4]||(d[4]=y=>s(f).rejection_category=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},d[18]||(d[18]=[l("option",{value:"more_than_6"},"More than 6 hrs",-1),l("option",{value:"within_6"},"Within 6 hrs",-1),l("option",{value:"after_start"},"After start",-1)]),512),[[V,s(f).rejection_category]]),d[19]||(d[19]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[n(C,null,{default:o(()=>d[20]||(d[20]=[r("Reason Code")])),_:1}),l("div",lt,[F(l("select",{"onUpdate:modelValue":d[5]||(d[5]=y=>s(f).reason_code_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(u(!0),c(j,null,U(v.reasons,y=>(u(),c("option",{key:y.id,value:y.id},x(y.reason_code),9,nt))),128))],512),[[V,s(f).reason_code_id]]),d[21]||(d[21]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[n(C,null,{default:o(()=>d[22]||(d[22]=[r("Driver Controllable")])),_:1}),l("div",ot,[F(l("select",{"onUpdate:modelValue":d[6]||(d[6]=y=>s(f).driver_controllable=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},d[23]||(d[23]=[l("option",{value:null},"N/A",-1),l("option",{value:!0},"Yes",-1),l("option",{value:!1},"No",-1)]),512),[[V,s(f).driver_controllable]]),d[24]||(d[24]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",st,[n(Pe,{checked:s(f).disputed,"onUpdate:checked":d[7]||(d[7]=y=>s(f).disputed=y),id:"disputed"},null,8,["checked"]),n(C,{for:"disputed"},{default:o(()=>d[25]||(d[25]=[r("Disputed")])),_:1})])]),l("div",at,[n(b,{type:"button",onClick:d[8]||(d[8]=y=>I("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>d[26]||(d[26]=[r(" Cancel ")])),_:1}),n(b,{type:"submit",disabled:s(f).processing,class:"w-full sm:w-auto"},{default:o(()=>[r(x(s(f).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),dt={class:"max-w-7xl mx-auto p-6 space-y-8"},it={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},ut={class:"flex flex-wrap gap-3"},ct={class:"cursor-pointer"},ft=["action"],pt={class:"flex flex-col gap-2"},mt={class:"flex flex-wrap gap-2"},vt={key:0,class:"text-sm text-muted-foreground"},gt={key:0},yt={key:1},bt={key:2},xt={class:"flex flex-col gap-4"},_t={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},kt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},Ct=["value"],wt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full"},St={class:"flex justify-end"},jt={class:"overflow-x-auto"},$t={class:"flex items-center justify-center"},At=["checked"],Dt={class:"flex items-center"},Rt={key:0,class:"ml-2"},Tt={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ft={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Vt={key:1,class:"ml-2 opacity-50"},Nt=["value"],Ut={key:1,class:"capitalize"},zt={key:0,class:"ml-1 text-xs text-red-500"},Mt={class:"flex space-x-2"},Bt={key:0,class:"bg-muted/20 px-4 py-3 border-t"},Lt={class:"flex justify-between items-center"},Pt={class:"text-sm text-muted-foreground flex items-center gap-4"},Et={class:"flex items-center gap-2"},It=["value"],ht={class:"flex"},Yt=["innerHTML"],Wt={class:"mt-4 space-y-4"},Ot={class:"flex items-center justify-between"},qt={class:"max-h-[400px] overflow-y-auto"},Ht={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},Gt={key:1,class:"space-y-2"},Qt=["onClick"],Jt={class:"font-medium"},Kt={key:0,class:"ml-2 text-xs text-red-500"},Xt={key:0,class:"text-sm text-muted-foreground mt-1"},Zt={class:"opacity-0 group-hover:opacity-100 transition-opacity"},el={key:0,class:"border rounded-md p-4 space-y-4"},tl={class:"text-sm font-medium"},ll={class:"space-y-3"},nl={class:"flex justify-end space-x-2"},wl={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"full"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10}},setup(v){const p=v,_=[{title:p.tenantSlug?"Dashboard":"Admin Dashboard",href:p.tenantSlug?route("dashboard",{tenantSlug:p.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:p.tenantSlug?route("acceptance.index",{tenantSlug:p.tenantSlug}):route("acceptance.index.admin")}],I=w(!1),f=w(!1),h=w(null),S=w(""),T=w(p.dateFilter||"full"),z=w(p.perPage),$=w([]),M=w(!1),Y=w(null),N=w(!1),g=w(null),d=w({reason_code:"",description:""}),y=w(!1),re=w(null),X=["date","rejection_type","driver_name","penalty","reason_code","disputed","driver_controllable"],W=w("date"),O=w("desc"),m=w({search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""}),q=ee(()=>{let a=[...p.rejections.data];if(m.value.search){const e=m.value.search.toLowerCase();a=a.filter(t=>{var i,k,L,Q;return((i=t.driver_name)==null?void 0:i.toLowerCase().includes(e))||((k=t.rejection_type)==null?void 0:k.toLowerCase().includes(e))||((Q=(L=t.reason_code)==null?void 0:L.reason_code)==null?void 0:Q.toLowerCase().includes(e))})}if(m.value.dateFrom&&(a=a.filter(e=>e.date&&e.date>=m.value.dateFrom)),m.value.dateTo&&(a=a.filter(e=>e.date&&e.date<=m.value.dateTo)),m.value.rejectionType&&(a=a.filter(e=>e.rejection_type===m.value.rejectionType)),m.value.reasonCode&&(a=a.filter(e=>e.reason_code&&e.reason_code.id===parseInt(m.value.reasonCode))),m.value.penalty){const e=m.value.penalty.toLowerCase();a=a.filter(t=>t.penalty&&t.penalty.toString().toLowerCase().includes(e))}if(m.value.disputed!==""){const e=m.value.disputed==="true";a=a.filter(t=>t.disputed===e)}if(m.value.driverControllable!=="")if(m.value.driverControllable==="null")a=a.filter(e=>e.driver_controllable===null);else{const e=m.value.driverControllable==="true";a=a.filter(t=>t.driver_controllable===e)}return a.sort((e,t)=>{var L,Q;let i=e[W.value],k=t[W.value];return W.value==="reason_code"&&(i=((L=e.reason_code)==null?void 0:L.reason_code)||"",k=((Q=t.reason_code)==null?void 0:Q.reason_code)||""),i===null?1:k===null?-1:(typeof i=="string"&&(i=i.toLowerCase(),k=k.toLowerCase()),i<k?O.value==="asc"?-1:1:i>k?O.value==="asc"?1:-1:0)}),a});function ge(a){W.value===a?O.value=O.value==="asc"?"desc":"asc":(W.value=a,O.value="asc")}function B(){}function ye(){m.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""},H("full")}const fe=(a=null)=>{h.value=a,I.value=!0},be=()=>{f.value=!0,N.value=!1,g.value=null},xe=()=>{d.value={reason_code:"",description:""},g.value=null,N.value=!0},_e=a=>{d.value={reason_code:a.reason_code,description:a.description||""},g.value=a.id,N.value=!0},ke=()=>{N.value=!1,g.value=null},pe=a=>{re.value=a,y.value=!0},Ce=()=>{const a=K({reason_code:d.value.reason_code,description:d.value.description}),e=g.value?p.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":p.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",t=g.value?p.isSuperAdmin?{code:g.value}:{tenantSlug:p.tenantSlug,code:g.value}:p.isSuperAdmin?{}:{tenantSlug:p.tenantSlug};(g.value?a.put:a.post).call(a,route(e,t),{onSuccess:()=>{S.value=g.value?"Reason code updated successfully.":"Reason code created successfully.",N.value=!1,g.value=null,P.reload({only:["rejection_reason_codes"]})},onError:k=>{console.error(k)}})},we=a=>{const e=K({}),t=p.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",i=p.isSuperAdmin?{id:a}:{tenantSlug:p.tenantSlug,code:a};e.delete(route(t,i),{onSuccess:()=>{S.value="Reason code deleted successfully.",y.value=!1,P.reload({only:["rejection_reason_codes"]})}})},Se=a=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=K({}),t=p.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",i=p.isSuperAdmin?{rejection:a}:{tenantSlug:p.tenantSlug,rejection:a};e.delete(route(t,i),{preserveScroll:!0,onSuccess:()=>{S.value="Rejection deleted successfully."}})},je=a=>{if(a){const e=new URL(a);e.searchParams.set("perPage",z.value),P.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["rejections"]})}};function H(a){T.value=a;const e=p.tenantSlug?route("acceptance.index",{tenantSlug:p.tenantSlug}):route("acceptance.index.admin");P.get(e,{dateFilter:a,perPage:z.value},{preserveState:!0})}function $e(){const a=p.tenantSlug?route("acceptance.index",{tenantSlug:p.tenantSlug}):route("acceptance.index.admin");P.get(a,{dateFilter:T.value,perPage:z.value},{preserveState:!0})}function Z(a){if(!a)return"";const e=a.split("-");if(e.length!==3)return a;const[t,i,k]=e;return`${Number(i)}/${Number(k)}/${t}`}me(S,a=>{a&&setTimeout(()=>{S.value=""},5e3)});function Ae(a){P.post(route("rejection_reason_codes.restore.admin",{id:a}),{},{onSuccess:()=>{S.value="Reason code restored successfully",setTimeout(()=>S.value="",3e3)}})}function De(a){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&P.delete(route("rejection_reason_codes.forceDelete.admin",{id:a}),{onSuccess:()=>{S.value="Reason code permanently deleted",setTimeout(()=>S.value="",3e3)}})}ee(()=>p.rejection_reason_codes.filter(a=>!a.deleted_at));const Re=ee(()=>q.value.length>0&&$.value.length===q.value.length);function Te(a){a.target.checked?$.value=q.value.map(e=>e.id):$.value=[]}function Fe(){$.value.length>0&&(M.value=!0)}function Ve(){const a=K({ids:$.value}),e=p.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",t=p.isSuperAdmin?{}:{tenantSlug:p.tenantSlug};a.delete(route(e,t),{preserveScroll:!0,onSuccess:()=>{S.value=`${$.value.length} rejection records deleted successfully.`,$.value=[],M.value=!1},onError:i=>{console.error(i)}})}function Ne(a){const e=a.target.files[0];if(!e)return;const t=new FormData;t.append("csv_file",e);const i=p.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:p.tenantSlug});P.post(i,t,{onSuccess:()=>{S.value="Delays imported successfully",a.target.value=""},onError:k=>{console.error(k),a.target.value=""}})}function Ue(){Y.value&&Y.value.submit()}const ze=ee(()=>p.tenantSlug?route("acceptance.export",{tenantSlug:p.tenantSlug}):route("acceptance.export.admin"));return(a,e)=>(u(),R(Ee,{breadcrumbs:_,tenantSlug:v.tenantSlug},{default:o(()=>[n(s(Be),{title:"Acceptance"}),l("div",dt,[S.value?(u(),R(s(qe),{key:0,variant:"success"},{default:o(()=>[n(s(He),null,{default:o(()=>e[30]||(e[30]=[r("Success")])),_:1}),n(s(Ge),null,{default:o(()=>[r(x(S.value),1)]),_:1})]),_:1})):A("",!0),l("div",it,[e[35]||(e[35]=l("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Acceptance",-1)),l("div",ut,[n(b,{onClick:e[0]||(e[0]=t=>fe()),variant:"default"},{default:o(()=>[n(D,{name:"plus",class:"mr-2 h-4 w-4"}),e[31]||(e[31]=r(" Add Rejection "))]),_:1}),$.value.length>0?(u(),R(b,{key:0,onClick:e[1]||(e[1]=t=>Fe()),variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),r(" Delete Selected ("+x($.value.length)+") ",1)]),_:1})):A("",!0),l("label",ct,[n(b,{variant:"secondary",as:"span"},{default:o(()=>[n(D,{name:"upload",class:"mr-2 h-4 w-4"}),e[32]||(e[32]=r(" Import CSV "))]),_:1}),l("input",{type:"file",class:"hidden",onChange:Ne,accept:".csv"},null,32)]),n(b,{onClick:ve(Ue,["prevent"]),variant:"outline"},{default:o(()=>[n(D,{name:"download",class:"mr-2 h-4 w-4"}),e[33]||(e[33]=r(" Export CSV "))]),_:1}),v.isSuperAdmin?(u(),R(b,{key:1,onClick:e[2]||(e[2]=t=>be()),variant:"outline"},{default:o(()=>[n(D,{name:"settings",class:"mr-2 h-4 w-4"}),e[34]||(e[34]=r(" Manage Reason Codes "))]),_:1})):A("",!0)])]),l("form",{ref_key:"exportForm",ref:Y,action:ze.value,method:"GET",class:"hidden"},null,8,ft),n(s(ue),null,{default:o(()=>[n(s(ce),{class:"p-4"},{default:o(()=>[l("div",pt,[l("div",mt,[n(b,{onClick:e[3]||(e[3]=t=>H("yesterday")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":T.value==="yesterday"})},{default:o(()=>e[36]||(e[36]=[r(" Yesterday ")])),_:1},8,["class"]),n(b,{onClick:e[4]||(e[4]=t=>H("current-week")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":T.value==="current-week"})},{default:o(()=>e[37]||(e[37]=[r(" Current Week ")])),_:1},8,["class"]),n(b,{onClick:e[5]||(e[5]=t=>H("6w")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":T.value==="6w"})},{default:o(()=>e[38]||(e[38]=[r(" 6 Weeks ")])),_:1},8,["class"]),n(b,{onClick:e[6]||(e[6]=t=>H("quarterly")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":T.value==="quarterly"})},{default:o(()=>e[39]||(e[39]=[r(" Quarterly ")])),_:1},8,["class"]),n(b,{onClick:e[7]||(e[7]=t=>H("full")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":T.value==="full"})},{default:o(()=>e[40]||(e[40]=[r(" Full ")])),_:1},8,["class"])]),v.dateRange?(u(),c("div",vt,[T.value==="yesterday"&&v.dateRange.start?(u(),c("span",gt," Showing data from "+x(Z(v.dateRange.start)),1)):v.dateRange.start&&v.dateRange.end?(u(),c("span",yt," Showing data from "+x(Z(v.dateRange.start))+" to "+x(Z(v.dateRange.end)),1)):(u(),c("span",bt,x(v.dateRange.label),1))])):A("",!0)])]),_:1})]),_:1}),n(s(ue),null,{default:o(()=>[n(s(We),null,{default:o(()=>[n(s(Oe),null,{default:o(()=>e[41]||(e[41]=[r("Filters")])),_:1})]),_:1}),n(s(ce),null,{default:o(()=>[l("div",xt,[l("div",_t,[l("div",null,[n(s(C),{for:"search"},{default:o(()=>e[42]||(e[42]=[r("Search")])),_:1}),n(s(E),{id:"search",modelValue:m.value.search,"onUpdate:modelValue":e[8]||(e[8]=t=>m.value.search=t),type:"text",placeholder:"Search by driver name...",onInput:B},null,8,["modelValue"])]),l("div",null,[n(s(C),{for:"dateFrom"},{default:o(()=>e[43]||(e[43]=[r("Date From")])),_:1}),n(s(E),{id:"dateFrom",modelValue:m.value.dateFrom,"onUpdate:modelValue":e[9]||(e[9]=t=>m.value.dateFrom=t),type:"date",onChange:B},null,8,["modelValue"])]),l("div",null,[n(s(C),{for:"dateTo"},{default:o(()=>e[44]||(e[44]=[r("Date To")])),_:1}),n(s(E),{id:"dateTo",modelValue:m.value.dateTo,"onUpdate:modelValue":e[10]||(e[10]=t=>m.value.dateTo=t),type:"date",onChange:B},null,8,["modelValue"])])]),l("div",kt,[l("div",null,[n(s(C),{for:"rejectionType"},{default:o(()=>e[45]||(e[45]=[r("Rejection Type")])),_:1}),F(l("select",{id:"rejectionType","onUpdate:modelValue":e[11]||(e[11]=t=>m.value.rejectionType=t),onChange:B,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},e[46]||(e[46]=[l("option",{value:""},"All Types",-1),l("option",{value:"pickup"},"Pickup",-1),l("option",{value:"delivery"},"Delivery",-1)]),544),[[V,m.value.rejectionType]])]),l("div",null,[n(s(C),{for:"reasonCode"},{default:o(()=>e[47]||(e[47]=[r("Reason Code")])),_:1}),F(l("select",{id:"reasonCode","onUpdate:modelValue":e[12]||(e[12]=t=>m.value.reasonCode=t),onChange:B,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[e[48]||(e[48]=l("option",{value:""},"All Reason Codes",-1)),(u(!0),c(j,null,U(v.rejection_reason_codes,t=>(u(),c("option",{key:t.id,value:t.id},x(t.reason_code),9,Ct))),128))],544),[[V,m.value.reasonCode]])]),l("div",null,[n(s(C),{for:"penalty"},{default:o(()=>e[49]||(e[49]=[r("Penalty")])),_:1}),n(s(E),{id:"penalty",modelValue:m.value.penalty,"onUpdate:modelValue":e[13]||(e[13]=t=>m.value.penalty=t),type:"text",placeholder:"Filter by penalty...",onInput:B},null,8,["modelValue"])])]),l("div",wt,[l("div",null,[n(s(C),{for:"disputed"},{default:o(()=>e[50]||(e[50]=[r("Disputed")])),_:1}),F(l("select",{id:"disputed","onUpdate:modelValue":e[14]||(e[14]=t=>m.value.disputed=t),onChange:B,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},e[51]||(e[51]=[l("option",{value:""},"All",-1),l("option",{value:"true"},"Yes",-1),l("option",{value:"false"},"No",-1)]),544),[[V,m.value.disputed]])]),l("div",null,[n(s(C),{for:"driverControllable"},{default:o(()=>e[52]||(e[52]=[r("Driver Controllable")])),_:1}),F(l("select",{id:"driverControllable","onUpdate:modelValue":e[15]||(e[15]=t=>m.value.driverControllable=t),onChange:B,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},e[53]||(e[53]=[l("option",{value:""},"All",-1),l("option",{value:"true"},"Yes",-1),l("option",{value:"false"},"No",-1),l("option",{value:"null"},"N/A",-1)]),544),[[V,m.value.driverControllable]])])]),l("div",St,[n(b,{onClick:ye,variant:"ghost",size:"sm"},{default:o(()=>[n(D,{name:"rotate-ccw",class:"mr-2 h-4 w-4"}),e[54]||(e[54]=r(" Reset Filters "))]),_:1})])])]),_:1})]),_:1}),n(s(ue),null,{default:o(()=>[n(s(ce),{class:"p-0"},{default:o(()=>[l("div",jt,[n(s(Ie),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[n(s(he),null,{default:o(()=>[n(s(ie),{class:"sticky top-0 bg-background border-b z-10"},{default:o(()=>[n(s(ae),{class:"w-[50px]"},{default:o(()=>[l("div",$t,[l("input",{type:"checkbox",onChange:Te,checked:Re.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,At)])]),_:1}),v.isSuperAdmin?(u(),R(s(ae),{key:0},{default:o(()=>e[55]||(e[55]=[r("Company Name")])),_:1})):A("",!0),(u(),c(j,null,U(X,t=>n(s(ae),{key:t,class:"cursor-pointer",onClick:i=>ge(t)},{default:o(()=>[l("div",Dt,[r(x(t.replace(/_/g," ").replace(/^./,i=>i.toUpperCase()))+" ",1),W.value===t?(u(),c("div",Rt,[O.value==="asc"?(u(),c("svg",Tt,e[56]||(e[56]=[l("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(u(),c("svg",Ft,e[57]||(e[57]=[l("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(u(),c("div",Vt,e[58]||(e[58]=[l("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M8 10l4-4 4 4"}),l("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),n(s(ae),null,{default:o(()=>e[59]||(e[59]=[r("Actions")])),_:1})]),_:1})]),_:1}),n(s(Ye),null,{default:o(()=>[q.value.length===0?(u(),R(s(ie),{key:0},{default:o(()=>[n(s(J),{colspan:v.isSuperAdmin?X.length+3:X.length+2,class:"text-center py-8"},{default:o(()=>e[60]||(e[60]=[r(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):A("",!0),(u(!0),c(j,null,U(q.value,t=>(u(),R(s(ie),{key:t.id,class:"hover:bg-muted/50"},{default:o(()=>[n(s(J),{class:"text-center"},{default:o(()=>[F(l("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[16]||(e[16]=i=>$.value=i),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Nt),[[Le,$.value]])]),_:2},1024),v.isSuperAdmin?(u(),R(s(J),{key:0},{default:o(()=>{var i;return[r(x(((i=t.tenant)==null?void 0:i.name)||"—"),1)]}),_:2},1024)):A("",!0),(u(),c(j,null,U(X,i=>n(s(J),{key:i,class:"whitespace-nowrap"},{default:o(()=>{var k,L;return[i==="date"?(u(),c(j,{key:0},[r(x(Z(t[i])),1)],64)):i==="rejection_type"?(u(),c("span",Ut,x(t[i]),1)):i==="reason_code"?(u(),c(j,{key:2},[r(x(((k=t.reason_code)==null?void 0:k.reason_code)||"—")+" ",1),(L=t.reason_code)!=null&&L.deleted_at?(u(),c("span",zt,"(Deleted)")):A("",!0)],64)):i==="disputed"?(u(),c(j,{key:3},[r(x(t[i]?"Yes":"No"),1)],64)):i==="driver_controllable"?(u(),c(j,{key:4},[r(x(t[i]===null?"N/A":t[i]?"Yes":"No"),1)],64)):(u(),c(j,{key:5},[r(x(t[i]),1)],64))]}),_:2},1024)),64)),n(s(J),null,{default:o(()=>[l("div",Mt,[n(b,{size:"sm",onClick:i=>fe(t),variant:"warning"},{default:o(()=>[n(D,{name:"pencil",class:"mr-1 h-4 w-4"}),e[61]||(e[61]=r(" Edit "))]),_:2},1032,["onClick"]),n(b,{size:"sm",variant:"destructive",onClick:i=>Se(t.id)},{default:o(()=>[n(D,{name:"trash",class:"mr-1 h-4 w-4"}),e[62]||(e[62]=r(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),v.rejections.links?(u(),c("div",Bt,[l("div",Lt,[l("div",Pt,[l("span",null,"Showing "+x(q.value.length)+" of "+x(v.rejections.data.length)+" entries",1),l("div",Et,[e[63]||(e[63]=l("span",{class:"text-sm"},"Show:",-1)),F(l("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>z.value=t),onChange:$e,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(u(),c(j,null,U([10,25,50,100],t=>l("option",{key:t,value:t},x(t),9,It)),64))],544),[[V,z.value]])])]),l("div",ht,[(u(!0),c(j,null,U(v.rejections.links,t=>(u(),R(b,{key:t.label,onClick:i=>je(t.url),disabled:!t.url,variant:"ghost",size:"sm",class:G(["mx-1",{"bg-primary/10 text-primary border-primary":t.active}])},{default:o(()=>[l("span",{innerHTML:t.label},null,8,Yt)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):A("",!0)]),_:1})]),_:1}),n(s(te),{open:I.value,"onUpdate:open":e[19]||(e[19]=t=>I.value=t)},{default:o(()=>[n(s(le),{class:"sm:max-w-2xl"},{default:o(()=>[n(s(ne),null,{default:o(()=>[n(s(oe),null,{default:o(()=>[r(x(h.value?"Edit":"Add")+" Rejection",1)]),_:1}),n(s(se),null,{default:o(()=>[r(" Fill in the details to "+x(h.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),n(rt,{rejection:h.value,reasons:v.rejection_reason_codes,tenants:v.tenants,"is-super-admin":v.isSuperAdmin,"tenant-slug":v.tenantSlug,onClose:e[18]||(e[18]=t=>I.value=!1)},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),v.isSuperAdmin?(u(),R(s(te),{key:1,open:f.value,"onUpdate:open":e[23]||(e[23]=t=>f.value=t)},{default:o(()=>[n(s(le),{class:"sm:max-w-lg"},{default:o(()=>[n(s(ne),null,{default:o(()=>[n(s(oe),null,{default:o(()=>e[64]||(e[64]=[r("Manage Reason Codes")])),_:1}),n(s(se),null,{default:o(()=>e[65]||(e[65]=[r(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),l("div",Wt,[l("div",Ot,[e[67]||(e[67]=l("h3",{class:"text-sm font-medium"},"Current Reason Codes",-1)),n(b,{onClick:xe,size:"sm",variant:"outline"},{default:o(()=>[n(D,{name:"plus",class:"mr-2 h-4 w-4"}),e[66]||(e[66]=r(" Add New Code "))]),_:1})]),l("div",qt,[!v.rejection_reason_codes||v.rejection_reason_codes.length===0?(u(),c("div",Ht," No reason codes found ")):(u(),c("div",Gt,[(u(!0),c(j,null,U(v.rejection_reason_codes,t=>(u(),c("div",{key:t.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[l("div",{class:"flex-1 cursor-pointer",onClick:i=>_e(t)},[l("div",Jt,[r(x(t.reason_code)+" ",1),t.deleted_at?(u(),c("span",Kt,"(Deleted)")):A("",!0)]),t.description?(u(),c("div",Xt,x(t.description),1)):A("",!0)],8,Qt),l("div",Zt,[v.isSuperAdmin?(u(),c(j,{key:0},[t.deleted_at?(u(),c(j,{key:0},[n(b,{onClick:i=>Ae(t.id),size:"sm",variant:"outline"},{default:o(()=>[n(D,{name:"refresh",class:"mr-2 h-4 w-4"}),e[68]||(e[68]=r(" Restore "))]),_:2},1032,["onClick"]),n(b,{onClick:i=>De(t.id),size:"sm",variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),e[69]||(e[69]=r(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(u(),R(b,{key:1,onClick:i=>pe(t.id),size:"sm",variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),e[70]||(e[70]=r(" Delete "))]),_:2},1032,["onClick"]))],64)):(u(),R(b,{key:1,onClick:i=>pe(t.id),size:"sm",variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),e[71]||(e[71]=r(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))])]),N.value?(u(),c("div",el,[l("h3",tl,x(g.value?"Edit":"Add")+" Reason Code",1),l("div",ll,[l("div",null,[n(s(C),{for:"reason_code"},{default:o(()=>e[72]||(e[72]=[r("Code")])),_:1}),n(s(E),{id:"reason_code",modelValue:d.value.reason_code,"onUpdate:modelValue":e[20]||(e[20]=t=>d.value.reason_code=t),placeholder:"Enter reason code"},null,8,["modelValue"])]),l("div",null,[n(s(C),{for:"description"},{default:o(()=>e[73]||(e[73]=[r("Description")])),_:1}),n(s(E),{id:"description",modelValue:d.value.description,"onUpdate:modelValue":e[21]||(e[21]=t=>d.value.description=t),placeholder:"Enter description"},null,8,["modelValue"])]),l("div",nl,[n(b,{onClick:ke,variant:"ghost",size:"sm"},{default:o(()=>e[74]||(e[74]=[r("Cancel")])),_:1}),n(b,{onClick:Ce,variant:"default",size:"sm"},{default:o(()=>e[75]||(e[75]=[r("Save")])),_:1})])])])):A("",!0),n(s(de),{class:"mt-6"},{default:o(()=>[n(b,{onClick:e[22]||(e[22]=t=>f.value=!1),variant:"outline"},{default:o(()=>e[76]||(e[76]=[r("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):A("",!0),n(s(te),{open:y.value,"onUpdate:open":e[26]||(e[26]=t=>y.value=t)},{default:o(()=>[n(s(le),null,{default:o(()=>[n(s(ne),null,{default:o(()=>[n(s(oe),null,{default:o(()=>e[77]||(e[77]=[r("Confirm Deletion")])),_:1}),n(s(se),null,{default:o(()=>e[78]||(e[78]=[r(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),n(s(de),{class:"mt-4"},{default:o(()=>[n(b,{type:"button",onClick:e[24]||(e[24]=t=>y.value=!1),variant:"outline"},{default:o(()=>e[79]||(e[79]=[r(" Cancel ")])),_:1}),n(b,{type:"button",onClick:e[25]||(e[25]=t=>we(re.value)),variant:"destructive"},{default:o(()=>e[80]||(e[80]=[r(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n(s(te),{open:M.value,"onUpdate:open":e[29]||(e[29]=t=>M.value=t)},{default:o(()=>[n(s(le),null,{default:o(()=>[n(s(ne),null,{default:o(()=>[n(s(oe),null,{default:o(()=>e[81]||(e[81]=[r("Confirm Bulk Deletion")])),_:1}),n(s(se),null,{default:o(()=>[r(" Are you sure you want to delete "+x($.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),n(s(de),{class:"mt-4"},{default:o(()=>[n(b,{type:"button",onClick:e[27]||(e[27]=t=>M.value=!1),variant:"outline"},{default:o(()=>e[82]||(e[82]=[r(" Cancel ")])),_:1}),n(b,{type:"button",onClick:e[28]||(e[28]=t=>Ve()),variant:"destructive"},{default:o(()=>e[83]||(e[83]=[r(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{wl as default};
