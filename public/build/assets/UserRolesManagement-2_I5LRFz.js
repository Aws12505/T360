import{d as Z,c as x,r,b as v,e as i,f as a,z as e,u as s,X as n,F as w,E as u,ah as C}from"./vendor--q1ey8Ib.js";import{g as ee}from"./vendor-vue-BsCVk3W_.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-wR8_mEPh.js";import{_ as te}from"./Layout.vue_vue_type_script_setup_true_lang-Ky4BYGJn.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-D2siHqHg.js";import{_ as z}from"./Button.vue_vue_type_script_setup_true_lang-CURKxeic.js";import{_ as le,a as ne,b as oe,c as ie,d as re,e as ue,f as de}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BiiX6Pos.js";import{_ as ce}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-Dx3kWf8U.js";import{_ as j}from"./Card.vue_vue_type_script_setup_true_lang-D6lnctxv.js";import{_ as R}from"./CardContent.vue_vue_type_script_setup_true_lang-Bg8Ud8NP.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-D36Fjuw_.js";import{_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-C7T0BrR7.js";import{_ as me}from"./Separator.vue_vue_type_script_setup_true_lang-lkFrsBLM.js";import{s as fe,U as pe,p as T,j as ve,B as _e}from"./vendor-icons-Cd5utPp1.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-tTsIgFyK.js";import"./vendor-ui-VCcvGdtT.js";import"./Icon.vue_vue_type_script_setup_true_lang-Cf3euL4G.js";import"./useInitials-DzeGKvtI.js";import"./app-CDLfz5Ol.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dc8NxSZT.js";import"./Badge.vue_vue_type_script_setup_true_lang-MdQcxSLl.js";import"./Label.vue_vue_type_script_setup_true_lang-DXVzP2wd.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-CC0Uw8BM.js";import"./InputError.vue_vue_type_script_setup_true_lang-DmHfz-s-.js";const ge={class:"flex flex-col space-y-6 w-full"},be={key:0,class:"relative w-full max-w-lg"},xe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},we={class:"flex items-center space-x-2"},Se={class:"flex items-center space-x-2"},ke={class:"flex items-center space-x-2"},he={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Ce={class:"relative z-10"},$e={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Ae={class:"relative z-10"},Ue={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Me={class:"relative z-10"},ze={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},je={class:"relative z-10"},Re=Z({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(m){const o=m,{tenantSlug:d}=o,L=x(()=>[{title:d?"Dashboard":"Admin Dashboard",href:d?route("dashboard",{tenantSlug:o.tenantSlug}):route("admin.dashboard")}]),S=r(o.search||""),_=r(!1),y=r(!1),g=r(!1),$=r(null),A=r(null),U=r(null),f=o.SuperAdmin,c=r(!1),k=r(""),h=r(""),O=x(()=>{if(!S.value.trim())return o.users;const t=S.value.toLowerCase(),l=o.users.data.filter(p=>p.name.toLowerCase().includes(t)||p.email.toLowerCase().includes(t));return{...o.users,data:l}}),F=()=>{$.value=null,_.value=!0},V=()=>{_.value=!1},I=()=>{U.value=null,g.value=!0},E=()=>{g.value=!1},P=()=>{A.value=null,y.value=!0},N=()=>{y.value=!1},X=t=>{$.value=t,_.value=!0},q=t=>{U.value=t,g.value=!0},G=t=>{A.value=t,y.value=!0},H=t=>{k.value=f?route("admin.users.destroy",t):route("users.destroy",[d,t]),h.value=`Are you sure you want to delete user ${t.name}?`,c.value=!0},J=t=>{k.value=f?route("admin.roles.destroy",t):route("roles.destroy",[d,t]),h.value=`Are you sure you want to delete role ${t.name}?`,c.value=!0},K=t=>{k.value=route("admin.tenants.destroy",t),h.value=`Are you sure you want to delete tenant ${t.name}?`,c.value=!0},Q=()=>{c.value=!1},M=()=>{y.value=!1,_.value=!1,g.value=!1},W=x(()=>o.roles.data),Y=x(()=>o.tenants.data),b=x(()=>o.permissions.map(t=>t.name));return(t,l)=>(i(),v(se,{breadcrumbs:L.value,tenantSlug:s(d),permissions:o.permissions},{default:a(()=>[e(s(ee),{title:"Users Management"}),e(te,{permissions:o.permissions},{default:a(()=>[n("div",ge,[e(ce,{title:"User and Role Management",description:"Manage users, roles, and permissions for your application"}),e(s(me)),b.value.includes("users.view")?(i(),w("div",be,[n("div",xe,[e(s(fe),{class:"h-5 w-5 text-gray-400"})]),e(ae,{modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=p=>S.value=p),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])])):u("",!0),b.value.includes("users.view")?(i(),v(s(j),{key:1,class:"w-full"},{default:a(()=>[e(s(D),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(s(B),{class:"text-xl font-semibold"},{default:a(()=>[n("div",we,[e(s(pe),{class:"h-5 w-5"}),l[3]||(l[3]=n("span",null,"Users",-1))])]),_:1}),b.value.includes("users.create")?(i(),v(z,{key:0,onClick:F,variant:"default",size:"sm",class:"gap-1"},{default:a(()=>[e(s(T),{class:"h-4 w-4"}),l[4]||(l[4]=n("span",null,"Add User",-1))]),_:1})):u("",!0)]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[e(le,{permissions:o.permissions,users:O.value,isSuperAdmin:s(f),onEdit:X,onDelete:H},null,8,["permissions","users","isSuperAdmin"])]),_:1})]),_:1})):u("",!0),b.value.includes("roles.view")?(i(),v(s(j),{key:2,class:"w-full"},{default:a(()=>[e(s(D),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(s(B),{class:"text-xl font-semibold"},{default:a(()=>[n("div",Se,[e(s(ve),{class:"h-5 w-5"}),l[5]||(l[5]=n("span",null,"Roles",-1))])]),_:1}),b.value.includes("roles.create")?(i(),v(z,{key:0,onClick:P,variant:"default",size:"sm",class:"gap-1"},{default:a(()=>[e(s(T),{class:"h-4 w-4"}),l[6]||(l[6]=n("span",null,"Add Role",-1))]),_:1})):u("",!0)]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[e(ne,{permissions:o.permissions,roles:m.roles,onEdit:G,onDelete:J},null,8,["permissions","roles"])]),_:1})]),_:1})):u("",!0),s(f)?(i(),v(s(j),{key:3,class:"w-full"},{default:a(()=>[e(s(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(s(B),{class:"text-xl font-semibold"},{default:a(()=>[n("div",ke,[e(s(_e),{class:"h-5 w-5"}),l[7]||(l[7]=n("span",null,"Companies",-1))])]),_:1}),e(z,{onClick:I,variant:"default",size:"sm",class:"gap-1"},{default:a(()=>[e(s(T),{class:"h-4 w-4"}),l[8]||(l[8]=n("span",null,"Add Company",-1))]),_:1})]),_:1}),e(s(R),null,{default:a(()=>[e(oe,{tenants:m.tenants,onEdit:q,onDelete:K},null,8,["tenants"])]),_:1})]),_:1})):u("",!0),e(C,{name:"fade"},{default:a(()=>[_.value?(i(),w("div",he,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:V}),n("div",Ce,[e(ie,{user:$.value,roles:W.value,permissions:m.permissions,tenants:Y.value,isSuperAdmin:s(f),tenantSlug:s(d),onClose:V,onSaved:M},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])])])):u("",!0)]),_:1}),e(C,{name:"fade"},{default:a(()=>[g.value?(i(),w("div",$e,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:E}),n("div",Ae,[e(re,{tenants:m.tenants,tenant:U.value,onClose:E,onSaved:M},null,8,["tenants","tenant"])])])):u("",!0)]),_:1}),e(C,{name:"fade"},{default:a(()=>[y.value?(i(),w("div",Ue,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:N}),n("div",Me,[e(ue,{role:A.value,permissions:m.permissions,isSuperAdmin:s(f),tenantSlug:s(d),onClose:N,onSaved:M},null,8,["role","permissions","isSuperAdmin","tenantSlug"])])])):u("",!0)]),_:1}),e(C,{name:"fade"},{default:a(()=>[c.value?(i(),w("div",ze,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:l[1]||(l[1]=p=>c.value=!1)}),n("div",je,[e(de,{deleteUrl:k.value,message:h.value,tenantSlug:s(d),onCancel:l[2]||(l[2]=p=>c.value=!1),onConfirmed:Q},null,8,["deleteUrl","message","tenantSlug"])])])):u("",!0)]),_:1})])]),_:1},8,["permissions"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}}),ns=ye(Re,[["__scopeId","data-v-1c1e554e"]]);export{ns as default};
