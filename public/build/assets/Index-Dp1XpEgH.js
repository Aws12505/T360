import{d as $e,C as le,f as fe,a as v,o as i,b as n,g as F,e as t,h as T,w as a,i as d,v as V,u as o,F as $,r as j,t as b,j as De,k as S,c as Ae,l as z,m as Fe,n as O,W as Q}from"./app-B__ptHTF.js";import{_ as Ne}from"./AppLayout.vue_vue_type_script_setup_true_lang-BsTG-YEC.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-5rTN_W9z.js";import{_ as K,a as X,b as Z,c as h,d as ee,e as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-uSHG0f7o.js";import{_,a as E}from"./Label.vue_vue_type_script_setup_true_lang-DeTGmGb3.js";import{_ as Te}from"./Checkbox.vue_vue_type_script_setup_true_lang-z-rXE9GA.js";import{_ as B}from"./Icon.vue_vue_type_script_setup_true_lang-CUAESyc2.js";import{_ as Ve,a as Ue,b as de,c as se,d as Me,e as te}from"./TableRow.vue_vue_type_script_setup_true_lang-DGbUhPA4.js";import{_ as ue}from"./Card.vue_vue_type_script_setup_true_lang-p8XobHwK.js";import{_ as ze,a as je}from"./CardTitle.vue_vue_type_script_setup_true_lang-RYz03wRI.js";import{_ as ie}from"./CardContent.vue_vue_type_script_setup_true_lang-C_o1U9fc.js";import{_ as Pe,a as Be,b as Ee}from"./AlertDescription.vue_vue_type_script_setup_true_lang-mZCLLzKb.js";import"./index-qfrlGLqJ.js";import"./createLucideIcon-Ce1UDWWH.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DU55FZBO.js";import"./check-gLnbaKCt.js";import"./shield-DQVFrbX_.js";import"./loader-circle-BYMtkHnq.js";import"./sun-Bc9qbBBx.js";const Le={class:"grid grid-cols-2 gap-4"},Re={key:0},Ie=["value"],Oe=["value"],Ye={class:"flex items-center space-x-2"},We={class:"mt-6 flex justify-end"},qe=$e({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(p,{emit:g}){var A,U,Y,N,w,D,M;const C=p,L=g,f=le({id:(A=C.delay)==null?void 0:A.id,tenant_id:C.isSuperAdmin?(U=C.delay)==null?void 0:U.tenant_id:null,date:((Y=C.delay)==null?void 0:Y.date)||"",driver_name:((N=C.delay)==null?void 0:N.driver_name)||"",delay_type:((w=C.delay)==null?void 0:w.delay_type)||"origin",delay_category:((D=C.delay)==null?void 0:D.delay_category)||"1_120",delay_code_id:((M=C.delay)==null?void 0:M.delay_code_id)||null,disputed:C.delay&&C.delay.disputed!==null?parseInt(C.delay.disputed)===1:!1,driver_controllable:C.delay&&C.delay.driver_controllable!==null?parseInt(C.delay.driver_controllable)===1:null});fe(()=>C.delay,c=>{c?(f.id=c.id,f.tenant_id=c.tenant_id,f.date=c.date,f.driver_name=c.driver_name,f.delay_type=c.delay_type,f.delay_category=c.delay_category,f.delay_code_id=c.delay_code_id,f.disputed=c.disputed!==null?parseInt(c.disputed)===1:!1,f.driver_controllable=c.driver_controllable!==null?parseInt(c.driver_controllable)===1:null):f.reset()},{immediate:!0});const R=()=>{const c=!!f.id,u=C.isSuperAdmin?c?"ontime.update.admin":"ontime.store.admin":c?"ontime.update":"ontime.store",m=C.isSuperAdmin?c?{delay:f.id}:{}:c?{tenantSlug:C.tenantSlug,delay:f.id}:{tenantSlug:C.tenantSlug};f[c?"put":"post"](route(u,m),{onSuccess:()=>L("close")})};return(c,u)=>(i(),v("form",{onSubmit:De(R,["prevent"])},[n("div",Le,[p.isSuperAdmin?(i(),v("div",Re,[t(_,null,{default:a(()=>u[8]||(u[8]=[d("Company Name")])),_:1}),T(n("select",{"onUpdate:modelValue":u[0]||(u[0]=m=>o(f).tenant_id=m),class:"w-full border rounded px-2 py-1"},[u[9]||(u[9]=n("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),v($,null,j(p.tenants,m=>(i(),v("option",{key:m.id,value:m.id},b(m.name),9,Ie))),128))],512),[[V,o(f).tenant_id]])])):F("",!0),n("div",null,[t(_,null,{default:a(()=>u[10]||(u[10]=[d("Date")])),_:1}),t(E,{type:"date",modelValue:o(f).date,"onUpdate:modelValue":u[1]||(u[1]=m=>o(f).date=m),class:"w-full"},null,8,["modelValue"])]),n("div",null,[t(_,null,{default:a(()=>u[11]||(u[11]=[d("Driver Name")])),_:1}),t(E,{modelValue:o(f).driver_name,"onUpdate:modelValue":u[2]||(u[2]=m=>o(f).driver_name=m),class:"w-full"},null,8,["modelValue"])]),n("div",null,[t(_,null,{default:a(()=>u[12]||(u[12]=[d("Delay Type")])),_:1}),T(n("select",{"onUpdate:modelValue":u[3]||(u[3]=m=>o(f).delay_type=m),class:"w-full border rounded px-2 py-1"},u[13]||(u[13]=[n("option",{value:"origin"},"Origin",-1),n("option",{value:"destination"},"Destination",-1)]),512),[[V,o(f).delay_type]])]),n("div",null,[t(_,null,{default:a(()=>u[14]||(u[14]=[d("Delay Category")])),_:1}),T(n("select",{"onUpdate:modelValue":u[4]||(u[4]=m=>o(f).delay_category=m),class:"w-full border rounded px-2 py-1"},u[15]||(u[15]=[n("option",{value:"1_120"},"1–120 min",-1),n("option",{value:"121_600"},"121–600 min",-1),n("option",{value:"601_plus"},"601+ min",-1)]),512),[[V,o(f).delay_category]])]),n("div",null,[t(_,null,{default:a(()=>u[16]||(u[16]=[d("Delay Code")])),_:1}),T(n("select",{"onUpdate:modelValue":u[5]||(u[5]=m=>o(f).delay_code_id=m),class:"w-full border rounded px-2 py-1"},[(i(!0),v($,null,j(p.delayCodes,m=>(i(),v("option",{key:m.id,value:m.id},b(m.code),9,Oe))),128))],512),[[V,o(f).delay_code_id]])]),n("div",Ye,[t(Te,{checked:o(f).disputed,"onUpdate:checked":u[6]||(u[6]=m=>o(f).disputed=m)},null,8,["checked"]),t(_,null,{default:a(()=>u[17]||(u[17]=[d("Disputed")])),_:1})]),n("div",null,[t(_,null,{default:a(()=>u[18]||(u[18]=[d("Driver Controllable")])),_:1}),T(n("select",{"onUpdate:modelValue":u[7]||(u[7]=m=>o(f).driver_controllable=m),class:"w-full border rounded px-2 py-1"},u[19]||(u[19]=[n("option",{value:null},"N/A",-1),n("option",{value:!0},"Yes",-1),n("option",{value:!1},"No",-1)]),512),[[V,o(f).driver_controllable]])])]),n("div",We,[t(x,{type:"submit",disabled:o(f).processing},{default:a(()=>[d(b(o(f).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),He={class:"max-w-7xl mx-auto p-6 space-y-8"},Qe={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},Ge={class:"flex flex-wrap gap-3"},Je={class:"flex flex-col gap-2"},Ke={class:"flex flex-wrap gap-2"},Xe={key:0,class:"text-sm text-muted-foreground"},Ze={key:0},he={key:1},et={class:"flex flex-col justify-between gap-4"},tt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full"},lt=["value"],at={class:"flex justify-end"},nt={class:"overflow-x-auto"},ot={class:"flex items-center"},dt={key:0,class:"ml-2"},st={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ut={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},it={key:1,class:"ml-2 opacity-50"},rt={class:"flex space-x-2"},ft={key:0,class:"bg-muted/20 px-4 py-3 border-t"},mt={class:"flex justify-between items-center"},vt={class:"text-sm text-muted-foreground"},pt={class:"flex items-center gap-4"},yt={class:"flex items-center gap-2"},gt={class:"flex"},ct=["innerHTML"],bt={class:"mt-4 space-y-4"},Ct={class:"flex items-center justify-between"},xt={class:"max-h-[400px] overflow-y-auto"},kt={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},_t={key:1,class:"space-y-2"},St=["onClick"],wt={class:"font-medium"},$t={key:0,class:"text-sm text-muted-foreground mt-1"},Dt={class:"opacity-0 group-hover:opacity-100 transition-opacity"},At={key:0,class:"border rounded-md p-4 space-y-4"},Ft={class:"text-sm font-medium"},Nt={class:"space-y-3"},Tt={class:"flex justify-end space-x-2"},Kt={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"full"}},setup(p){const g=p,C=[{title:g.tenantSlug?"Dashboard":"Admin Dashboard",href:g.tenantSlug?route("dashboard",{tenantSlug:g.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:g.tenantSlug?route("ontime.index",{tenantSlug:g.tenantSlug}):route("admin.ontime.index")}],L=S(!1),f=S(!1),R=S(null),A=S(""),U=S(!1),Y=S(null),N=S(!1),w=S(null),D=S({code:"",description:""}),M=S(!1),c=S(null),u=S("date"),m=S("desc"),y=S({search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}),G=["date","delay_type","driver_name","penalty","delay_code","disputed","driver_controllable"],ae=Ae(()=>{let s=[...g.delays.data];if(y.value.search){const e=y.value.search.toLowerCase();s=s.filter(l=>{var r,k,q,H;return((r=l.driver_name)==null?void 0:r.toLowerCase().includes(e))||((k=l.delay_type)==null?void 0:k.toLowerCase().includes(e))||((H=(q=l.delay_code)==null?void 0:q.code)==null?void 0:H.toLowerCase().includes(e))})}if(y.value.dateFrom&&(s=s.filter(e=>e.date&&e.date>=y.value.dateFrom)),y.value.dateTo&&(s=s.filter(e=>e.date&&e.date<=y.value.dateTo)),y.value.delayCode&&(s=s.filter(e=>{var l;return((l=e.delay_code)==null?void 0:l.id)===parseInt(y.value.delayCode)})),y.value.disputed!==""){const e=y.value.disputed==="true";s=s.filter(l=>l.disputed===e)}if(y.value.controllable!=="")if(y.value.controllable==="null")s=s.filter(e=>e.driver_controllable===null);else{const e=y.value.controllable==="true";s=s.filter(l=>l.driver_controllable===e)}return s.sort((e,l)=>{var q,H;let r,k;return u.value==="delay_code"?(r=((q=e.delay_code)==null?void 0:q.code)||"",k=((H=l.delay_code)==null?void 0:H.code)||""):(r=e[u.value],k=l[u.value]),r===null?1:k===null?-1:(typeof r=="string"&&(r=r.toLowerCase(),k=k.toLowerCase()),r<k?m.value==="asc"?-1:1:r>k?m.value==="asc"?1:-1:0)}),s});function me(s){u.value===s?m.value=m.value==="asc"?"desc":"asc":(u.value=s,m.value="asc")}function I(){}function ve(){y.value={search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}}const re=(s=null)=>{R.value=s,L.value=!0},pe=()=>{f.value=!0,N.value=!1,w.value=null},ye=()=>{D.value={code:"",description:""},w.value=null,N.value=!0},ge=s=>{D.value={code:s.code,description:s.description||""},w.value=s.id,N.value=!0},ce=()=>{N.value=!1,w.value=null},be=s=>{c.value=s,M.value=!0},Ce=()=>{const s=le({code:D.value.code,description:D.value.description}),e=w.value?g.isSuperAdmin?"delay-codes.update.admin":"delay-codes.update":g.isSuperAdmin?"delay-codes.store.admin":"delay-codes.store",l=w.value?g.isSuperAdmin?{code:w.value}:{tenantSlug:g.tenantSlug,code:w.value}:g.isSuperAdmin?{}:{tenantSlug:g.tenantSlug};(w.value?s.put:s.post).call(s,route(e,l),{onSuccess:()=>{A.value=w.value?"Delay code updated successfully.":"Delay code created successfully.",N.value=!1,w.value=null,Q.reload({only:["delay_codes"]})},onError:k=>{console.error(k)}})},xe=s=>{const e=le({}),l=g.isSuperAdmin?"delay-codes.destroy.admin":"delay-codes.destroy",r=g.isSuperAdmin?{code:s}:{tenantSlug:g.tenantSlug,code:s};e.delete(route(l,r),{onSuccess:()=>{A.value="Delay code deleted successfully.",M.value=!1,Q.reload({only:["delay_codes"]})}})},ke=s=>{Y.value=s,U.value=!0},_e=s=>{const e=le({}),l=g.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",r=g.isSuperAdmin?{delay:s}:{tenantSlug:g.tenantSlug,delay:s};e.delete(route(l,r),{preserveScroll:!0,onSuccess:()=>{A.value="Delay record deleted successfully.",U.value=!1}})},Se=s=>{s&&Q.get(s,{},{only:["delays"]})};function ne(s){if(!s)return"";const e=s.split("-");if(e.length!==3)return s;const[l,r,k]=e;return`${Number(r)}/${Number(k)}/${l}`}fe(A,s=>{s&&setTimeout(()=>{A.value=""},5e3)});const P=S(g.dateFilter||"full"),J=S(10);function we(){const s=g.tenantSlug?route("ontime.index",{tenantSlug:g.tenantSlug}):route("ontime.index.admin");Q.get(s,{dateFilter:P.value,perPage:J.value},{preserveState:!0})}function W(s){P.value=s;const e=g.tenantSlug?route("ontime.index",{tenantSlug:g.tenantSlug}):route("ontime.index.admin");Q.get(e,{dateFilter:s,perPage:J.value},{preserveState:!0})}return(s,e)=>(i(),z(Ne,{breadcrumbs:C,tenantSlug:p.tenantSlug},{default:a(()=>[t(o(Fe),{title:"On-Time"}),n("div",He,[A.value?(i(),z(o(Pe),{key:0,variant:"success"},{default:a(()=>[t(o(Be),null,{default:a(()=>e[26]||(e[26]=[d("Success")])),_:1}),t(o(Ee),null,{default:a(()=>[d(b(A.value),1)]),_:1})]),_:1})):F("",!0),n("div",Qe,[e[29]||(e[29]=n("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"On-Time Management",-1)),n("div",Ge,[t(x,{onClick:e[0]||(e[0]=l=>re()),variant:"default"},{default:a(()=>[t(B,{name:"plus",class:"mr-2 h-4 w-4"}),e[27]||(e[27]=d(" Add Delay "))]),_:1}),p.isSuperAdmin?(i(),z(x,{key:0,onClick:e[1]||(e[1]=l=>pe()),variant:"outline"},{default:a(()=>[t(B,{name:"settings",class:"mr-2 h-4 w-4"}),e[28]||(e[28]=d(" Manage Delay Codes "))]),_:1})):F("",!0)])]),t(o(ue),null,{default:a(()=>[t(o(ie),{class:"p-4"},{default:a(()=>[n("div",Je,[n("div",Ke,[t(x,{onClick:e[2]||(e[2]=l=>W("yesterday")),variant:"outline",size:"sm",class:O({"bg-primary/10 text-primary border-primary":P.value==="yesterday"})},{default:a(()=>e[30]||(e[30]=[d(" Yesterday ")])),_:1},8,["class"]),t(x,{onClick:e[3]||(e[3]=l=>W("current-week")),variant:"outline",size:"sm",class:O({"bg-primary/10 text-primary border-primary":P.value==="current-week"})},{default:a(()=>e[31]||(e[31]=[d(" Current Week ")])),_:1},8,["class"]),t(x,{onClick:e[4]||(e[4]=l=>W("6w")),variant:"outline",size:"sm",class:O({"bg-primary/10 text-primary border-primary":P.value==="6w"})},{default:a(()=>e[32]||(e[32]=[d(" 6 Weeks ")])),_:1},8,["class"]),t(x,{onClick:e[5]||(e[5]=l=>W("quarterly")),variant:"outline",size:"sm",class:O({"bg-primary/10 text-primary border-primary":P.value==="quarterly"})},{default:a(()=>e[33]||(e[33]=[d(" Quarterly ")])),_:1},8,["class"]),t(x,{onClick:e[6]||(e[6]=l=>W("full")),variant:"outline",size:"sm",class:O({"bg-primary/10 text-primary border-primary":P.value==="full"})},{default:a(()=>e[34]||(e[34]=[d(" Full ")])),_:1},8,["class"])]),p.dateRange?(i(),v("div",Xe,[p.dateRange.start&&p.dateRange.end?(i(),v("span",Ze," Showing data from "+b(ne(p.dateRange.start))+" to "+b(ne(p.dateRange.end)),1)):(i(),v("span",he,b(p.dateRange.label),1))])):F("",!0)])]),_:1})]),_:1}),t(o(ue),null,{default:a(()=>[t(o(ze),null,{default:a(()=>[t(o(je),null,{default:a(()=>e[35]||(e[35]=[d("Filters")])),_:1})]),_:1}),t(o(ie),null,{default:a(()=>[n("div",et,[n("div",tt,[n("div",null,[t(o(_),{for:"search"},{default:a(()=>e[36]||(e[36]=[d("Search")])),_:1}),t(o(E),{id:"search",modelValue:y.value.search,"onUpdate:modelValue":e[7]||(e[7]=l=>y.value.search=l),type:"text",placeholder:"Search by driver or type...",onInput:I},null,8,["modelValue"])]),n("div",null,[t(o(_),{for:"dateFrom"},{default:a(()=>e[37]||(e[37]=[d("Date From")])),_:1}),t(o(E),{id:"dateFrom",modelValue:y.value.dateFrom,"onUpdate:modelValue":e[8]||(e[8]=l=>y.value.dateFrom=l),type:"date",onChange:I},null,8,["modelValue"])]),n("div",null,[t(o(_),{for:"dateTo"},{default:a(()=>e[38]||(e[38]=[d("Date To")])),_:1}),t(o(E),{id:"dateTo",modelValue:y.value.dateTo,"onUpdate:modelValue":e[9]||(e[9]=l=>y.value.dateTo=l),type:"date",onChange:I},null,8,["modelValue"])]),n("div",null,[t(o(_),{for:"delayCode"},{default:a(()=>e[39]||(e[39]=[d("Delay Code")])),_:1}),T(n("select",{id:"delayCode","onUpdate:modelValue":e[10]||(e[10]=l=>y.value.delayCode=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[40]||(e[40]=n("option",{value:""},"All Codes",-1)),(i(!0),v($,null,j(p.delay_codes,l=>(i(),v("option",{key:l.id,value:l.id},b(l.code),9,lt))),128))],544),[[V,y.value.delayCode]])]),n("div",null,[t(o(_),{for:"disputed"},{default:a(()=>e[41]||(e[41]=[d("Disputed Status")])),_:1}),T(n("select",{id:"disputed","onUpdate:modelValue":e[11]||(e[11]=l=>y.value.disputed=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[42]||(e[42]=[n("option",{value:""},"All",-1),n("option",{value:"true"},"Disputed",-1),n("option",{value:"false"},"Not Disputed",-1)]),544),[[V,y.value.disputed]])]),n("div",null,[t(o(_),{for:"controllable"},{default:a(()=>e[43]||(e[43]=[d("Driver Controllable")])),_:1}),T(n("select",{id:"controllable","onUpdate:modelValue":e[12]||(e[12]=l=>y.value.controllable=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[44]||(e[44]=[n("option",{value:""},"All",-1),n("option",{value:"true"},"Yes",-1),n("option",{value:"false"},"No",-1),n("option",{value:"null"},"N/A",-1)]),544),[[V,y.value.controllable]])])]),n("div",at,[t(x,{onClick:ve,variant:"ghost",size:"sm"},{default:a(()=>[t(B,{name:"rotate-ccw",class:"mr-2 h-4 w-4"}),e[45]||(e[45]=d(" Reset Filters "))]),_:1})])])]),_:1})]),_:1}),t(o(ue),null,{default:a(()=>[t(o(ie),{class:"p-0"},{default:a(()=>[n("div",nt,[t(o(Ve),null,{default:a(()=>[t(o(Ue),null,{default:a(()=>[t(o(de),null,{default:a(()=>[p.isSuperAdmin?(i(),z(o(se),{key:0},{default:a(()=>e[46]||(e[46]=[d("Company Name")])),_:1})):F("",!0),(i(),v($,null,j(G,l=>t(o(se),{key:l,class:"cursor-pointer",onClick:r=>me(l)},{default:a(()=>[n("div",ot,[d(b(l.replace(/_/g," "))+" ",1),u.value===l?(i(),v("div",dt,[m.value==="asc"?(i(),v("svg",st,e[47]||(e[47]=[n("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),v("svg",ut,e[48]||(e[48]=[n("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),v("div",it,e[49]||(e[49]=[n("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"M8 10l4-4 4 4"}),n("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),t(o(se),null,{default:a(()=>e[50]||(e[50]=[d("Actions")])),_:1})]),_:1})]),_:1}),t(o(Me),null,{default:a(()=>[ae.value.length===0?(i(),z(o(de),{key:0},{default:a(()=>[t(o(te),{colspan:p.isSuperAdmin?G.length+2:G.length+1,class:"text-center py-8"},{default:a(()=>e[51]||(e[51]=[d(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):F("",!0),(i(!0),v($,null,j(ae.value,l=>(i(),z(o(de),{key:l.id,class:"hover:bg-muted/50"},{default:a(()=>[p.isSuperAdmin?(i(),z(o(te),{key:0},{default:a(()=>{var r;return[d(b(((r=l.tenant)==null?void 0:r.name)||"—"),1)]}),_:2},1024)):F("",!0),(i(),v($,null,j(G,r=>t(o(te),{key:r,class:"whitespace-nowrap"},{default:a(()=>{var k;return[r==="date"?(i(),v($,{key:0},[d(b(ne(l[r])),1)],64)):r==="disputed"?(i(),v($,{key:1},[d(b(l[r]?"Yes":"No"),1)],64)):r==="driver_controllable"?(i(),v($,{key:2},[d(b(l[r]===null?"N/A":l[r]?"Yes":"No"),1)],64)):r==="delay_code"?(i(),v($,{key:3},[d(b(((k=l.delay_code)==null?void 0:k.code)||"—"),1)],64)):(i(),v($,{key:4},[d(b(l[r]),1)],64))]}),_:2},1024)),64)),t(o(te),null,{default:a(()=>[n("div",rt,[t(x,{onClick:r=>re(l),variant:"warning",size:"sm"},{default:a(()=>[t(B,{name:"pencil",class:"mr-1 h-4 w-4"}),e[52]||(e[52]=d(" Edit "))]),_:2},1032,["onClick"]),t(x,{onClick:r=>ke(l.id),variant:"destructive",size:"sm"},{default:a(()=>[t(B,{name:"trash",class:"mr-1 h-4 w-4"}),e[53]||(e[53]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),p.delays.links?(i(),v("div",ft,[n("div",mt,[n("div",vt," Showing "+b(ae.value.length)+" of "+b(p.delays.data.length)+" entries ",1),n("div",pt,[n("div",yt,[t(o(_),{for:"perPage",class:"text-sm"},{default:a(()=>e[54]||(e[54]=[d("Per page:")])),_:1}),T(n("select",{id:"perPage","onUpdate:modelValue":e[13]||(e[13]=l=>J.value=l),onChange:we,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[55]||(e[55]=[n("option",{value:"10"},"10",-1),n("option",{value:"25"},"25",-1),n("option",{value:"50"},"50",-1),n("option",{value:"100"},"100",-1)]),544),[[V,J.value]])]),n("div",gt,[(i(!0),v($,null,j(p.delays.links,l=>(i(),z(x,{key:l.label,onClick:r=>Se(l.url),disabled:!l.url,variant:"ghost",size:"sm",class:O(["mx-1",{"bg-primary/10 text-primary border-primary":l.active}])},{default:a(()=>[n("span",{innerHTML:l.label},null,8,ct)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):F("",!0)]),_:1})]),_:1}),t(o(K),{open:L.value,"onUpdate:open":e[15]||(e[15]=l=>L.value=l)},{default:a(()=>[t(o(X),{class:"sm:max-w-2xl"},{default:a(()=>[t(o(Z),null,{default:a(()=>[t(o(h),null,{default:a(()=>[d(b(R.value?"Edit":"Add")+" Delay",1)]),_:1}),t(o(ee),null,{default:a(()=>[d(" Fill in the details to "+b(R.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),t(qe,{delay:R.value,"delay-codes":p.delay_codes,tenants:p.tenants,"is-super-admin":p.isSuperAdmin,"tenant-slug":p.tenantSlug,onClose:e[14]||(e[14]=l=>L.value=!1)},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),t(o(K),{open:f.value,"onUpdate:open":e[19]||(e[19]=l=>f.value=l)},{default:a(()=>[t(o(X),{class:"sm:max-w-lg"},{default:a(()=>[t(o(Z),null,{default:a(()=>[t(o(h),null,{default:a(()=>e[56]||(e[56]=[d("Manage Delay Codes")])),_:1}),t(o(ee),null,{default:a(()=>e[57]||(e[57]=[d(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),n("div",bt,[n("div",Ct,[e[59]||(e[59]=n("h3",{class:"text-sm font-medium"},"Current Delay Codes",-1)),t(x,{onClick:ye,size:"sm",variant:"outline"},{default:a(()=>[t(B,{name:"plus",class:"mr-2 h-4 w-4"}),e[58]||(e[58]=d(" Add New Code "))]),_:1})]),n("div",xt,[!p.delay_codes||p.delay_codes.length===0?(i(),v("div",kt," No delay codes found ")):(i(),v("div",_t,[(i(!0),v($,null,j(p.delay_codes,l=>(i(),v("div",{key:l.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[n("div",{class:"flex-1 cursor-pointer",onClick:r=>ge(l)},[n("div",wt,b(l.code),1),l.description?(i(),v("div",$t,b(l.description),1)):F("",!0)],8,St),n("div",Dt,[t(x,{onClick:r=>be(l.id),size:"sm",variant:"ghost",class:"h-8 w-8 p-0 text-destructive hover:text-destructive/90 hover:bg-destructive/10"},{default:a(()=>[t(B,{name:"trash",class:"h-4 w-4"}),e[60]||(e[60]=n("span",{class:"sr-only"},"Delete",-1))]),_:2},1032,["onClick"])])]))),128))]))]),N.value?(i(),v("div",At,[n("h3",Ft,b(w.value?"Edit":"Add")+" Delay Code",1),n("div",Nt,[n("div",null,[t(o(_),{for:"code"},{default:a(()=>e[61]||(e[61]=[d("Code")])),_:1}),t(o(E),{id:"code",modelValue:D.value.code,"onUpdate:modelValue":e[16]||(e[16]=l=>D.value.code=l),placeholder:"Enter code"},null,8,["modelValue"])]),n("div",null,[t(o(_),{for:"description"},{default:a(()=>e[62]||(e[62]=[d("Description")])),_:1}),t(o(E),{id:"description",modelValue:D.value.description,"onUpdate:modelValue":e[17]||(e[17]=l=>D.value.description=l),placeholder:"Enter description"},null,8,["modelValue"])]),n("div",Tt,[t(x,{onClick:ce,variant:"ghost",size:"sm"},{default:a(()=>e[63]||(e[63]=[d("Cancel")])),_:1}),t(x,{onClick:Ce,variant:"default",size:"sm"},{default:a(()=>e[64]||(e[64]=[d("Save")])),_:1})])])])):F("",!0)]),t(o(oe),{class:"mt-6"},{default:a(()=>[t(x,{onClick:e[18]||(e[18]=l=>f.value=!1),variant:"outline"},{default:a(()=>e[65]||(e[65]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(o(K),{open:M.value,"onUpdate:open":e[22]||(e[22]=l=>M.value=l)},{default:a(()=>[t(o(X),null,{default:a(()=>[t(o(Z),null,{default:a(()=>[t(o(h),null,{default:a(()=>e[66]||(e[66]=[d("Confirm Deletion")])),_:1}),t(o(ee),null,{default:a(()=>e[67]||(e[67]=[d(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),t(o(oe),{class:"mt-4"},{default:a(()=>[t(x,{type:"button",onClick:e[20]||(e[20]=l=>M.value=!1),variant:"outline"},{default:a(()=>e[68]||(e[68]=[d(" Cancel ")])),_:1}),t(x,{type:"button",onClick:e[21]||(e[21]=l=>xe(c.value)),variant:"destructive"},{default:a(()=>e[69]||(e[69]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(o(K),{open:U.value,"onUpdate:open":e[25]||(e[25]=l=>U.value=l)},{default:a(()=>[t(o(X),null,{default:a(()=>[t(o(Z),null,{default:a(()=>[t(o(h),null,{default:a(()=>e[70]||(e[70]=[d("Confirm Deletion")])),_:1}),t(o(ee),null,{default:a(()=>e[71]||(e[71]=[d(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),t(o(oe),{class:"mt-4"},{default:a(()=>[t(x,{type:"button",onClick:e[23]||(e[23]=l=>U.value=!1),variant:"outline"},{default:a(()=>e[72]||(e[72]=[d(" Cancel ")])),_:1}),t(x,{type:"button",onClick:e[24]||(e[24]=l=>_e(Y.value)),variant:"destructive"},{default:a(()=>e[73]||(e[73]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{Kt as default};
