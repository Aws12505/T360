import{c as h,r as S,d as j,b as C,e as i,f,z as m,u as o,X as t,F as n,E as l,aj as N,G as L,S as $,U as r,ah as z,C as G,D as M}from"./vendor-DrR5RGOb.js";import{x as E,g as P}from"./vendor-vue-BInP8APy.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-j4t3KSrg.js";import{_ as I,a as q}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-C2n46c-c.js";import{_ as O}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as B}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{_}from"./Separator.vue_vue_type_script_setup_true_lang-mktRl8Mw.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./Icon.vue_vue_type_script_setup_true_lang-terbfsn5.js";import"./vendor-icons-CwVCzoc4.js";import"./app-D8pO7-yq.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const v=S([]);function R(){const s=p=>{const c=Math.random().toString(36).substring(2,9),y={id:c,...p,duration:p.duration||5e3};return v.value=[...v.value,y],setTimeout(()=>{a(c)},y.duration),c},a=p=>{v.value=v.value.filter(c=>c.id!==p)};return{toasts:h(()=>v.value),toast:s,dismissToast:a}}const Y={class:"space-y-6"},J={class:"border-b"},W={class:"flex space-x-8"},X={key:0,class:"space-y-6"},H={key:0,class:"flex flex-col items-center space-y-3 p-4 border rounded-md bg-muted/50"},K={class:"w-32 h-32 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},Q=["src"],Z={class:"grid gap-2"},tt={key:0,class:"text-sm text-destructive"},et={class:"grid gap-2"},st={class:"flex items-start space-x-4"},it={key:0,class:"w-24 h-24 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},ot=["src"],nt={class:"flex-1"},rt={key:0,class:"text-sm text-destructive"},at={class:"flex items-center gap-4"},dt={key:0},lt={key:1},ct={class:"text-sm text-neutral-600"},ut={key:1,class:"space-y-6"},mt={key:0,class:"bg-card rounded-lg border shadow-sm p-6"},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pt={class:"space-y-2"},bt={class:"text-lg font-semibold"},ft={class:"text-sm text-muted-foreground"},vt={class:"space-y-2 md:text-right"},yt={class:"text-2xl font-bold"},xt={class:"space-y-3 col-span-1 md:col-span-2"},_t={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},ht={class:"bg-muted/50 p-3 rounded-md"},St={class:"font-medium"},kt={class:"bg-muted/50 p-3 rounded-md"},wt={class:"font-medium"},Ct={class:"bg-muted/50 p-3 rounded-md"},Nt={class:"font-medium"},$t={class:"text-xs text-muted-foreground"},Dt={key:0,class:"space-y-3 col-span-1 md:col-span-2"},Bt={class:"bg-muted/50 p-3 rounded-md"},Vt={key:0},At={key:1},Tt={key:0},Ut={key:1},jt={key:2},Lt={key:2},zt={key:3,class:"mt-1 text-sm text-muted-foreground"},Gt={key:1,class:"bg-muted/50 p-6 rounded-lg border text-center"},te=j({__name:"TenantSettings",props:{tenant:{type:Object,required:!0},tenantSlug:{type:String,required:!0},subscription:{type:Object,default:null},permissions:Array},setup(s){const a=s,p=h(()=>Array.isArray(a.permissions)?a.permissions.map(d=>d==null?void 0:d.name).filter(Boolean):[]),c=S("company");h(()=>[{title:a.tenantSlug?"Dashboard":"Admin Dashboard",href:a.tenantSlug?route("dashboard",{tenantSlug:a.tenantSlug}):route("admin.dashboard")}]);const{toast:y}=R(),x=S(null),u=E({name:a.tenant.name,slug:a.tenant.slug,image:null}),V=d=>{const e=d.target;if(e.files&&e.files[0]){u.image=e.files[0];const g=new FileReader;g.onload=b=>{var w;x.value=(w=b.target)==null?void 0:w.result},g.readAsDataURL(e.files[0])}},A=()=>{u.post(route("tenant.settings.update",a.tenantSlug),{onSuccess:()=>{y({title:"Success",description:"Company settings updated successfully"})},preserveScroll:!0})},T=(d,e="USD")=>d?new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD"}).format(d):"$0.00",k=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",U=(d,e)=>{if(!d||!e)return"N/A";const g=d.toString().padStart(2,"0"),b=e.toString().length===4?e.toString().slice(-2):e.toString();return`${g}/${b}`};return(d,e)=>(i(),C(F,{breadcrumbs:a.breadcrumbItems,tenantSlug:a.tenantSlug,permissions:a.permissions},{default:f(()=>[m(o(P),{title:"Company"}),m(I,{permissions:a.permissions},{default:f(()=>{var g;return[t("div",Y,[m(q,{title:"Company",description:"Manage your company information and subscription"}),m(o(_)),t("div",J,[t("div",W,[t("button",{onClick:e[0]||(e[0]=b=>c.value="company"),class:N(["py-2 px-1 -mb-px font-medium text-sm",c.value==="company"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Company Settings ",2),t("button",{onClick:e[1]||(e[1]=b=>c.value="subscription"),class:N(["py-2 px-1 -mb-px font-medium text-sm",c.value==="subscription"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Subscription Details ",2)])]),c.value==="company"?(i(),n("div",X,[(g=s.tenant)!=null&&g.image_path?(i(),n("div",H,[e[3]||(e[3]=t("div",{class:"text-sm font-medium"},"Current Company Logo",-1)),t("div",K,[t("img",{src:`/storage/${s.tenant.image_path}`,alt:"Company Logo",class:"max-w-full max-h-full object-contain"},null,8,Q)]),e[4]||(e[4]=t("div",{class:"text-xs text-muted-foreground"}," Logo is optimized and converted to SVG for better quality ",-1))])):l("",!0),t("form",{onSubmit:L(A,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[t("div",Z,[m(o(B),{for:"name"},{default:f(()=>e[5]||(e[5]=[$("Company Name")])),_:1}),m(o(D),{id:"name",modelValue:o(u).name,"onUpdate:modelValue":e[2]||(e[2]=b=>o(u).name=b),placeholder:"Enter company name",class:"mt-1 block w-full"},null,8,["modelValue"]),o(u).errors.name?(i(),n("p",tt,r(o(u).errors.name),1)):l("",!0)]),t("div",et,[m(o(B),{for:"image"},{default:f(()=>e[6]||(e[6]=[$("Update Company Logo")])),_:1}),t("div",st,[x.value?(i(),n("div",it,[t("img",{src:x.value,alt:"New Company Logo Preview",class:"max-w-full max-h-full object-contain"},null,8,ot)])):l("",!0),t("div",nt,[m(o(D),{id:"image",type:"file",onChange:V,accept:"image/jpeg,image/png,image/gif,image/svg+xml",class:"mt-1 block w-full"}),e[7]||(e[7]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Accepted formats: JPEG, PNG, GIF, SVG. Max size: 2MB. Will be optimized and converted to SVG. ",-1)),o(u).errors.image?(i(),n("p",rt,r(o(u).errors.image),1)):l("",!0)])])]),t("div",at,[p.value&&p.value.includes("tenant-settings.update")?(i(),C(o(O),{key:0,type:"submit",disabled:o(u).processing},{default:f(()=>[o(u).processing?(i(),n("span",dt,"Updating...")):(i(),n("span",lt,"Save Changes"))]),_:1},8,["disabled"])):l("",!0),m(z,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:f(()=>[G(t("p",ct,"Saved.",512),[[M,o(u).recentlySuccessful]])]),_:1})])],32)])):l("",!0),c.value==="subscription"?(i(),n("div",ut,[s.subscription?(i(),n("div",mt,[t("div",gt,[t("div",pt,[t("h3",bt,r(s.subscription.name),1),t("p",ft,r(s.subscription.description||"No description available"),1)]),t("div",vt,[t("div",yt,r(T(s.subscription.price,s.subscription.currency_code)),1)]),t("div",xt,[m(o(_)),e[11]||(e[11]=t("h4",{class:"font-medium"},"Billing Information",-1)),t("div",_t,[t("div",ht,[e[8]||(e[8]=t("div",{class:"text-xs text-muted-foreground"},"Next Billing",-1)),t("div",St,r(k(s.subscription.next_billing_at)),1)]),t("div",kt,[e[9]||(e[9]=t("div",{class:"text-xs text-muted-foreground"},"Last Billing",-1)),t("div",wt,r(k(s.subscription.last_billing_at)),1)]),t("div",Ct,[e[10]||(e[10]=t("div",{class:"text-xs text-muted-foreground"},"Payment Method",-1)),t("div",Nt,r(s.subscription.card_type)+" •••• "+r(s.subscription.last_four_digits),1),t("div",$t,"Expires "+r(U(s.subscription.expiry_month,s.subscription.expiry_year)),1)])])]),s.subscription.billing_address?(i(),n("div",Dt,[m(o(_)),e[12]||(e[12]=t("h4",{class:"font-medium"},"Billing Address",-1)),t("div",Bt,[s.subscription.billing_address.street?(i(),n("div",Vt,r(s.subscription.billing_address.street),1)):l("",!0),s.subscription.billing_address.street2?(i(),n("div",At,r(s.subscription.billing_address.street2),1)):l("",!0),t("div",null,[s.subscription.billing_address.city?(i(),n("span",Tt,r(s.subscription.billing_address.city)+", ",1)):l("",!0),s.subscription.billing_address.state?(i(),n("span",Ut,r(s.subscription.billing_address.state),1)):l("",!0),s.subscription.billing_address.zip?(i(),n("span",jt,r(s.subscription.billing_address.zip),1)):l("",!0)]),s.subscription.billing_address.country?(i(),n("div",Lt,r(s.subscription.billing_address.country),1)):l("",!0),s.subscription.billing_address.phone?(i(),n("div",zt," Phone: "+r(s.subscription.billing_address.phone),1)):l("",!0)])])):l("",!0)])])):(i(),n("div",Gt,e[13]||(e[13]=[t("h3",{class:"text-lg font-medium mb-2"},"No Subscription Found",-1),t("p",{class:"text-muted-foreground"},"Your company doesn't have an active subscription.",-1)])))])):l("",!0)])]}),_:1},8,["permissions"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}});export{te as default};
