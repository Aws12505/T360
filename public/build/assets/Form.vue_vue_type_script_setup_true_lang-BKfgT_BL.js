import{e as F,H as c,i,B as a,X as f,J as p,K as m,j as s,u as e,O as _,P as r,f as G,G as H,I}from"./vendor-_xBQTyL2.js";import{C as J}from"./vendor-vue-BaCdK-cn.js";import{_ as v,a as x}from"./Label.vue_vue_type_script_setup_true_lang-DKW7gq_r.js";import{_ as B}from"./Button.vue_vue_type_script_setup_true_lang-CQ37rLNW.js";import{_ as E,a as L,b as q,c as O,d as j}from"./SelectValue.vue_vue_type_script_setup_true_lang-DVzNOOBg.js";import{_ as K}from"./Checkbox.vue_vue_type_script_setup_true_lang-BuH3r9Qg.js";import{_ as g}from"./Card.vue_vue_type_script_setup_true_lang-Do3qZQpa.js";import{_ as b}from"./CardContent.vue_vue_type_script_setup_true_lang-LUEVUJrP.js";import{_ as y,a as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-BGUz_obY.js";import{L as P}from"./vendor-icons-79QigVMj.js";const X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},A={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Q={class:"flex flex-wrap gap-4"},R={class:"space-y-2"},W={class:"flex justify-end space-x-3"},de=F({__name:"Form",props:{entry:{type:Object,default:()=>({})}},emits:["saved","cancel"],setup(z,{emit:N}){const $=z,M=N,k=["fantastic_plus","fantastic","good","fair","poor"],S=["acceptance","on_time","maintenance_variance","open_boc","vcr_preventable","vmcr_p"],U=["driver_distraction","speeding_violation","sign_violation","traffic_light_violation","following_distance"],C=["gold","silver","not_eligible"],w=[{label:"Less",value:"less"},{label:"Less or Equal",value:"less_or_equal"},{label:"Equal",value:"equal"},{label:"More or Equal",value:"more_or_equal"},{label:"More",value:"more"}],t=J({safety_bonus_eligible_levels:$.entry.safety_bonus_eligible_levels??[],mvts_divisor:$.entry.mvts_divisor??.135,...Object.fromEntries(S.flatMap(u=>k.flatMap(o=>[[`${u}_${o}`,$.entry[`${u}_${o}`]??""],[`${u}_${o}_operator`,$.entry[`${u}_${o}_operator`]??""]]))),...Object.fromEntries(U.flatMap(u=>C.flatMap(o=>[[`${u}_${o}`,$.entry[`${u}_${o}`]??""],[`${u}_${o}_operator`,$.entry[`${u}_${o}_operator`]??""]])))}),D=u=>{const o=t.safety_bonus_eligible_levels.indexOf(u);o===-1?t.safety_bonus_eligible_levels.push(u):t.safety_bonus_eligible_levels.splice(o,1)},T=()=>{t.post(route("performance-metrics.update"),{onSuccess:()=>M("saved")})},h=u=>{const o=w.find(l=>l.value===u);return o?o.label:"Select operator"};return(u,o)=>(i(),c("form",{onSubmit:I(T,["prevent"]),class:"space-y-8"},[(i(),c(p,null,m(S,l=>a(e(g),{key:l,class:"shadow-sm"},{default:s(()=>[a(e(y),null,{default:s(()=>[a(e(V),{class:"capitalize"},{default:s(()=>[_(r(l.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),a(e(b),null,{default:s(()=>[f("div",X,[(i(),c(p,null,m(k,n=>f("div",{key:`${l}-${n}`,class:"space-y-2"},[a(e(v),{for:`${l}-${n}`,class:"capitalize"},{default:s(()=>[_(r(n.replace(/_/g," ")),1)]),_:2},1032,["for"]),a(e(x),{id:`${l}-${n}`,modelValue:e(t)[`${l}_${n}`],"onUpdate:modelValue":d=>e(t)[`${l}_${n}`]=d,type:"number",step:"0.01",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(e(E),{modelValue:e(t)[`${l}_${n}_operator`],"onUpdate:modelValue":d=>e(t)[`${l}_${n}_operator`]=d},{default:s(()=>[a(e(L),{class:"w-full"},{default:s(()=>[a(e(q),null,{default:s(()=>[_(r(h(e(t)[`${l}_${n}_operator`])),1)]),_:2},1024)]),_:2},1024),a(e(O),null,{default:s(()=>[(i(),c(p,null,m(w,d=>a(e(j),{key:d.value,value:d.value},{default:s(()=>[_(r(d.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])]),_:2},1024)]),_:2},1024)),64)),(i(),c(p,null,m(U,l=>a(e(g),{key:l,class:"shadow-sm"},{default:s(()=>[a(e(y),null,{default:s(()=>[a(e(V),{class:"capitalize"},{default:s(()=>[_(r(l.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),a(e(b),null,{default:s(()=>[f("div",A,[(i(),c(p,null,m(C,n=>f("div",{key:`${l}-${n}`,class:"space-y-2"},[a(e(v),{for:`${l}-${n}`,class:"capitalize"},{default:s(()=>[_(r(n.replace(/_/g," ")),1)]),_:2},1032,["for"]),a(e(x),{id:`${l}-${n}`,modelValue:e(t)[`${l}_${n}`],"onUpdate:modelValue":d=>e(t)[`${l}_${n}`]=d,type:"number",step:"0.01",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(e(E),{modelValue:e(t)[`${l}_${n}_operator`],"onUpdate:modelValue":d=>e(t)[`${l}_${n}_operator`]=d},{default:s(()=>[a(e(L),{class:"w-full"},{default:s(()=>[a(e(q),null,{default:s(()=>[_(r(h(e(t)[`${l}_${n}_operator`])),1)]),_:2},1024)]),_:2},1024),a(e(O),null,{default:s(()=>[(i(),c(p,null,m(w,d=>a(e(j),{key:d.value,value:d.value},{default:s(()=>[_(r(d.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])]),_:2},1024)]),_:2},1024)),64)),a(e(g),{class:"shadow-sm"},{default:s(()=>[a(e(y),null,{default:s(()=>[a(e(V),null,{default:s(()=>o[2]||(o[2]=[_("Safety Bonus Eligibility")])),_:1})]),_:1}),a(e(b),null,{default:s(()=>[f("div",Q,[(i(),c(p,null,m(k,l=>f("div",{key:l,class:"flex items-center space-x-2"},[a(e(K),{id:`safety-bonus-${l}`,checked:e(t).safety_bonus_eligible_levels.includes(l),"onUpdate:checked":n=>D(l)},null,8,["id","checked","onUpdate:checked"]),a(e(v),{for:`safety-bonus-${l}`,class:"capitalize"},{default:s(()=>[_(r(l.replace(/_/g," ")),1)]),_:2},1032,["for"])])),64))])]),_:1})]),_:1}),a(e(g),{class:"shadow-sm"},{default:s(()=>[a(e(y),null,{default:s(()=>[a(e(V),null,{default:s(()=>o[3]||(o[3]=[_("MVtS Configuration")])),_:1})]),_:1}),a(e(b),null,{default:s(()=>[f("div",R,[a(e(v),{for:"mvts-divisor"},{default:s(()=>o[4]||(o[4]=[_("MVtS Divisor")])),_:1}),a(e(x),{id:"mvts-divisor",modelValue:e(t).mvts_divisor,"onUpdate:modelValue":o[0]||(o[0]=l=>e(t).mvts_divisor=l),type:"number",step:"0.001",min:"0.001",class:"w-full md:w-1/3"},null,8,["modelValue"]),o[5]||(o[5]=f("p",{class:"text-sm text-muted-foreground"}," This value is used to calculate the Maintenance Variance to Standard (MVtS) metric. Default value is 0.135. ",-1))])]),_:1})]),_:1}),f("div",W,[a(e(B),{type:"button",onClick:o[1]||(o[1]=l=>M("cancel")),variant:"outline"},{default:s(()=>o[6]||(o[6]=[_(" Cancel ")])),_:1}),a(e(B),{type:"submit",disabled:e(t).processing},{default:s(()=>[e(t).processing?(i(),G(e(P),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):H("",!0),_(" "+r(e(t).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32))}});export{de as _};
