import{d as tt,w as ce,F as m,e as i,X as t,E as _,z as l,f as a,S as d,C as j,Y as B,u as n,H as k,O as L,U as v,G as De,a3 as lt,r as C,y as he,am as st,c as O,b as U,aj as Q,N as at,ai as ot}from"./vendor-DrR5RGOb.js";import{x as X,g as nt,W as E}from"./vendor-vue-BInP8APy.js";import{_ as ne}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as rt}from"./Checkbox.vue_vue_type_script_setup_true_lang-DYsZx5V7.js";import{_ as N}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{_ as M}from"./Icon.vue_vue_type_script_setup_true_lang-C19RfzLR.js";import{_ as dt,a as it,b as pe,c as ue,d as ut,e as ee}from"./TableRow.vue_vue_type_script_setup_true_lang-Ch0lDg94.js";import{_ as fe}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as mt}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as ct}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";import{_ as ve}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{d as te,_ as le,a as se,b as ae,c as oe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-5xvj-rV5.js";import{_ as me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-NVpKV1tK.js";import{b as ke,_ as we,a as Ce}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BGsFFXsR.js";import{_ as pt}from"./AppLayout.vue_vue_type_script_setup_true_lang-B8lustj2.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./vendor-icons-CZvmGlJ0.js";import"./app-DPORu6Cw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ft={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},vt={key:0,class:"col-span-full"},yt={class:"relative"},gt=["value"],xt={class:"col-span-full"},bt={class:"relative"},_t={class:"relative"},kt={class:"relative"},wt=["value"],Ct={class:"relative"},Dt={class:"flex items-center space-x-2"},ht={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},St=tt({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(c,{emit:o}){var h,D,A,S,Y,T,P;const x=c,V=o,p=X({id:(h=x.delay)==null?void 0:h.id,tenant_id:x.isSuperAdmin?(D=x.delay)==null?void 0:D.tenant_id:null,date:((A=x.delay)==null?void 0:A.date)||"",driver_name:((S=x.delay)==null?void 0:S.driver_name)||"",delay_type:((Y=x.delay)==null?void 0:Y.delay_type)||"origin",delay_category:((T=x.delay)==null?void 0:T.delay_category)||"1_120",delay_code_id:((P=x.delay)==null?void 0:P.delay_code_id)||null,disputed:x.delay&&x.delay.disputed!==null?parseInt(x.delay.disputed)===1:!1,driver_controllable:x.delay&&x.delay.driver_controllable!==null?parseInt(x.delay.driver_controllable)===1:null});ce(()=>x.delay,w=>{w?(p.id=w.id,p.tenant_id=w.tenant_id,p.date=w.date,p.driver_name=w.driver_name,p.delay_type=w.delay_type,p.delay_category=w.delay_category,p.delay_code_id=w.delay_code_id,p.disputed=w.disputed!==null?parseInt(w.disputed)===1:!1,p.driver_controllable=w.driver_controllable!==null?parseInt(w.driver_controllable)===1:null):p.reset()},{immediate:!0});const $=()=>{const w=!!p.id,u=x.isSuperAdmin?w?"ontime.update.admin":"ontime.store.admin":w?"ontime.update":"ontime.store",y=x.isSuperAdmin?w?{delay:p.id}:{}:w?{tenantSlug:x.tenantSlug,delay:p.id}:{tenantSlug:x.tenantSlug};p[w?"put":"post"](route(u,y),{onSuccess:()=>V("close")})};return(w,u)=>(i(),m("form",{onSubmit:De($,["prevent"]),class:"space-y-6"},[t("div",ft,[c.isSuperAdmin?(i(),m("div",vt,[l(N,null,{default:a(()=>u[9]||(u[9]=[d("Company Name")])),_:1}),t("div",yt,[j(t("select",{"onUpdate:modelValue":u[0]||(u[0]=y=>n(p).tenant_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[u[10]||(u[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),m(k,null,L(c.tenants,y=>(i(),m("option",{key:y.id,value:y.id},v(y.name),9,gt))),128))],512),[[B,n(p).tenant_id]]),u[11]||(u[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):_("",!0),t("div",xt,[l(N,null,{default:a(()=>u[12]||(u[12]=[d("Date")])),_:1}),l(ne,{type:"date",modelValue:n(p).date,"onUpdate:modelValue":u[1]||(u[1]=y=>n(p).date=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[l(N,null,{default:a(()=>u[13]||(u[13]=[d("Driver Name")])),_:1}),l(ne,{modelValue:n(p).driver_name,"onUpdate:modelValue":u[2]||(u[2]=y=>n(p).driver_name=y),class:"w-full"},null,8,["modelValue"])]),t("div",null,[l(N,null,{default:a(()=>u[14]||(u[14]=[d("Delay Type")])),_:1}),t("div",bt,[j(t("select",{"onUpdate:modelValue":u[3]||(u[3]=y=>n(p).delay_type=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[15]||(u[15]=[t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),512),[[B,n(p).delay_type]]),u[16]||(u[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[l(N,null,{default:a(()=>u[17]||(u[17]=[d("Delay Category")])),_:1}),t("div",_t,[j(t("select",{"onUpdate:modelValue":u[4]||(u[4]=y=>n(p).delay_category=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[18]||(u[18]=[t("option",{value:"1_120"},"1–120 min",-1),t("option",{value:"121_600"},"121–600 min",-1),t("option",{value:"601_plus"},"601+ min",-1)]),512),[[B,n(p).delay_category]]),u[19]||(u[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[l(N,null,{default:a(()=>u[20]||(u[20]=[d("Delay Code")])),_:1}),t("div",kt,[j(t("select",{"onUpdate:modelValue":u[5]||(u[5]=y=>n(p).delay_code_id=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),m(k,null,L(c.delayCodes,y=>(i(),m("option",{key:y.id,value:y.id},v(y.code),9,wt))),128))],512),[[B,n(p).delay_code_id]]),u[21]||(u[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[l(N,null,{default:a(()=>u[22]||(u[22]=[d("Driver Controllable")])),_:1}),t("div",Ct,[j(t("select",{"onUpdate:modelValue":u[6]||(u[6]=y=>n(p).driver_controllable=y),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[23]||(u[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[B,n(p).driver_controllable]]),u[24]||(u[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",Dt,[l(rt,{checked:n(p).disputed,"onUpdate:checked":u[7]||(u[7]=y=>n(p).disputed=y),id:"disputed"},null,8,["checked"]),l(N,{for:"disputed"},{default:a(()=>u[25]||(u[25]=[d("Disputed")])),_:1})])]),t("div",ht,[l(b,{type:"button",onClick:u[8]||(u[8]=y=>V("close")),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>u[26]||(u[26]=[d(" Cancel ")])),_:1}),l(b,{type:"submit",disabled:n(p).processing,class:"w-full sm:w-auto"},{default:a(()=>[d(v(n(p).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),$t={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Tt={class:"text-base text-center font-semibold mb-2 md:mb-4"},Nt={key:0,class:"text-center text-sm py-4 text-primary font-medium"},At={class:"space-y-3"},Ft={class:"text-sm"},Ot={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},delayType:{type:String,default:""},totalDelays:{type:Number,default:-1}},setup(c){const o=c,x=V=>{const p=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],h=[...o.drivers].sort((D,A)=>A.total_penalty-D.total_penalty).map(D=>D.total_penalty).indexOf(V);return p[h]||"#6b7280"};return(V,p)=>(i(),m("div",$t,[t("h3",Tt,v(c.title),1),c.drivers.length===0?(i(),m("div",Nt,[c.totalDelays===0?(i(),m(k,{key:0},[c.delayType==="origin"?(i(),m(k,{key:0},[d(" No origin delays recorded. You're on track for Fantastic+ ! ")],64)):c.delayType==="destination"?(i(),m(k,{key:1},[d(" No destination delays recorded. You're on track for Fantastic+ ! ")],64)):(i(),m(k,{key:2},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))],64)):(i(),m(k,{key:1},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(i(),m(k,{key:1},[p[0]||(p[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",At,[(i(!0),m(k,null,L(c.drivers,($,h)=>(i(),m("div",{key:h,class:"flex justify-between items-center"},[t("span",Ft,v($.driver_name),1),t("span",{class:"text-sm font-medium",style:lt({color:x($.total_penalty)})},v($.total_penalty),5)]))),128))])],64))]))}},Mt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Ut={class:"text-base text-center font-semibold mb-2 md:mb-4"},Vt={class:"h-64"},zt={__name:"LineChart",props:{title:{type:String,default:"On-Time Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageOntime:{type:Number,default:null}},setup(c){const o=c,x=C(null);let V=null;const p=()=>{if(V&&V.destroy(),!x.value)return;const $=x.value.getContext("2d"),h=[];o.chartData.datasets.forEach(S=>{S.data&&S.data.length&&h.push(...S.data)});const D=h.length>0?Math.min(...h):0,A=h.length>0?Math.max(...h):100;V=new st($,{type:"line",data:o.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(S){const Y=S.raw||0,T=o.averageOntime||0,P=o.chartData.dateRangeLabel||"selected period",w=Number(T).toFixed(2);return[`On-Time Score: ${Y}`,`Average Score Over ${P}: ${w}`]}}}},scales:{y:{beginAtZero:!(D>10),min:Math.max(Math.floor(D-5),0),max:Math.min(102,Math.ceil(A+5)),ticks:{stepSize:2.5,padding:10,font:{size:11},callback:function(S){return S<=100?S:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return he(()=>{p()}),ce(()=>o.chartData,()=>{p()},{deep:!0}),($,h)=>(i(),m("div",Mt,[t("h3",Ut,v(c.title),1),t("div",Vt,[t("canvas",{ref_key:"chartCanvas",ref:x},null,512)])]))}},jt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 lg:p-6 flex flex-col items-center justify-center"},Bt={class:"text-base font-semibold mb-2 text-foreground"},Pt={class:"text-2xl font-bold text-primary"},Et={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(c){const o=c,x=O(()=>o.value===null||o.value===void 0||o.value===""?"No Data":o.value);return(V,p)=>(i(),m("div",jt,[t("h3",Bt,v(c.title),1),t("p",Pt,v(x.value),1)]))}},Lt={class:"space-y-2 md:space-y-4 lg:space-y-6"},Rt={class:"grid grid-cols-1 gap-2 md:gap-4 lg:gap-6 sm:grid-cols-2 lg:grid-cols-4"},Yt={class:"grid grid-cols-1 gap-2 md:gap-4 lg:gap-6 lg:grid-cols-4"},Wt={__name:"OnTimeDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageOntime:{type:Number,default:null},currentDateFilter:{type:String,default:null},delayType:{type:String,default:"all"}},setup(c){const o=c,x=O(()=>o.metricsData&&o.metricsData.by_category?[{title:"Total Delayed Stops",value:o.metricsData.totalDelays},{title:"Delayed for 1-120 Minutes",value:o.metricsData.between1_120Count},{title:"Delayed for 121-600 Minutes",value:o.metricsData.between121_600Count},{title:"Delayed for +601 Minutes",value:o.metricsData.moreThan601Count}]:[]),V=O(()=>o.driversData&&o.driversData.length?o.driversData:[]),p=O(()=>o.chartData&&Object.keys(o.chartData).length?o.chartData:{}),$=O(()=>!o.chartData||!o.chartData.labels?!1:o.chartData.labels.length>1);return(h,D)=>(i(),m("div",Lt,[t("div",Rt,[(i(!0),m(k,null,L(x.value,(A,S)=>(i(),U(Et,{key:S,title:A.title,value:A.value},null,8,["title","value"]))),128))]),t("div",Yt,[l(Ot,{title:"Bottom 5 Drivers",drivers:V.value,delayType:c.delayType,totalDelays:o.metricsData.totalDelays,class:Q({"lg:col-span-1":$.value,"lg:col-span-4":!$.value})},null,8,["drivers","delayType","totalDelays","class"]),o.currentDateFilter!="Yesterday"&&$.value?(i(),U(zt,{key:0,title:"On-Time Score",chartData:p.value,averageOntime:c.averageOntime,class:"lg:col-span-3"},null,8,["chartData","averageOntime"])):_("",!0)])]))}},qt={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},It={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},Ht={class:"flex flex-wrap gap-3 ml-3"},Gt={class:"relative"},Qt={key:0,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},Xt={class:"py-1"},Zt={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},Jt=["href"],Kt=["action"],el={class:"flex flex-col items-center gap-2 md:items-start"},tl={class:"flex flex-wrap gap-1 md:gap-2"},ll={key:0,class:"text-sm text-muted-foreground"},sl={key:0},al={key:1},ol={key:2},nl={key:3,class:"ml-1"},rl={class:"flex items-center justify-between"},dl={class:"flex items-center gap-2"},il={key:0,class:"ml-4 flex flex-wrap gap-2"},ul={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ml={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cl={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},pl={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fl={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},vl={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},yl={class:"flex flex-col justify-between gap-1 md:gap-4"},gl={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},xl=["value"],bl={class:"flex justify-end space-x-2"},_l={class:"overflow-x-auto"},kl={class:"flex items-center justify-center"},wl=["checked"],Cl={class:"flex items-center"},Dl={key:2,class:"ml-2"},hl={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Sl={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$l={key:3,class:"ml-2 opacity-50"},Tl=["value"],Nl={key:0,class:"ml-1 text-xs text-red-500"},Al={class:"flex space-x-2"},Fl={key:0,class:"border-t bg-muted/20 px-4 py-3"},Ol={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Ml={class:"text-sm text-muted-foreground"},Ul={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},Vl={class:"flex items-center gap-2"},zl={class:"flex flex-wrap"},jl=["innerHTML"],Bl={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},Pl={class:"flex items-center justify-between"},El={class:"max-h-[400px] overflow-y-auto rounded-md border"},Ll={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},Rl={key:1,class:"divide-y"},Yl=["onClick"],Wl={class:"text-xs font-medium sm:text-sm"},ql={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},Il={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},Hl={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},Gl={key:0,class:"space-y-4 rounded-md border p-4"},Ql={class:"text-sm font-medium sm:text-base"},Xl={class:"space-y-3"},Zl={class:"flex justify-end space-x-2"},ks={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},delay_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_ontime:{type:Number},filters:{type:Object,default:()=>({search:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",driverControllable:""})}},setup(c){const o=c,x=O(()=>(z.value==="yesterday"||z.value==="current-week")&&o.weekNumber&&o.year?`Week ${o.weekNumber}, ${o.year}`:(z.value==="6w"||z.value==="quarterly")&&o.startWeekNumber&&o.endWeekNumber&&o.year?`Weeks ${o.startWeekNumber}-${o.endWeekNumber}, ${o.year}`:""),V=[{title:o.tenantSlug?"Dashboard":"Admin Dashboard",href:o.tenantSlug?route("dashboard",{tenantSlug:o.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin")}],p=C(!1),$=C(!1),h=C(null),D=C(""),A=C(""),S=C(!1),Y=C(null),T=C([]),P=C(!1),w=C(null),u=C(!1),y=C(null),R=C({code:"",description:""}),Z=C(!1),ye=C(null),W=C("date"),q=C("desc"),g=C({...o.filters}),re=["date","delay_type","driver_name","delay_category","delay_code","disputed","driver_controllable"],I=O(()=>{let r=[...o.delays.data];return r.sort((e,s)=>{var K,_e;let f,F;return W.value==="delay_code"?(f=((K=e.delay_code)==null?void 0:K.code)||"",F=((_e=s.delay_code)==null?void 0:_e.code)||""):(f=e[W.value],F=s[W.value]),f===null?1:F===null?-1:(typeof f=="string"&&(f=f.toLowerCase(),F=F.toLowerCase()),f<F?q.value==="asc"?-1:1:f>F?q.value==="asc"?1:-1:0)}),r}),Se=O(()=>o.delay_codes.filter(r=>!r.deleted_at));function $e(r){W.value===r?q.value=q.value==="asc"?"desc":"asc":(W.value=r,q.value="asc")}function ge(){const r=o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin");E.get(r,{...g.value,perPage:H.value,dateFilter:z.value})}function Te(){g.value={search:"",dateFrom:"",dateTo:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",controllable:""},ge()}const H=C(o.delays.per_page||10),z=C(o.dateFilter||"full");function Ne(){const r=o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin");E.get(r,{...g.value,perPage:H.value,dateFilter:z.value})}function de(r){z.value=r;const e=o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin");E.get(e,{...g.value,perPage:H.value,dateFilter:r})}function Ae(r){if(r){const e=new URL(r),s=e.origin+e.pathname;E.get(s,{...g.value,perPage:H.value,dateFilter:z.value,page:e.searchParams.get("page")||1})}}function ie(r){if(!r)return"";const e=r.split("-");if(e.length!==3)return r;const[s,f,F]=e;return`${Number(f)}/${Number(F)}/${s}`}const xe=(r=null)=>{h.value=r,p.value=!0},Fe=r=>{Y.value=r,S.value=!0},Oe=()=>{$.value=!0,u.value=!1,y.value=null},Me=()=>{R.value={code:"",description:""},y.value=null,u.value=!0},Ue=r=>{R.value={code:r.code,description:r.description||""},y.value=r.id,u.value=!0},Ve=()=>{u.value=!1,y.value=null},ze=r=>{ye.value=r,Z.value=!0},G=C(!1),je=O(()=>g.value.search||g.value.dateFrom||g.value.dateTo||g.value.delayCode||g.value.delayCategory||g.value.disputed||g.value.delayType||g.value.controllable),Be=r=>{if(!r)return"";const e=o.delay_codes.find(s=>s.id===parseInt(r));return e?e.code:""},Pe=async r=>{try{await E.delete(route("delay_codes.destroy.admin",r),{onSuccess:()=>{Z.value=!1,D.value="Delay code deleted successfully"}})}catch(e){console.error("Error deleting delay code:",e)}};function be(r){if(!r)return"—";switch(r){case"1_120":return"1-120 mins";case"121_600":return"121-600 mins";case"601_plus":return"601+ mins";default:return r}}const Ee=()=>{const r=X({code:R.value.code,description:R.value.description}),e=y.value?o.isSuperAdmin?"delay_codes.update.admin":"delay_codes.update":o.isSuperAdmin?"delay_codes.store.admin":"delay_codes.store",s=y.value?o.isSuperAdmin?{id:y.value}:{tenantSlug:o.tenantSlug,id:y.value}:o.isSuperAdmin?{}:{tenantSlug:o.tenantSlug};(y.value?r.put:r.post).call(r,route(e,s),{onSuccess:()=>{D.value=y.value?"Delay code updated successfully.":"Delay code created successfully.",u.value=!1,y.value=null,E.reload({only:["delay_codes"]})},onError:F=>{console.error(F)}})},Le=r=>{X({}).post(route(o.isSuperAdmin?"delay_codes.restore.admin":"delay_codes.restore",{id:r}),{onSuccess:()=>{D.value="Delay code restored successfully.",E.reload({only:["delay_codes"]})},onError:s=>{console.error(s)}})},Re=r=>{X({}).delete(route(o.isSuperAdmin?"delay_codes.forceDelete.admin":"delay_codes.forceDelete",{id:r}),{onSuccess:()=>{D.value="Delay code permanently deleted successfully.",E.reload({only:["delay_codes"]})},onError:s=>{console.error(s)}})},Ye=r=>{const e=X({}),s=o.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",f=o.isSuperAdmin?{delay:r}:{tenantSlug:o.tenantSlug,delay:r};e.delete(route(s,f),{preserveScroll:!0,onSuccess:()=>{D.value="Delay record deleted successfully.",S.value=!1}})};ce(D,r=>{r&&setTimeout(()=>{D.value=""},5e3)}),o.flash&&o.flash.error&&(A.value=o.flash.error),ce(A,r=>{r&&setTimeout(()=>{A.value=""},5e3)});const We=O(()=>{var s;if(!((s=o.delay_breakdown)!=null&&s.by_category))return null;const r=o.delay_breakdown.by_category,e=o.filters.delayType;return e?{between1_120Count:r[`category_1_120_${e}_count`]||"0",between121_600Count:r[`category_121_600_${e}_count`]||"0",moreThan601Count:r[`category_601_plus_${e}_count`]||"0",totalDelays:r[`total_${e}_delays`]||"0",by_category:!0}:{between1_120Count:r.category_1_120_count||"0",between121_600Count:r.category_121_600_count||"0",moreThan601Count:r.category_601_plus_count||"0",totalDelays:r.total_delays||"0",by_category:!0}}),qe=O(()=>{var r,e,s;return o.filters.delayType=="origin"?((r=o.delay_breakdown)==null?void 0:r.bottom_five_drivers.origin)||[]:o.filters.delayType=="destination"?((e=o.delay_breakdown)==null?void 0:e.bottom_five_drivers.destination)||[]:((s=o.delay_breakdown)==null?void 0:s.bottom_five_drivers.total)||[]}),Ie=O(()=>!o.line_chart_data||o.line_chart_data.length===0?{labels:[],datasets:[{label:"On-Time Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}:{labels:o.line_chart_data.map(r=>r.date),datasets:[{label:"On-Time Performance",data:o.line_chart_data.map(r=>r.onTimePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}),He=O(()=>I.value.length>0&&T.value.length===I.value.length);O(()=>o.delays.data&&o.delays.data.length>0);function Ge(r){r.target.checked?T.value=I.value.map(e=>e.id):T.value=[]}function Qe(){T.value.length>0&&(P.value=!0)}function Xe(){const r=X({ids:T.value}),e=o.isSuperAdmin?"ontime.destroyBulk.admin":"ontime.destroyBulk",s=o.isSuperAdmin?{}:{tenantSlug:o.tenantSlug};r.delete(route(e,s),{preserveScroll:!0,onSuccess:()=>{D.value=`${T.value.length} delay records deleted successfully.`,T.value=[],P.value=!1,E.reload()},onError:f=>{console.error(f)}})}function Ze(r){const e=r.target.files[0];if(!e)return;const s=new FormData;s.append("csv_file",e);const f=o.isSuperAdmin?route("ontime.import.admin"):route("ontime.import",{tenantSlug:o.tenantSlug});E.post(f,s,{onSuccess:()=>{D.value="Delays imported successfully",r.target.value=""},onError:F=>{console.error(F),r.target.value=""}})}function Je(){if(o.delays.data.length===0){A.value="No delay data found to export.";return}w.value&&w.value.submit()}const Ke=O(()=>o.tenantSlug?route("ontime.export",{tenantSlug:o.tenantSlug}):route("ontime.export.admin")),J=C(!1),et=O(()=>"/storage/upload-data-temps/Delays Template.csv");return he(()=>{const r=e=>{J.value&&!e.target.closest(".relative")&&(J.value=!1)};document.addEventListener("click",r),at(()=>{document.removeEventListener("click",r)})}),(r,e)=>(i(),U(pt,{breadcrumbs:V,tenantSlug:c.tenantSlug},{default:a(()=>[l(n(nt),{title:"On-Time"}),t("div",qt,[D.value?(i(),U(n(ke),{key:0,variant:"success"},{default:a(()=>[l(n(we),null,{default:a(()=>e[32]||(e[32]=[d("Success")])),_:1}),l(n(Ce),null,{default:a(()=>[d(v(D.value),1)]),_:1})]),_:1})):_("",!0),A.value?(i(),U(n(ke),{key:1,variant:"destructive"},{default:a(()=>[l(n(we),null,{default:a(()=>e[33]||(e[33]=[d("Error")])),_:1}),l(n(Ce),null,{default:a(()=>[d(v(A.value),1)]),_:1})]),_:1})):_("",!0),t("div",It,[e[39]||(e[39]=t("h1",{class:"text-lg font-bold md:text-xl lg:text-2xl"},"On-Time Management",-1)),t("div",Ht,[l(b,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=s=>xe()),variant:"default"},{default:a(()=>[l(M,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[34]||(e[34]=d(" Add Delay "))]),_:1}),T.value.length>0?(i(),U(b,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=s=>Qe()),variant:"destructive"},{default:a(()=>[l(M,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+v(T.value.length)+") ",1)]),_:1})):_("",!0),t("div",Gt,[l(b,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[2]||(e[2]=s=>J.value=!J.value),variant:"secondary"},{default:a(()=>[l(M,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Upload CSV ")),l(M,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),J.value?(i(),m("div",Qt,[t("div",Xt,[t("label",Zt,[e[36]||(e[36]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:Ze,accept:".csv"},null,32)]),t("a",{href:et.value,download:"Delays Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Jt)])])):_("",!0)]),l(b,{class:"px-2 py-0 md:px-4 md:py-2",onClick:De(Je,["prevent"]),variant:"outline"},{default:a(()=>[l(M,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[37]||(e[37]=d(" Download CSV "))]),_:1}),c.isSuperAdmin?(i(),U(b,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=s=>Oe()),variant:"outline"},{default:a(()=>[l(M,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[38]||(e[38]=d(" Manage Delay Codes "))]),_:1})):_("",!0)])]),t("form",{ref_key:"exportForm",ref:w,action:Ke.value,method:"GET",class:"hidden"},null,8,Kt),l(n(fe),null,{default:a(()=>[l(n(ve),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[t("div",el,[t("div",tl,[l(b,{onClick:e[4]||(e[4]=s=>de("yesterday")),variant:"outline",size:"sm",class:Q({"border-primary bg-primary/10 text-primary":z.value==="yesterday"})},{default:a(()=>e[40]||(e[40]=[d(" Yesterday ")])),_:1},8,["class"]),l(b,{onClick:e[5]||(e[5]=s=>de("current-week")),variant:"outline",size:"sm",class:Q({"border-primary bg-primary/10 text-primary":z.value==="current-week"})},{default:a(()=>e[41]||(e[41]=[d(" WTD ")])),_:1},8,["class"]),l(b,{onClick:e[6]||(e[6]=s=>de("6w")),variant:"outline",size:"sm",class:Q({"border-primary bg-primary/10 text-primary":z.value==="6w"})},{default:a(()=>e[42]||(e[42]=[d(" T6W ")])),_:1},8,["class"]),l(b,{onClick:e[7]||(e[7]=s=>de("quarterly")),variant:"outline",size:"sm",class:Q({"border-primary bg-primary/10 text-primary":z.value==="quarterly"})},{default:a(()=>e[43]||(e[43]=[d(" Quarterly ")])),_:1},8,["class"])]),c.dateRange?(i(),m("div",ll,[z.value==="yesterday"&&c.dateRange.start?(i(),m("span",sl," Showing data from "+v(ie(c.dateRange.start)),1)):c.dateRange.start&&c.dateRange.end?(i(),m("span",al," Showing data from "+v(ie(c.dateRange.start))+" to "+v(ie(c.dateRange.end)),1)):(i(),m("span",ol,v(c.dateRange.label),1)),x.value?(i(),m("span",nl,"("+v(x.value)+")",1)):_("",!0)])):_("",!0)])]),_:1})]),_:1}),l(n(fe),null,{default:a(()=>[l(n(mt),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[t("div",rl,[t("div",dl,[l(n(ct),{class:"text-lg md:text-xl lg:text-2xl"},{default:a(()=>e[44]||(e[44]=[d("Filters")])),_:1}),!G.value&&je.value?(i(),m("div",il,[g.value.search?(i(),m("div",ul," Search: "+v(g.value.search),1)):_("",!0),g.value.delayCode?(i(),m("div",ml," Code: "+v(Be(g.value.delayCode)),1)):_("",!0),g.value.delayCategory?(i(),m("div",cl," Category: "+v(be(g.value.delayCategory)),1)):_("",!0),g.value.delayType?(i(),m("div",pl," Type: "+v(g.value.delayType==="origin"?"Origin":"Destination"),1)):_("",!0),g.value.disputed?(i(),m("div",fl," Disputed: "+v(g.value.disputed==="true"?"Yes":"No"),1)):_("",!0),g.value.controllable?(i(),m("div",vl," Driver Controllable: "+v(g.value.controllable==="true"?"Yes":g.value.controllable==="false"?"No":"N/A"),1)):_("",!0)])):_("",!0)]),l(b,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=s=>G.value=!G.value)},{default:a(()=>[d(v(G.value?"Hide Filters":"Show Filters")+" ",1),l(M,{name:G.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),G.value?(i(),U(n(ve),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[t("div",yl,[t("div",gl,[t("div",null,[l(n(N),{for:"search"},{default:a(()=>e[45]||(e[45]=[d("Search")])),_:1}),l(n(ne),{class:"h-9 px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:g.value.search,"onUpdate:modelValue":e[9]||(e[9]=s=>g.value.search=s),type:"text",placeholder:"Search by driver..."},null,8,["modelValue"])]),t("div",null,[l(n(N),{for:"delayCode"},{default:a(()=>e[46]||(e[46]=[d("Delay Code")])),_:1}),j(t("select",{id:"delayCode","onUpdate:modelValue":e[10]||(e[10]=s=>g.value.delayCode=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[47]||(e[47]=t("option",{value:""},"All Codes",-1)),(i(!0),m(k,null,L(c.delay_codes,s=>(i(),m("option",{key:s.id,value:s.id},v(s.code),9,xl))),128))],512),[[B,g.value.delayCode]])]),t("div",null,[l(n(N),{for:"delayCategory"},{default:a(()=>e[48]||(e[48]=[d("Delay Category")])),_:1}),j(t("select",{id:"delayCategory","onUpdate:modelValue":e[11]||(e[11]=s=>g.value.delayCategory=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[49]||(e[49]=[t("option",{value:""},"All Categories",-1),t("option",{value:"1_120"},"1-120 mins",-1),t("option",{value:"121_600"},"121-600 mins",-1),t("option",{value:"601_plus"},"601+ mins",-1)]),512),[[B,g.value.delayCategory]])]),t("div",null,[l(n(N),{for:"delayType"},{default:a(()=>e[50]||(e[50]=[d("Delay Type")])),_:1}),j(t("select",{id:"delayType","onUpdate:modelValue":e[12]||(e[12]=s=>g.value.delayType=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[51]||(e[51]=[t("option",{value:""},"All Types",-1),t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),512),[[B,g.value.delayType]])]),t("div",null,[l(n(N),{for:"disputed"},{default:a(()=>e[52]||(e[52]=[d("Disputed Status")])),_:1}),j(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=s=>g.value.disputed=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[53]||(e[53]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Disputed",-1),t("option",{value:"false"},"Not Disputed",-1)]),512),[[B,g.value.disputed]])]),t("div",null,[l(n(N),{for:"controllable"},{default:a(()=>e[54]||(e[54]=[d("Driver Controllable")])),_:1}),j(t("select",{id:"controllable","onUpdate:modelValue":e[14]||(e[14]=s=>g.value.controllable=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[55]||(e[55]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"NA"},"N/A",-1)]),512),[[B,g.value.controllable]])])]),t("div",bl,[l(b,{onClick:Te,variant:"ghost",size:"sm"},{default:a(()=>[l(M,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[56]||(e[56]=d(" Reset Filters "))]),_:1}),l(b,{onClick:ge,variant:"default",size:"sm"},{default:a(()=>[l(M,{name:"filter",class:"mr-2 h-4 w-4"}),e[57]||(e[57]=d(" Apply Filters "))]),_:1})])])]),_:1})):_("",!0)]),_:1}),c.isSuperAdmin?_("",!0):(i(),U(Wt,{key:2,metricsData:We.value,driversData:qe.value,chartData:Ie.value,averageOntime:c.average_ontime,currentDateFilter:o.dateRange.label,delayType:g.value.delayType},null,8,["metricsData","driversData","chartData","averageOntime","currentDateFilter","delayType"])),l(n(fe),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:a(()=>[l(n(ve),{class:"p-0"},{default:a(()=>[t("div",_l,[l(n(dt),{class:"relative h-[500px] overflow-auto"},{default:a(()=>[l(n(it),null,{default:a(()=>[l(n(pe),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:a(()=>[l(n(ue),{class:"w-[50px]"},{default:a(()=>[t("div",kl,[t("input",{type:"checkbox",onChange:Ge,checked:He.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,wl)])]),_:1}),c.isSuperAdmin?(i(),U(n(ue),{key:0},{default:a(()=>e[58]||(e[58]=[d("Company Name")])),_:1})):_("",!0),(i(),m(k,null,L(re,s=>l(n(ue),{key:s,class:"cursor-pointer",onClick:f=>$e(s)},{default:a(()=>[t("div",Cl,[s==="delay_category"?(i(),m(k,{key:0},[d(" Delay ")],64)):(i(),m(k,{key:1},[d(v(s.replace(/_/g," ").split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")),1)],64)),W.value===s?(i(),m("div",Dl,[q.value==="asc"?(i(),m("svg",hl,e[59]||(e[59]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),m("svg",Sl,e[60]||(e[60]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),m("div",$l,e[61]||(e[61]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),l(n(ue),{class:"text-right"},{default:a(()=>e[62]||(e[62]=[d("Actions")])),_:1})]),_:1})]),_:1}),l(n(ut),null,{default:a(()=>[I.value.length===0?(i(),U(n(pe),{key:0},{default:a(()=>[l(n(ee),{colspan:c.isSuperAdmin?re.length+2:re.length+1,class:"py-8 text-center"},{default:a(()=>e[63]||(e[63]=[d(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):_("",!0),(i(!0),m(k,null,L(I.value,s=>(i(),U(n(pe),{key:s.id,class:"hover:bg-muted/50"},{default:a(()=>[l(n(ee),{class:"text-center"},{default:a(()=>[j(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[15]||(e[15]=f=>T.value=f),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Tl),[[ot,T.value]])]),_:2},1024),c.isSuperAdmin?(i(),U(n(ee),{key:0},{default:a(()=>{var f;return[d(v(((f=s.tenant)==null?void 0:f.name)||"—"),1)]}),_:2},1024)):_("",!0),(i(),m(k,null,L(re,f=>l(n(ee),{key:f,class:"whitespace-nowrap"},{default:a(()=>{var F,K;return[f==="date"?(i(),m(k,{key:0},[d(v(ie(s[f])),1)],64)):f==="disputed"?(i(),m(k,{key:1},[d(v(s[f]?"Yes":"No"),1)],64)):f==="driver_controllable"?(i(),m(k,{key:2},[d(v(s[f]===null?"N/A":s[f]?"Yes":"No"),1)],64)):f==="delay_code"?(i(),m(k,{key:3},[d(v(((F=s.delay_code)==null?void 0:F.code)||"—")+" ",1),(K=s.delay_code)!=null&&K.deleted_at?(i(),m("span",Nl,"(Deleted Code)")):_("",!0)],64)):f==="delay_category"?(i(),m(k,{key:4},[d(v(be(s.delay_category)),1)],64)):(i(),m(k,{key:5},[d(v(s[f]),1)],64))]}),_:2},1024)),64)),l(n(ee),null,{default:a(()=>[t("div",Al,[l(b,{onClick:f=>xe(s),variant:"warning",size:"sm"},{default:a(()=>[l(M,{name:"pencil",class:"mr-1 h-4 w-4"}),e[64]||(e[64]=d(" Edit "))]),_:2},1032,["onClick"]),l(b,{onClick:f=>Fe(s.id),variant:"destructive",size:"sm"},{default:a(()=>[l(M,{name:"trash",class:"mr-1 h-4 w-4"}),e[65]||(e[65]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),c.delays.links?(i(),m("div",Fl,[t("div",Ol,[t("div",Ml," Showing "+v(I.value.length)+" of "+v(c.delays.data.length)+" entries ",1),t("div",Ul,[t("div",Vl,[l(n(N),{for:"perPage",class:"text-sm"},{default:a(()=>e[66]||(e[66]=[d("Per page:")])),_:1}),j(t("select",{id:"perPage","onUpdate:modelValue":e[16]||(e[16]=s=>H.value=s),onChange:Ne,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[67]||(e[67]=[t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),544),[[B,H.value]])]),t("div",zl,[(i(!0),m(k,null,L(c.delays.links,s=>(i(),U(b,{key:s.label,onClick:f=>Ae(s.url),disabled:!s.url,variant:"ghost",size:"sm",class:Q(["mx-1",{"border-primary bg-primary/10 text-primary":s.active}])},{default:a(()=>[t("span",{innerHTML:s.label},null,8,jl)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):_("",!0)]),_:1})]),_:1}),l(n(te),{open:p.value,"onUpdate:open":e[18]||(e[18]=s=>p.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>[d(v(h.value?"Edit":"Add")+" Delay",1)]),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>[d(" Fill in the details to "+v(h.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),l(St,{delay:h.value,"delay-codes":Se.value,tenants:c.tenants,"is-super-admin":c.isSuperAdmin,"tenant-slug":c.tenantSlug,onClose:e[17]||(e[17]=s=>p.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),l(n(te),{open:$.value,"onUpdate:open":e[22]||(e[22]=s=>$.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[68]||(e[68]=[d("Manage Delay Codes")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>e[69]||(e[69]=[d(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),t("div",Bl,[t("div",Pl,[e[71]||(e[71]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Delay Codes",-1)),l(b,{onClick:Me,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:a(()=>[l(M,{name:"plus",class:"mr-1 h-3 w-3 sm:h-3.5 sm:w-3.5"}),e[70]||(e[70]=d(" Add New Code "))]),_:1})]),t("div",El,[!c.delay_codes||c.delay_codes.length===0?(i(),m("div",Ll," No delay codes found ")):(i(),m("div",Rl,[(i(!0),m(k,null,L(c.delay_codes,s=>(i(),m("div",{key:s.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:f=>Ue(s)},[t("div",Wl,[d(v(s.code)+" ",1),s.deleted_at?(i(),m("span",ql,"(Deleted)")):_("",!0)]),s.description?(i(),m("div",Il,v(s.description),1)):_("",!0)],8,Yl),t("div",Hl,[c.isSuperAdmin?(i(),m(k,{key:0},[s.deleted_at?(i(),m(k,{key:0},[l(b,{onClick:f=>Le(s.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:a(()=>[l(M,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[72]||(e[72]=d(" Restore "))]),_:2},1032,["onClick"]),l(b,{onClick:f=>Re(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:a(()=>[l(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[73]||(e[73]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(i(),U(b,{key:1,onClick:f=>ze(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:a(()=>[l(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[74]||(e[74]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):_("",!0)])]))),128))]))]),u.value?(i(),m("div",Gl,[t("h3",Ql,v(y.value?"Edit":"Add")+" Delay Code",1),t("div",Xl,[t("div",null,[l(n(N),{for:"code",class:"text-xs sm:text-sm"},{default:a(()=>e[75]||(e[75]=[d("Code")])),_:1}),l(n(ne),{id:"code",modelValue:R.value.code,"onUpdate:modelValue":e[19]||(e[19]=s=>R.value.code=s),placeholder:"Enter code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[l(n(N),{for:"description",class:"text-xs sm:text-sm"},{default:a(()=>e[76]||(e[76]=[d("Description")])),_:1}),l(n(ne),{id:"description",modelValue:R.value.description,"onUpdate:modelValue":e[20]||(e[20]=s=>R.value.description=s),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",Zl,[l(b,{onClick:Ve,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:a(()=>e[77]||(e[77]=[d("Cancel")])),_:1}),l(b,{onClick:Ee,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:a(()=>e[78]||(e[78]=[d("Save")])),_:1})])])])):_("",!0)]),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{onClick:e[21]||(e[21]=s=>$.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[79]||(e[79]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(n(te),{open:Z.value,"onUpdate:open":e[25]||(e[25]=s=>Z.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[80]||(e[80]=[d("Confirm Deletion")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>e[81]||(e[81]=[d(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{type:"button",onClick:e[23]||(e[23]=s=>Z.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[82]||(e[82]=[d(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[24]||(e[24]=s=>Pe(ye.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[83]||(e[83]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(n(te),{open:S.value,"onUpdate:open":e[28]||(e[28]=s=>S.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[84]||(e[84]=[d("Confirm Deletion")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>e[85]||(e[85]=[d(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{type:"button",onClick:e[26]||(e[26]=s=>S.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[86]||(e[86]=[d(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[27]||(e[27]=s=>Ye(Y.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[87]||(e[87]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(n(te),{open:P.value,"onUpdate:open":e[31]||(e[31]=s=>P.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[88]||(e[88]=[d("Confirm Bulk Deletion")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>[d(" Are you sure you want to delete "+v(T.value.length)+" delay records? This action cannot be undone. ",1)]),_:1})]),_:1}),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{type:"button",onClick:e[29]||(e[29]=s=>P.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[89]||(e[89]=[d(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[30]||(e[30]=s=>Xe()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[90]||(e[90]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{ks as default};
