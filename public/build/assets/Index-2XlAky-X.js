import{d as Ne,C as Z,f as pe,a as m,o as d,b as o,g as D,e as l,h as N,w as n,i as r,v as V,u as s,F as S,r as z,t as _,j as Fe,k as j,c as ae,l as T,m as Ve,n as G,p as Ue,W as I}from"./app-B91Zl0Oo.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-PJXKnqlO.js";import{_ as h,a as ee,b as te,c as le,d as ne,e as re}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DFI7N8AN.js";import{_ as C,a as L}from"./Label.vue_vue_type_script_setup_true_lang-ChWoabUD.js";import{_ as ze}from"./Checkbox.vue_vue_type_script_setup_true_lang-Cyvup3SO.js";import{_ as Me}from"./AppLayout.vue_vue_type_script_setup_true_lang-B7AKyEh7.js";import{_ as R}from"./Icon.vue_vue_type_script_setup_true_lang-D1rnNBp_.js";import{_ as Pe,a as Be,b as de,c as oe,d as Le,e as X}from"./TableRow.vue_vue_type_script_setup_true_lang-CPbVIJtt.js";import{_ as ie}from"./Card.vue_vue_type_script_setup_true_lang-BJWyaRE5.js";import{_ as Ee,a as Ie}from"./CardTitle.vue_vue_type_script_setup_true_lang-BGN-U_jC.js";import{_ as ue}from"./CardContent.vue_vue_type_script_setup_true_lang-NmazK22E.js";import{_ as Ye,a as We,b as qe}from"./AlertDescription.vue_vue_type_script_setup_true_lang-CUV_fE8p.js";import"./index-BwX3HRAb.js";import"./check-Cp0bzDxk.js";import"./createLucideIcon-CMlEOo_P.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-d3MMgUIc.js";import"./shield-Bc7egZTN.js";import"./loader-circle-DQaJYqkb.js";import"./sun-Dzok2l92.js";const Oe={class:"grid grid-cols-2 gap-4"},He={key:0},Qe=["value"],Ge=["value"],Je={class:"flex items-center space-x-2"},Ke={class:"mt-6 flex justify-end"},Xe=Ne({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(c,{emit:v}){var w,F,E,$,M,U,A;const k=c,Y=v,f=Z({id:(w=k.rejection)==null?void 0:w.id,tenant_id:k.isSuperAdmin?(F=k.rejection)==null?void 0:F.tenant_id:null,date:((E=k.rejection)==null?void 0:E.date)||"",driver_name:(($=k.rejection)==null?void 0:$.driver_name)||"",rejection_type:((M=k.rejection)==null?void 0:M.rejection_type)||"block",rejection_category:((U=k.rejection)==null?void 0:U.rejection_category)||"more_than_6",reason_code_id:((A=k.rejection)==null?void 0:A.reason_code_id)||null,disputed:k.rejection&&k.rejection.disputed!==null?parseInt(k.rejection.disputed)===1:!1,driver_controllable:k.rejection&&k.rejection.driver_controllable!==null?parseInt(k.rejection.driver_controllable)===1:null});pe(()=>k.rejection,y=>{y?(f.id=y.id,f.tenant_id=y.tenant_id,f.date=y.date,f.driver_name=y.driver_name,f.rejection_type=y.rejection_type,f.rejection_category=y.rejection_category,f.reason_code_id=y.reason_code_id,f.disputed=y.disputed!==null?parseInt(y.disputed)===1:!1,f.driver_controllable=y.driver_controllable!==null?parseInt(y.driver_controllable)===1:null):f.reset()},{immediate:!0});const W=()=>{const y=!!f.id,i=k.isSuperAdmin?y?"acceptance.update.admin":"acceptance.store.admin":y?"acceptance.update":"acceptance.store",g=k.isSuperAdmin?y?{rejection:f.id}:{}:y?{tenantSlug:k.tenantSlug,rejection:f.id}:{tenantSlug:k.tenantSlug};f[y?"put":"post"](route(i,g),{onSuccess:()=>Y("close")})};return(y,i)=>(d(),m("form",{onSubmit:Fe(W,["prevent"])},[o("div",Oe,[c.isSuperAdmin?(d(),m("div",He,[l(C,null,{default:n(()=>i[8]||(i[8]=[r("Company Name")])),_:1}),N(o("select",{"onUpdate:modelValue":i[0]||(i[0]=g=>s(f).tenant_id=g),class:"w-full border rounded px-2 py-1"},[i[9]||(i[9]=o("option",{value:null,disabled:""},"Select Company",-1)),(d(!0),m(S,null,z(c.tenants,g=>(d(),m("option",{key:g.id,value:g.id},_(g.name),9,Qe))),128))],512),[[V,s(f).tenant_id]])])):D("",!0),o("div",null,[l(C,null,{default:n(()=>i[10]||(i[10]=[r("Date")])),_:1}),l(L,{type:"date",modelValue:s(f).date,"onUpdate:modelValue":i[1]||(i[1]=g=>s(f).date=g),class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(C,null,{default:n(()=>i[11]||(i[11]=[r("Driver Name")])),_:1}),l(L,{modelValue:s(f).driver_name,"onUpdate:modelValue":i[2]||(i[2]=g=>s(f).driver_name=g),class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(C,null,{default:n(()=>i[12]||(i[12]=[r("Rejection Type")])),_:1}),N(o("select",{"onUpdate:modelValue":i[3]||(i[3]=g=>s(f).rejection_type=g),class:"w-full border rounded px-2 py-1"},i[13]||(i[13]=[o("option",{value:"block"},"Block",-1),o("option",{value:"load"},"Load",-1)]),512),[[V,s(f).rejection_type]])]),o("div",null,[l(C,null,{default:n(()=>i[14]||(i[14]=[r("Rejection Category")])),_:1}),N(o("select",{"onUpdate:modelValue":i[4]||(i[4]=g=>s(f).rejection_category=g),class:"w-full border rounded px-2 py-1"},i[15]||(i[15]=[o("option",{value:"more_than_6"},"More than 6 hrs",-1),o("option",{value:"within_6"},"Within 6 hrs",-1),o("option",{value:"after_start"},"After start",-1)]),512),[[V,s(f).rejection_category]])]),o("div",null,[l(C,null,{default:n(()=>i[16]||(i[16]=[r("Reason Code")])),_:1}),N(o("select",{"onUpdate:modelValue":i[5]||(i[5]=g=>s(f).reason_code_id=g),class:"w-full border rounded px-2 py-1"},[(d(!0),m(S,null,z(c.reasons,g=>(d(),m("option",{key:g.id,value:g.id},_(g.reason_code),9,Ge))),128))],512),[[V,s(f).reason_code_id]])]),o("div",Je,[l(ze,{checked:s(f).disputed,"onUpdate:checked":i[6]||(i[6]=g=>s(f).disputed=g)},null,8,["checked"]),l(C,null,{default:n(()=>i[17]||(i[17]=[r("Disputed")])),_:1})]),o("div",null,[l(C,null,{default:n(()=>i[18]||(i[18]=[r("Driver Controllable")])),_:1}),N(o("select",{"onUpdate:modelValue":i[7]||(i[7]=g=>s(f).driver_controllable=g),class:"w-full border rounded px-2 py-1"},i[19]||(i[19]=[o("option",{value:null},"N/A",-1),o("option",{value:!0},"Yes",-1),o("option",{value:!1},"No",-1)]),512),[[V,s(f).driver_controllable]])])]),o("div",Ke,[l(b,{type:"submit",disabled:s(f).processing},{default:n(()=>[r(_(s(f).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Ze={class:"max-w-7xl mx-auto p-6 space-y-8"},he={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},et={class:"flex flex-wrap gap-3"},tt={class:"flex flex-col gap-2"},lt={class:"flex flex-wrap gap-2"},nt={key:0,class:"text-sm text-muted-foreground"},ot={key:0},st={key:1},at={class:"flex flex-col gap-4"},rt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},dt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},it=["value"],ut={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full"},ft={class:"flex justify-end"},mt={class:"overflow-x-auto"},pt={class:"flex items-center justify-center"},ct=["checked"],vt={class:"flex items-center"},yt={key:0,class:"ml-2"},gt={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},_t={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},bt={key:1,class:"ml-2 opacity-50"},kt=["value"],Ct={key:1,class:"capitalize"},xt={key:0,class:"ml-1 text-xs text-red-500"},jt={class:"flex space-x-2"},St={key:0,class:"bg-muted/20 px-4 py-3 border-t"},wt={class:"flex justify-between items-center"},$t={class:"text-sm text-muted-foreground flex items-center gap-4"},At={class:"flex items-center gap-2"},Dt=["value"],Tt={class:"flex"},Rt=["innerHTML"],Nt={class:"mt-4 space-y-4"},Ft={class:"flex items-center justify-between"},Vt={class:"max-h-[400px] overflow-y-auto"},Ut={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},zt={key:1,class:"space-y-2"},Mt=["onClick"],Pt={class:"font-medium"},Bt={key:0,class:"ml-2 text-xs text-red-500"},Lt={key:0,class:"text-sm text-muted-foreground mt-1"},Et={class:"opacity-0 group-hover:opacity-100 transition-opacity"},It={key:0,class:"border rounded-md p-4 space-y-4"},Yt={class:"text-sm font-medium"},Wt={class:"space-y-3"},qt={class:"flex justify-end space-x-2"},ul={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"full"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10}},setup(c){const v=c,k=[{title:v.tenantSlug?"Dashboard":"Admin Dashboard",href:v.tenantSlug?route("dashboard",{tenantSlug:v.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:v.tenantSlug?route("acceptance.index",{tenantSlug:v.tenantSlug}):route("acceptance.index.admin")}],Y=j(!1),f=j(!1),W=j(null),w=j(""),F=j(v.dateFilter||"full"),E=j(v.perPage),$=j([]),M=j(!1),U=j(!1),A=j(null),y=j({reason_code:"",description:""}),i=j(!1),g=j(null),J=["date","rejection_type","driver_name","penalty","reason_code","disputed","driver_controllable"],q=j("date"),O=j("desc"),p=j({search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""}),H=ae(()=>{let a=[...v.rejections.data];if(p.value.search){const e=p.value.search.toLowerCase();a=a.filter(t=>{var u,x,B,K;return((u=t.driver_name)==null?void 0:u.toLowerCase().includes(e))||((x=t.rejection_type)==null?void 0:x.toLowerCase().includes(e))||((K=(B=t.reason_code)==null?void 0:B.reason_code)==null?void 0:K.toLowerCase().includes(e))})}if(p.value.dateFrom&&(a=a.filter(e=>e.date&&e.date>=p.value.dateFrom)),p.value.dateTo&&(a=a.filter(e=>e.date&&e.date<=p.value.dateTo)),p.value.rejectionType&&(a=a.filter(e=>e.rejection_type===p.value.rejectionType)),p.value.reasonCode&&(a=a.filter(e=>e.reason_code&&e.reason_code.id===parseInt(p.value.reasonCode))),p.value.penalty){const e=p.value.penalty.toLowerCase();a=a.filter(t=>t.penalty&&t.penalty.toString().toLowerCase().includes(e))}if(p.value.disputed!==""){const e=p.value.disputed==="true";a=a.filter(t=>t.disputed===e)}if(p.value.driverControllable!=="")if(p.value.driverControllable==="null")a=a.filter(e=>e.driver_controllable===null);else{const e=p.value.driverControllable==="true";a=a.filter(t=>t.driver_controllable===e)}return a.sort((e,t)=>{var B,K;let u=e[q.value],x=t[q.value];return q.value==="reason_code"&&(u=((B=e.reason_code)==null?void 0:B.reason_code)||"",x=((K=t.reason_code)==null?void 0:K.reason_code)||""),u===null?1:x===null?-1:(typeof u=="string"&&(u=u.toLowerCase(),x=x.toLowerCase()),u<x?O.value==="asc"?-1:1:u>x?O.value==="asc"?1:-1:0)}),a});function ce(a){q.value===a?O.value=O.value==="asc"?"desc":"asc":(q.value=a,O.value="asc")}function P(){}function ve(){p.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""},Q("full")}const fe=(a=null)=>{W.value=a,Y.value=!0},ye=()=>{f.value=!0,U.value=!1,A.value=null},ge=()=>{y.value={reason_code:"",description:""},A.value=null,U.value=!0},_e=a=>{y.value={reason_code:a.reason_code,description:a.description||""},A.value=a.id,U.value=!0},be=()=>{U.value=!1,A.value=null},me=a=>{g.value=a,i.value=!0},ke=()=>{const a=Z({reason_code:y.value.reason_code,description:y.value.description}),e=A.value?v.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":v.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",t=A.value?v.isSuperAdmin?{code:A.value}:{tenantSlug:v.tenantSlug,code:A.value}:v.isSuperAdmin?{}:{tenantSlug:v.tenantSlug};(A.value?a.put:a.post).call(a,route(e,t),{onSuccess:()=>{w.value=A.value?"Reason code updated successfully.":"Reason code created successfully.",U.value=!1,A.value=null,I.reload({only:["rejection_reason_codes"]})},onError:x=>{console.error(x)}})},Ce=a=>{const e=Z({}),t=v.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",u=v.isSuperAdmin?{id:a}:{tenantSlug:v.tenantSlug,code:a};e.delete(route(t,u),{onSuccess:()=>{w.value="Reason code deleted successfully.",i.value=!1,I.reload({only:["rejection_reason_codes"]})}})},xe=a=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=Z({}),t=v.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",u=v.isSuperAdmin?{rejection:a}:{tenantSlug:v.tenantSlug,rejection:a};e.delete(route(t,u),{preserveScroll:!0,onSuccess:()=>{w.value="Rejection deleted successfully."}})},je=a=>{a&&I.get(a,{},{only:["rejections"]})};function Q(a){F.value=a;const e=v.tenantSlug?route("acceptance.index",{tenantSlug:v.tenantSlug}):route("acceptance.index.admin");I.get(e,{dateFilter:a,perPage:E.value},{preserveState:!0})}function Se(){const a=v.tenantSlug?route("acceptance.index",{tenantSlug:v.tenantSlug}):route("acceptance.index.admin");I.get(a,{dateFilter:F.value,perPage:E.value},{preserveState:!0})}function se(a){if(!a)return"";const e=a.split("-");if(e.length!==3)return a;const[t,u,x]=e;return`${Number(u)}/${Number(x)}/${t}`}pe(w,a=>{a&&setTimeout(()=>{w.value=""},5e3)});function we(a){I.post(route("rejection_reason_codes.restore.admin",{id:a}),{},{onSuccess:()=>{w.value="Reason code restored successfully",setTimeout(()=>w.value="",3e3)}})}function $e(a){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&I.delete(route("rejection_reason_codes.forceDelete.admin",{id:a}),{onSuccess:()=>{w.value="Reason code permanently deleted",setTimeout(()=>w.value="",3e3)}})}ae(()=>v.rejection_reason_codes.filter(a=>!a.deleted_at));const Ae=ae(()=>H.value.length>0&&$.value.length===H.value.length);function De(a){a.target.checked?$.value=H.value.map(e=>e.id):$.value=[]}function Te(){$.value.length>0&&(M.value=!0)}function Re(){const a=Z({ids:$.value}),e=v.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",t=v.isSuperAdmin?{}:{tenantSlug:v.tenantSlug};a.delete(route(e,t),{preserveScroll:!0,onSuccess:()=>{w.value=`${$.value.length} rejection records deleted successfully.`,$.value=[],M.value=!1},onError:u=>{console.error(u)}})}return(a,e)=>(d(),T(Me,{breadcrumbs:k,tenantSlug:c.tenantSlug},{default:n(()=>[l(s(Ve),{title:"Acceptance"}),o("div",Ze,[w.value?(d(),T(s(Ye),{key:0,variant:"success"},{default:n(()=>[l(s(We),null,{default:n(()=>e[30]||(e[30]=[r("Success")])),_:1}),l(s(qe),null,{default:n(()=>[r(_(w.value),1)]),_:1})]),_:1})):D("",!0),o("div",he,[e[33]||(e[33]=o("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Acceptance",-1)),o("div",et,[l(b,{onClick:e[0]||(e[0]=t=>fe()),variant:"default"},{default:n(()=>[l(R,{name:"plus",class:"mr-2 h-4 w-4"}),e[31]||(e[31]=r(" Add Rejection "))]),_:1}),$.value.length>0?(d(),T(b,{key:0,onClick:e[1]||(e[1]=t=>Te()),variant:"destructive"},{default:n(()=>[l(R,{name:"trash",class:"mr-2 h-4 w-4"}),r(" Delete Selected ("+_($.value.length)+") ",1)]),_:1})):D("",!0),c.isSuperAdmin?(d(),T(b,{key:1,onClick:e[2]||(e[2]=t=>ye()),variant:"outline"},{default:n(()=>[l(R,{name:"settings",class:"mr-2 h-4 w-4"}),e[32]||(e[32]=r(" Manage Reason Codes "))]),_:1})):D("",!0)])]),l(s(ie),null,{default:n(()=>[l(s(ue),{class:"p-4"},{default:n(()=>[o("div",tt,[o("div",lt,[l(b,{onClick:e[3]||(e[3]=t=>Q("yesterday")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":F.value==="yesterday"})},{default:n(()=>e[34]||(e[34]=[r(" Yesterday ")])),_:1},8,["class"]),l(b,{onClick:e[4]||(e[4]=t=>Q("current-week")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":F.value==="current-week"})},{default:n(()=>e[35]||(e[35]=[r(" Current Week ")])),_:1},8,["class"]),l(b,{onClick:e[5]||(e[5]=t=>Q("6w")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":F.value==="6w"})},{default:n(()=>e[36]||(e[36]=[r(" 6 Weeks ")])),_:1},8,["class"]),l(b,{onClick:e[6]||(e[6]=t=>Q("quarterly")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":F.value==="quarterly"})},{default:n(()=>e[37]||(e[37]=[r(" Quarterly ")])),_:1},8,["class"]),l(b,{onClick:e[7]||(e[7]=t=>Q("full")),variant:"outline",size:"sm",class:G({"bg-primary/10 text-primary border-primary":F.value==="full"})},{default:n(()=>e[38]||(e[38]=[r(" Full ")])),_:1},8,["class"])]),c.dateRange?(d(),m("div",nt,[c.dateRange.start&&c.dateRange.end?(d(),m("span",ot," Showing data from "+_(se(c.dateRange.start))+" to "+_(se(c.dateRange.end)),1)):(d(),m("span",st,_(c.dateRange.label),1))])):D("",!0)])]),_:1})]),_:1}),l(s(ie),null,{default:n(()=>[l(s(Ee),null,{default:n(()=>[l(s(Ie),null,{default:n(()=>e[39]||(e[39]=[r("Filters")])),_:1})]),_:1}),l(s(ue),null,{default:n(()=>[o("div",at,[o("div",rt,[o("div",null,[l(s(C),{for:"search"},{default:n(()=>e[40]||(e[40]=[r("Search")])),_:1}),l(s(L),{id:"search",modelValue:p.value.search,"onUpdate:modelValue":e[8]||(e[8]=t=>p.value.search=t),type:"text",placeholder:"Search by driver name...",onInput:P},null,8,["modelValue"])]),o("div",null,[l(s(C),{for:"dateFrom"},{default:n(()=>e[41]||(e[41]=[r("Date From")])),_:1}),l(s(L),{id:"dateFrom",modelValue:p.value.dateFrom,"onUpdate:modelValue":e[9]||(e[9]=t=>p.value.dateFrom=t),type:"date",onChange:P},null,8,["modelValue"])]),o("div",null,[l(s(C),{for:"dateTo"},{default:n(()=>e[42]||(e[42]=[r("Date To")])),_:1}),l(s(L),{id:"dateTo",modelValue:p.value.dateTo,"onUpdate:modelValue":e[10]||(e[10]=t=>p.value.dateTo=t),type:"date",onChange:P},null,8,["modelValue"])])]),o("div",dt,[o("div",null,[l(s(C),{for:"rejectionType"},{default:n(()=>e[43]||(e[43]=[r("Rejection Type")])),_:1}),N(o("select",{id:"rejectionType","onUpdate:modelValue":e[11]||(e[11]=t=>p.value.rejectionType=t),onChange:P,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},e[44]||(e[44]=[o("option",{value:""},"All Types",-1),o("option",{value:"pickup"},"Pickup",-1),o("option",{value:"delivery"},"Delivery",-1)]),544),[[V,p.value.rejectionType]])]),o("div",null,[l(s(C),{for:"reasonCode"},{default:n(()=>e[45]||(e[45]=[r("Reason Code")])),_:1}),N(o("select",{id:"reasonCode","onUpdate:modelValue":e[12]||(e[12]=t=>p.value.reasonCode=t),onChange:P,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[e[46]||(e[46]=o("option",{value:""},"All Reason Codes",-1)),(d(!0),m(S,null,z(c.rejection_reason_codes,t=>(d(),m("option",{key:t.id,value:t.id},_(t.reason_code),9,it))),128))],544),[[V,p.value.reasonCode]])]),o("div",null,[l(s(C),{for:"penalty"},{default:n(()=>e[47]||(e[47]=[r("Penalty")])),_:1}),l(s(L),{id:"penalty",modelValue:p.value.penalty,"onUpdate:modelValue":e[13]||(e[13]=t=>p.value.penalty=t),type:"text",placeholder:"Filter by penalty...",onInput:P},null,8,["modelValue"])])]),o("div",ut,[o("div",null,[l(s(C),{for:"disputed"},{default:n(()=>e[48]||(e[48]=[r("Disputed")])),_:1}),N(o("select",{id:"disputed","onUpdate:modelValue":e[14]||(e[14]=t=>p.value.disputed=t),onChange:P,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},e[49]||(e[49]=[o("option",{value:""},"All",-1),o("option",{value:"true"},"Yes",-1),o("option",{value:"false"},"No",-1)]),544),[[V,p.value.disputed]])]),o("div",null,[l(s(C),{for:"driverControllable"},{default:n(()=>e[50]||(e[50]=[r("Driver Controllable")])),_:1}),N(o("select",{id:"driverControllable","onUpdate:modelValue":e[15]||(e[15]=t=>p.value.driverControllable=t),onChange:P,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},e[51]||(e[51]=[o("option",{value:""},"All",-1),o("option",{value:"true"},"Yes",-1),o("option",{value:"false"},"No",-1),o("option",{value:"null"},"N/A",-1)]),544),[[V,p.value.driverControllable]])])]),o("div",ft,[l(b,{onClick:ve,variant:"ghost",size:"sm"},{default:n(()=>[l(R,{name:"rotate-ccw",class:"mr-2 h-4 w-4"}),e[52]||(e[52]=r(" Reset Filters "))]),_:1})])])]),_:1})]),_:1}),l(s(ie),null,{default:n(()=>[l(s(ue),{class:"p-0"},{default:n(()=>[o("div",mt,[l(s(Pe),{class:"relative h-[500px] overflow-auto"},{default:n(()=>[l(s(Be),null,{default:n(()=>[l(s(de),{class:"sticky top-0 bg-background border-b z-10"},{default:n(()=>[l(s(oe),{class:"w-[50px]"},{default:n(()=>[o("div",pt,[o("input",{type:"checkbox",onChange:De,checked:Ae.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ct)])]),_:1}),c.isSuperAdmin?(d(),T(s(oe),{key:0},{default:n(()=>e[53]||(e[53]=[r("Company Name")])),_:1})):D("",!0),(d(),m(S,null,z(J,t=>l(s(oe),{key:t,class:"cursor-pointer",onClick:u=>ce(t)},{default:n(()=>[o("div",vt,[r(_(t.replace(/_/g," ").replace(/^./,u=>u.toUpperCase()))+" ",1),q.value===t?(d(),m("div",yt,[O.value==="asc"?(d(),m("svg",gt,e[54]||(e[54]=[o("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(d(),m("svg",_t,e[55]||(e[55]=[o("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(d(),m("div",bt,e[56]||(e[56]=[o("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M8 10l4-4 4 4"}),o("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),l(s(oe),null,{default:n(()=>e[57]||(e[57]=[r("Actions")])),_:1})]),_:1})]),_:1}),l(s(Le),null,{default:n(()=>[H.value.length===0?(d(),T(s(de),{key:0},{default:n(()=>[l(s(X),{colspan:c.isSuperAdmin?J.length+3:J.length+2,class:"text-center py-8"},{default:n(()=>e[58]||(e[58]=[r(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):D("",!0),(d(!0),m(S,null,z(H.value,t=>(d(),T(s(de),{key:t.id,class:"hover:bg-muted/50"},{default:n(()=>[l(s(X),{class:"text-center"},{default:n(()=>[N(o("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[16]||(e[16]=u=>$.value=u),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,kt),[[Ue,$.value]])]),_:2},1024),c.isSuperAdmin?(d(),T(s(X),{key:0},{default:n(()=>{var u;return[r(_(((u=t.tenant)==null?void 0:u.name)||"—"),1)]}),_:2},1024)):D("",!0),(d(),m(S,null,z(J,u=>l(s(X),{key:u,class:"whitespace-nowrap"},{default:n(()=>{var x,B;return[u==="date"?(d(),m(S,{key:0},[r(_(se(t[u])),1)],64)):u==="rejection_type"?(d(),m("span",Ct,_(t[u]),1)):u==="reason_code"?(d(),m(S,{key:2},[r(_(((x=t.reason_code)==null?void 0:x.reason_code)||"—")+" ",1),(B=t.reason_code)!=null&&B.deleted_at?(d(),m("span",xt,"(Deleted)")):D("",!0)],64)):u==="disputed"?(d(),m(S,{key:3},[r(_(t[u]?"Yes":"No"),1)],64)):u==="driver_controllable"?(d(),m(S,{key:4},[r(_(t[u]===null?"N/A":t[u]?"Yes":"No"),1)],64)):(d(),m(S,{key:5},[r(_(t[u]),1)],64))]}),_:2},1024)),64)),l(s(X),null,{default:n(()=>[o("div",jt,[l(b,{size:"sm",onClick:u=>fe(t),variant:"warning"},{default:n(()=>[l(R,{name:"pencil",class:"mr-1 h-4 w-4"}),e[59]||(e[59]=r(" Edit "))]),_:2},1032,["onClick"]),l(b,{size:"sm",variant:"destructive",onClick:u=>xe(t.id)},{default:n(()=>[l(R,{name:"trash",class:"mr-1 h-4 w-4"}),e[60]||(e[60]=r(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),c.rejections.links?(d(),m("div",St,[o("div",wt,[o("div",$t,[o("span",null,"Showing "+_(H.value.length)+" of "+_(c.rejections.data.length)+" entries",1),o("div",At,[e[61]||(e[61]=o("span",{class:"text-sm"},"Show:",-1)),N(o("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>E.value=t),onChange:Se,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(d(),m(S,null,z([10,25,50,100],t=>o("option",{key:t,value:t},_(t),9,Dt)),64))],544),[[V,E.value]])])]),o("div",Tt,[(d(!0),m(S,null,z(c.rejections.links,t=>(d(),T(b,{key:t.label,onClick:u=>je(t.url),disabled:!t.url,variant:"ghost",size:"sm",class:G(["mx-1",{"bg-primary/10 text-primary border-primary":t.active}])},{default:n(()=>[o("span",{innerHTML:t.label},null,8,Rt)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):D("",!0)]),_:1})]),_:1}),l(s(h),{open:Y.value,"onUpdate:open":e[19]||(e[19]=t=>Y.value=t)},{default:n(()=>[l(s(ee),{class:"sm:max-w-2xl"},{default:n(()=>[l(s(te),null,{default:n(()=>[l(s(le),null,{default:n(()=>[r(_(W.value?"Edit":"Add")+" Rejection",1)]),_:1}),l(s(ne),null,{default:n(()=>[r(" Fill in the details to "+_(W.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),l(Xe,{rejection:W.value,reasons:c.rejection_reason_codes,tenants:c.tenants,"is-super-admin":c.isSuperAdmin,"tenant-slug":c.tenantSlug,onClose:e[18]||(e[18]=t=>Y.value=!1)},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),c.isSuperAdmin?(d(),T(s(h),{key:1,open:f.value,"onUpdate:open":e[23]||(e[23]=t=>f.value=t)},{default:n(()=>[l(s(ee),{class:"sm:max-w-lg"},{default:n(()=>[l(s(te),null,{default:n(()=>[l(s(le),null,{default:n(()=>e[62]||(e[62]=[r("Manage Reason Codes")])),_:1}),l(s(ne),null,{default:n(()=>e[63]||(e[63]=[r(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),o("div",Nt,[o("div",Ft,[e[65]||(e[65]=o("h3",{class:"text-sm font-medium"},"Current Reason Codes",-1)),l(b,{onClick:ge,size:"sm",variant:"outline"},{default:n(()=>[l(R,{name:"plus",class:"mr-2 h-4 w-4"}),e[64]||(e[64]=r(" Add New Code "))]),_:1})]),o("div",Vt,[!c.rejection_reason_codes||c.rejection_reason_codes.length===0?(d(),m("div",Ut," No reason codes found ")):(d(),m("div",zt,[(d(!0),m(S,null,z(c.rejection_reason_codes,t=>(d(),m("div",{key:t.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[o("div",{class:"flex-1 cursor-pointer",onClick:u=>_e(t)},[o("div",Pt,[r(_(t.reason_code)+" ",1),t.deleted_at?(d(),m("span",Bt,"(Deleted)")):D("",!0)]),t.description?(d(),m("div",Lt,_(t.description),1)):D("",!0)],8,Mt),o("div",Et,[c.isSuperAdmin?(d(),m(S,{key:0},[t.deleted_at?(d(),m(S,{key:0},[l(b,{onClick:u=>we(t.id),size:"sm",variant:"outline"},{default:n(()=>[l(R,{name:"refresh",class:"mr-2 h-4 w-4"}),e[66]||(e[66]=r(" Restore "))]),_:2},1032,["onClick"]),l(b,{onClick:u=>$e(t.id),size:"sm",variant:"destructive"},{default:n(()=>[l(R,{name:"trash",class:"mr-2 h-4 w-4"}),e[67]||(e[67]=r(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(d(),T(b,{key:1,onClick:u=>me(t.id),size:"sm",variant:"destructive"},{default:n(()=>[l(R,{name:"trash",class:"mr-2 h-4 w-4"}),e[68]||(e[68]=r(" Delete "))]),_:2},1032,["onClick"]))],64)):(d(),T(b,{key:1,onClick:u=>me(t.id),size:"sm",variant:"destructive"},{default:n(()=>[l(R,{name:"trash",class:"mr-2 h-4 w-4"}),e[69]||(e[69]=r(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))])]),U.value?(d(),m("div",It,[o("h3",Yt,_(A.value?"Edit":"Add")+" Reason Code",1),o("div",Wt,[o("div",null,[l(s(C),{for:"reason_code"},{default:n(()=>e[70]||(e[70]=[r("Code")])),_:1}),l(s(L),{id:"reason_code",modelValue:y.value.reason_code,"onUpdate:modelValue":e[20]||(e[20]=t=>y.value.reason_code=t),placeholder:"Enter reason code"},null,8,["modelValue"])]),o("div",null,[l(s(C),{for:"description"},{default:n(()=>e[71]||(e[71]=[r("Description")])),_:1}),l(s(L),{id:"description",modelValue:y.value.description,"onUpdate:modelValue":e[21]||(e[21]=t=>y.value.description=t),placeholder:"Enter description"},null,8,["modelValue"])]),o("div",qt,[l(b,{onClick:be,variant:"ghost",size:"sm"},{default:n(()=>e[72]||(e[72]=[r("Cancel")])),_:1}),l(b,{onClick:ke,variant:"default",size:"sm"},{default:n(()=>e[73]||(e[73]=[r("Save")])),_:1})])])])):D("",!0),l(s(re),{class:"mt-6"},{default:n(()=>[l(b,{onClick:e[22]||(e[22]=t=>f.value=!1),variant:"outline"},{default:n(()=>e[74]||(e[74]=[r("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):D("",!0),l(s(h),{open:i.value,"onUpdate:open":e[26]||(e[26]=t=>i.value=t)},{default:n(()=>[l(s(ee),null,{default:n(()=>[l(s(te),null,{default:n(()=>[l(s(le),null,{default:n(()=>e[75]||(e[75]=[r("Confirm Deletion")])),_:1}),l(s(ne),null,{default:n(()=>e[76]||(e[76]=[r(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),l(s(re),{class:"mt-4"},{default:n(()=>[l(b,{type:"button",onClick:e[24]||(e[24]=t=>i.value=!1),variant:"outline"},{default:n(()=>e[77]||(e[77]=[r(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[25]||(e[25]=t=>Ce(g.value)),variant:"destructive"},{default:n(()=>e[78]||(e[78]=[r(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(s(h),{open:M.value,"onUpdate:open":e[29]||(e[29]=t=>M.value=t)},{default:n(()=>[l(s(ee),null,{default:n(()=>[l(s(te),null,{default:n(()=>[l(s(le),null,{default:n(()=>e[79]||(e[79]=[r("Confirm Bulk Deletion")])),_:1}),l(s(ne),null,{default:n(()=>[r(" Are you sure you want to delete "+_($.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),l(s(re),{class:"mt-4"},{default:n(()=>[l(b,{type:"button",onClick:e[27]||(e[27]=t=>M.value=!1),variant:"outline"},{default:n(()=>e[80]||(e[80]=[r(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[28]||(e[28]=t=>Re()),variant:"destructive"},{default:n(()=>e[81]||(e[81]=[r(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{ul as default};
