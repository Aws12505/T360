import{d as N,c as T,r as y,b as g,e as i,f as a,z as e,u as t,X as d,E as $,F as b,S as l,H as D,O as F,U as m,ah as V}from"./vendor-DrR5RGOb.js";import{g as j}from"./vendor-vue-BInP8APy.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-B8lustj2.js";import{_ as P,a as H}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-DgKvcX6Z.js";import{_ as I}from"./Form.vue_vue_type_script_setup_true_lang-CUTEXqqW.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as L}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as O}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{_ as U}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";import{_ as Y}from"./Separator.vue_vue_type_script_setup_true_lang-mktRl8Mw.js";import{_ as q,a as J,b as E,c as u,d as K,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-Ch0lDg94.js";import{_ as A}from"./Badge.vue_vue_type_script_setup_true_lang-C39lwuAh.js";import{P as Q,T as R,b as W}from"./vendor-icons-CZvmGlJ0.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./Icon.vue_vue_type_script_setup_true_lang-C19RfzLR.js";import"./app-DPORu6Cw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import"./InputError.vue_vue_type_script_setup_true_lang-DJFUZLlW.js";const ee={class:"flex flex-col space-y-6 w-full"},te={class:"flex justify-end"},ae={class:"flex items-center space-x-2"},se={key:0,class:"overflow-x-auto"},le={key:1,class:"text-center py-12"},ne={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center overflow-y-auto overflow-x-hidden"},re={class:"relative z-10 mx-auto my-4 w-full max-w-md p-4 md:max-w-xl"},oe=N({__name:"Admin",props:{thresholds:Array,metrics:Array,tenantSlug:{type:String,default:null}},setup(B){const r=B,{tenantSlug:_}=r,M=T(()=>[{title:_?"Dashboard":"Admin Dashboard",href:_?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")}]),c=y(!1),p=y({}),v=y(!1),w=n=>{switch(n){case!0:return"success";case!1:return"destructive";default:return"outline"}};function z(n){p.value=n,v.value=!1,c.value=!0}function C(){p.value={metric_name:"",good_threshold:null,bad_threshold:null,good_enabled:!0,bad_enabled:!0},v.value=!0,c.value=!0}function h(){c.value=!1,p.value={}}function S(n){return n??"-"}const x=T(()=>{if(!r.metrics||!r.thresholds)return[];const n=r.thresholds.map(s=>s.metric_name);return r.metrics.filter(s=>!n.includes(s))});return(n,s)=>(i(),g(G,{breadcrumbs:M.value,tenantSlug:t(_)},{default:a(()=>[e(t(j),{title:"Safety Thresholds Management"}),e(P,null,{default:a(()=>[d("div",ee,[e(H,{title:"Safety Thresholds",description:"Manage safety thresholds for driver coaching and alerts"}),e(t(Y)),d("div",te,[x.value.length>0?(i(),g(k,{key:0,onClick:C,variant:"default",size:"sm",class:"gap-1"},{default:a(()=>[e(t(Q),{class:"h-4 w-4"}),s[0]||(s[0]=d("span",null,"Add New Threshold",-1))]),_:1})):$("",!0)]),e(t(L),{class:"w-full"},{default:a(()=>[e(t(U),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(t(X),{class:"text-xl font-semibold"},{default:a(()=>[d("div",ae,[e(t(R),{class:"h-5 w-5"}),s[1]||(s[1]=d("span",null,"Safety Thresholds",-1))])]),_:1})]),_:1}),e(t(O),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[r.thresholds&&r.thresholds.length>0?(i(),b("div",se,[e(t(q),null,{default:a(()=>[e(t(J),null,{default:a(()=>[e(t(E),null,{default:a(()=>[e(t(u),null,{default:a(()=>s[2]||(s[2]=[l("Metric")])),_:1}),e(t(u),null,{default:a(()=>s[3]||(s[3]=[l("Good Threshold")])),_:1}),e(t(u),null,{default:a(()=>s[4]||(s[4]=[l("Good Enabled")])),_:1}),e(t(u),null,{default:a(()=>s[5]||(s[5]=[l("Bad Threshold")])),_:1}),e(t(u),null,{default:a(()=>s[6]||(s[6]=[l("Bad Enabled")])),_:1}),e(t(u),{class:"text-right"},{default:a(()=>s[7]||(s[7]=[l("Actions")])),_:1})]),_:1})]),_:1}),e(t(K),null,{default:a(()=>[(i(!0),b(D,null,F(r.thresholds,o=>(i(),g(t(E),{key:o.id},{default:a(()=>[e(t(f),{class:"capitalize"},{default:a(()=>[l(m(o.metric_name.replace(/_/g," ")),1)]),_:2},1024),e(t(f),null,{default:a(()=>[l(m(S(o.good_threshold)),1)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(A),{variant:w(o.good_enabled)},{default:a(()=>[l(m(o.good_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:a(()=>[l(m(S(o.bad_threshold)),1)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(A),{variant:w(o.bad_enabled)},{default:a(()=>[l(m(o.bad_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),{class:"text-right"},{default:a(()=>[e(k,{variant:"outline",size:"sm",onClick:ie=>z(o)},{default:a(()=>s[8]||(s[8]=[l(" Edit ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(i(),b("div",le,[e(t(W),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s[10]||(s[10]=d("h3",{class:"text-lg font-medium text-muted-foreground mb-4"},"No safety thresholds defined yet",-1)),x.value.length>0?(i(),g(k,{key:0,onClick:C,variant:"default"},{default:a(()=>s[9]||(s[9]=[l(" Create Your First Threshold ")])),_:1})):$("",!0)]))]),_:1})]),_:1}),e(V,{name:"fade"},{default:a(()=>[c.value?(i(),b("div",ne,[d("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:h}),d("div",re,[e(I,{tenantSlug:t(_),entry:p.value,isCreating:v.value,availableMetrics:x.value,onSaved:h,onCancel:h},null,8,["tenantSlug","entry","isCreating","availableMetrics"])])])):$("",!0)]),_:1})])]),_:1})]),_:1},8,["breadcrumbs","tenantSlug"]))}}),Ne=Z(oe,[["__scopeId","data-v-37785446"]]);export{Ne as default};
