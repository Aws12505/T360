import{d as N,c as T,r as y,b,e as i,f as a,z as e,u as t,X as d,E as $,F as g,S as l,H as D,O as F,U as m,ah as V}from"./vendor-BpT-r7Ja.js";import{g as j}from"./vendor-vue-B19pMx_k.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ca64iwsg.js";import{_ as P,a as H}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-B9JJXatW.js";import{_ as I}from"./Form.vue_vue_type_script_setup_true_lang-DdTZx4XJ.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-CACqrpJk.js";import{_ as L}from"./Card.vue_vue_type_script_setup_true_lang-CG7v7ona.js";import{_ as O}from"./CardContent.vue_vue_type_script_setup_true_lang-hvNNGnvR.js";import{_ as U}from"./CardHeader.vue_vue_type_script_setup_true_lang-DE9XBglt.js";import{_ as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-C-33W2wv.js";import{_ as Y}from"./Separator.vue_vue_type_script_setup_true_lang-aKUs8kB0.js";import{_ as q,a as J,b as E,c as u,d as K,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-vI05P3KP.js";import{_ as A}from"./Badge.vue_vue_type_script_setup_true_lang-AXtkzjkF.js";import{P as Q,T as R,b as W}from"./vendor-icons-Dww4C8Xv.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-Do85zU62.js";import"./vendor-ui-BXjA1Bwp.js";import"./Icon.vue_vue_type_script_setup_true_lang-PuJXuPvT.js";import"./app-CEbXasaB.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-9XXNMqpr.js";import"./Input.vue_vue_type_script_setup_true_lang-BjJf4-TG.js";import"./Label.vue_vue_type_script_setup_true_lang-Kvpd3EIc.js";import"./InputError.vue_vue_type_script_setup_true_lang-h2cAZsoZ.js";const ee={class:"flex flex-col space-y-6 w-full"},te={class:"flex justify-end"},ae={class:"flex items-center space-x-2"},se={key:0,class:"overflow-x-auto"},le={key:1,class:"text-center py-12"},ne={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},re={class:"relative z-10"},oe=N({__name:"Admin",props:{thresholds:Array,metrics:Array,tenantSlug:{type:String,default:null}},setup(B){const r=B,{tenantSlug:_}=r,M=T(()=>[{title:_?"Dashboard":"Admin Dashboard",href:_?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")}]),c=y(!1),p=y({}),v=y(!1),C=n=>{switch(n){case!0:return"success";case!1:return"destructive";default:return"outline"}};function z(n){p.value=n,v.value=!1,c.value=!0}function S(){p.value={metric_name:"",good_threshold:null,bad_threshold:null,good_enabled:!0,bad_enabled:!0},v.value=!0,c.value=!0}function h(){c.value=!1,p.value={}}function w(n){return n??"-"}const x=T(()=>{if(!r.metrics||!r.thresholds)return[];const n=r.thresholds.map(s=>s.metric_name);return r.metrics.filter(s=>!n.includes(s))});return(n,s)=>(i(),b(G,{breadcrumbs:M.value,tenantSlug:t(_)},{default:a(()=>[e(t(j),{title:"Safety Thresholds Management"}),e(P,null,{default:a(()=>[d("div",ee,[e(H,{title:"Safety Thresholds",description:"Manage safety thresholds for driver coaching and alerts"}),e(t(Y)),d("div",te,[x.value.length>0?(i(),b(k,{key:0,onClick:S,variant:"default",size:"sm",class:"gap-1"},{default:a(()=>[e(t(Q),{class:"h-4 w-4"}),s[0]||(s[0]=d("span",null,"Add New Threshold",-1))]),_:1})):$("",!0)]),e(t(L),{class:"w-full"},{default:a(()=>[e(t(U),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(t(X),{class:"text-xl font-semibold"},{default:a(()=>[d("div",ae,[e(t(R),{class:"h-5 w-5"}),s[1]||(s[1]=d("span",null,"Safety Thresholds",-1))])]),_:1})]),_:1}),e(t(O),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[r.thresholds&&r.thresholds.length>0?(i(),g("div",se,[e(t(q),null,{default:a(()=>[e(t(J),null,{default:a(()=>[e(t(E),null,{default:a(()=>[e(t(u),null,{default:a(()=>s[2]||(s[2]=[l("Metric")])),_:1}),e(t(u),null,{default:a(()=>s[3]||(s[3]=[l("Good Threshold")])),_:1}),e(t(u),null,{default:a(()=>s[4]||(s[4]=[l("Good Enabled")])),_:1}),e(t(u),null,{default:a(()=>s[5]||(s[5]=[l("Bad Threshold")])),_:1}),e(t(u),null,{default:a(()=>s[6]||(s[6]=[l("Bad Enabled")])),_:1}),e(t(u),{class:"text-right"},{default:a(()=>s[7]||(s[7]=[l("Actions")])),_:1})]),_:1})]),_:1}),e(t(K),null,{default:a(()=>[(i(!0),g(D,null,F(r.thresholds,o=>(i(),b(t(E),{key:o.id},{default:a(()=>[e(t(f),{class:"capitalize"},{default:a(()=>[l(m(o.metric_name.replace(/_/g," ")),1)]),_:2},1024),e(t(f),null,{default:a(()=>[l(m(w(o.good_threshold)),1)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(A),{variant:C(o.good_enabled)},{default:a(()=>[l(m(o.good_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:a(()=>[l(m(w(o.bad_threshold)),1)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(A),{variant:C(o.bad_enabled)},{default:a(()=>[l(m(o.bad_enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),{class:"text-right"},{default:a(()=>[e(k,{variant:"outline",size:"sm",onClick:ie=>z(o)},{default:a(()=>s[8]||(s[8]=[l(" Edit ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(i(),g("div",le,[e(t(W),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s[10]||(s[10]=d("h3",{class:"text-lg font-medium text-muted-foreground mb-4"},"No safety thresholds defined yet",-1)),x.value.length>0?(i(),b(k,{key:0,onClick:S,variant:"default"},{default:a(()=>s[9]||(s[9]=[l(" Create Your First Threshold ")])),_:1})):$("",!0)]))]),_:1})]),_:1}),e(V,{name:"fade"},{default:a(()=>[c.value?(i(),g("div",ne,[d("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:h}),d("div",re,[e(I,{tenantSlug:t(_),entry:p.value,isCreating:v.value,availableMetrics:x.value,onSaved:h,onCancel:h},null,8,["tenantSlug","entry","isCreating","availableMetrics"])])])):$("",!0)]),_:1})])]),_:1})]),_:1},8,["breadcrumbs","tenantSlug"]))}}),Ne=Z(oe,[["__scopeId","data-v-b48b1df1"]]);export{Ne as default};
