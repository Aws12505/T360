import{e as et,w as ce,H as f,i,X as l,G as x,B as t,j as s,O as d,E as j,Y as E,u as o,J as S,K as z,P as y,I as Se,a as M,a3 as tt,r as C,A as De,aj as lt,f as T,W as at,ak as Q,al as st}from"./vendor-DQlNQ5gH.js";import{x as X,g as ot,W as P}from"./vendor-vue-CQn6KzTb.js";import{_ as nt}from"./AppLayout.vue_vue_type_script_setup_true_lang-DPbTEWEb.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-B-8911bK.js";import{_ as oe,a as ne,b as re,c as de,d as ie}from"./DialogTitle.vue_vue_type_script_setup_true_lang-8PZA7eJT.js";import{_ as me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CJ4mwW2I.js";import{_ as D,a as I}from"./Label.vue_vue_type_script_setup_true_lang-BRq5T-WA.js";import{_ as rt}from"./Checkbox.vue_vue_type_script_setup_true_lang-BXBwirKi.js";import{_ as A}from"./Icon.vue_vue_type_script_setup_true_lang-D_7hXODg.js";import{_ as dt,a as it,b as pe,c as ve,d as ut,e as ue}from"./TableRow.vue_vue_type_script_setup_true_lang-tbX_6Hnu.js";import{_ as ye}from"./Card.vue_vue_type_script_setup_true_lang-yOexdr0W.js";import{_ as ft,a as mt}from"./CardTitle.vue_vue_type_script_setup_true_lang-Da_P0rPn.js";import{_ as ge}from"./CardContent.vue_vue_type_script_setup_true_lang-Dh-7LYTR.js";import{_ as ke,a as Ce,b as we}from"./AlertDescription.vue_vue_type_script_setup_true_lang-DGF9dqnu.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-D2wO_Ovf.js";import"./vendor-ui-CGEGZLyF.js";import"./app-DapAVa69.js";import"./vendor-icons-pKobgiP0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BpTGIYrD.js";const vt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ct={key:0,class:"col-span-full"},pt={class:"relative"},yt=["value"],gt={class:"col-span-full"},bt={class:"relative"},_t={class:"relative"},xt={class:"relative"},kt=["value"],Ct={class:"relative"},wt={class:"flex items-center space-x-2"},St={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},Dt=et({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(p,{emit:r}){var F,$,L,O,Z,h,R;const b=p,N=r,v=X({id:(F=b.delay)==null?void 0:F.id,tenant_id:b.isSuperAdmin?($=b.delay)==null?void 0:$.tenant_id:null,date:((L=b.delay)==null?void 0:L.date)||"",driver_name:((O=b.delay)==null?void 0:O.driver_name)||"",delay_type:((Z=b.delay)==null?void 0:Z.delay_type)||"origin",delay_category:((h=b.delay)==null?void 0:h.delay_category)||"1_120",delay_code_id:((R=b.delay)==null?void 0:R.delay_code_id)||null,disputed:b.delay&&b.delay.disputed!==null?parseInt(b.delay.disputed)===1:!1,driver_controllable:b.delay&&b.delay.driver_controllable!==null?parseInt(b.delay.driver_controllable)===1:null});ce(()=>b.delay,k=>{k?(v.id=k.id,v.tenant_id=k.tenant_id,v.date=k.date,v.driver_name=k.driver_name,v.delay_type=k.delay_type,v.delay_category=k.delay_category,v.delay_code_id=k.delay_code_id,v.disputed=k.disputed!==null?parseInt(k.disputed)===1:!1,v.driver_controllable=k.driver_controllable!==null?parseInt(k.driver_controllable)===1:null):v.reset()},{immediate:!0});const U=()=>{const k=!!v.id,u=b.isSuperAdmin?k?"ontime.update.admin":"ontime.store.admin":k?"ontime.update":"ontime.store",g=b.isSuperAdmin?k?{delay:v.id}:{}:k?{tenantSlug:b.tenantSlug,delay:v.id}:{tenantSlug:b.tenantSlug};v[k?"put":"post"](route(u,g),{onSuccess:()=>N("close")})};return(k,u)=>(i(),f("form",{onSubmit:Se(U,["prevent"]),class:"space-y-6"},[l("div",vt,[p.isSuperAdmin?(i(),f("div",ct,[t(D,null,{default:s(()=>u[9]||(u[9]=[d("Company Name")])),_:1}),l("div",pt,[j(l("select",{"onUpdate:modelValue":u[0]||(u[0]=g=>o(v).tenant_id=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[u[10]||(u[10]=l("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),f(S,null,z(p.tenants,g=>(i(),f("option",{key:g.id,value:g.id},y(g.name),9,yt))),128))],512),[[E,o(v).tenant_id]]),u[11]||(u[11]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):x("",!0),l("div",gt,[t(D,null,{default:s(()=>u[12]||(u[12]=[d("Date")])),_:1}),t(I,{type:"date",modelValue:o(v).date,"onUpdate:modelValue":u[1]||(u[1]=g=>o(v).date=g),class:"w-full"},null,8,["modelValue"])]),l("div",null,[t(D,null,{default:s(()=>u[13]||(u[13]=[d("Driver Name")])),_:1}),t(I,{modelValue:o(v).driver_name,"onUpdate:modelValue":u[2]||(u[2]=g=>o(v).driver_name=g),class:"w-full"},null,8,["modelValue"])]),l("div",null,[t(D,null,{default:s(()=>u[14]||(u[14]=[d("Delay Type")])),_:1}),l("div",bt,[j(l("select",{"onUpdate:modelValue":u[3]||(u[3]=g=>o(v).delay_type=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[15]||(u[15]=[l("option",{value:"origin"},"Origin",-1),l("option",{value:"destination"},"Destination",-1)]),512),[[E,o(v).delay_type]]),u[16]||(u[16]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(D,null,{default:s(()=>u[17]||(u[17]=[d("Delay Category")])),_:1}),l("div",_t,[j(l("select",{"onUpdate:modelValue":u[4]||(u[4]=g=>o(v).delay_category=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[18]||(u[18]=[l("option",{value:"1_120"},"1–120 min",-1),l("option",{value:"121_600"},"121–600 min",-1),l("option",{value:"601_plus"},"601+ min",-1)]),512),[[E,o(v).delay_category]]),u[19]||(u[19]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(D,null,{default:s(()=>u[20]||(u[20]=[d("Delay Code")])),_:1}),l("div",xt,[j(l("select",{"onUpdate:modelValue":u[5]||(u[5]=g=>o(v).delay_code_id=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),f(S,null,z(p.delayCodes,g=>(i(),f("option",{key:g.id,value:g.id},y(g.code),9,kt))),128))],512),[[E,o(v).delay_code_id]]),u[21]||(u[21]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[t(D,null,{default:s(()=>u[22]||(u[22]=[d("Driver Controllable")])),_:1}),l("div",Ct,[j(l("select",{"onUpdate:modelValue":u[6]||(u[6]=g=>o(v).driver_controllable=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[23]||(u[23]=[l("option",{value:null},"N/A",-1),l("option",{value:!0},"Yes",-1),l("option",{value:!1},"No",-1)]),512),[[E,o(v).driver_controllable]]),u[24]||(u[24]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",wt,[t(rt,{checked:o(v).disputed,"onUpdate:checked":u[7]||(u[7]=g=>o(v).disputed=g),id:"disputed"},null,8,["checked"]),t(D,{for:"disputed"},{default:s(()=>u[25]||(u[25]=[d("Disputed")])),_:1})])]),l("div",St,[t(_,{type:"button",onClick:u[8]||(u[8]=g=>N("close")),variant:"outline",class:"w-full sm:w-auto"},{default:s(()=>u[26]||(u[26]=[d(" Cancel ")])),_:1}),t(_,{type:"submit",disabled:o(v).processing,class:"w-full sm:w-auto"},{default:s(()=>[d(y(o(v).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),$t={class:"bg-background rounded-lg border shadow-sm p-4 flex flex-col items-center justify-center"},ht={class:"text-base font-semibold mb-2 text-foreground"},At={class:"text-2xl font-bold text-primary"},Nt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(p){const r=p,b=M(()=>r.value===null||r.value===void 0||r.value===""?"No Data":r.value);return(N,v)=>(i(),f("div",$t,[l("h3",ht,y(p.title),1),l("p",At,y(b.value),1)]))}},Tt={class:"bg-background rounded-lg border shadow-sm p-4"},Ft={class:"text-base font-semibold mb-4"},Ut={class:"space-y-3"},Vt={key:0},Mt={class:"text-sm"},zt={key:1,class:"text-center py-4 text-muted-foreground"},jt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]}},setup(p){const r=b=>["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"][b]||"#6b7280";return(b,N)=>(i(),f("div",Tt,[l("h3",Ft,y(p.title),1),l("div",Ut,[p.drivers&&p.drivers.length>0?(i(),f("div",Vt,[(i(!0),f(S,null,z(p.drivers,(v,U)=>(i(),f("div",{key:U,class:"flex justify-between items-center"},[l("span",Mt,y(v.name),1),l("span",{class:"text-sm font-medium",style:tt({color:r(U)})},y(v.value),5)]))),128))])):(i(),f("div",zt," No Data "))])]))}},Lt={class:"bg-background rounded-lg border shadow-sm p-4"},Bt={class:"text-base font-semibold mb-4"},Pt={key:0,class:"h-64"},Et={key:1,class:"h-64 flex items-center justify-center text-muted-foreground"},Ot={__name:"LineChart",props:{title:{type:String,default:"Line chart"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})}},setup(p){const r=p,b=C(null);let N=null;const v=M(()=>r.chartData&&r.chartData.labels&&r.chartData.labels.length>0&&r.chartData.datasets&&r.chartData.datasets.length>0&&r.chartData.datasets.some(F=>F.data&&F.data.length>0)),U=()=>{if(N&&N.destroy(),!b.value||!v.value)return;const F=b.value.getContext("2d");N=new lt(F,{type:"line",data:r.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})};return De(()=>{U()}),ce(()=>r.chartData,()=>{U()},{deep:!0}),(F,$)=>(i(),f("div",Lt,[l("h3",Bt,y(p.title),1),v.value?(i(),f("div",Pt,[l("canvas",{ref_key:"chartCanvas",ref:b},null,512)])):(i(),f("div",Et," No Data "))]))}},Rt={class:"space-y-6"},Wt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},It={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},Yt={__name:"OnTimeDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})}},setup(p){return(r,b)=>(i(),f("div",Rt,[l("div",Wt,[(i(!0),f(S,null,z(r.metrics,(N,v)=>(i(),T(Nt,{key:v,title:N.title,value:N.value},null,8,["title","value"]))),128))]),l("div",It,[t(jt,{title:"Bottom 5 Drivers",drivers:r.bottomDrivers,class:"lg:col-span-1"},null,8,["drivers"]),t(Ot,{title:"On-Time Score","chart-data":r.lineChartData,class:"lg:col-span-3"},null,8,["chart-data"])])]))}},qt={class:"max-w-7xl mx-auto p-6 space-y-8"},Ht={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},Gt={class:"flex flex-wrap gap-3"},Jt={class:"relative"},Kt={key:0,class:"absolute right-0 mt-1 w-48 bg-background rounded-md shadow-lg border z-10"},Qt={class:"py-1"},Xt={class:"cursor-pointer block px-4 py-2 text-sm hover:bg-muted"},Zt=["href"],el=["action"],tl={class:"flex flex-col gap-2"},ll={class:"flex flex-wrap gap-2"},al={key:0,class:"text-sm text-muted-foreground"},sl={key:0},ol={key:1},nl={key:2},rl={key:3,class:"ml-1"},dl={class:"flex justify-between items-center"},il={class:"flex items-center gap-2"},ul={key:0,class:"flex flex-wrap gap-2 ml-4"},fl={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ml={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},vl={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cl={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},pl={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},yl={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},gl={class:"flex flex-col justify-between gap-4"},bl={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full"},_l=["value"],xl={class:"flex justify-end"},kl={class:"overflow-x-auto"},Cl={class:"flex items-center justify-center"},wl=["checked"],Sl={class:"flex items-center"},Dl={key:0,class:"ml-2"},$l={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},hl={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Al={key:1,class:"ml-2 opacity-50"},Nl=["value"],Tl={key:0,class:"ml-1 text-xs text-red-500"},Fl={class:"flex space-x-2"},Ul={key:0,class:"bg-muted/20 px-4 py-3 border-t"},Vl={class:"flex justify-between items-center"},Ml={class:"text-sm text-muted-foreground"},zl={class:"flex items-center gap-4"},jl={class:"flex items-center gap-2"},Ll={class:"flex"},Bl=["innerHTML"],Pl={class:"mt-4 space-y-4"},El={class:"flex items-center justify-between"},Ol={class:"max-h-[400px] overflow-y-auto"},Rl={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},Wl={key:1,class:"space-y-2"},Il=["onClick"],Yl={class:"font-medium"},ql={key:0,class:"ml-2 text-xs text-red-500"},Hl={key:0,class:"text-sm text-muted-foreground mt-1"},Gl={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Jl={key:0,class:"border rounded-md p-4 space-y-4"},Kl={class:"text-sm font-medium"},Ql={class:"space-y-3"},Xl={class:"flex justify-end space-x-2"},_a={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},delay_breakdown:{type:Object,default:()=>({by_category:{total_delays:0,category_1_120_count:0,category_121_600_count:0,category_601_plus_count:0},bottom_five_drivers:[]})},line_chart_data:{type:Array,default:()=>[]}},setup(p){const r=p,b=M(()=>(V.value==="yesterday"||V.value==="current-week")&&r.weekNumber&&r.year?`Week ${r.weekNumber}, ${r.year}`:(V.value==="6w"||V.value==="quarterly")&&r.startWeekNumber&&r.endWeekNumber&&r.year?`Weeks ${r.startWeekNumber}-${r.endWeekNumber}, ${r.year}`:""),N=[{title:r.tenantSlug?"Dashboard":"Admin Dashboard",href:r.tenantSlug?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin")}],v=C(!1),U=C(!1),F=C(null),$=C(""),L=C(""),O=C(!1),Z=C(null),h=C([]),R=C(!1),k=C(null),u=C(!1),g=C(null),B=C({code:"",description:""}),ee=C(!1),be=C(null),Y=C("date"),q=C("desc"),c=C({search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}),fe=["date","delay_type","driver_name","penalty","delay_code","disputed","driver_controllable"],H=M(()=>{let n=[...r.delays.data];if(c.value.search){const e=c.value.search.toLowerCase();n=n.filter(a=>{var m,w,W,se;return((m=a.driver_name)==null?void 0:m.toLowerCase().includes(e))||((w=a.delay_type)==null?void 0:w.toLowerCase().includes(e))||((se=(W=a.delay_code)==null?void 0:W.code)==null?void 0:se.toLowerCase().includes(e))})}if(c.value.dateFrom&&(n=n.filter(e=>e.date&&e.date>=c.value.dateFrom)),c.value.dateTo&&(n=n.filter(e=>e.date&&e.date<=c.value.dateTo)),c.value.delayCode&&(n=n.filter(e=>{var a;return((a=e.delay_code)==null?void 0:a.id)===parseInt(c.value.delayCode)})),c.value.disputed!==""){const e=c.value.disputed==="true";n=n.filter(a=>a.disputed===e)}if(c.value.controllable!=="")if(c.value.controllable==="null")n=n.filter(e=>e.driver_controllable===null);else{const e=c.value.controllable==="true";n=n.filter(a=>a.driver_controllable===e)}return n.sort((e,a)=>{var W,se;let m,w;return Y.value==="delay_code"?(m=((W=e.delay_code)==null?void 0:W.code)||"",w=((se=a.delay_code)==null?void 0:se.code)||""):(m=e[Y.value],w=a[Y.value]),m===null?1:w===null?-1:(typeof m=="string"&&(m=m.toLowerCase(),w=w.toLowerCase()),m<w?q.value==="asc"?-1:1:m>w?q.value==="asc"?1:-1:0)}),n}),$e=M(()=>r.delay_codes.filter(n=>!n.deleted_at));function he(n){Y.value===n?q.value=q.value==="asc"?"desc":"asc":(Y.value=n,q.value="asc")}function G(){}function Ae(){c.value={search:"",dateFrom:"",dateTo:"",delayCode:"",disputed:"",controllable:""}}const te=C(r.delays.per_page||10),V=C(r.dateFilter||"full");function Ne(){const n=r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin");P.get(n,{dateFilter:V.value,perPage:te.value},{preserveState:!0})}function le(n){V.value=n;const e=r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin");P.get(e,{dateFilter:n,perPage:te.value},{preserveState:!0})}function Te(n){if(n){const e=new URL(n);e.searchParams.set("perPage",te.value),P.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["delays"]})}}function J(n){if(!n)return"";const e=n.split("-");if(e.length!==3)return n;const[a,m,w]=e;return`${Number(m)}/${Number(w)}/${a}`}const _e=(n=null)=>{F.value=n,v.value=!0},Fe=n=>{Z.value=n,O.value=!0},Ue=()=>{U.value=!0,u.value=!1,g.value=null},Ve=()=>{B.value={code:"",description:""},g.value=null,u.value=!0},Me=n=>{B.value={code:n.code,description:n.description||""},g.value=n.id,u.value=!0},ze=()=>{u.value=!1,g.value=null},xe=n=>{be.value=n,ee.value=!0},K=C(!1),je=M(()=>c.value.search||c.value.dateFrom||c.value.dateTo||c.value.delayCode||c.value.disputed||c.value.controllable),Le=n=>{if(!n)return"";const e=r.delay_codes.find(a=>a.id===parseInt(n));return e?e.code:""},Be=async n=>{try{await P.delete(route("delay-codes.destroy",n),{onSuccess:()=>{ee.value=!1,$.value="Delay code deleted successfully"}})}catch(e){console.error("Error deleting delay code:",e)}},Pe=()=>{const n=X({code:B.value.code,description:B.value.description}),e=g.value?r.isSuperAdmin?"delay_codes.update.admin":"delay_codes.update":r.isSuperAdmin?"delay_codes.store.admin":"delay_codes.store",a=g.value?r.isSuperAdmin?{id:g.value}:{tenantSlug:r.tenantSlug,id:g.value}:r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};(g.value?n.put:n.post).call(n,route(e,a),{onSuccess:()=>{$.value=g.value?"Delay code updated successfully.":"Delay code created successfully.",u.value=!1,g.value=null,P.reload({only:["delay_codes"]})},onError:w=>{console.error(w)}})},Ee=n=>{X({}).post(route(r.isSuperAdmin?"delay_codes.restore.admin":"delay_codes.restore",{id:n}),{onSuccess:()=>{$.value="Delay code restored successfully.",P.reload({only:["delay_codes"]})},onError:a=>{console.error(a)}})},Oe=n=>{X({}).delete(route(r.isSuperAdmin?"delay_codes.forceDelete.admin":"delay_codes.forceDelete",{id:n}),{onSuccess:()=>{$.value="Delay code permanently deleted successfully.",P.reload({only:["delay_codes"]})},onError:a=>{console.error(a)}})},Re=n=>{const e=X({}),a=r.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",m=r.isSuperAdmin?{delay:n}:{tenantSlug:r.tenantSlug,delay:n};e.delete(route(a,m),{preserveScroll:!0,onSuccess:()=>{$.value="Delay record deleted successfully.",O.value=!1}})};ce($,n=>{n&&setTimeout(()=>{$.value=""},5e3)}),r.flash&&r.flash.error&&(L.value=r.flash.error),ce(L,n=>{n&&setTimeout(()=>{L.value=""},5e3)});const We=M(()=>({items:[{title:"Total Late Stops",value:r.delay_breakdown.by_category.total_delays},{title:"1-120 Minutes Late",value:r.delay_breakdown.by_category.category_1_120_count},{title:"121-600 Minutes Late",value:r.delay_breakdown.by_category.category_121_600_count},{title:"+601 Minutes Late",value:r.delay_breakdown.by_category.category_601_plus_count}]})),Ie=M(()=>(r.delay_breakdown.bottom_five_drivers||[]).map(n=>({name:n.driver_name,value:n.total_penalty}))),Ye=M(()=>!r.line_chart_data||r.line_chart_data.length===0?{labels:[],datasets:[{label:"On-Time Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!0}]}:{labels:r.line_chart_data.map(n=>n.date),datasets:[{label:"On-Time Performance",data:r.line_chart_data.map(n=>n.onTimePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!0}]}),qe=M(()=>H.value.length>0&&h.value.length===H.value.length);function He(n){n.target.checked?h.value=H.value.map(e=>e.id):h.value=[]}function Ge(){h.value.length>0&&(R.value=!0)}function Je(){const n=X({ids:h.value}),e=r.isSuperAdmin?"ontime.destroyBulk.admin":"ontime.destroyBulk",a=r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};n.delete(route(e,a),{preserveScroll:!0,onSuccess:()=>{$.value=`${h.value.length} delay records deleted successfully.`,h.value=[],R.value=!1,P.reload()},onError:m=>{console.error(m)}})}function Ke(n){const e=n.target.files[0];if(!e)return;const a=new FormData;a.append("csv_file",e);const m=r.isSuperAdmin?route("ontime.import.admin"):route("ontime.import",{tenantSlug:r.tenantSlug});P.post(m,a,{onSuccess:()=>{$.value="Delays imported successfully",n.target.value=""},onError:w=>{console.error(w),n.target.value=""}})}function Qe(){if(r.delays.data.length===0){L.value="No delay data found to export.";return}k.value&&k.value.submit()}const Xe=M(()=>r.tenantSlug?route("ontime.export",{tenantSlug:r.tenantSlug}):route("ontime.export.admin")),ae=C(!1),Ze=M(()=>"/storage/upload-data-temps/Delays Template.csv");return De(()=>{const n=e=>{ae.value&&!e.target.closest(".relative")&&(ae.value=!1)};document.addEventListener("click",n),at(()=>{document.removeEventListener("click",n)})}),(n,e)=>(i(),T(nt,{breadcrumbs:N,tenantSlug:p.tenantSlug},{default:s(()=>[t(o(ot),{title:"On-Time"}),l("div",qt,[$.value?(i(),T(o(ke),{key:0,variant:"success"},{default:s(()=>[t(o(Ce),null,{default:s(()=>e[33]||(e[33]=[d("Success")])),_:1}),t(o(we),null,{default:s(()=>[d(y($.value),1)]),_:1})]),_:1})):x("",!0),L.value?(i(),T(o(ke),{key:1,variant:"destructive"},{default:s(()=>[t(o(Ce),null,{default:s(()=>e[34]||(e[34]=[d("Error")])),_:1}),t(o(we),null,{default:s(()=>[d(y(L.value),1)]),_:1})]),_:1})):x("",!0),l("div",Ht,[e[40]||(e[40]=l("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"On-Time Management",-1)),l("div",Gt,[t(_,{onClick:e[0]||(e[0]=a=>_e()),variant:"default"},{default:s(()=>[t(A,{name:"plus",class:"mr-2 h-4 w-4"}),e[35]||(e[35]=d(" Add Delay "))]),_:1}),h.value.length>0?(i(),T(_,{key:0,onClick:e[1]||(e[1]=a=>Ge()),variant:"destructive"},{default:s(()=>[t(A,{name:"trash",class:"mr-2 h-4 w-4"}),d(" Delete Selected ("+y(h.value.length)+") ",1)]),_:1})):x("",!0),l("div",Jt,[t(_,{onClick:e[2]||(e[2]=a=>ae.value=!ae.value),variant:"secondary"},{default:s(()=>[t(A,{name:"upload",class:"mr-2 h-4 w-4"}),e[36]||(e[36]=d(" Upload CSV ")),t(A,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),ae.value?(i(),f("div",Kt,[l("div",Qt,[l("label",Xt,[e[37]||(e[37]=l("span",null,"Upload CSV File",-1)),l("input",{type:"file",class:"hidden",onChange:Ke,accept:".csv"},null,32)]),l("a",{href:Ze.value,download:"Delays Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Zt)])])):x("",!0)]),t(_,{onClick:Se(Qe,["prevent"]),variant:"outline"},{default:s(()=>[t(A,{name:"download",class:"mr-2 h-4 w-4"}),e[38]||(e[38]=d(" Download CSV "))]),_:1}),p.isSuperAdmin?(i(),T(_,{key:1,onClick:e[3]||(e[3]=a=>Ue()),variant:"outline"},{default:s(()=>[t(A,{name:"settings",class:"mr-2 h-4 w-4"}),e[39]||(e[39]=d(" Manage Delay Codes "))]),_:1})):x("",!0)])]),l("form",{ref_key:"exportForm",ref:k,action:Xe.value,method:"GET",class:"hidden"},null,8,el),t(o(ye),null,{default:s(()=>[t(o(ge),{class:"p-4"},{default:s(()=>[l("div",tl,[l("div",ll,[t(_,{onClick:e[4]||(e[4]=a=>le("yesterday")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":V.value==="yesterday"})},{default:s(()=>e[41]||(e[41]=[d(" Yesterday ")])),_:1},8,["class"]),t(_,{onClick:e[5]||(e[5]=a=>le("current-week")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":V.value==="current-week"})},{default:s(()=>e[42]||(e[42]=[d(" WTD ")])),_:1},8,["class"]),t(_,{onClick:e[6]||(e[6]=a=>le("6w")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":V.value==="6w"})},{default:s(()=>e[43]||(e[43]=[d(" 6 Weeks ")])),_:1},8,["class"]),t(_,{onClick:e[7]||(e[7]=a=>le("quarterly")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":V.value==="quarterly"})},{default:s(()=>e[44]||(e[44]=[d(" Quarterly ")])),_:1},8,["class"]),t(_,{onClick:e[8]||(e[8]=a=>le("full")),variant:"outline",size:"sm",class:Q({"bg-primary/10 text-primary border-primary":V.value==="full"})},{default:s(()=>e[45]||(e[45]=[d(" Full ")])),_:1},8,["class"])]),p.dateRange?(i(),f("div",al,[V.value==="yesterday"&&p.dateRange.start?(i(),f("span",sl," Showing data from "+y(J(p.dateRange.start)),1)):p.dateRange.start&&p.dateRange.end?(i(),f("span",ol," Showing data from "+y(J(p.dateRange.start))+" to "+y(J(p.dateRange.end)),1)):(i(),f("span",nl,y(p.dateRange.label),1)),b.value?(i(),f("span",rl,"("+y(b.value)+")",1)):x("",!0)])):x("",!0)])]),_:1})]),_:1}),t(o(ye),null,{default:s(()=>[t(o(ft),{class:"pb-2"},{default:s(()=>[l("div",dl,[l("div",il,[t(o(mt),null,{default:s(()=>e[46]||(e[46]=[d("Filters")])),_:1}),!K.value&&je.value?(i(),f("div",ul,[c.value.search?(i(),f("div",fl," Search: "+y(c.value.search),1)):x("",!0),c.value.dateFrom?(i(),f("div",ml," From: "+y(J(c.value.dateFrom)),1)):x("",!0),c.value.dateTo?(i(),f("div",vl," To: "+y(J(c.value.dateTo)),1)):x("",!0),c.value.delayCode?(i(),f("div",cl," Code: "+y(Le(c.value.delayCode)),1)):x("",!0),c.value.disputed?(i(),f("div",pl," Disputed: "+y(c.value.disputed==="true"?"Yes":"No"),1)):x("",!0),c.value.controllable?(i(),f("div",yl," Driver Controllable: "+y(c.value.controllable==="true"?"Yes":c.value.controllable==="false"?"No":"N/A"),1)):x("",!0)])):x("",!0)]),t(_,{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=a=>K.value=!K.value)},{default:s(()=>[d(y(K.value?"Hide Filters":"Show Filters")+" ",1),t(A,{name:K.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),K.value?(i(),T(o(ge),{key:0,class:"pt-2"},{default:s(()=>[l("div",gl,[l("div",bl,[l("div",null,[t(o(D),{for:"search"},{default:s(()=>e[47]||(e[47]=[d("Search")])),_:1}),t(o(I),{id:"search",modelValue:c.value.search,"onUpdate:modelValue":e[10]||(e[10]=a=>c.value.search=a),type:"text",placeholder:"Search by driver or type...",onInput:G},null,8,["modelValue"])]),l("div",null,[t(o(D),{for:"dateFrom"},{default:s(()=>e[48]||(e[48]=[d("Date From")])),_:1}),t(o(I),{id:"dateFrom",modelValue:c.value.dateFrom,"onUpdate:modelValue":e[11]||(e[11]=a=>c.value.dateFrom=a),type:"date",onChange:G},null,8,["modelValue"])]),l("div",null,[t(o(D),{for:"dateTo"},{default:s(()=>e[49]||(e[49]=[d("Date To")])),_:1}),t(o(I),{id:"dateTo",modelValue:c.value.dateTo,"onUpdate:modelValue":e[12]||(e[12]=a=>c.value.dateTo=a),type:"date",onChange:G},null,8,["modelValue"])]),l("div",null,[t(o(D),{for:"delayCode"},{default:s(()=>e[50]||(e[50]=[d("Delay Code")])),_:1}),j(l("select",{id:"delayCode","onUpdate:modelValue":e[13]||(e[13]=a=>c.value.delayCode=a),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[51]||(e[51]=l("option",{value:""},"All Codes",-1)),(i(!0),f(S,null,z(p.delay_codes,a=>(i(),f("option",{key:a.id,value:a.id},y(a.code),9,_l))),128))],544),[[E,c.value.delayCode]])]),l("div",null,[t(o(D),{for:"disputed"},{default:s(()=>e[52]||(e[52]=[d("Disputed Status")])),_:1}),j(l("select",{id:"disputed","onUpdate:modelValue":e[14]||(e[14]=a=>c.value.disputed=a),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[53]||(e[53]=[l("option",{value:""},"All",-1),l("option",{value:"true"},"Disputed",-1),l("option",{value:"false"},"Not Disputed",-1)]),544),[[E,c.value.disputed]])]),l("div",null,[t(o(D),{for:"controllable"},{default:s(()=>e[54]||(e[54]=[d("Driver Controllable")])),_:1}),j(l("select",{id:"controllable","onUpdate:modelValue":e[15]||(e[15]=a=>c.value.controllable=a),onChange:G,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[55]||(e[55]=[l("option",{value:""},"All",-1),l("option",{value:"true"},"Yes",-1),l("option",{value:"false"},"No",-1),l("option",{value:"null"},"N/A",-1)]),544),[[E,c.value.controllable]])])]),l("div",xl,[t(_,{onClick:Ae,variant:"ghost",size:"sm"},{default:s(()=>[t(A,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[56]||(e[56]=d(" Reset Filters "))]),_:1})])])]),_:1})):x("",!0)]),_:1}),t(Yt,{"metrics-data":We.value,"drivers-data":Ie.value,"chart-data":Ye.value},null,8,["metrics-data","drivers-data","chart-data"]),t(o(ye),null,{default:s(()=>[t(o(ge),{class:"p-0"},{default:s(()=>[l("div",kl,[t(o(dt),{class:"relative h-[500px] overflow-auto"},{default:s(()=>[t(o(it),null,{default:s(()=>[t(o(pe),{class:"sticky top-0 bg-background border-b z-10 hover:bg-background"},{default:s(()=>[t(o(ve),{class:"w-[50px]"},{default:s(()=>[l("div",Cl,[l("input",{type:"checkbox",onChange:He,checked:qe.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,wl)])]),_:1}),p.isSuperAdmin?(i(),T(o(ve),{key:0},{default:s(()=>e[57]||(e[57]=[d("Company Name")])),_:1})):x("",!0),(i(),f(S,null,z(fe,a=>t(o(ve),{key:a,class:"cursor-pointer",onClick:m=>he(a)},{default:s(()=>[l("div",Sl,[d(y(a.replace(/_/g," ").split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" "))+" ",1),Y.value===a?(i(),f("div",Dl,[q.value==="asc"?(i(),f("svg",$l,e[58]||(e[58]=[l("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),f("svg",hl,e[59]||(e[59]=[l("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),f("div",Al,e[60]||(e[60]=[l("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M8 10l4-4 4 4"}),l("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),t(o(ve),null,{default:s(()=>e[61]||(e[61]=[d("Actions")])),_:1})]),_:1})]),_:1}),t(o(ut),null,{default:s(()=>[H.value.length===0?(i(),T(o(pe),{key:0},{default:s(()=>[t(o(ue),{colspan:p.isSuperAdmin?fe.length+2:fe.length+1,class:"text-center py-8"},{default:s(()=>e[62]||(e[62]=[d(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):x("",!0),(i(!0),f(S,null,z(H.value,a=>(i(),T(o(pe),{key:a.id,class:"hover:bg-muted/50"},{default:s(()=>[t(o(ue),{class:"text-center"},{default:s(()=>[j(l("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[16]||(e[16]=m=>h.value=m),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Nl),[[st,h.value]])]),_:2},1024),p.isSuperAdmin?(i(),T(o(ue),{key:0},{default:s(()=>{var m;return[d(y(((m=a.tenant)==null?void 0:m.name)||"—"),1)]}),_:2},1024)):x("",!0),(i(),f(S,null,z(fe,m=>t(o(ue),{key:m,class:"whitespace-nowrap"},{default:s(()=>{var w,W;return[m==="date"?(i(),f(S,{key:0},[d(y(J(a[m])),1)],64)):m==="disputed"?(i(),f(S,{key:1},[d(y(a[m]?"Yes":"No"),1)],64)):m==="driver_controllable"?(i(),f(S,{key:2},[d(y(a[m]===null?"N/A":a[m]?"Yes":"No"),1)],64)):m==="delay_code"?(i(),f(S,{key:3},[d(y(((w=a.delay_code)==null?void 0:w.code)||"—")+" ",1),(W=a.delay_code)!=null&&W.deleted_at?(i(),f("span",Tl,"(Deleted Code)")):x("",!0)],64)):(i(),f(S,{key:4},[d(y(a[m]),1)],64))]}),_:2},1024)),64)),t(o(ue),null,{default:s(()=>[l("div",Fl,[t(_,{onClick:m=>_e(a),variant:"warning",size:"sm"},{default:s(()=>[t(A,{name:"pencil",class:"mr-1 h-4 w-4"}),e[63]||(e[63]=d(" Edit "))]),_:2},1032,["onClick"]),t(_,{onClick:m=>Fe(a.id),variant:"destructive",size:"sm"},{default:s(()=>[t(A,{name:"trash",class:"mr-1 h-4 w-4"}),e[64]||(e[64]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),p.delays.links?(i(),f("div",Ul,[l("div",Vl,[l("div",Ml," Showing "+y(H.value.length)+" of "+y(p.delays.data.length)+" entries ",1),l("div",zl,[l("div",jl,[t(o(D),{for:"perPage",class:"text-sm"},{default:s(()=>e[65]||(e[65]=[d("Per page:")])),_:1}),j(l("select",{id:"perPage","onUpdate:modelValue":e[17]||(e[17]=a=>te.value=a),onChange:Ne,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[66]||(e[66]=[l("option",{value:"10"},"10",-1),l("option",{value:"25"},"25",-1),l("option",{value:"50"},"50",-1),l("option",{value:"100"},"100",-1)]),544),[[E,te.value]])]),l("div",Ll,[(i(!0),f(S,null,z(p.delays.links,a=>(i(),T(_,{key:a.label,onClick:m=>Te(a.url),disabled:!a.url,variant:"ghost",size:"sm",class:Q(["mx-1",{"bg-primary/10 text-primary border-primary":a.active}])},{default:s(()=>[l("span",{innerHTML:a.label},null,8,Bl)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):x("",!0)]),_:1})]),_:1}),t(o(oe),{open:v.value,"onUpdate:open":e[19]||(e[19]=a=>v.value=a)},{default:s(()=>[t(o(ne),{class:"sm:max-w-2xl"},{default:s(()=>[t(o(re),null,{default:s(()=>[t(o(de),null,{default:s(()=>[d(y(F.value?"Edit":"Add")+" Delay",1)]),_:1}),t(o(ie),null,{default:s(()=>[d(" Fill in the details to "+y(F.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),t(Dt,{delay:F.value,"delay-codes":$e.value,tenants:p.tenants,"is-super-admin":p.isSuperAdmin,"tenant-slug":p.tenantSlug,onClose:e[18]||(e[18]=a=>v.value=!1)},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),t(o(oe),{open:U.value,"onUpdate:open":e[23]||(e[23]=a=>U.value=a)},{default:s(()=>[t(o(ne),{class:"sm:max-w-lg"},{default:s(()=>[t(o(re),null,{default:s(()=>[t(o(de),null,{default:s(()=>e[67]||(e[67]=[d("Manage Delay Codes")])),_:1}),t(o(ie),null,{default:s(()=>e[68]||(e[68]=[d(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),l("div",Pl,[l("div",El,[e[70]||(e[70]=l("h3",{class:"text-sm font-medium"},"Current Delay Codes",-1)),t(_,{onClick:Ve,size:"sm",variant:"outline"},{default:s(()=>[t(A,{name:"plus",class:"mr-2 h-4 w-4"}),e[69]||(e[69]=d(" Add New Code "))]),_:1})]),l("div",Ol,[!p.delay_codes||p.delay_codes.length===0?(i(),f("div",Rl," No delay codes found ")):(i(),f("div",Wl,[(i(!0),f(S,null,z(p.delay_codes,a=>(i(),f("div",{key:a.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[l("div",{class:"flex-1 cursor-pointer",onClick:m=>Me(a)},[l("div",Yl,[d(y(a.code)+" ",1),a.deleted_at?(i(),f("span",ql,"(Deleted)")):x("",!0)]),a.description?(i(),f("div",Hl,y(a.description),1)):x("",!0)],8,Il),l("div",Gl,[p.isSuperAdmin?(i(),f(S,{key:0},[a.deleted_at?(i(),f(S,{key:0},[t(_,{onClick:m=>Ee(a.id),size:"sm",variant:"outline"},{default:s(()=>[t(A,{name:"refresh",class:"mr-2 h-4 w-4"}),e[71]||(e[71]=d(" Restore "))]),_:2},1032,["onClick"]),t(_,{onClick:m=>Oe(a.id),size:"sm",variant:"destructive"},{default:s(()=>[t(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[72]||(e[72]=d(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(i(),T(_,{key:1,onClick:m=>xe(a.id),size:"sm",variant:"destructive"},{default:s(()=>[t(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[73]||(e[73]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):(i(),T(_,{key:1,onClick:m=>xe(a.id),size:"sm",variant:"destructive"},{default:s(()=>[t(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[74]||(e[74]=d(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))]),u.value?(i(),f("div",Jl,[l("h3",Kl,y(g.value?"Edit":"Add")+" Delay Code",1),l("div",Ql,[l("div",null,[t(o(D),{for:"code"},{default:s(()=>e[75]||(e[75]=[d("Code")])),_:1}),t(o(I),{id:"code",modelValue:B.value.code,"onUpdate:modelValue":e[20]||(e[20]=a=>B.value.code=a),placeholder:"Enter code"},null,8,["modelValue"])]),l("div",null,[t(o(D),{for:"description"},{default:s(()=>e[76]||(e[76]=[d("Description")])),_:1}),t(o(I),{id:"description",modelValue:B.value.description,"onUpdate:modelValue":e[21]||(e[21]=a=>B.value.description=a),placeholder:"Enter description"},null,8,["modelValue"])]),l("div",Xl,[t(_,{onClick:ze,variant:"ghost",size:"sm"},{default:s(()=>e[77]||(e[77]=[d("Cancel")])),_:1}),t(_,{onClick:Pe,variant:"default",size:"sm"},{default:s(()=>e[78]||(e[78]=[d("Save")])),_:1})])])])):x("",!0)]),t(o(me),{class:"mt-6"},{default:s(()=>[t(_,{onClick:e[22]||(e[22]=a=>U.value=!1),variant:"outline"},{default:s(()=>e[79]||(e[79]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(o(oe),{open:ee.value,"onUpdate:open":e[26]||(e[26]=a=>ee.value=a)},{default:s(()=>[t(o(ne),null,{default:s(()=>[t(o(re),null,{default:s(()=>[t(o(de),null,{default:s(()=>e[80]||(e[80]=[d("Confirm Deletion")])),_:1}),t(o(ie),null,{default:s(()=>e[81]||(e[81]=[d(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),t(o(me),{class:"mt-4"},{default:s(()=>[t(_,{type:"button",onClick:e[24]||(e[24]=a=>ee.value=!1),variant:"outline"},{default:s(()=>e[82]||(e[82]=[d(" Cancel ")])),_:1}),t(_,{type:"button",onClick:e[25]||(e[25]=a=>Be(be.value)),variant:"destructive"},{default:s(()=>e[83]||(e[83]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(o(oe),{open:O.value,"onUpdate:open":e[29]||(e[29]=a=>O.value=a)},{default:s(()=>[t(o(ne),null,{default:s(()=>[t(o(re),null,{default:s(()=>[t(o(de),null,{default:s(()=>e[84]||(e[84]=[d("Confirm Deletion")])),_:1}),t(o(ie),null,{default:s(()=>e[85]||(e[85]=[d(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),t(o(me),{class:"mt-4"},{default:s(()=>[t(_,{type:"button",onClick:e[27]||(e[27]=a=>O.value=!1),variant:"outline"},{default:s(()=>e[86]||(e[86]=[d(" Cancel ")])),_:1}),t(_,{type:"button",onClick:e[28]||(e[28]=a=>Re(Z.value)),variant:"destructive"},{default:s(()=>e[87]||(e[87]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(o(oe),{open:R.value,"onUpdate:open":e[32]||(e[32]=a=>R.value=a)},{default:s(()=>[t(o(ne),null,{default:s(()=>[t(o(re),null,{default:s(()=>[t(o(de),null,{default:s(()=>e[88]||(e[88]=[d("Confirm Bulk Deletion")])),_:1}),t(o(ie),null,{default:s(()=>[d(" Are you sure you want to delete "+y(h.value.length)+" delay records? This action cannot be undone. ",1)]),_:1})]),_:1}),t(o(me),{class:"mt-4"},{default:s(()=>[t(_,{type:"button",onClick:e[30]||(e[30]=a=>R.value=!1),variant:"outline"},{default:s(()=>e[89]||(e[89]=[d(" Cancel ")])),_:1}),t(_,{type:"button",onClick:e[31]||(e[31]=a=>Je()),variant:"destructive"},{default:s(()=>e[90]||(e[90]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{_a as default};
