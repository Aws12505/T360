import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-j4t3KSrg.js";import{_ as P}from"./Form.vue_vue_type_script_setup_true_lang-Cw7j10aw.js";import{g as U}from"./vendor-vue-BInP8APy.js";import{_ as B,a as z,b as y,c as f,d as D,e as m}from"./TableRow.vue_vue_type_script_setup_true_lang-Ch0lDg94.js";import{_ as X}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as $}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as w}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";import{_ as S}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{_ as I}from"./Badge.vue_vue_type_script_setup_true_lang-gLGZkSRc.js";import{r as N,c as J,b as p,e as n,f as l,z as t,X as i,u as e,F as d,E as O,S as o,H as v,O as g,U as _}from"./vendor-DrR5RGOb.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./Icon.vue_vue_type_script_setup_true_lang-terbfsn5.js";import"./vendor-icons-CwVCzoc4.js";import"./app-D8pO7-yq.js";import"./vendor-axios-xsH4HHeE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-B7Y_3pUj.js";const K={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Q={class:"flex flex-col sm:flex-row justify-between items-center mb-6"},R={key:0},W={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Y={class:"overflow-x-auto"},Z={class:"overflow-x-auto"},ee={class:"flex flex-col"},le={class:"flex items-center justify-between"},te={class:"flex flex-wrap gap-2"},ke={__name:"Admin",props:{metrics:Object,tenantSlug:{type:String,default:null},permissions:{Array,default:[]}},setup(T){const u=T,{tenantSlug:b}=u,j=[{title:b?"Dashboard":"Admin Dashboard",href:b?route("dashboard",{tenantSlug:b}):route("admin.dashboard")},{title:"Metrics",href:route("performance-metrics.edit")}],k=N(!1),V=N({}),C=["acceptance","on_time","maintenance_variance","open_boc","vcr_preventable","vmcr_p"],A=["fantastic_plus","fantastic","good","fair","poor"],L=["driver_distraction","speeding_violation","sign_violation","traffic_light_violation","following_distance"],F=["gold","silver","not_eligible"],q={less:"Less than",less_or_equal:"Less than or equal to",equal:"Equal to",more_or_equal:"More than or equal to",more:"More than"},x=J(()=>{if(!u.metrics)return{};const c={};return C.forEach(a=>{c[a]=A.map(s=>{const r=u.metrics[`${a}_${s}_operator`]??"-";return{level:s.replace(/_/g," "),value:u.metrics[`${a}_${s}`]??"-",operator:q[r]||r}})}),L.forEach(a=>{c[a]=F.map(s=>{const r=u.metrics[`${a}_${s}_operator`]??"-";return{level:s.replace(/_/g," "),value:u.metrics[`${a}_${s}`]??"-",operator:q[r]||r}})}),c.safety_bonus_eligible_levels=u.metrics.safety_bonus_eligible_levels||[],c});function G(){V.value=u.metrics??{},k.value=!0}function h(){k.value=!1,V.value={}}return(c,a)=>(n(),p(H,{breadcrumbs:j,tenantSlug:e(b),permissions:u.permissions},{default:l(()=>[t(e(U),{title:"Metrics Management"}),i("div",K,[i("div",Q,[a[1]||(a[1]=i("h1",{class:"text-2xl font-bold text-foreground"}," Performance Metrics ",-1)),t(e(X),{onClick:G,variant:"default",class:"mt-4 sm:mt-0"},{default:l(()=>a[0]||(a[0]=[o(" Edit Global Metrics ")])),_:1})]),k.value?(n(),d("div",R,[t(P,{entry:V.value,onSaved:h,onCancel:h},null,8,["entry"])])):u.metrics?(n(),d("div",W,[(n(),d(v,null,g(C,s=>t(e($),{key:s},{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(M),{class:"capitalize"},{default:l(()=>[o(_(s.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),t(e(S),null,{default:l(()=>[i("div",Y,[t(e(B),null,{default:l(()=>[t(e(z),null,{default:l(()=>[t(e(y),null,{default:l(()=>[t(e(f),null,{default:l(()=>a[2]||(a[2]=[o("Level")])),_:1}),t(e(f),null,{default:l(()=>a[3]||(a[3]=[o("Value")])),_:1}),t(e(f),null,{default:l(()=>a[4]||(a[4]=[o("Operator")])),_:1})]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[(n(!0),d(v,null,g(x.value[s],(r,E)=>(n(),p(e(y),{key:E},{default:l(()=>[t(e(m),null,{default:l(()=>[o(_(r.level),1)]),_:2},1024),t(e(m),null,{default:l(()=>[o(_(r.value),1)]),_:2},1024),t(e(m),null,{default:l(()=>[o(_(r.operator),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)),64)),(n(),d(v,null,g(L,s=>t(e($),{key:s},{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(M),{class:"capitalize"},{default:l(()=>[o(_(s.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),t(e(S),null,{default:l(()=>[i("div",Z,[t(e(B),null,{default:l(()=>[t(e(z),null,{default:l(()=>[t(e(y),null,{default:l(()=>[t(e(f),null,{default:l(()=>a[5]||(a[5]=[o("Tier")])),_:1}),t(e(f),null,{default:l(()=>a[6]||(a[6]=[o("Value")])),_:1}),t(e(f),null,{default:l(()=>a[7]||(a[7]=[o("Operator")])),_:1})]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[(n(!0),d(v,null,g(x.value[s],(r,E)=>(n(),p(e(y),{key:E},{default:l(()=>[t(e(m),null,{default:l(()=>[o(_(r.level),1)]),_:2},1024),t(e(m),null,{default:l(()=>[o(_(r.value),1)]),_:2},1024),t(e(m),null,{default:l(()=>[o(_(r.operator),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)),64)),t(e($),{class:"col-span-1 md:col-span-2"},{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(M),null,{default:l(()=>a[8]||(a[8]=[o(" MVtS Configuration ")])),_:1})]),_:1}),t(e(S),null,{default:l(()=>{var s;return[i("div",ee,[i("div",le,[a[9]||(a[9]=i("span",{class:"font-medium"},"MVtS Divisor:",-1)),i("span",null,_(((s=u.metrics)==null?void 0:s.mvts_divisor)||"0.135"),1)]),a[10]||(a[10]=i("p",{class:"text-sm text-muted-foreground mt-2"}," This value is used to calculate the Maintenance Variance to Standard (MVtS) metric. ",-1))])]}),_:1})]),_:1}),x.value.safety_bonus_eligible_levels.length?(n(),p(e($),{key:0,class:"col-span-1 md:col-span-2"},{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(M),null,{default:l(()=>a[11]||(a[11]=[o(" Safety Bonus Eligibility ")])),_:1})]),_:1}),t(e(S),null,{default:l(()=>[i("div",te,[(n(!0),d(v,null,g(x.value.safety_bonus_eligible_levels,(s,r)=>(n(),p(e(I),{key:r,variant:"success",class:"capitalize"},{default:l(()=>[o(_(s.replace(/_/g," ")),1)]),_:2},1024))),128))])]),_:1})]),_:1})):O("",!0)])):O("",!0)])]),_:1},8,["tenantSlug","permissions"]))}};export{ke as default};
