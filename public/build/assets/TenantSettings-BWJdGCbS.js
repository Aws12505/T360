import{c as _,r as h,d as j,b as w,e as i,f,z as m,u as o,X as t,F as n,E as a,aj as C,G as L,S as N,U as r,ah as z,C as A,D as G}from"./vendor-DrR5RGOb.js";import{x as M,g as E}from"./vendor-vue-BInP8APy.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-BEJs704y.js";import{_ as F,a as I}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-C2n46c-c.js";import{_ as q}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{_ as x}from"./Separator.vue_vue_type_script_setup_true_lang-mktRl8Mw.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./Icon.vue_vue_type_script_setup_true_lang-terbfsn5.js";import"./vendor-icons-CwVCzoc4.js";import"./app-DzyFJsmj.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const v=h([]);function O(){const s=c=>{const p=Math.random().toString(36).substring(2,9),b={id:p,...c,duration:c.duration||5e3};return v.value=[...v.value,b],setTimeout(()=>{d(p)},b.duration),p},d=c=>{v.value=v.value.filter(p=>p.id!==c)};return{toasts:_(()=>v.value),toast:s,dismissToast:d}}const R={class:"space-y-6"},Y={class:"border-b"},J={class:"flex space-x-8"},W={key:0,class:"space-y-6"},X={key:0,class:"flex flex-col items-center space-y-3 p-4 border rounded-md bg-muted/50"},H={class:"w-32 h-32 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},K=["src"],Q={class:"grid gap-2"},Z={key:0,class:"text-sm text-destructive"},tt={class:"grid gap-2"},et={class:"flex items-start space-x-4"},st={key:0,class:"w-24 h-24 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},it=["src"],ot={class:"flex-1"},nt={key:0,class:"text-sm text-destructive"},rt={class:"flex items-center gap-4"},at={key:0},dt={key:1},lt={class:"text-sm text-neutral-600"},ct={key:1,class:"space-y-6"},ut={key:0,class:"bg-card rounded-lg border shadow-sm p-6"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gt={class:"space-y-2"},pt={class:"text-lg font-semibold"},bt={class:"text-sm text-muted-foreground"},ft={class:"space-y-2 md:text-right"},vt={class:"text-2xl font-bold"},yt={class:"space-y-3 col-span-1 md:col-span-2"},xt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},_t={class:"bg-muted/50 p-3 rounded-md"},ht={class:"font-medium"},St={class:"bg-muted/50 p-3 rounded-md"},kt={class:"font-medium"},wt={class:"bg-muted/50 p-3 rounded-md"},Ct={class:"font-medium"},Nt={class:"text-xs text-muted-foreground"},$t={key:0,class:"space-y-3 col-span-1 md:col-span-2"},Dt={class:"bg-muted/50 p-3 rounded-md"},Vt={key:0},Bt={key:1},Tt={key:0},Ut={key:1},jt={key:2},Lt={key:2},zt={key:3,class:"mt-1 text-sm text-muted-foreground"},At={key:1,class:"bg-muted/50 p-6 rounded-lg border text-center"},Zt=j({__name:"TenantSettings",props:{tenant:{type:Object,required:!0},tenantSlug:{type:String,required:!0},subscription:{type:Object,default:null},permissions:Array},setup(s){const d=s;_(()=>d.permissions.map(l=>l.name));const c=h("company");_(()=>[{title:d.tenantSlug?"Dashboard":"Admin Dashboard",href:d.tenantSlug?route("dashboard",{tenantSlug:d.tenantSlug}):route("admin.dashboard")}]);const{toast:p}=O(),b=h(null),u=M({name:d.tenant.name,slug:d.tenant.slug,image:null}),V=l=>{const e=l.target;if(e.files&&e.files[0]){u.image=e.files[0];const g=new FileReader;g.onload=y=>{var k;b.value=(k=y.target)==null?void 0:k.result},g.readAsDataURL(e.files[0])}},B=()=>{u.post(route("tenant.settings.update",d.tenantSlug),{onSuccess:()=>{p({title:"Success",description:"Company settings updated successfully"})},preserveScroll:!0})},T=(l,e="USD")=>l?new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD"}).format(l):"$0.00",S=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",U=(l,e)=>{if(!l||!e)return"N/A";const g=l.toString().padStart(2,"0"),y=e.toString().length===4?e.toString().slice(-2):e.toString();return`${g}/${y}`};return(l,e)=>(i(),w(P,{breadcrumbs:d.breadcrumbItems,tenantSlug:d.tenantSlug,permissions:d.permissions},{default:f(()=>[m(o(E),{title:"Company"}),m(F,{permissions:d.permissions},{default:f(()=>[t("div",R,[m(I,{title:"Company",description:"Manage your company information and subscription"}),m(o(x)),t("div",Y,[t("div",J,[t("button",{onClick:e[0]||(e[0]=g=>c.value="company"),class:C(["py-2 px-1 -mb-px font-medium text-sm",c.value==="company"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Company Settings ",2),t("button",{onClick:e[1]||(e[1]=g=>c.value="subscription"),class:C(["py-2 px-1 -mb-px font-medium text-sm",c.value==="subscription"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Subscription Details ",2)])]),c.value==="company"?(i(),n("div",W,[s.tenant.image_path?(i(),n("div",X,[e[3]||(e[3]=t("div",{class:"text-sm font-medium"},"Current Company Logo",-1)),t("div",H,[t("img",{src:`/storage/${s.tenant.image_path}`,alt:"Company Logo",class:"max-w-full max-h-full object-contain"},null,8,K)]),e[4]||(e[4]=t("div",{class:"text-xs text-muted-foreground"}," Logo is optimized and converted to SVG for better quality ",-1))])):a("",!0),t("form",{onSubmit:L(B,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[t("div",Q,[m(o(D),{for:"name"},{default:f(()=>e[5]||(e[5]=[N("Company Name")])),_:1}),m(o($),{id:"name",modelValue:o(u).name,"onUpdate:modelValue":e[2]||(e[2]=g=>o(u).name=g),placeholder:"Enter company name",class:"mt-1 block w-full"},null,8,["modelValue"]),o(u).errors.name?(i(),n("p",Z,r(o(u).errors.name),1)):a("",!0)]),t("div",tt,[m(o(D),{for:"image"},{default:f(()=>e[6]||(e[6]=[N("Update Company Logo")])),_:1}),t("div",et,[b.value?(i(),n("div",st,[t("img",{src:b.value,alt:"New Company Logo Preview",class:"max-w-full max-h-full object-contain"},null,8,it)])):a("",!0),t("div",ot,[m(o($),{id:"image",type:"file",onChange:V,accept:"image/jpeg,image/png,image/gif,image/svg+xml",class:"mt-1 block w-full"}),e[7]||(e[7]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Accepted formats: JPEG, PNG, GIF, SVG. Max size: 2MB. Will be optimized and converted to SVG. ",-1)),o(u).errors.image?(i(),n("p",nt,r(o(u).errors.image),1)):a("",!0)])])]),t("div",rt,[l.permissionsNames.includes("tenant-settings.update")?(i(),w(o(q),{key:0,type:"submit",disabled:o(u).processing},{default:f(()=>[o(u).processing?(i(),n("span",at,"Updating...")):(i(),n("span",dt,"Save Changes"))]),_:1},8,["disabled"])):a("",!0),m(z,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:f(()=>[A(t("p",lt,"Saved.",512),[[G,o(u).recentlySuccessful]])]),_:1})])],32)])):a("",!0),c.value==="subscription"?(i(),n("div",ct,[s.subscription?(i(),n("div",ut,[t("div",mt,[t("div",gt,[t("h3",pt,r(s.subscription.name),1),t("p",bt,r(s.subscription.description||"No description available"),1)]),t("div",ft,[t("div",vt,r(T(s.subscription.price,s.subscription.currency_code)),1)]),t("div",yt,[m(o(x)),e[11]||(e[11]=t("h4",{class:"font-medium"},"Billing Information",-1)),t("div",xt,[t("div",_t,[e[8]||(e[8]=t("div",{class:"text-xs text-muted-foreground"},"Next Billing",-1)),t("div",ht,r(S(s.subscription.next_billing_at)),1)]),t("div",St,[e[9]||(e[9]=t("div",{class:"text-xs text-muted-foreground"},"Last Billing",-1)),t("div",kt,r(S(s.subscription.last_billing_at)),1)]),t("div",wt,[e[10]||(e[10]=t("div",{class:"text-xs text-muted-foreground"},"Payment Method",-1)),t("div",Ct,r(s.subscription.card_type)+" •••• "+r(s.subscription.last_four_digits),1),t("div",Nt,"Expires "+r(U(s.subscription.expiry_month,s.subscription.expiry_year)),1)])])]),s.subscription.billing_address?(i(),n("div",$t,[m(o(x)),e[12]||(e[12]=t("h4",{class:"font-medium"},"Billing Address",-1)),t("div",Dt,[s.subscription.billing_address.street?(i(),n("div",Vt,r(s.subscription.billing_address.street),1)):a("",!0),s.subscription.billing_address.street2?(i(),n("div",Bt,r(s.subscription.billing_address.street2),1)):a("",!0),t("div",null,[s.subscription.billing_address.city?(i(),n("span",Tt,r(s.subscription.billing_address.city)+", ",1)):a("",!0),s.subscription.billing_address.state?(i(),n("span",Ut,r(s.subscription.billing_address.state),1)):a("",!0),s.subscription.billing_address.zip?(i(),n("span",jt,r(s.subscription.billing_address.zip),1)):a("",!0)]),s.subscription.billing_address.country?(i(),n("div",Lt,r(s.subscription.billing_address.country),1)):a("",!0),s.subscription.billing_address.phone?(i(),n("div",zt," Phone: "+r(s.subscription.billing_address.phone),1)):a("",!0)])])):a("",!0)])])):(i(),n("div",At,e[13]||(e[13]=[t("h3",{class:"text-lg font-medium mb-2"},"No Subscription Found",-1),t("p",{class:"text-muted-foreground"},"Your company doesn't have an active subscription.",-1)])))])):a("",!0)])]),_:1},8,["permissions"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}});export{Zt as default};
