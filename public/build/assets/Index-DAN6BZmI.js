import{c as A,F as u,e as r,X as t,U as f,aj as H,H as S,S as d,O as Y,a3 as Je,r as D,y as he,w as ge,am as Ke,b as C,z as n,E as y,f as o,u as i,d as et,C as E,Y as W,G as je,N as tt,ai as at}from"./vendor--q1ey8Ib.js";import{x as te,g as st,W as q}from"./vendor-vue-BsCVk3W_.js";import{_ as nt}from"./Badge.vue_vue_type_script_setup_true_lang-MdQcxSLl.js";import{_ as V}from"./Icon.vue_vue_type_script_setup_true_lang-Cf3euL4G.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-D2siHqHg.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-CURKxeic.js";import{_ as ot}from"./Checkbox.vue_vue_type_script_setup_true_lang-CC0Uw8BM.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-DXVzP2wd.js";import{_ as rt,a as lt,b as me,c as re,d as it,e as ee}from"./TableRow.vue_vue_type_script_setup_true_lang-CyEhCbZI.js";import{_ as pe}from"./Card.vue_vue_type_script_setup_true_lang-D6lnctxv.js";import{_ as dt}from"./CardHeader.vue_vue_type_script_setup_true_lang-D36Fjuw_.js";import{_ as ut}from"./CardTitle.vue_vue_type_script_setup_true_lang-C7T0BrR7.js";import{_ as fe}from"./CardContent.vue_vue_type_script_setup_true_lang-Bg8Ud8NP.js";import{d as le,_ as ie,a as de,b as ue,c as ce}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DBOy1nGk.js";import{_ as ve}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DB4EnxcN.js";import{b as _e,_ as ke,a as we}from"./AlertDescription.vue_vue_type_script_setup_true_lang-mn1DMMqr.js";import{_ as ct}from"./AppLayout.vue_vue_type_script_setup_true_lang-CBWDZp3W.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-tTsIgFyK.js";import"./vendor-icons-Cd5utPp1.js";import"./vendor-ui-VCcvGdtT.js";import"./useInitials-DzeGKvtI.js";import"./app-C2l3TcEW.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dc8NxSZT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const mt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 flex flex-col items-center justify-center"},pt={class:"text-sm font-semibold mb-2 text-foreground"},ft={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(m){const s=m,_=A(()=>s.value===null||s.value===void 0||s.value===""?"No Data":s.value),B=A(()=>{const p=Number(s.value);return s.title.toLowerCase().includes("total")&&p>0});return(p,M)=>(r(),u("div",mt,[t("h3",pt,f(m.title),1),t("p",{class:H(["text-2xl font-bold",B.value?"text-red-600":"text-primary"])},f(_.value),3)]))}},vt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},gt={class:"text-base text-center font-semibold mb-4"},xt={key:0,class:"text-center text-sm py-4 text-primary font-medium"},yt={class:"space-y-3"},bt={class:"text-sm"},_t={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},totalRejections:{type:Number,default:0},rejectionType:{type:String,default:""}},setup(m){const s=m;A(()=>s.rejectionType==="load"?"No load rejections recorded. You're on track for Fantastic+ !":s.rejectionType==="block"?"No block rejections recorded. You're on track for Fantastic+ !":"No rejections recorded. You're on track for Fantastic+ !");const _=B=>{const p=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],N=[...s.drivers].sort((T,$)=>$.total_penalty-T.total_penalty).map(T=>T.total_penalty).indexOf(B);return p[N]||"#6b7280"};return(B,p)=>(r(),u("div",vt,[t("h3",gt,f(m.title),1),m.drivers.length===0?(r(),u("div",xt,[m.totalRejections===0?(r(),u(S,{key:0},[m.rejectionType==="block"?(r(),u(S,{key:0},[d(" No block rejections recorded. You're on track for Fantastic+ ! ")],64)):m.rejectionType==="load"?(r(),u(S,{key:1},[d(" No load rejections recorded. You're on track for Fantastic+ ! ")],64)):(r(),u(S,{key:2},[d(" No rejections recorded. You're on track for Fantastic+ ! ")],64))],64)):(r(),u(S,{key:1},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(r(),u(S,{key:1},[p[0]||(p[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",yt,[(r(!0),u(S,null,Y(m.drivers,(M,N)=>(r(),u("div",{key:N,class:"flex justify-between items-center"},[t("span",bt,f(M.driver_name),1),t("span",{class:"text-sm font-medium",style:Je({color:_(M.total_penalty)})},f(M.total_penalty),5)]))),128))])],64))]))}},kt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},wt={class:"text-base text-center font-semibold mb-4"},ht={class:"h-64"},jt={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(m){const s=m,_=D(null);let B=null;const p=()=>{if(B&&B.destroy(),!_.value)return;const M=_.value.getContext("2d"),N=[];s.chartData.datasets.forEach(k=>{k.data&&k.data.length&&N.push(...k.data)});const T=N.length>0?Math.min(...N):0,$=N.length>0?Math.max(...N):100;B=new Ke(M,{type:"line",data:s.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(k){const U=k.raw||0,F=s.averageAcceptance||0,P=s.chartData.dateRangeLabel||"selected period",j=Number(F).toFixed(2);return[`Acceptance Score: ${U}`,`Average Score Over ${P}: ${j}`]}}}},scales:{y:{beginAtZero:!(T>10),min:Math.max(Math.floor(T-5),0),max:Math.min(102.5,Math.ceil($+5)),ticks:{stepSize:2.5,padding:10,font:{size:11},callback:function(k){return k<=100?k:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return he(()=>{p()}),ge(()=>s.chartData,()=>{p()},{deep:!0}),(M,N)=>(r(),u("div",kt,[t("h3",wt,f(m.title),1),t("div",ht,[t("canvas",{ref_key:"chartCanvas",ref:_},null,512)])]))}},Ct={class:"space-y-2 md:space-y-4 lg:space-y-6 mb-2 md:mb-4 lg:mb-6"},St={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4"},$t={class:"grid grid-cols-1 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-6"},At={key:1,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center"},Dt={class:"flex flex-col sm:flex-row items-center justify-center sm:justify-around gap-3 mb-4"},Nt={class:"text-xs text-muted-foreground text-center mt-2"},Rt={key:2,class:"bg-background rounded-lg border shadow-sm p-4 md:p-6 lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md flex flex-col justify-center items-center"},Tt={class:"flex flex-col items-center justify-center gap-3 mb-4"},Ft={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null},currentDateFilter:{type:String,default:null},currentFilters:{type:Object,default:()=>({})}},setup(m){const s=m,_=A(()=>s.metricsData?[{title:"Total Rejected Stops",value:s.metricsData.totalRejections||0},{title:"Rejected In Advance",value:s.metricsData.advancedRejectionCount||0},{title:"Rejected +6 Hours Before Start Time",value:s.metricsData.moreThan6Count||0},{title:"Rejected 0-6 Hours Before Start Time",value:s.metricsData.within6Count||0},{title:"Rejected After Start Time",value:s.metricsData.afterStartCount||0}]:[]),B=A(()=>s.driversData&&s.driversData.length?s.driversData:[]),p=A(()=>s.chartData&&Object.keys(s.chartData).length?s.chartData:{}),M=A(()=>{var v;return((v=s.metricsData)==null?void 0:v.totalRejections)||0}),N=A(()=>{var v;return((v=s.currentFilters)==null?void 0:v.rejectionType)||null}),T=A(()=>!s.chartData||!s.chartData.labels?!1:s.chartData.labels.length>1),$=A(()=>{var v,R,O,I;return((I=(O=(R=(v=s.chartData)==null?void 0:v.datasets)==null?void 0:R[0])==null?void 0:O.data)==null?void 0:I.length)>0}),k=A(()=>$.value?s.chartData.datasets[0].data[0]:0),U=A(()=>{const v=k.value;return v>=98?"fantastic_plus":v>=95?"fantastic":v>=90?"good":v>=85?"fair":"poor"}),F=v=>v==null?"0%":`${Math.round(parseFloat(v))}%`,P=v=>{if(!v)return"Not Available";switch(v){case"fantastic_plus":return"Fantastic +";case"fantastic":return"Fantastic";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return v}},j=v=>{if(!v)return"outline";switch(v){case"fantastic_plus":return"fantastic-plus";case"fantastic":return"fantastic";case"good":return"good";case"fair":return"fair";case"poor":return"poor";default:return"outline"}},c=v=>{if(!v)return"text-gray-600";switch(v){case"fantastic_plus":return"text-green-600";case"fantastic":return"text-emerald-600";case"good":return"text-blue-600";case"fair":return"text-amber-600";case"poor":return"text-red-600";default:return"text-indigo-600"}},b=v=>{if(!v)return"";switch(v){case"fantastic_plus":return"Outstanding performance with exceptional acceptance rate";case"fantastic":return"Excellent performance with very high acceptance rate";case"good":return"Solid performance with good acceptance rate";case"fair":return"Acceptable performance with room for improvement";case"poor":return"Performance needs significant improvement";default:return""}};return(v,R)=>(r(),u("div",Ct,[t("div",St,[(r(!0),u(S,null,Y(_.value,(O,I)=>(r(),C(ft,{key:I,title:O.title,value:O.value,class:"transition-all duration-300 hover:shadow-md"},null,8,["title","value"]))),128))]),t("div",$t,[n(_t,{title:"Bottom 5 Drivers",drivers:B.value,"total-rejections":M.value,"rejection-type":N.value,class:H({"lg:col-span-1":T.value,"lg:col-span-1 md:col-span-1":!T.value,"transition-all duration-300 hover:shadow-md":!0})},null,8,["drivers","total-rejections","rejection-type","class"]),s.currentDateFilter!="Yesterday"&&T.value?(r(),C(jt,{key:0,title:"Acceptance Score",chartData:p.value,averageAcceptance:m.averageAcceptance,class:"lg:col-span-3 md:col-span-2 transition-all duration-300 hover:shadow-md"},null,8,["chartData","averageAcceptance"])):y("",!0),!T.value&&$.value?(r(),u("div",At,[R[0]||(R[0]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",Dt,[t("div",{class:H(["text-4xl md:text-5xl font-bold text-center",c(U.value)])},f(F(k.value)),3),n(i(nt),{variant:j(U.value),class:"text-xs md:text-sm px-3 py-1"},{default:o(()=>[d(f(P(U.value)),1)]),_:1},8,["variant"])]),t("p",Nt,f(b(U.value)),1)])):y("",!0),$.value?y("",!0):(r(),u("div",Rt,[R[3]||(R[3]=t("h3",{class:"text-base md:text-lg text-center font-semibold mb-4"},"Acceptance Score",-1)),t("div",Tt,[n(V,{name:"chart_bar",class:"h-16 w-16 text-muted-foreground/50"}),R[1]||(R[1]=t("div",{class:"text-lg font-medium text-center text-primary"}," No data available ",-1)),R[2]||(R[2]=t("p",{class:"text-sm text-primary/70 text-center max-w-md"}," There is no acceptance data available for the selected time period. Try selecting a different date range or check back later. ",-1))])]))])]))}},Mt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ut={key:0,class:"col-span-full"},Vt={class:"relative"},zt=["value"],Bt={class:"col-span-full"},Pt={class:"relative"},Lt={class:"relative"},Et={class:"relative"},Ot=["value"],Yt={class:"relative"},Wt={class:"flex items-center space-x-2"},qt={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},Ht=et({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(m,{emit:s}){var N,T,$,k,U,F,P;const _=m,B=s,p=te({id:(N=_.rejection)==null?void 0:N.id,tenant_id:_.isSuperAdmin?(T=_.rejection)==null?void 0:T.tenant_id:null,date:(($=_.rejection)==null?void 0:$.date)||"",driver_name:((k=_.rejection)==null?void 0:k.driver_name)||"",rejection_type:((U=_.rejection)==null?void 0:U.rejection_type)||"block",rejection_category:((F=_.rejection)==null?void 0:F.rejection_category)||"more_than_24",reason_code_id:((P=_.rejection)==null?void 0:P.reason_code_id)||null,disputed:_.rejection&&_.rejection.disputed!==null?parseInt(_.rejection.disputed)===1:!1,driver_controllable:_.rejection&&_.rejection.driver_controllable!==null?parseInt(_.rejection.driver_controllable)===1:null});ge(()=>_.rejection,j=>{j?(p.id=j.id,p.tenant_id=j.tenant_id,p.date=j.date,p.driver_name=j.driver_name,p.rejection_type=j.rejection_type,p.rejection_category=j.rejection_category,p.reason_code_id=j.reason_code_id,p.disputed=j.disputed!==null?parseInt(j.disputed)===1:!1,p.driver_controllable=j.driver_controllable!==null?parseInt(j.driver_controllable)===1:null):p.reset()},{immediate:!0});const M=()=>{const j=!!p.id,c=_.isSuperAdmin?j?"acceptance.update.admin":"acceptance.store.admin":j?"acceptance.update":"acceptance.store",b=_.isSuperAdmin?j?{rejection:p.id}:{}:j?{tenantSlug:_.tenantSlug,rejection:p.id}:{tenantSlug:_.tenantSlug};p[j?"put":"post"](route(c,b),{onSuccess:()=>B("close")})};return(j,c)=>(r(),u("form",{onSubmit:je(M,["prevent"]),class:"space-y-6"},[t("div",Mt,[m.isSuperAdmin?(r(),u("div",Ut,[n(z,null,{default:o(()=>c[9]||(c[9]=[d("Company Name")])),_:1}),t("div",Vt,[E(t("select",{"onUpdate:modelValue":c[0]||(c[0]=b=>i(p).tenant_id=b),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[c[10]||(c[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(r(!0),u(S,null,Y(m.tenants,b=>(r(),u("option",{key:b.id,value:b.id},f(b.name),9,zt))),128))],512),[[W,i(p).tenant_id]]),c[11]||(c[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):y("",!0),t("div",Bt,[n(z,null,{default:o(()=>c[12]||(c[12]=[d("Date")])),_:1}),n(ae,{type:"date",modelValue:i(p).date,"onUpdate:modelValue":c[1]||(c[1]=b=>i(p).date=b),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(z,null,{default:o(()=>c[13]||(c[13]=[d("Driver Name")])),_:1}),n(ae,{modelValue:i(p).driver_name,"onUpdate:modelValue":c[2]||(c[2]=b=>i(p).driver_name=b),class:"w-full"},null,8,["modelValue"])]),t("div",null,[n(z,null,{default:o(()=>c[14]||(c[14]=[d("Rejection Type")])),_:1}),t("div",Pt,[E(t("select",{"onUpdate:modelValue":c[3]||(c[3]=b=>i(p).rejection_type=b),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},c[15]||(c[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[W,i(p).rejection_type]]),c[16]||(c[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(z,null,{default:o(()=>c[17]||(c[17]=[d("Rejection Category")])),_:1}),t("div",Lt,[E(t("select",{"onUpdate:modelValue":c[4]||(c[4]=b=>i(p).rejection_category=b),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},c[18]||(c[18]=[t("option",{value:"advanced_rejection"},"Advanced Rejection",-1),t("option",{value:"more_than_24"},"More than 24 hrs",-1),t("option",{value:"within_24"},"Within 24 hrs",-1),t("option",{value:"after_start"},"After start",-1)]),512),[[W,i(p).rejection_category]]),c[19]||(c[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(z,null,{default:o(()=>c[20]||(c[20]=[d("Reason Code")])),_:1}),t("div",Et,[E(t("select",{"onUpdate:modelValue":c[5]||(c[5]=b=>i(p).reason_code_id=b),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(r(!0),u(S,null,Y(m.reasons,b=>(r(),u("option",{key:b.id,value:b.id},f(b.reason_code),9,Ot))),128))],512),[[W,i(p).reason_code_id]]),c[21]||(c[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[n(z,null,{default:o(()=>c[22]||(c[22]=[d("Driver Controllable")])),_:1}),t("div",Yt,[E(t("select",{"onUpdate:modelValue":c[6]||(c[6]=b=>i(p).driver_controllable=b),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},c[23]||(c[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[W,i(p).driver_controllable]]),c[24]||(c[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",Wt,[n(ot,{checked:i(p).disputed,"onUpdate:checked":c[7]||(c[7]=b=>i(p).disputed=b),id:"disputed"},null,8,["checked"]),n(z,{for:"disputed"},{default:o(()=>c[25]||(c[25]=[d("Disputed")])),_:1})])]),t("div",qt,[n(h,{type:"button",onClick:c[8]||(c[8]=b=>B("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>c[26]||(c[26]=[d(" Cancel ")])),_:1}),n(h,{type:"submit",disabled:i(p).processing,class:"w-full sm:w-auto"},{default:o(()=>[d(f(i(p).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),It={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Gt={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},Qt={class:"flex flex-wrap gap-3 ml-3"},Xt={class:"relative"},Zt={key:1,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},Jt={class:"py-1"},Kt={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},ea=["href"],ta=["action"],aa={class:"flex flex-col items-center gap-2 md:items-start"},sa={class:"flex flex-wrap gap-1 md:gap-2"},na={key:0,class:"text-sm text-muted-foreground"},oa={key:0},ra={key:1},la={key:2},ia={key:3,class:"ml-1"},da={class:"flex items-center justify-between"},ua={class:"flex items-center gap-2"},ca={key:0,class:"ml-4 flex flex-wrap gap-2"},ma={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},pa={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fa={class:"capitalize"},va={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ga={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},xa={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ya={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ba={class:"flex flex-col gap-1 md:gap-4"},_a={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},ka={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-3"},wa=["value"],ha={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},ja={class:"flex justify-end space-x-2"},Ca={class:"overflow-x-auto"},Sa={class:"flex items-center justify-center"},$a=["checked"],Aa={class:"flex items-center"},Da={key:0},Na={key:1},Ra={key:2,class:"ml-2"},Ta={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Fa={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ma={key:3,class:"ml-2 opacity-50"},Ua=["value"],Va={key:1,class:"capitalize"},za={key:0,class:"ml-1 text-xs text-red-500"},Ba={class:"flex space-x-2"},Pa={key:0,class:"border-t bg-muted/20 px-4 py-3"},La={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Ea={class:"flex items-center gap-4 text-sm text-muted-foreground"},Oa={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},Ya=["value"],Wa={class:"flex flex-wrap"},qa=["innerHTML"],Ha={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},Ia={class:"flex items-center justify-between"},Ga={class:"max-h-[400px] overflow-y-auto rounded-md border"},Qa={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},Xa={key:1,class:"divide-y"},Za=["onClick"],Ja={class:"text-xs font-medium sm:text-sm"},Ka={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},es={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},ts={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},as={key:0,class:"space-y-4 rounded-md border p-4"},ss={class:"text-sm font-medium sm:text-base"},ns={class:"space-y-3"},os={class:"flex justify-end space-x-2"},Rs={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number},filters:{type:Object,default:()=>({search:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""})},permissions:Array},setup(m){const s=m,_=A(()=>(k.value==="yesterday"||k.value==="current-week")&&s.weekNumber&&s.year?`Week ${s.weekNumber}, ${s.year}`:(k.value==="6w"||k.value==="quarterly")&&s.startWeekNumber&&s.endWeekNumber&&s.year?`Weeks ${s.startWeekNumber}-${s.endWeekNumber}, ${s.year}`:""),B=[{title:s.tenantSlug?"Dashboard":"Admin Dashboard",href:s.tenantSlug?route("dashboard",{tenantSlug:s.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:s.tenantSlug?route("acceptance.index",{tenantSlug:s.tenantSlug}):route("acceptance.index.admin")}],p=D(!1),M=D(!1),N=D(null),T=D(""),$=D(""),k=D(s.dateFilter||"full"),U=D(s.perPage||10),F=D([]),P=D(!1),j=D(null),c=D(!1),b=D(!1),v=D(null),R=D({reason_code:"",description:""}),O=D(!1),I=D(null),se=["date","driver_name","rejection_type","reason_code","rejection_category","disputed","driver_controllable"],Q=D("date"),X=D("desc"),x=D({...s.filters}),G=A(()=>{let l=[...s.rejections.data];return l.sort((e,w)=>{var J,K;let a=e[Q.value],g=w[Q.value];return Q.value==="reason_code"&&(a=((J=e.reason_code)==null?void 0:J.reason_code)||"",g=((K=w.reason_code)==null?void 0:K.reason_code)||""),a===null?1:g===null?-1:(typeof a=="string"&&(a=a.toLowerCase(),g=g.toLowerCase()),a<g?X.value==="asc"?-1:1:a>g?X.value==="asc"?1:-1:0)}),l});function Ce(l){Q.value===l?X.value=X.value==="asc"?"desc":"asc":(Q.value=l,X.value="asc")}function xe(){const l=s.tenantSlug?route("acceptance.index",{tenantSlug:s.tenantSlug}):route("acceptance.index.admin");q.get(l,{...x.value,perPage:U.value,dateFilter:k.value})}function Se(){x.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""},xe()}const ye=(l=null)=>{N.value=l,p.value=!0},$e=()=>{M.value=!0,b.value=!1,v.value=null},Ae=()=>{R.value={reason_code:"",description:""},v.value=null,b.value=!0},De=l=>{R.value={reason_code:l.reason_code,description:l.description||""},v.value=l.id,b.value=!0},Ne=()=>{b.value=!1,v.value=null},Re=l=>{I.value=l,O.value=!0},Te=()=>{const l=te({reason_code:R.value.reason_code,description:R.value.description}),e=v.value?s.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":s.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",w=v.value?s.isSuperAdmin?{code:v.value}:{tenantSlug:s.tenantSlug,code:v.value}:s.isSuperAdmin?{}:{tenantSlug:s.tenantSlug};(v.value?l.put:l.post).call(l,route(e,w),{onSuccess:()=>{$.value=v.value?"Reason code updated successfully.":"Reason code created successfully.",b.value=!1,v.value=null,q.reload({only:["rejection_reason_codes"]})},onError:g=>{console.error(g)}})},Fe=l=>{const e=te({}),w=s.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",a=s.isSuperAdmin?{id:l}:{tenantSlug:s.tenantSlug,code:l};e.delete(route(w,a),{onSuccess:()=>{$.value="Reason code deleted successfully.",O.value=!1,q.reload({only:["rejection_reason_codes"]})}})},Me=l=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=te({}),w=s.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",a=s.isSuperAdmin?{rejection:l}:{tenantSlug:s.tenantSlug,rejection:l};e.delete(route(w,a),{preserveScroll:!0,onSuccess:()=>{$.value="Rejection deleted successfully."}})},Ue=l=>{if(l){const e=new URL(l),w=e.origin+e.pathname;q.get(w,{...x.value,perPage:U.value,dateFilter:k.value,page:e.searchParams.get("page")||1})}};function ne(l){k.value=l;const e=s.tenantSlug?route("acceptance.index",{tenantSlug:s.tenantSlug}):route("acceptance.index.admin");q.get(e,{...x.value,perPage:U.value,dateFilter:l})}function Ve(){const l=s.tenantSlug?route("acceptance.index",{tenantSlug:s.tenantSlug}):route("acceptance.index.admin");q.get(l,{...x.value,perPage:U.value,dateFilter:k.value})}function oe(l){if(!l)return"";const e=l.split("-");if(e.length!==3)return l;const[w,a,g]=e;return`${Number(a)}/${Number(g)}/${w}`}ge($,l=>{l&&setTimeout(()=>{$.value=""},5e3)});const ze=A(()=>{var w,a;if(!((w=s.rejection_breakdown)!=null&&w.by_category)||!((a=s.rejection_breakdown)!=null&&a.by_category.total_rejections))return null;const l=s.rejection_breakdown.by_category,e=s.filters.rejectionType;return e?{totalRejections:l[`total_${e}_rejections`]||0,afterStartCount:l[`after_start_${e}_count`]||0,moreThan24Count:l[`more_than_24_${e}_count`]||0,within24Count:l[`within_24_${e}_count`]||0,advancedRejectionCount:l[`advanced_rejection_${e}_count`]||0,by_category:!0}:{totalRejections:l.total_rejections||0,afterStartCount:l.after_start_count||0,moreThan24Count:l.more_than_24_count||0,within24Count:l.within_24_count||0,advancedRejectionCount:l.advanced_rejection_count||0,by_category:!0}}),Be=A(()=>{var l,e,w;return s.filters.rejectionType=="load"?((l=s.rejection_breakdown)==null?void 0:l.bottom_five_drivers.load)||[]:s.filters.rejectionType=="block"?((e=s.rejection_breakdown)==null?void 0:e.bottom_five_drivers.block)||[]:((w=s.rejection_breakdown)==null?void 0:w.bottom_five_drivers.total)||[]}),Pe=A(()=>!s.line_chart_data||s.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:s.line_chart_data.map(l=>l.date),datasets:[{label:"Acceptance Performance",data:s.line_chart_data.map(l=>l.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function Le(l){q.post(route("rejection_reason_codes.restore.admin",{id:l}),{},{onSuccess:()=>{$.value="Reason code restored successfully",setTimeout(()=>$.value="",3e3)}})}function Ee(l){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&q.delete(route("rejection_reason_codes.forceDelete.admin",{id:l}),{onSuccess:()=>{$.value="Reason code permanently deleted",setTimeout(()=>$.value="",3e3)}})}A(()=>s.rejection_reason_codes.filter(l=>!l.deleted_at));const Oe=A(()=>G.value.length>0&&F.value.length===G.value.length);function Ye(l){l.target.checked?F.value=G.value.map(e=>e.id):F.value=[]}function We(){F.value.length>0&&(P.value=!0)}function qe(){const l=te({ids:F.value}),e=s.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",w=s.isSuperAdmin?{}:{tenantSlug:s.tenantSlug};l.delete(route(e,w),{preserveScroll:!0,onSuccess:()=>{$.value=`${F.value.length} rejection records deleted successfully.`,F.value=[],P.value=!1},onError:a=>{console.error(a)}})}function He(l){const e=l.target.files[0];if(!e)return;const w=new FormData;w.append("csv_file",e);const a=s.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:s.tenantSlug});q.post(a,w,{onSuccess:()=>{$.value="Rejections imported successfully",l.target.value=""},onError:g=>{console.error(g),l.target.value=""}})}function Ie(){if(G.value.length===0){T.value="No data available to export",setTimeout(()=>{T.value=""},3e3);return}j.value&&j.value.submit()}const Ge=A(()=>s.tenantSlug?route("acceptance.export",{tenantSlug:s.tenantSlug}):route("acceptance.export.admin"));A(()=>k.value==="yesterday"||k.value==="current-week"||k.value==="6w"||k.value==="quarterly"?s.rejections&&s.rejections.data&&s.rejections.data.length>0:!0);const Z=D(!1),Qe=A(()=>"/storage/upload-data-temps/Rejections Template.csv");he(()=>{const l=e=>{Z.value&&!e.target.closest(".relative")&&(Z.value=!1)};document.addEventListener("click",l),tt(()=>{document.removeEventListener("click",l)})});const Xe=A(()=>x.value.search||x.value.dateFrom||x.value.dateTo||x.value.rejectionType||x.value.reasonCode||x.value.rejectionCategory||x.value.disputed||x.value.driverControllable);function Ze(l){if(!l)return"";const e=s.rejection_reason_codes.find(w=>w.id==l);return e?e.reason_code:""}function be(l){return l?{more_than_6:"More than 6 hrs",within_6:"Within 6 hrs",after_start:"After start",more_than_24:"More than 24 hrs",within_24:"Within 24 hrs",advanced_rejection:"Advanced Rejection"}[l]||l:"—"}const L=A(()=>s.permissions.map(l=>l.name));return(l,e)=>(r(),C(ct,{breadcrumbs:B,tenantSlug:m.tenantSlug,permissions:s.permissions},{default:o(()=>{var w;return[n(i(st),{title:"Acceptance"}),t("div",It,[$.value?(r(),C(i(_e),{key:0,variant:"success"},{default:o(()=>[n(i(ke),null,{default:o(()=>e[29]||(e[29]=[d("Success")])),_:1}),n(i(we),null,{default:o(()=>[d(f($.value),1)]),_:1})]),_:1})):y("",!0),T.value?(r(),C(i(_e),{key:1,variant:"destructive"},{default:o(()=>[n(i(ke),null,{default:o(()=>e[30]||(e[30]=[d("Error")])),_:1}),n(i(we),null,{default:o(()=>[d(f(T.value),1)]),_:1})]),_:1})):y("",!0),t("div",Gt,[e[36]||(e[36]=t("h1",{class:"text-lg font-bold text-gray-800 dark:text-gray-200 md:text-xl lg:text-2xl"},"Acceptance",-1)),t("div",Qt,[L.value.includes("acceptance.create")?(r(),C(h,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=a=>ye()),variant:"default"},{default:o(()=>[n(V,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[31]||(e[31]=d(" Add Rejection "))]),_:1})):y("",!0),F.value.length>0&&L.value.includes("acceptance.delete")?(r(),C(h,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=a=>We()),variant:"destructive"},{default:o(()=>[n(V,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+f(F.value.length)+") ",1)]),_:1})):y("",!0),t("div",Xt,[L.value.includes("acceptance.import")?(r(),C(h,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[2]||(e[2]=a=>Z.value=!Z.value),variant:"secondary"},{default:o(()=>[n(V,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[32]||(e[32]=d(" Upload CSV ")),n(V,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1})):y("",!0),Z.value?(r(),u("div",Zt,[t("div",Jt,[t("label",Kt,[e[33]||(e[33]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:He,accept:".csv"},null,32)]),t("a",{href:Qe.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,ea)])])):y("",!0)]),L.value.includes("acceptance.export")?(r(),C(h,{key:2,class:"px-2 py-0 md:px-4 md:py-2",onClick:je(Ie,["prevent"]),variant:"outline"},{default:o(()=>[n(V,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[34]||(e[34]=d(" Download CSV "))]),_:1})):y("",!0),m.isSuperAdmin?(r(),C(h,{key:3,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=a=>$e()),variant:"outline"},{default:o(()=>[n(V,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Manage Reason Codes "))]),_:1})):y("",!0)])]),t("form",{ref_key:"exportForm",ref:j,action:Ge.value,method:"GET",class:"hidden"},null,8,ta),n(i(pe),null,{default:o(()=>[n(i(fe),{class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",aa,[t("div",sa,[n(h,{onClick:e[4]||(e[4]=a=>ne("yesterday")),variant:"outline",size:"sm",class:H({"border-primary bg-primary/10 text-primary":k.value==="yesterday"})},{default:o(()=>e[37]||(e[37]=[d(" Yesterday ")])),_:1},8,["class"]),n(h,{onClick:e[5]||(e[5]=a=>ne("current-week")),variant:"outline",size:"sm",class:H({"border-primary bg-primary/10 text-primary":k.value==="current-week"})},{default:o(()=>e[38]||(e[38]=[d(" WTD ")])),_:1},8,["class"]),n(h,{onClick:e[6]||(e[6]=a=>ne("6w")),variant:"outline",size:"sm",class:H({"border-primary bg-primary/10 text-primary":k.value==="6w"})},{default:o(()=>e[39]||(e[39]=[d(" T6W ")])),_:1},8,["class"]),n(h,{onClick:e[7]||(e[7]=a=>ne("quarterly")),variant:"outline",size:"sm",class:H({"border-primary bg-primary/10 text-primary":k.value==="quarterly"})},{default:o(()=>e[40]||(e[40]=[d(" Quarterly ")])),_:1},8,["class"])]),m.dateRange?(r(),u("div",na,[k.value==="yesterday"&&m.dateRange.start?(r(),u("span",oa," Showing data from "+f(oe(m.dateRange.start)),1)):m.dateRange.start&&m.dateRange.end?(r(),u("span",ra," Showing data from "+f(oe(m.dateRange.start))+" to "+f(oe(m.dateRange.end)),1)):(r(),u("span",la,f(m.dateRange.label),1)),_.value?(r(),u("span",ia,"("+f(_.value)+")",1)):y("",!0)])):y("",!0)])]),_:1})]),_:1}),n(i(pe),{class:"mb-6"},{default:o(()=>[n(i(dt),{class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",da,[t("div",ua,[n(i(ut),{class:"text-lg md:text-xl lg:text-2xl"},{default:o(()=>e[41]||(e[41]=[d("Filters")])),_:1}),!c.value&&Xe.value?(r(),u("div",ca,[x.value.search?(r(),u("div",ma," Search: "+f(x.value.search),1)):y("",!0),x.value.rejectionType?(r(),u("div",pa,[e[42]||(e[42]=d(" Type: ")),t("span",fa,f(x.value.rejectionType),1)])):y("",!0),x.value.reasonCode?(r(),u("div",va," Reason: "+f(Ze(x.value.reasonCode)),1)):y("",!0),x.value.rejectionCategory?(r(),u("div",ga," Category: "+f(be(x.value.rejectionCategory)),1)):y("",!0),x.value.disputed?(r(),u("div",xa," Disputed: "+f(x.value.disputed==="true"?"Yes":"No"),1)):y("",!0),x.value.driverControllable?(r(),u("div",ya," Driver Controllable: "+f(x.value.driverControllable==="true"?"Yes":x.value.driverControllable==="false"?"No":"N/A"),1)):y("",!0)])):y("",!0)]),n(h,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=a=>c.value=!c.value)},{default:o(()=>[d(f(c.value?"Hide Filters":"Show Filters")+" ",1),n(V,{name:c.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),c.value?(r(),C(i(fe),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",ba,[t("div",_a,[t("div",null,[n(i(z),{for:"search"},{default:o(()=>e[43]||(e[43]=[d("Search")])),_:1}),n(i(ae),{class:"h-9 w-full px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:x.value.search,"onUpdate:modelValue":e[9]||(e[9]=a=>x.value.search=a),type:"text",placeholder:"Search by driver name..."},null,8,["modelValue"])])]),t("div",ka,[t("div",null,[n(i(z),{for:"rejectionType"},{default:o(()=>e[44]||(e[44]=[d("Rejection Type")])),_:1}),E(t("select",{id:"rejectionType","onUpdate:modelValue":e[10]||(e[10]=a=>x.value.rejectionType=a),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[45]||(e[45]=[t("option",{value:""},"All Types",-1),t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[W,x.value.rejectionType]])]),t("div",null,[n(i(z),{for:"reasonCode"},{default:o(()=>e[46]||(e[46]=[d("Reason Code")])),_:1}),E(t("select",{id:"reasonCode","onUpdate:modelValue":e[11]||(e[11]=a=>x.value.reasonCode=a),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[47]||(e[47]=t("option",{value:""},"All Reason Codes",-1)),(r(!0),u(S,null,Y(m.rejection_reason_codes,a=>(r(),u("option",{key:a.id,value:a.id},f(a.reason_code),9,wa))),128))],512),[[W,x.value.reasonCode]])]),t("div",null,[n(i(z),{for:"rejectionCategory"},{default:o(()=>e[48]||(e[48]=[d("Rejection From Start Time")])),_:1}),E(t("select",{id:"rejectionCategory","onUpdate:modelValue":e[12]||(e[12]=a=>x.value.rejectionCategory=a),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[49]||(e[49]=[t("option",{value:""},"All Categories",-1),t("option",{value:"advanced_rejection"},"Advanced Rejection",-1),t("option",{value:"more_than_24"},"More than 24 hours",-1),t("option",{value:"within_24"},"Within 24 hours",-1),t("option",{value:"after_start"},"After start time",-1)]),512),[[W,x.value.rejectionCategory]])])]),t("div",ha,[t("div",null,[n(i(z),{for:"disputed"},{default:o(()=>e[50]||(e[50]=[d("Disputed")])),_:1}),E(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=a=>x.value.disputed=a),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[51]||(e[51]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),512),[[W,x.value.disputed]])]),t("div",null,[n(i(z),{for:"driverControllable"},{default:o(()=>e[52]||(e[52]=[d("Driver Controllable")])),_:1}),E(t("select",{id:"driverControllable","onUpdate:modelValue":e[14]||(e[14]=a=>x.value.driverControllable=a),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[53]||(e[53]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"NA"},"N/A",-1)]),512),[[W,x.value.driverControllable]])])]),t("div",ja,[n(h,{onClick:Se,variant:"ghost",size:"sm"},{default:o(()=>[n(V,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[54]||(e[54]=d(" Reset Filters "))]),_:1}),n(h,{onClick:xe,variant:"default",size:"sm"},{default:o(()=>[n(V,{name:"filter",class:"mr-2 h-4 w-4"}),e[55]||(e[55]=d(" Apply Filters "))]),_:1})])])]),_:1})):y("",!0)]),_:1}),m.isSuperAdmin?y("",!0):(r(),C(Ft,{key:2,metricsData:ze.value||{},driversData:Be.value||[],chartData:Pe.value||{},averageAcceptance:m.average_acceptance||null,currentDateFilter:((w=s.dateRange)==null?void 0:w.label)||"",currentFilters:x.value||{}},null,8,["metricsData","driversData","chartData","averageAcceptance","currentDateFilter","currentFilters"])),n(i(pe),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:o(()=>[n(i(fe),{class:"p-0"},{default:o(()=>[t("div",Ca,[n(i(rt),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[n(i(lt),null,{default:o(()=>[n(i(me),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:o(()=>[L.value.includes("acceptance.delete")?(r(),C(i(re),{key:0,class:"w-[50px]"},{default:o(()=>[t("div",Sa,[t("input",{type:"checkbox",onChange:Ye,checked:Oe.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,$a)])]),_:1})):y("",!0),m.isSuperAdmin?(r(),C(i(re),{key:1},{default:o(()=>e[56]||(e[56]=[d("Company Name")])),_:1})):y("",!0),(r(),u(S,null,Y(se,a=>n(i(re),{key:a,class:"cursor-pointer",onClick:g=>Ce(a)},{default:o(()=>[t("div",Aa,[a=="rejection_category"?(r(),u("div",Da,"Rejection From Start")):(r(),u("div",Na,f(a.replace(/_/g," ").split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" ")),1)),Q.value===a?(r(),u("div",Ra,[X.value==="asc"?(r(),u("svg",Ta,e[57]||(e[57]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(r(),u("svg",Fa,e[58]||(e[58]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(r(),u("div",Ma,e[59]||(e[59]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),L.value.includes("acceptance.update")||L.value.includes("acceptance.delete")?(r(),C(i(re),{key:2},{default:o(()=>e[60]||(e[60]=[d("Actions")])),_:1})):y("",!0)]),_:1})]),_:1}),n(i(it),null,{default:o(()=>[G.value.length===0?(r(),C(i(me),{key:0},{default:o(()=>[n(i(ee),{colspan:m.isSuperAdmin?se.length+3:se.length+2,class:"py-8 text-center text-primary font-medium"},{default:o(()=>e[61]||(e[61]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):y("",!0),(r(!0),u(S,null,Y(G.value,a=>(r(),C(i(me),{key:a.id,class:"hover:bg-muted/50"},{default:o(()=>[L.value.includes("acceptance.delete")?(r(),C(i(ee),{key:0,class:"text-center"},{default:o(()=>[E(t("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[15]||(e[15]=g=>F.value=g),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Ua),[[at,F.value]])]),_:2},1024)):y("",!0),m.isSuperAdmin?(r(),C(i(ee),{key:1},{default:o(()=>{var g;return[d(f(((g=a.tenant)==null?void 0:g.name)||"—"),1)]}),_:2},1024)):y("",!0),(r(),u(S,null,Y(se,g=>n(i(ee),{key:g,class:"whitespace-nowrap"},{default:o(()=>{var J,K;return[g==="date"?(r(),u(S,{key:0},[d(f(oe(a[g])),1)],64)):g==="rejection_type"?(r(),u("span",Va,f(a[g]),1)):g==="reason_code"?(r(),u(S,{key:2},[d(f(((J=a.reason_code)==null?void 0:J.reason_code)||"—")+" ",1),(K=a.reason_code)!=null&&K.deleted_at?(r(),u("span",za,"(Deleted)")):y("",!0)],64)):g==="disputed"?(r(),u(S,{key:3},[d(f(a[g]?"Yes":"No"),1)],64)):g==="driver_controllable"?(r(),u(S,{key:4},[d(f(a[g]===null?"N/A":a[g]?"Yes":"No"),1)],64)):g==="rejection_category"?(r(),u(S,{key:5},[d(f(be(a[g])),1)],64)):(r(),u(S,{key:6},[d(f(a[g]),1)],64))]}),_:2},1024)),64)),L.value.includes("acceptance.delete")||L.value.includes("acceptance.update")?(r(),C(i(ee),{key:2},{default:o(()=>[t("div",Ba,[L.value.includes("acceptance.update")?(r(),C(h,{key:0,size:"sm",onClick:g=>ye(a),variant:"warning"},{default:o(()=>[n(V,{name:"pencil",class:"mr-1 h-4 w-4"}),e[62]||(e[62]=d(" Edit "))]),_:2},1032,["onClick"])):y("",!0),L.value.includes("acceptance.delete")?(r(),C(h,{key:1,size:"sm",variant:"destructive",onClick:g=>Me(a.id)},{default:o(()=>[n(V,{name:"trash",class:"mr-1 h-4 w-4"}),e[63]||(e[63]=d(" Delete "))]),_:2},1032,["onClick"])):y("",!0)])]),_:2},1024)):y("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),m.rejections.links?(r(),u("div",Pa,[t("div",La,[t("div",Ea,[t("span",null,"Showing "+f(G.value.length)+" of "+f(m.rejections.data.length)+" entries",1),t("div",Oa,[e[64]||(e[64]=t("span",{class:"text-sm"},"Show:",-1)),E(t("select",{"onUpdate:modelValue":e[16]||(e[16]=a=>U.value=a),onChange:Ve,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(r(),u(S,null,Y([10,25,50,100],a=>t("option",{key:a,value:a},f(a),9,Ya)),64))],544),[[W,U.value]])])]),t("div",Wa,[(r(!0),u(S,null,Y(m.rejections.links,a=>(r(),C(h,{key:a.label,onClick:g=>Ue(a.url),disabled:!a.url,variant:"ghost",size:"sm",class:H(["mx-1",{"border-primary bg-primary/10 text-primary":a.active}])},{default:o(()=>[t("span",{innerHTML:a.label},null,8,qa)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):y("",!0)]),_:1})]),_:1}),n(i(le),{open:p.value,"onUpdate:open":e[18]||(e[18]=a=>p.value=a)},{default:o(()=>[n(i(ie),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:o(()=>[n(i(de),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(ue),{class:"text-lg sm:text-xl"},{default:o(()=>[d(f(N.value?"Edit":"Add")+" Rejection",1)]),_:1}),n(i(ce),{class:"text-xs sm:text-sm"},{default:o(()=>[d(" Fill in the details to "+f(N.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),n(Ht,{rejection:N.value,reasons:m.rejection_reason_codes,tenants:m.tenants,"is-super-admin":m.isSuperAdmin,"tenant-slug":m.tenantSlug,onClose:e[17]||(e[17]=a=>p.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),m.isSuperAdmin?(r(),C(i(le),{key:3,open:M.value,"onUpdate:open":e[22]||(e[22]=a=>M.value=a)},{default:o(()=>[n(i(ie),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:o(()=>[n(i(de),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(ue),{class:"text-lg sm:text-xl"},{default:o(()=>e[65]||(e[65]=[d("Manage Reason Codes")])),_:1}),n(i(ce),{class:"text-xs sm:text-sm"},{default:o(()=>e[66]||(e[66]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",Ha,[t("div",Ia,[e[68]||(e[68]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Reason Codes",-1)),n(h,{onClick:Ae,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>[n(V,{name:"plus",class:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e[67]||(e[67]=d(" Add New Code "))]),_:1})]),t("div",Ga,[!m.rejection_reason_codes||m.rejection_reason_codes.length===0?(r(),u("div",Qa," No reason codes found ")):(r(),u("div",Xa,[(r(!0),u(S,null,Y(m.rejection_reason_codes,a=>(r(),u("div",{key:a.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:g=>De(a)},[t("div",Ja,[d(f(a.reason_code)+" ",1),a.deleted_at?(r(),u("span",Ka,"(Deleted)")):y("",!0)]),a.description?(r(),u("div",es,f(a.description),1)):y("",!0)],8,Za),t("div",ts,[m.isSuperAdmin?(r(),u(S,{key:0},[a.deleted_at?(r(),u(S,{key:0},[n(h,{onClick:g=>Le(a.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[n(V,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[69]||(e[69]=d(" Restore "))]),_:2},1032,["onClick"]),n(h,{onClick:g=>Ee(a.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[n(V,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[70]||(e[70]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(r(),C(h,{key:1,onClick:g=>Re(a.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[n(V,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[71]||(e[71]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):y("",!0)])]))),128))]))]),b.value?(r(),u("div",as,[t("h3",ss,f(v.value?"Edit":"Add")+" Reason Code",1),t("div",ns,[t("div",null,[n(i(z),{for:"reason_code",class:"text-xs sm:text-sm"},{default:o(()=>e[72]||(e[72]=[d("Code")])),_:1}),n(i(ae),{id:"reason_code",modelValue:R.value.reason_code,"onUpdate:modelValue":e[19]||(e[19]=a=>R.value.reason_code=a),placeholder:"Enter reason code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[n(i(z),{for:"description",class:"text-xs sm:text-sm"},{default:o(()=>e[73]||(e[73]=[d("Description")])),_:1}),n(i(ae),{id:"description",modelValue:R.value.description,"onUpdate:modelValue":e[20]||(e[20]=a=>R.value.description=a),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",os,[n(h,{onClick:Ne,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>e[74]||(e[74]=[d("Cancel")])),_:1}),n(h,{onClick:Te,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>e[75]||(e[75]=[d("Save")])),_:1})])])])):y("",!0)]),n(i(ve),{class:"px-4 sm:px-6"},{default:o(()=>[n(h,{onClick:e[21]||(e[21]=a=>M.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[76]||(e[76]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):y("",!0),n(i(le),{open:O.value,"onUpdate:open":e[25]||(e[25]=a=>O.value=a)},{default:o(()=>[n(i(ie),{class:"max-w-[95vw] sm:max-w-md"},{default:o(()=>[n(i(de),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(ue),{class:"text-lg sm:text-xl"},{default:o(()=>e[77]||(e[77]=[d("Confirm Deletion")])),_:1}),n(i(ce),{class:"text-xs sm:text-sm"},{default:o(()=>e[78]||(e[78]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),n(i(ve),{class:"px-4 sm:px-6"},{default:o(()=>[n(h,{type:"button",onClick:e[23]||(e[23]=a=>O.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[79]||(e[79]=[d(" Cancel ")])),_:1}),n(h,{type:"button",onClick:e[24]||(e[24]=a=>Fe(I.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[80]||(e[80]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n(i(le),{open:P.value,"onUpdate:open":e[28]||(e[28]=a=>P.value=a)},{default:o(()=>[n(i(ie),{class:"max-w-[95vw] sm:max-w-md"},{default:o(()=>[n(i(de),{class:"px-4 sm:px-6"},{default:o(()=>[n(i(ue),{class:"text-lg sm:text-xl"},{default:o(()=>e[81]||(e[81]=[d("Confirm Bulk Deletion")])),_:1}),n(i(ce),{class:"text-xs sm:text-sm"},{default:o(()=>[d(" Are you sure you want to delete "+f(F.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),n(i(ve),{class:"px-4 sm:px-6"},{default:o(()=>[n(h,{type:"button",onClick:e[26]||(e[26]=a=>P.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[82]||(e[82]=[d(" Cancel ")])),_:1}),n(h,{type:"button",onClick:e[27]||(e[27]=a=>qe()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[83]||(e[83]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1},8,["tenantSlug","permissions"]))}};export{Rs as default};
