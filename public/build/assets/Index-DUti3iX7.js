import{d as lt,w as ce,F as u,e as i,X as t,E as _,z as l,f as a,S as d,C as j,Y as B,u as n,H as k,O as L,U as y,G as he,a3 as st,r as D,y as Se,am as at,c as U,b as M,N as ot,aj as K,ai as nt}from"./vendor-DrR5RGOb.js";import{x as Q,g as rt,W as E}from"./vendor-vue-BInP8APy.js";import{_ as ne}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as dt}from"./Checkbox.vue_vue_type_script_setup_true_lang-CnxPn2y5.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{_ as A}from"./Icon.vue_vue_type_script_setup_true_lang-dI_F312i.js";import{_ as it,a as ut,b as fe,c as ue,d as mt,e as ee}from"./TableRow.vue_vue_type_script_setup_true_lang-Ch0lDg94.js";import{_ as pe}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as ct}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as ft}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";import{_ as ye}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{d as te,_ as le,a as se,b as ae,c as oe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-oiQolaIc.js";import{_ as me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-NVpKV1tK.js";import{b as we,_ as Ce,a as De}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BGsFFXsR.js";import{_ as pt}from"./AppLayout.vue_vue_type_script_setup_true_lang-CvA5sh2i.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./vendor-icons-CojB8AsG.js";import"./app-DoNvNXYe.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},vt={key:0,class:"col-span-full"},gt={class:"relative"},xt=["value"],bt={class:"col-span-full"},_t={class:"relative"},kt={class:"relative"},wt={class:"relative"},Ct=["value"],Dt={class:"relative"},ht={class:"flex items-center space-x-2"},St={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},$t=lt({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(c,{emit:o}){var h,C,O,S,Y,$,P;const x=c,V=o,f=Q({id:(h=x.delay)==null?void 0:h.id,tenant_id:x.isSuperAdmin?(C=x.delay)==null?void 0:C.tenant_id:null,date:((O=x.delay)==null?void 0:O.date)||"",driver_name:((S=x.delay)==null?void 0:S.driver_name)||"",delay_type:((Y=x.delay)==null?void 0:Y.delay_type)||"origin",delay_category:(($=x.delay)==null?void 0:$.delay_category)||"1_120",delay_code_id:((P=x.delay)==null?void 0:P.delay_code_id)||null,disputed:x.delay&&x.delay.disputed!==null?parseInt(x.delay.disputed)===1:!1,driver_controllable:x.delay&&x.delay.driver_controllable!==null?parseInt(x.delay.driver_controllable)===1:null});ce(()=>x.delay,w=>{w?(f.id=w.id,f.tenant_id=w.tenant_id,f.date=w.date,f.driver_name=w.driver_name,f.delay_type=w.delay_type,f.delay_category=w.delay_category,f.delay_code_id=w.delay_code_id,f.disputed=w.disputed!==null?parseInt(w.disputed)===1:!1,f.driver_controllable=w.driver_controllable!==null?parseInt(w.driver_controllable)===1:null):f.reset()},{immediate:!0});const F=()=>{const w=!!f.id,m=x.isSuperAdmin?w?"ontime.update.admin":"ontime.store.admin":w?"ontime.update":"ontime.store",v=x.isSuperAdmin?w?{delay:f.id}:{}:w?{tenantSlug:x.tenantSlug,delay:f.id}:{tenantSlug:x.tenantSlug};f[w?"put":"post"](route(m,v),{onSuccess:()=>V("close")})};return(w,m)=>(i(),u("form",{onSubmit:he(F,["prevent"]),class:"space-y-6"},[t("div",yt,[c.isSuperAdmin?(i(),u("div",vt,[l(T,null,{default:a(()=>m[9]||(m[9]=[d("Company Name")])),_:1}),t("div",gt,[j(t("select",{"onUpdate:modelValue":m[0]||(m[0]=v=>n(f).tenant_id=v),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[m[10]||(m[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),u(k,null,L(c.tenants,v=>(i(),u("option",{key:v.id,value:v.id},y(v.name),9,xt))),128))],512),[[B,n(f).tenant_id]]),m[11]||(m[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):_("",!0),t("div",bt,[l(T,null,{default:a(()=>m[12]||(m[12]=[d("Date")])),_:1}),l(ne,{type:"date",modelValue:n(f).date,"onUpdate:modelValue":m[1]||(m[1]=v=>n(f).date=v),class:"w-full"},null,8,["modelValue"])]),t("div",null,[l(T,null,{default:a(()=>m[13]||(m[13]=[d("Driver Name")])),_:1}),l(ne,{modelValue:n(f).driver_name,"onUpdate:modelValue":m[2]||(m[2]=v=>n(f).driver_name=v),class:"w-full"},null,8,["modelValue"])]),t("div",null,[l(T,null,{default:a(()=>m[14]||(m[14]=[d("Delay Type")])),_:1}),t("div",_t,[j(t("select",{"onUpdate:modelValue":m[3]||(m[3]=v=>n(f).delay_type=v),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[15]||(m[15]=[t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),512),[[B,n(f).delay_type]]),m[16]||(m[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[l(T,null,{default:a(()=>m[17]||(m[17]=[d("Delay Category")])),_:1}),t("div",kt,[j(t("select",{"onUpdate:modelValue":m[4]||(m[4]=v=>n(f).delay_category=v),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[18]||(m[18]=[t("option",{value:"1_120"},"1–120 min",-1),t("option",{value:"121_600"},"121–600 min",-1),t("option",{value:"601_plus"},"601+ min",-1)]),512),[[B,n(f).delay_category]]),m[19]||(m[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[l(T,null,{default:a(()=>m[20]||(m[20]=[d("Delay Code")])),_:1}),t("div",wt,[j(t("select",{"onUpdate:modelValue":m[5]||(m[5]=v=>n(f).delay_code_id=v),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),u(k,null,L(c.delayCodes,v=>(i(),u("option",{key:v.id,value:v.id},y(v.code),9,Ct))),128))],512),[[B,n(f).delay_code_id]]),m[21]||(m[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[l(T,null,{default:a(()=>m[22]||(m[22]=[d("Driver Controllable")])),_:1}),t("div",Dt,[j(t("select",{"onUpdate:modelValue":m[6]||(m[6]=v=>n(f).driver_controllable=v),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},m[23]||(m[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[B,n(f).driver_controllable]]),m[24]||(m[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",ht,[l(dt,{checked:n(f).disputed,"onUpdate:checked":m[7]||(m[7]=v=>n(f).disputed=v),id:"disputed"},null,8,["checked"]),l(T,{for:"disputed"},{default:a(()=>m[25]||(m[25]=[d("Disputed")])),_:1})])]),t("div",St,[l(b,{type:"button",onClick:m[8]||(m[8]=v=>V("close")),variant:"outline",class:"w-full sm:w-auto"},{default:a(()=>m[26]||(m[26]=[d(" Cancel ")])),_:1}),l(b,{type:"submit",disabled:n(f).processing,class:"w-full sm:w-auto"},{default:a(()=>[d(y(n(f).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Tt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Nt={class:"text-base text-center font-semibold mb-2 md:mb-4"},At={key:0,class:"text-center text-sm py-4 text-primary font-medium"},Ft={class:"space-y-3"},Ot={class:"text-sm"},Mt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},delayType:{type:String,default:""},totalDelays:{type:Number,default:-1}},setup(c){const o=c,x=V=>{const f=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],h=[...o.drivers].sort((C,O)=>O.total_penalty-C.total_penalty).map(C=>C.total_penalty).indexOf(V);return f[h]||"#6b7280"};return(V,f)=>(i(),u("div",Tt,[t("h3",Nt,y(c.title),1),d(" "+y(console.log(c.delayType))+" ",1),c.drivers.length===0?(i(),u("div",At,[c.totalDelays===0?(i(),u(k,{key:0},[c.delayType==="origin"?(i(),u(k,{key:0},[d(" No origin delays recorded. You're on track for Fantastic+ ! ")],64)):c.delayType==="destination"?(i(),u(k,{key:1},[d(" No destination delays recorded. You're on track for Fantastic+ ! ")],64)):(i(),u(k,{key:2},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))],64)):(i(),u(k,{key:1},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(i(),u(k,{key:1},[f[0]||(f[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",Ft,[(i(!0),u(k,null,L(c.drivers,(F,h)=>(i(),u("div",{key:h,class:"flex justify-between items-center"},[t("span",Ot,y(F.driver_name),1),t("span",{class:"text-sm font-medium",style:st({color:x(F.total_penalty)})},y(F.total_penalty),5)]))),128))])],64))]))}},Ut={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},Vt={class:"text-base text-center font-semibold mb-2 md:mb-4"},zt={class:"h-64"},jt={__name:"LineChart",props:{title:{type:String,default:"On-Time Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageOntime:{type:Number,default:null}},setup(c){const o=c,x=D(null);let V=null;const f=()=>{if(V&&V.destroy(),!x.value)return;const F=x.value.getContext("2d"),h=[];o.chartData.datasets.forEach(S=>{S.data&&S.data.length&&h.push(...S.data)});const C=h.length>0?Math.min(...h):0,O=h.length>0?Math.max(...h):100;V=new at(F,{type:"line",data:o.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(S){const Y=S.raw||0,$=o.averageOntime||0,P=o.chartData.dateRangeLabel||"selected period",w=Number($).toFixed(2);return[`On-Time Score: ${Y}`,`Average Score Over ${P}: ${w}`]}}}},scales:{y:{beginAtZero:!(C>10),min:Math.max(Math.floor(C-15),0),max:Math.min(110,Math.ceil(O+15)),ticks:{stepSize:5,padding:10,font:{size:11},callback:function(S){return S<120?S:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return Se(()=>{f()}),ce(()=>o.chartData,()=>{f()},{deep:!0}),(F,h)=>(i(),u("div",Ut,[t("h3",Vt,y(c.title),1),t("div",zt,[t("canvas",{ref_key:"chartCanvas",ref:x},null,512)])]))}},Bt={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 lg:p-6 flex flex-col items-center justify-center"},Pt={class:"text-base font-semibold mb-2 text-foreground"},Et={class:"text-2xl font-bold text-primary"},Lt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(c){const o=c,x=U(()=>o.value===null||o.value===void 0||o.value===""?"No Data":o.value);return(V,f)=>(i(),u("div",Bt,[t("h3",Pt,y(c.title),1),t("p",Et,y(x.value),1)]))}},Rt={class:"space-y-2 md:space-y-4 lg:space-y-6"},Yt={class:"grid grid-cols-1 gap-2 md:gap-4 lg:gap-6 sm:grid-cols-2 lg:grid-cols-4"},Wt={class:"grid grid-cols-1 gap-2 md:gap-4 lg:gap-6 lg:grid-cols-4"},It={__name:"OnTimeDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageOntime:{type:Number,default:null},currentDateFilter:{type:String,default:null},delayType:{type:String,default:"all"}},setup(c){const o=c,x=U(()=>o.metricsData&&o.metricsData.by_category?[{title:"Total Delayed Stops",value:o.metricsData.totalDelays},{title:"Delayed for 1-120 Minutes",value:o.metricsData.between1_120Count},{title:"Delayed for 121-600 Minutes",value:o.metricsData.between121_600Count},{title:"Delayed for +601 Minutes",value:o.metricsData.moreThan601Count}]:[]),V=U(()=>o.driversData&&o.driversData.length?o.driversData:[]),f=U(()=>o.chartData&&Object.keys(o.chartData).length?o.chartData:{});return(F,h)=>(i(),u("div",Rt,[t("div",Yt,[(i(!0),u(k,null,L(x.value,(C,O)=>(i(),M(Lt,{key:O,title:C.title,value:C.value},null,8,["title","value"]))),128))]),t("div",Wt,[l(Mt,{title:"Bottom 5 Drivers",drivers:V.value,delayType:c.delayType,totalDelays:o.metricsData.totalDelays,class:"lg:col-span-1"},null,8,["drivers","delayType","totalDelays"]),o.currentDateFilter!="Yesterday"?(i(),M(jt,{key:0,title:"On-Time Score",chartData:f.value,averageOntime:c.averageOntime,class:"lg:col-span-3"},null,8,["chartData","averageOntime"])):_("",!0)])]))}},qt={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Ht={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},Gt={class:"flex flex-wrap gap-3 ml-3"},Qt={class:"relative"},Xt={key:0,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},Zt={class:"py-1"},Jt={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},Kt=["href"],el=["action"],tl={class:"flex flex-col items-center gap-2 md:items-start"},ll={class:"flex flex-wrap gap-1 md:gap-2"},sl={key:0,class:"text-sm text-muted-foreground"},al={key:0},ol={key:1},nl={key:2},rl={key:3,class:"ml-1"},dl={class:"flex items-center justify-between"},il={class:"flex items-center gap-2"},ul={key:0,class:"ml-4 flex flex-wrap gap-2"},ml={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cl={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fl={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},pl={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},yl={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},vl={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},gl={class:"flex flex-col justify-between gap-1 md:gap-4"},xl={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},bl=["value"],_l={class:"flex justify-end space-x-2"},kl={key:2,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},wl={class:"overflow-x-auto"},Cl={class:"flex items-center justify-center"},Dl=["checked"],hl={class:"flex items-center"},Sl={key:2,class:"ml-2"},$l={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Tl={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Nl={key:3,class:"ml-2 opacity-50"},Al=["value"],Fl={key:0,class:"ml-1 text-xs text-red-500"},Ol={class:"flex space-x-2"},Ml={key:0,class:"border-t bg-muted/20 px-4 py-3"},Ul={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Vl={class:"text-sm text-muted-foreground"},zl={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},jl={class:"flex items-center gap-2"},Bl={class:"flex flex-wrap"},Pl=["innerHTML"],El={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},Ll={class:"flex items-center justify-between"},Rl={class:"max-h-[400px] overflow-y-auto rounded-md border"},Yl={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},Wl={key:1,class:"divide-y"},Il=["onClick"],ql={class:"text-xs font-medium sm:text-sm"},Hl={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},Gl={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},Ql={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},Xl={key:0,class:"space-y-4 rounded-md border p-4"},Zl={class:"text-sm font-medium sm:text-base"},Jl={class:"space-y-3"},Kl={class:"flex justify-end space-x-2"},Cs={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},delay_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_ontime:{type:Number},filters:{type:Object,default:()=>({search:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",driverControllable:""})}},setup(c){const o=c,x=U(()=>(z.value==="yesterday"||z.value==="current-week")&&o.weekNumber&&o.year?`Week ${o.weekNumber}, ${o.year}`:(z.value==="6w"||z.value==="quarterly")&&o.startWeekNumber&&o.endWeekNumber&&o.year?`Weeks ${o.startWeekNumber}-${o.endWeekNumber}, ${o.year}`:""),V=[{title:o.tenantSlug?"Dashboard":"Admin Dashboard",href:o.tenantSlug?route("dashboard",{tenantSlug:o.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin")}],f=D(!1),F=D(!1),h=D(null),C=D(""),O=D(""),S=D(!1),Y=D(null),$=D([]),P=D(!1),w=D(null),m=D(!1),v=D(null),R=D({code:"",description:""}),X=D(!1),ve=D(null),W=D("date"),I=D("desc"),g=D({...o.filters}),re=["date","delay_type","driver_name","delay_category","delay_code","disputed","driver_controllable"],q=U(()=>{let r=[...o.delays.data];return r.sort((e,s)=>{var J,ke;let p,N;return W.value==="delay_code"?(p=((J=e.delay_code)==null?void 0:J.code)||"",N=((ke=s.delay_code)==null?void 0:ke.code)||""):(p=e[W.value],N=s[W.value]),p===null?1:N===null?-1:(typeof p=="string"&&(p=p.toLowerCase(),N=N.toLowerCase()),p<N?I.value==="asc"?-1:1:p>N?I.value==="asc"?1:-1:0)}),r}),$e=U(()=>o.delay_codes.filter(r=>!r.deleted_at));function Te(r){W.value===r?I.value=I.value==="asc"?"desc":"asc":(W.value=r,I.value="asc")}function ge(){const r=o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin");E.get(r,{...g.value,perPage:H.value,dateFilter:z.value})}function Ne(){g.value={search:"",dateFrom:"",dateTo:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",controllable:""},ge()}const H=D(o.delays.per_page||10),z=D(o.dateFilter||"full");function Ae(){const r=o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin");E.get(r,{...g.value,perPage:H.value,dateFilter:z.value})}function de(r){z.value=r;const e=o.tenantSlug?route("ontime.index",{tenantSlug:o.tenantSlug}):route("ontime.index.admin");E.get(e,{...g.value,perPage:H.value,dateFilter:r})}function Fe(r){if(r){const e=new URL(r),s=e.origin+e.pathname;E.get(s,{...g.value,perPage:H.value,dateFilter:z.value,page:e.searchParams.get("page")||1})}}function ie(r){if(!r)return"";const e=r.split("-");if(e.length!==3)return r;const[s,p,N]=e;return`${Number(p)}/${Number(N)}/${s}`}const xe=(r=null)=>{h.value=r,f.value=!0},Oe=r=>{Y.value=r,S.value=!0},Me=()=>{F.value=!0,m.value=!1,v.value=null},Ue=()=>{R.value={code:"",description:""},v.value=null,m.value=!0},Ve=r=>{R.value={code:r.code,description:r.description||""},v.value=r.id,m.value=!0},ze=()=>{m.value=!1,v.value=null},je=r=>{ve.value=r,X.value=!0},G=D(!1),Be=U(()=>g.value.search||g.value.dateFrom||g.value.dateTo||g.value.delayCode||g.value.delayCategory||g.value.disputed||g.value.delayType||g.value.controllable),Pe=r=>{if(!r)return"";const e=o.delay_codes.find(s=>s.id===parseInt(r));return e?e.code:""},Ee=async r=>{try{await E.delete(route("delay_codes.destroy.admin",r),{onSuccess:()=>{X.value=!1,C.value="Delay code deleted successfully"}})}catch(e){console.error("Error deleting delay code:",e)}};function be(r){if(!r)return"—";switch(r){case"1_120":return"1-120 mins";case"121_600":return"121-600 mins";case"601_plus":return"601+ mins";default:return r}}const Le=()=>{const r=Q({code:R.value.code,description:R.value.description}),e=v.value?o.isSuperAdmin?"delay_codes.update.admin":"delay_codes.update":o.isSuperAdmin?"delay_codes.store.admin":"delay_codes.store",s=v.value?o.isSuperAdmin?{id:v.value}:{tenantSlug:o.tenantSlug,id:v.value}:o.isSuperAdmin?{}:{tenantSlug:o.tenantSlug};(v.value?r.put:r.post).call(r,route(e,s),{onSuccess:()=>{C.value=v.value?"Delay code updated successfully.":"Delay code created successfully.",m.value=!1,v.value=null,E.reload({only:["delay_codes"]})},onError:N=>{console.error(N)}})},Re=r=>{Q({}).post(route(o.isSuperAdmin?"delay_codes.restore.admin":"delay_codes.restore",{id:r}),{onSuccess:()=>{C.value="Delay code restored successfully.",E.reload({only:["delay_codes"]})},onError:s=>{console.error(s)}})},Ye=r=>{Q({}).delete(route(o.isSuperAdmin?"delay_codes.forceDelete.admin":"delay_codes.forceDelete",{id:r}),{onSuccess:()=>{C.value="Delay code permanently deleted successfully.",E.reload({only:["delay_codes"]})},onError:s=>{console.error(s)}})},We=r=>{const e=Q({}),s=o.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",p=o.isSuperAdmin?{delay:r}:{tenantSlug:o.tenantSlug,delay:r};e.delete(route(s,p),{preserveScroll:!0,onSuccess:()=>{C.value="Delay record deleted successfully.",S.value=!1}})};ce(C,r=>{r&&setTimeout(()=>{C.value=""},5e3)}),o.flash&&o.flash.error&&(O.value=o.flash.error),ce(O,r=>{r&&setTimeout(()=>{O.value=""},5e3)});const Ie=U(()=>{var s;if(!((s=o.delay_breakdown)!=null&&s.by_category))return null;const r=o.delay_breakdown.by_category,e=o.filters.delayType;return e?{between1_120Count:r[`category_1_120_${e}_count`]||"0",between121_600Count:r[`category_121_600_${e}_count`]||"0",moreThan601Count:r[`category_601_plus_${e}_count`]||"0",totalDelays:r[`total_${e}_delays`]||"0",by_category:!0}:{between1_120Count:r.category_1_120_count||"0",between121_600Count:r.category_121_600_count||"0",moreThan601Count:r.category_601_plus_count||"0",totalDelays:r.total_delays||"0",by_category:!0}}),qe=U(()=>{var r,e,s;return o.filters.delayType=="origin"?((r=o.delay_breakdown)==null?void 0:r.bottom_five_drivers.origin)||[]:o.filters.delayType=="destination"?((e=o.delay_breakdown)==null?void 0:e.bottom_five_drivers.destination)||[]:((s=o.delay_breakdown)==null?void 0:s.bottom_five_drivers.total)||[]}),He=U(()=>!o.line_chart_data||o.line_chart_data.length===0?{labels:[],datasets:[{label:"On-Time Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}:{labels:o.line_chart_data.map(r=>r.date),datasets:[{label:"On-Time Performance",data:o.line_chart_data.map(r=>r.onTimePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}),Ge=U(()=>q.value.length>0&&$.value.length===q.value.length),_e=U(()=>o.delays.data&&o.delays.data.length>0);function Qe(r){r.target.checked?$.value=q.value.map(e=>e.id):$.value=[]}function Xe(){$.value.length>0&&(P.value=!0)}function Ze(){const r=Q({ids:$.value}),e=o.isSuperAdmin?"ontime.destroyBulk.admin":"ontime.destroyBulk",s=o.isSuperAdmin?{}:{tenantSlug:o.tenantSlug};r.delete(route(e,s),{preserveScroll:!0,onSuccess:()=>{C.value=`${$.value.length} delay records deleted successfully.`,$.value=[],P.value=!1,E.reload()},onError:p=>{console.error(p)}})}function Je(r){const e=r.target.files[0];if(!e)return;const s=new FormData;s.append("csv_file",e);const p=o.isSuperAdmin?route("ontime.import.admin"):route("ontime.import",{tenantSlug:o.tenantSlug});E.post(p,s,{onSuccess:()=>{C.value="Delays imported successfully",r.target.value=""},onError:N=>{console.error(N),r.target.value=""}})}function Ke(){if(o.delays.data.length===0){O.value="No delay data found to export.";return}w.value&&w.value.submit()}const et=U(()=>o.tenantSlug?route("ontime.export",{tenantSlug:o.tenantSlug}):route("ontime.export.admin")),Z=D(!1),tt=U(()=>"/storage/upload-data-temps/Delays Template.csv");return Se(()=>{const r=e=>{Z.value&&!e.target.closest(".relative")&&(Z.value=!1)};document.addEventListener("click",r),ot(()=>{document.removeEventListener("click",r)})}),(r,e)=>(i(),M(pt,{breadcrumbs:V,tenantSlug:c.tenantSlug},{default:a(()=>[l(n(rt),{title:"On-Time"}),t("div",qt,[C.value?(i(),M(n(we),{key:0,variant:"success"},{default:a(()=>[l(n(Ce),null,{default:a(()=>e[32]||(e[32]=[d("Success")])),_:1}),l(n(De),null,{default:a(()=>[d(y(C.value),1)]),_:1})]),_:1})):_("",!0),O.value?(i(),M(n(we),{key:1,variant:"destructive"},{default:a(()=>[l(n(Ce),null,{default:a(()=>e[33]||(e[33]=[d("Error")])),_:1}),l(n(De),null,{default:a(()=>[d(y(O.value),1)]),_:1})]),_:1})):_("",!0),t("div",Ht,[e[39]||(e[39]=t("h1",{class:"text-lg font-bold md:text-xl lg:text-2xl"},"On-Time Management",-1)),t("div",Gt,[l(b,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=s=>xe()),variant:"default"},{default:a(()=>[l(A,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[34]||(e[34]=d(" Add Delay "))]),_:1}),$.value.length>0?(i(),M(b,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=s=>Xe()),variant:"destructive"},{default:a(()=>[l(A,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+y($.value.length)+") ",1)]),_:1})):_("",!0),t("div",Qt,[l(b,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[2]||(e[2]=s=>Z.value=!Z.value),variant:"secondary"},{default:a(()=>[l(A,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Upload CSV ")),l(A,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),Z.value?(i(),u("div",Xt,[t("div",Zt,[t("label",Jt,[e[36]||(e[36]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:Je,accept:".csv"},null,32)]),t("a",{href:tt.value,download:"Delays Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Kt)])])):_("",!0)]),l(b,{class:"px-2 py-0 md:px-4 md:py-2",onClick:he(Ke,["prevent"]),variant:"outline"},{default:a(()=>[l(A,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[37]||(e[37]=d(" Download CSV "))]),_:1}),c.isSuperAdmin?(i(),M(b,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=s=>Me()),variant:"outline"},{default:a(()=>[l(A,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[38]||(e[38]=d(" Manage Delay Codes "))]),_:1})):_("",!0)])]),t("form",{ref_key:"exportForm",ref:w,action:et.value,method:"GET",class:"hidden"},null,8,el),l(n(pe),null,{default:a(()=>[l(n(ye),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[t("div",tl,[t("div",ll,[l(b,{onClick:e[4]||(e[4]=s=>de("yesterday")),variant:"outline",size:"sm",class:K({"border-primary bg-primary/10 text-primary":z.value==="yesterday"})},{default:a(()=>e[40]||(e[40]=[d(" Yesterday ")])),_:1},8,["class"]),l(b,{onClick:e[5]||(e[5]=s=>de("current-week")),variant:"outline",size:"sm",class:K({"border-primary bg-primary/10 text-primary":z.value==="current-week"})},{default:a(()=>e[41]||(e[41]=[d(" WTD ")])),_:1},8,["class"]),l(b,{onClick:e[6]||(e[6]=s=>de("6w")),variant:"outline",size:"sm",class:K({"border-primary bg-primary/10 text-primary":z.value==="6w"})},{default:a(()=>e[42]||(e[42]=[d(" T6W ")])),_:1},8,["class"]),l(b,{onClick:e[7]||(e[7]=s=>de("quarterly")),variant:"outline",size:"sm",class:K({"border-primary bg-primary/10 text-primary":z.value==="quarterly"})},{default:a(()=>e[43]||(e[43]=[d(" Quarterly ")])),_:1},8,["class"])]),c.dateRange?(i(),u("div",sl,[z.value==="yesterday"&&c.dateRange.start?(i(),u("span",al," Showing data from "+y(ie(c.dateRange.start)),1)):c.dateRange.start&&c.dateRange.end?(i(),u("span",ol," Showing data from "+y(ie(c.dateRange.start))+" to "+y(ie(c.dateRange.end)),1)):(i(),u("span",nl,y(c.dateRange.label),1)),x.value?(i(),u("span",rl,"("+y(x.value)+")",1)):_("",!0)])):_("",!0)])]),_:1})]),_:1}),l(n(pe),null,{default:a(()=>[l(n(ct),{class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[t("div",dl,[t("div",il,[l(n(ft),{class:"text-lg md:text-xl lg:text-2xl"},{default:a(()=>e[44]||(e[44]=[d("Filters")])),_:1}),!G.value&&Be.value?(i(),u("div",ul,[g.value.search?(i(),u("div",ml," Search: "+y(g.value.search),1)):_("",!0),g.value.delayCode?(i(),u("div",cl," Code: "+y(Pe(g.value.delayCode)),1)):_("",!0),g.value.delayCategory?(i(),u("div",fl," Category: "+y(be(g.value.delayCategory)),1)):_("",!0),g.value.delayType?(i(),u("div",pl," Type: "+y(g.value.delayType==="origin"?"Origin":"Destination"),1)):_("",!0),g.value.disputed?(i(),u("div",yl," Disputed: "+y(g.value.disputed==="true"?"Yes":"No"),1)):_("",!0),g.value.controllable?(i(),u("div",vl," Driver Controllable: "+y(g.value.controllable==="true"?"Yes":g.value.controllable==="false"?"No":"N/A"),1)):_("",!0)])):_("",!0)]),l(b,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=s=>G.value=!G.value)},{default:a(()=>[d(y(G.value?"Hide Filters":"Show Filters")+" ",1),l(A,{name:G.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),G.value?(i(),M(n(ye),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:a(()=>[t("div",gl,[t("div",xl,[t("div",null,[l(n(T),{for:"search"},{default:a(()=>e[45]||(e[45]=[d("Search")])),_:1}),l(n(ne),{class:"h-9 px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:g.value.search,"onUpdate:modelValue":e[9]||(e[9]=s=>g.value.search=s),type:"text",placeholder:"Search by driver..."},null,8,["modelValue"])]),t("div",null,[l(n(T),{for:"delayCode"},{default:a(()=>e[46]||(e[46]=[d("Delay Code")])),_:1}),j(t("select",{id:"delayCode","onUpdate:modelValue":e[10]||(e[10]=s=>g.value.delayCode=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[47]||(e[47]=t("option",{value:""},"All Codes",-1)),(i(!0),u(k,null,L(c.delay_codes,s=>(i(),u("option",{key:s.id,value:s.id},y(s.code),9,bl))),128))],512),[[B,g.value.delayCode]])]),t("div",null,[l(n(T),{for:"delayCategory"},{default:a(()=>e[48]||(e[48]=[d("Delay Category")])),_:1}),j(t("select",{id:"delayCategory","onUpdate:modelValue":e[11]||(e[11]=s=>g.value.delayCategory=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[49]||(e[49]=[t("option",{value:""},"All Categories",-1),t("option",{value:"1_120"},"1-120 mins",-1),t("option",{value:"121_600"},"121-600 mins",-1),t("option",{value:"601_plus"},"601+ mins",-1)]),512),[[B,g.value.delayCategory]])]),t("div",null,[l(n(T),{for:"delayType"},{default:a(()=>e[50]||(e[50]=[d("Delay Type")])),_:1}),j(t("select",{id:"delayType","onUpdate:modelValue":e[12]||(e[12]=s=>g.value.delayType=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[51]||(e[51]=[t("option",{value:""},"All Types",-1),t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),512),[[B,g.value.delayType]])]),t("div",null,[l(n(T),{for:"disputed"},{default:a(()=>e[52]||(e[52]=[d("Disputed Status")])),_:1}),j(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=s=>g.value.disputed=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[53]||(e[53]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Disputed",-1),t("option",{value:"false"},"Not Disputed",-1)]),512),[[B,g.value.disputed]])]),t("div",null,[l(n(T),{for:"controllable"},{default:a(()=>e[54]||(e[54]=[d("Driver Controllable")])),_:1}),j(t("select",{id:"controllable","onUpdate:modelValue":e[14]||(e[14]=s=>g.value.controllable=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[55]||(e[55]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"NA"},"N/A",-1)]),512),[[B,g.value.controllable]])])]),t("div",_l,[l(b,{onClick:Ne,variant:"ghost",size:"sm"},{default:a(()=>[l(A,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[56]||(e[56]=d(" Reset Filters "))]),_:1}),l(b,{onClick:ge,variant:"default",size:"sm"},{default:a(()=>[l(A,{name:"filter",class:"mr-2 h-4 w-4"}),e[57]||(e[57]=d(" Apply Filters "))]),_:1})])])]),_:1})):_("",!0)]),_:1}),_e.value?_("",!0):(i(),u("div",kl,[l(A,{name:"database-x",class:"mb-4 h-16 w-16 text-muted-foreground"}),e[58]||(e[58]=t("h2",{class:"text-center text-2xl font-bold text-muted-foreground"},"There is No Data to give Information about.",-1))])),_e.value?(i(),u(k,{key:3},[c.isSuperAdmin?_("",!0):(i(),M(It,{key:0,metricsData:Ie.value,driversData:qe.value,chartData:He.value,averageOntime:c.average_ontime,currentDateFilter:o.dateRange.label,delayType:g.value.delayType},null,8,["metricsData","driversData","chartData","averageOntime","currentDateFilter","delayType"])),l(n(pe),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:a(()=>[l(n(ye),{class:"p-0"},{default:a(()=>[t("div",wl,[l(n(it),{class:"relative h-[500px] overflow-auto"},{default:a(()=>[l(n(ut),null,{default:a(()=>[l(n(fe),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:a(()=>[l(n(ue),{class:"w-[50px]"},{default:a(()=>[t("div",Cl,[t("input",{type:"checkbox",onChange:Qe,checked:Ge.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Dl)])]),_:1}),c.isSuperAdmin?(i(),M(n(ue),{key:0},{default:a(()=>e[59]||(e[59]=[d("Company Name")])),_:1})):_("",!0),(i(),u(k,null,L(re,s=>l(n(ue),{key:s,class:"cursor-pointer",onClick:p=>Te(s)},{default:a(()=>[t("div",hl,[s==="delay_category"?(i(),u(k,{key:0},[d(" Delay ")],64)):(i(),u(k,{key:1},[d(y(s.replace(/_/g," ").split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ")),1)],64)),W.value===s?(i(),u("div",Sl,[I.value==="asc"?(i(),u("svg",$l,e[60]||(e[60]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),u("svg",Tl,e[61]||(e[61]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),u("div",Nl,e[62]||(e[62]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),l(n(ue),null,{default:a(()=>e[63]||(e[63]=[d("Actions")])),_:1})]),_:1})]),_:1}),l(n(mt),null,{default:a(()=>[q.value.length===0?(i(),M(n(fe),{key:0},{default:a(()=>[l(n(ee),{colspan:c.isSuperAdmin?re.length+2:re.length+1,class:"py-8 text-center"},{default:a(()=>e[64]||(e[64]=[d(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):_("",!0),(i(!0),u(k,null,L(q.value,s=>(i(),M(n(fe),{key:s.id,class:"hover:bg-muted/50"},{default:a(()=>[l(n(ee),{class:"text-center"},{default:a(()=>[j(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[15]||(e[15]=p=>$.value=p),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Al),[[nt,$.value]])]),_:2},1024),c.isSuperAdmin?(i(),M(n(ee),{key:0},{default:a(()=>{var p;return[d(y(((p=s.tenant)==null?void 0:p.name)||"—"),1)]}),_:2},1024)):_("",!0),(i(),u(k,null,L(re,p=>l(n(ee),{key:p,class:"whitespace-nowrap"},{default:a(()=>{var N,J;return[p==="date"?(i(),u(k,{key:0},[d(y(ie(s[p])),1)],64)):p==="disputed"?(i(),u(k,{key:1},[d(y(s[p]?"Yes":"No"),1)],64)):p==="driver_controllable"?(i(),u(k,{key:2},[d(y(s[p]===null?"N/A":s[p]?"Yes":"No"),1)],64)):p==="delay_code"?(i(),u(k,{key:3},[d(y(((N=s.delay_code)==null?void 0:N.code)||"—")+" ",1),(J=s.delay_code)!=null&&J.deleted_at?(i(),u("span",Fl,"(Deleted Code)")):_("",!0)],64)):p==="delay_category"?(i(),u(k,{key:4},[d(y(be(s.delay_category)),1)],64)):(i(),u(k,{key:5},[d(y(s[p]),1)],64))]}),_:2},1024)),64)),l(n(ee),null,{default:a(()=>[t("div",Ol,[l(b,{onClick:p=>xe(s),variant:"warning",size:"sm"},{default:a(()=>[l(A,{name:"pencil",class:"mr-1 h-4 w-4"}),e[65]||(e[65]=d(" Edit "))]),_:2},1032,["onClick"]),l(b,{onClick:p=>Oe(s.id),variant:"destructive",size:"sm"},{default:a(()=>[l(A,{name:"trash",class:"mr-1 h-4 w-4"}),e[66]||(e[66]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),c.delays.links?(i(),u("div",Ml,[t("div",Ul,[t("div",Vl," Showing "+y(q.value.length)+" of "+y(c.delays.data.length)+" entries ",1),t("div",zl,[t("div",jl,[l(n(T),{for:"perPage",class:"text-sm"},{default:a(()=>e[67]||(e[67]=[d("Per page:")])),_:1}),j(t("select",{id:"perPage","onUpdate:modelValue":e[16]||(e[16]=s=>H.value=s),onChange:Ae,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[68]||(e[68]=[t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),544),[[B,H.value]])]),t("div",Bl,[(i(!0),u(k,null,L(c.delays.links,s=>(i(),M(b,{key:s.label,onClick:p=>Fe(s.url),disabled:!s.url,variant:"ghost",size:"sm",class:K(["mx-1",{"border-primary bg-primary/10 text-primary":s.active}])},{default:a(()=>[t("span",{innerHTML:s.label},null,8,Pl)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):_("",!0)]),_:1})]),_:1})],64)):_("",!0),l(n(te),{open:f.value,"onUpdate:open":e[18]||(e[18]=s=>f.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>[d(y(h.value?"Edit":"Add")+" Delay",1)]),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>[d(" Fill in the details to "+y(h.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),l($t,{delay:h.value,"delay-codes":$e.value,tenants:c.tenants,"is-super-admin":c.isSuperAdmin,"tenant-slug":c.tenantSlug,onClose:e[17]||(e[17]=s=>f.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),l(n(te),{open:F.value,"onUpdate:open":e[22]||(e[22]=s=>F.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[69]||(e[69]=[d("Manage Delay Codes")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>e[70]||(e[70]=[d(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),t("div",El,[t("div",Ll,[e[72]||(e[72]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Delay Codes",-1)),l(b,{onClick:Ue,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:a(()=>[l(A,{name:"plus",class:"mr-1 h-3 w-3 sm:h-3.5 sm:w-3.5"}),e[71]||(e[71]=d(" Add New Code "))]),_:1})]),t("div",Rl,[!c.delay_codes||c.delay_codes.length===0?(i(),u("div",Yl," No delay codes found ")):(i(),u("div",Wl,[(i(!0),u(k,null,L(c.delay_codes,s=>(i(),u("div",{key:s.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:p=>Ve(s)},[t("div",ql,[d(y(s.code)+" ",1),s.deleted_at?(i(),u("span",Hl,"(Deleted)")):_("",!0)]),s.description?(i(),u("div",Gl,y(s.description),1)):_("",!0)],8,Il),t("div",Ql,[c.isSuperAdmin?(i(),u(k,{key:0},[s.deleted_at?(i(),u(k,{key:0},[l(b,{onClick:p=>Re(s.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:a(()=>[l(A,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[73]||(e[73]=d(" Restore "))]),_:2},1032,["onClick"]),l(b,{onClick:p=>Ye(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:a(()=>[l(A,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[74]||(e[74]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(i(),M(b,{key:1,onClick:p=>je(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:a(()=>[l(A,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[75]||(e[75]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):_("",!0)])]))),128))]))]),m.value?(i(),u("div",Xl,[t("h3",Zl,y(v.value?"Edit":"Add")+" Delay Code",1),t("div",Jl,[t("div",null,[l(n(T),{for:"code",class:"text-xs sm:text-sm"},{default:a(()=>e[76]||(e[76]=[d("Code")])),_:1}),l(n(ne),{id:"code",modelValue:R.value.code,"onUpdate:modelValue":e[19]||(e[19]=s=>R.value.code=s),placeholder:"Enter code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[l(n(T),{for:"description",class:"text-xs sm:text-sm"},{default:a(()=>e[77]||(e[77]=[d("Description")])),_:1}),l(n(ne),{id:"description",modelValue:R.value.description,"onUpdate:modelValue":e[20]||(e[20]=s=>R.value.description=s),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",Kl,[l(b,{onClick:ze,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:a(()=>e[78]||(e[78]=[d("Cancel")])),_:1}),l(b,{onClick:Le,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:a(()=>e[79]||(e[79]=[d("Save")])),_:1})])])])):_("",!0)]),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{onClick:e[21]||(e[21]=s=>F.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[80]||(e[80]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(n(te),{open:X.value,"onUpdate:open":e[25]||(e[25]=s=>X.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[81]||(e[81]=[d("Confirm Deletion")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>e[82]||(e[82]=[d(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{type:"button",onClick:e[23]||(e[23]=s=>X.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[83]||(e[83]=[d(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[24]||(e[24]=s=>Ee(ve.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[84]||(e[84]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(n(te),{open:S.value,"onUpdate:open":e[28]||(e[28]=s=>S.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[85]||(e[85]=[d("Confirm Deletion")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>e[86]||(e[86]=[d(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{type:"button",onClick:e[26]||(e[26]=s=>S.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[87]||(e[87]=[d(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[27]||(e[27]=s=>We(Y.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[88]||(e[88]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(n(te),{open:P.value,"onUpdate:open":e[31]||(e[31]=s=>P.value=s)},{default:a(()=>[l(n(le),{class:"max-w-[95vw] sm:max-w-md"},{default:a(()=>[l(n(se),{class:"px-4 sm:px-6"},{default:a(()=>[l(n(ae),{class:"text-lg sm:text-xl"},{default:a(()=>e[89]||(e[89]=[d("Confirm Bulk Deletion")])),_:1}),l(n(oe),{class:"text-xs sm:text-sm"},{default:a(()=>[d(" Are you sure you want to delete "+y($.value.length)+" delay records? This action cannot be undone. ",1)]),_:1})]),_:1}),l(n(me),{class:"px-4 sm:px-6"},{default:a(()=>[l(b,{type:"button",onClick:e[29]||(e[29]=s=>P.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[90]||(e[90]=[d(" Cancel ")])),_:1}),l(b,{type:"button",onClick:e[30]||(e[30]=s=>Ze()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:a(()=>e[91]||(e[91]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{Cs as default};
