import{r as _,c as W,w as Ce,A as Ze,K as et,b as g,e as o,f as s,l,X as r,u as t,k as v,S as d,U as p,P as Ve,L as m,M as C,N as $,D as me,bF as tt,Y as De,b2 as $e}from"./vendor-C-CW143M.js";import{_ as b}from"./Icon.vue_vue_type_script_setup_true_lang-B7IfTNIf.js";import{_ as fe,a as pe,b as j,c as U,d as ve,e as A}from"./TableRow.vue_vue_type_script_setup_true_lang-D19AmMrD.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-B-CPTRto.js";import{_ as G}from"./Card.vue_vue_type_script_setup_true_lang-Cp4wUgFE.js";import{_ as lt}from"./CardHeader.vue_vue_type_script_setup_true_lang-CNgbOXgy.js";import{_ as st}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcA2pWrU.js";import{_ as X}from"./CardContent.vue_vue_type_script_setup_true_lang-DxPj8Tg7.js";import{b as Z,_ as ee,a as te}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DjSCH9m8.js";import{_ as le,a as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BSj40beh.js";import{_ as ce}from"./DialogFooter.vue_vue_type_script_setup_true_lang-RSN6g_4k.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-CZjK18aI.js";import{_ as F}from"./Input.vue_vue_type_script_setup_true_lang-taOxs2kk.js";import{b as xe,_ as ge,a as ye}from"./AlertDescription.vue_vue_type_script_setup_true_lang-Bni7FoRm.js";import{_ as at}from"./AppLayout.vue_vue_type_script_setup_true_lang-D9jrdhXX.js";import{a as rt,x as ae,g as nt,S as ot,W as re}from"./vendor-vue-o4TX1eGc.js";import{E as Fe,a as dt}from"./vendor-icons-Dyo-jBRF.js";import"./utils-CmSxFldp.js";import"./vendor-ui-DUlj4Wsf.js";import"./useInitials-DzeGKvtI.js";import"./app-ChvJRkE5.js";import"./vendor-axios-xsH4HHeE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C-8K70bD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const it={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},ut={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},mt={class:"flex flex-wrap gap-3"},ft={class:"flex flex-col gap-1 md:gap-4"},pt={class:"grid grid-cols-1 sm:grid-cols-3 gap-1 md:gap-4 w-full"},vt={class:"overflow-x-auto"},ct={class:"flex items-center justify-center"},xt=["checked"],gt={class:"flex items-center"},yt={key:0},_t={key:1},wt={key:2,class:"ml-2"},bt={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ht={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},kt={key:3,class:"ml-2 opacity-50"},St=["value"],Ct={key:1,class:"whitespace-nowrap min-w-[70px]"},Vt={class:"flex space-x-2"},Dt={key:0,class:"border-t bg-muted/20 px-4 py-3"},$t={class:"flex flex-col sm:flex-row justify-between items-center gap-2"},Ft={class:"flex items-center gap-4 text-sm text-muted-foreground"},At={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 w-full sm:w-auto"},Et={class:"flex flex-wrap"},Nt=["innerHTML"],Ut={class:"max-h-[80vh] overflow-y-auto pr-2"},Tt={key:0,class:"col-span-2"},Mt=["value"],Pt={class:"sm:col-span-2"},It={class:"sm:col-span-2"},jt={key:0,class:"text-destructive ml-1"},Lt={class:"relative"},Bt={class:"sm:col-span-2"},Rt={class:"sm:col-span-2"},Ht={class:"sm:col-span-2"},zt={class:"sm:col-span-2"},Ot={key:0,class:"mt-2"},Kt=["src"],qt={class:"flex items-center gap-2"},Wt={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},Gt={key:0},Xt={class:"space-y-4"},Yt={class:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20"},Jt={class:"cursor-pointer"},Qt=["disabled"],Zt={class:"flex items-center gap-2 text-sm text-muted-foreground"},el=["href"],tl={key:0,class:"flex items-center justify-center gap-2 p-4"},ll={key:1,class:"space-y-4"},sl={key:0,class:"rounded-lg border p-3"},al={class:"flex items-center justify-between"},rl={class:"text-xs text-muted-foreground"},nl={class:"mt-2 flex flex-wrap gap-2"},ol={class:"grid grid-cols-3 gap-4"},dl={class:"text-2xl font-bold"},il={class:"text-2xl font-bold text-green-600"},ul={class:"text-2xl font-bold text-red-600"},ml={key:2},fl={class:"flex items-center justify-between mb-3"},pl={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},vl={class:"border rounded-lg overflow-hidden"},cl={class:"max-h-96 overflow-y-auto"},xl={class:"flex flex-wrap gap-x-3 gap-y-1"},gl={class:"font-medium text-foreground"},yl={key:0,class:"italic text-muted-foreground"},_l={class:"space-y-1"},wl={key:0,class:"text-xs text-muted-foreground"},bl={key:3},hl={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},kl={class:"border rounded-lg overflow-hidden"},Sl={class:"flex flex-wrap gap-x-3 gap-y-1"},Cl={class:"font-medium"},Vl={key:0,class:"italic text-muted-foreground"},Dl={class:"border-t p-4 flex justify-end gap-3"},$l={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Zl={__name:"Driver",props:{entries:Object,tenantSlug:String,SuperAdmin:Boolean,tenants:Array,permissions:Array},setup(k){const f=k,Ae=_(f.dateFilter||"full"),Y=_(f.perPage||10),V=_([]),H=_(!1),E=_(""),T=_(""),z=_(!1),O=_(!1),ne=_("Create Driver"),L=_("Create"),oe=_(null),de=_(null),K=_("last_name"),B=_("asc"),Ee=rt(),q=_(!1),c=_(null),R=_(!1),M=_(!1),S=_({search:"",dateFrom:"",dateTo:""}),Ne=[{title:f.tenantSlug?"Dashboard":"Admin Dashboard",href:f.tenantSlug?route("dashboard",{tenantSlug:f.tenantSlug}):route("admin.dashboard")},{title:"Drivers",href:f.tenantSlug?route("driver.index",{tenantSlug:f.tenantSlug}):route("driver.index.admin")}];W(()=>{const n=[{accessorKey:"first_name",header:"First Name",cell:e=>e.getValue(),enableSorting:!0},{accessorKey:"last_name",header:"Last Name",cell:e=>e.getValue(),enableSorting:!0},{accessorKey:"email",header:"Email",cell:e=>e.getValue(),enableSorting:!0},{accessorKey:"mobile_phone",header:"Mobile Phone",cell:e=>e.getValue(),enableSorting:!0},{accessorKey:"hiring_date",header:"Hiring Date",cell:e=>he(e.getValue()),enableSorting:!0},{id:"actions",header:"Actions",cell:e=>({driver:e.row.original,edit:()=>_e(e.row.original),delete:()=>be(e.row.original.id)}),enableSorting:!1}];return f.SuperAdmin&&n.unshift({accessorKey:"tenant.name",header:"Company Name",cell:e=>{var a;return((a=e.row.original.tenant)==null?void 0:a.name)??"—"},enableSorting:!0}),n});const J=["first_name","last_name","email","netradyne_user_name","mobile_phone","hiring_date"],i=ae({id:null,first_name:"",last_name:"",email:"",mobile_phone:"",hiring_date:"",netradyne_user_name:"",tenant_id:null,password:"",image:null});ae({csv_file:null});const Q=_(!1),Ue=ae({}),ie=W(()=>{let n=[...f.entries.data];if(S.value.search){const e=S.value.search.toLowerCase();n=n.filter(a=>{var u,x,y;return((u=a.first_name)==null?void 0:u.toLowerCase().includes(e))||((x=a.last_name)==null?void 0:x.toLowerCase().includes(e))||((y=a.email)==null?void 0:y.toLowerCase().includes(e))})}return S.value.dateFrom&&(n=n.filter(e=>e.hiring_date&&e.hiring_date>=S.value.dateFrom)),S.value.dateTo&&(n=n.filter(e=>e.hiring_date&&e.hiring_date<=S.value.dateTo)),n.sort((e,a)=>{let u=e[K.value],x=a[K.value];return u===null?1:x===null?-1:(typeof u=="string"&&(u=u.toLowerCase(),x=x.toLowerCase()),u<x?B.value==="asc"?-1:1:u>x?B.value==="asc"?1:-1:0)}),n});function Te(n){K.value===n?B.value=B.value==="asc"?"desc":"asc":(K.value=n,B.value="asc")}function ue(){}function Me(){S.value={search:"",dateFrom:"",dateTo:""}}function Pe(){i.reset(),i.tenant_id=null,i.netradyne_user_name="",ne.value="Create Driver",L.value="Create",z.value=!0}function _e(n){i.id=n.id,i.first_name=n.first_name,i.last_name=n.last_name,i.email=n.email,i.mobile_phone=n.mobile_phone,i.hiring_date=n.hiring_date,i.tenant_id=n.tenant_id,i.netradyne_user_name=n.netradyne_user_name,i.password=n.password,ne.value="Edit Driver",L.value="Update",n.image?I.value=`/storage/${n.image}`:I.value=null,z.value=!0}function we(){z.value=!1,i.reset(),I.value=null}function Ie(){i.password===void 0&&(i.password=null);const n=new FormData;Object.keys(i.data()).forEach(x=>{x==="image"&&i.image instanceof File?n.append("image",i.image):i[x]!==void 0&&i[x]!==null&&n.append(x,i[x])}),i.id&&n.append("id",i.id);const e=L.value==="Create",a=e?f.SuperAdmin?route("driver.store.admin"):route("driver.store",f.tenantSlug):f.SuperAdmin?route("driver.update.admin",[i.id]):route("driver.update",[f.tenantSlug,i.id]);i["post"](a,{data:n,forceFormData:!0,onSuccess:()=>{T.value=e?"Driver created successfully.":"Driver updated successfully.",we()},onError:x=>{if(console.error("Form submission error:",x),x&&Object.keys(x).length>0){const y=Object.values(x)[0];E.value=y}else E.value="An error occurred. Please try again."}})}function be(n){de.value=n,O.value=!0}function je(){Ue.delete(f.SuperAdmin?route("driver.destroy.admin",[de.value]):route("driver.destroy",[f.tenantSlug,de.value]),{onSuccess:()=>{T.value="Driver deleted.",O.value=!1}})}function Le(){var e,a;if(f.entries.data.length===0){E.value="No data available to export",setTimeout(()=>{E.value=""},3e3);return}const n=f.SuperAdmin?route("driver.export.admin"):route("driver.export",f.tenantSlug);(e=oe.value)==null||e.setAttribute("action",n),(a=oe.value)==null||a.submit()}function Be(n){if(n){const e=new URL(n);e.searchParams.set("perPage",Y.value),re.get(e.href,{},{only:["entries"],preserveState:!0})}}Ce(T,n=>{n&&setTimeout(()=>{T.value=""},5e3)});function he(n){if(!n)return"";const e=n.split("-");if(e.length!==3)return n;const[a,u,x]=e;return`${Number(u)}/${Number(x)}/${a}`}function Re(n){let e=n.target.value.replace(/\D/g,"").slice(0,10),a=e;e.length>6?a=`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`:e.length>3?a=`(${e.slice(0,3)}) ${e.slice(3)}`:e.length>0&&(a=`(${e}`),n.target.value=a,i.mobile_phone=a}function He(){const n=f.tenantSlug?route("driver.index",{tenantSlug:f.tenantSlug}):route("driver.index.admin");re.get(n,{dateFilter:Ae.value,perPage:Y.value},{preserveState:!0})}const ze=W(()=>ie.value.length>0&&V.value.length===ie.value.length);function Oe(n){n.target.checked?V.value=f.entries.data.map(e=>e.id):V.value=[]}function Ke(){V.value.length>0&&(H.value=!0)}function qe(){const n=ae({ids:V.value}),e=f.SuperAdmin?"driver.destroyBulk.admin":"driver.destroyBulk",a=f.SuperAdmin?{}:{tenantSlug:f.tenantSlug};n.delete(route(e,a),{preserveScroll:!0,onSuccess:()=>{T.value=`${V.value.length} driver records deleted successfully.`,V.value=[],H.value=!1},onError:u=>{console.error(u)}})}const ke=_(!1),We=W(()=>"/storage/upload-data-temps/Drivers Template.csv");Ze(()=>{const n=e=>{ke.value&&!e.target.closest(".relative")&&(ke.value=!1)};document.addEventListener("click",n),et(()=>{document.removeEventListener("click",n)})});const h=W(()=>f.permissions.map(n=>n.name)),I=_(null);function Ge(n){const e=n.target.files[0];if(e){i.image=e;const a=new FileReader;a.onload=u=>{I.value=u.target.result},a.readAsDataURL(e)}else i.image=null,I.value=null}function Xe(n){var y;const e=n.target,a=(y=e.files)==null?void 0:y[0];if(!a)return;R.value=!0;const u=new FormData;u.append("file",a);const x=f.tenantSlug?route("driver.validateImport",{tenantSlug:f.tenantSlug}):route("driver.validateImport.admin");re.post(x,u,{forceFormData:!0,preserveScroll:!0,only:["flash"],onFinish:()=>{R.value=!1},onError:()=>{R.value=!1,E.value="Failed to validate CSV file"}}),e.value=""}function Ye(){if(!c.value||c.value.summary.invalid>0)return;M.value=!0;const n=f.tenantSlug?route("driver.confirmImport",{tenantSlug:f.tenantSlug}):route("driver.confirmImport.admin");re.post(n,{},{preserveScroll:!0,onSuccess:()=>{M.value=!1,T.value=`Successfully imported ${c.value.summary.valid} drivers`,Se()},onError:()=>{M.value=!1,E.value="Failed to import drivers"}})}function Je(){const n=f.tenantSlug?route("driver.downloadErrorReport",{tenantSlug:f.tenantSlug}):route("driver.downloadErrorReport.admin");window.location.href=n}function Se(){q.value=!1,c.value=null,R.value=!1,M.value=!1}return Ce(()=>{var n;return(n=Ee.props.flash)==null?void 0:n.importValidation},n=>{if(n){if(n.results){c.value=n.results,n.header_error&&(c.value.header_error=n.header_error),q.value=!0;return}n.message&&(E.value=n.message)}},{immediate:!0}),(n,e)=>(o(),g(at,{breadcrumbs:Ne,tenantSlug:k.tenantSlug,permissions:f.permissions},{default:s(()=>[l(t(nt),{title:"Drivers"}),r("div",it,[T.value?(o(),g(t(xe),{key:0,variant:"success"},{default:s(()=>[l(t(ge),null,{default:s(()=>e[23]||(e[23]=[d("Success")])),_:1}),l(t(ye),null,{default:s(()=>[d(p(T.value),1)]),_:1})]),_:1})):v("",!0),E.value?(o(),g(t(xe),{key:1,variant:"destructive"},{default:s(()=>[l(t(ge),null,{default:s(()=>e[24]||(e[24]=[d("Error")])),_:1}),l(t(ye),null,{default:s(()=>[d(p(E.value),1)]),_:1})]),_:1})):v("",!0),r("div",ut,[e[28]||(e[28]=r("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold"},"Driver Management",-1)),r("div",mt,[h.value.includes("drivers.create")?(o(),g(t(w),{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:Pe,variant:"default"},{default:s(()=>[l(b,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[25]||(e[25]=d(" Create New Driver "))]),_:1})):v("",!0),V.value.length>0&&h.value.includes("drivers.delete")?(o(),g(t(w),{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=a=>Ke()),variant:"destructive"},{default:s(()=>[l(b,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+p(V.value.length)+") ",1)]),_:1})):v("",!0),h.value.includes("drivers.import")?(o(),g(t(w),{key:2,onClick:e[1]||(e[1]=a=>q.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:s(()=>[l(b,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[26]||(e[26]=d(" Import CSV "))]),_:1})):v("",!0),h.value.includes("drivers.export")?(o(),g(t(w),{key:3,class:"px-2 py-0 md:px-4 md:py-2",onClick:Ve(Le,["prevent"]),variant:"outline"},{default:s(()=>[l(b,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[27]||(e[27]=d(" Download CSV "))]),_:1})):v("",!0)])]),l(t(G),null,{default:s(()=>[l(t(lt),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(st),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[29]||(e[29]=[d("Filters")])),_:1})]),_:1}),l(t(X),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[r("div",ft,[r("div",pt,[r("div",null,[l(t(D),{for:"search"},{default:s(()=>e[30]||(e[30]=[d("Search")])),_:1}),l(t(F),{class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10",id:"search",modelValue:S.value.search,"onUpdate:modelValue":e[2]||(e[2]=a=>S.value.search=a),type:"text",placeholder:"Search by name or email...",onInput:ue},null,8,["modelValue"])]),r("div",null,[l(t(D),{for:"dateFrom"},{default:s(()=>e[31]||(e[31]=[d("Hiring Date From")])),_:1}),l(t(F),{class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10",id:"dateFrom",modelValue:S.value.dateFrom,"onUpdate:modelValue":e[3]||(e[3]=a=>S.value.dateFrom=a),type:"date",onChange:ue},null,8,["modelValue"])]),r("div",null,[l(t(D),{for:"dateTo"},{default:s(()=>e[32]||(e[32]=[d("Hiring Date To")])),_:1}),l(t(F),{class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10",id:"dateTo",modelValue:S.value.dateTo,"onUpdate:modelValue":e[4]||(e[4]=a=>S.value.dateTo=a),type:"date",onChange:ue},null,8,["modelValue"])])]),l(t(w),{onClick:Me,variant:"ghost",size:"sm"},{default:s(()=>[l(b,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[33]||(e[33]=d(" Reset "))]),_:1})])]),_:1})]),_:1}),l(t(G),{class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto"},{default:s(()=>[l(t(X),{class:"p-0"},{default:s(()=>[r("div",vt,[l(t(fe),{class:"relative h-[600px] overflow-auto"},{default:s(()=>[l(t(pe),null,{default:s(()=>[l(t(j),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:s(()=>[h.value.includes("drivers.delete")?(o(),g(t(U),{key:0,class:"w-[50px]"},{default:s(()=>[r("div",ct,[r("input",{type:"checkbox",onChange:Oe,checked:ze.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,xt)])]),_:1})):v("",!0),k.SuperAdmin?(o(),g(t(U),{key:1},{default:s(()=>e[34]||(e[34]=[d("Company Name")])),_:1})):v("",!0),(o(),m(C,null,$(J,a=>l(t(U),{key:a,class:"cursor-pointer",onClick:u=>Te(a)},{default:s(()=>[r("div",gt,[a==="hiring_date"?(o(),m("div",yt,"Hire Date")):(o(),m("div",_t,p(a.replace(/_/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ")),1)),K.value===a?(o(),m("div",wt,[B.value==="asc"?(o(),m("svg",bt,e[35]||(e[35]=[r("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(o(),m("svg",ht,e[36]||(e[36]=[r("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(o(),m("div",kt,e[37]||(e[37]=[r("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"M8 10l4-4 4 4"}),r("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),h.value.includes("drivers.view")||h.value.includes("drivers.update")||h.value.includes("drivers.delete")?(o(),g(t(U),{key:2},{default:s(()=>e[38]||(e[38]=[d(" Actions ")])),_:1})):v("",!0)]),_:1})]),_:1}),l(t(ve),null,{default:s(()=>[k.entries.data.length===0?(o(),g(t(j),{key:0},{default:s(()=>[l(t(A),{colspan:k.SuperAdmin?J.length+3:J.length+2,class:"py-8 text-center"},{default:s(()=>e[39]||(e[39]=[d(" No driver records found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):v("",!0),(o(!0),m(C,null,$(k.entries.data,a=>(o(),g(t(j),{key:a.id},{default:s(()=>[h.value.includes("drivers.delete")?(o(),g(t(A),{key:0,class:"text-center"},{default:s(()=>[me(r("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[5]||(e[5]=u=>V.value=u),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,St),[[tt,V.value]])]),_:2},1024)):v("",!0),k.SuperAdmin?(o(),g(t(A),{key:1},{default:s(()=>{var u;return[d(p(((u=a.tenant)==null?void 0:u.name)??"—"),1)]}),_:2},1024)):v("",!0),(o(),m(C,null,$(J,u=>l(t(A),{key:u},{default:s(()=>[u==="hiring_date"?(o(),m(C,{key:0},[d(p(he(a[u])),1)],64)):u==="mobile_phone"?(o(),m("div",Ct,p(a[u]),1)):(o(),m(C,{key:2},[d(p(a[u]),1)],64))]),_:2},1024)),64)),h.value.includes("drivers.profile.view")||h.value.includes("drivers.update")||h.value.includes("drivers.delete")?(o(),g(t(A),{key:2},{default:s(()=>[r("div",Vt,[h.value.includes("drivers.profile.view")?(o(),g(t(ot),{key:0,href:k.tenantSlug?n.route("driver.show",[k.tenantSlug,a.id]):n.route("driver.show.admin",a.id),class:"flex items-center gap-1"},{default:s(()=>[l(t(w),{variant:"default",size:"sm",class:"flex items-center gap-1"},{default:s(()=>[l(t(Fe),{class:"h-4 w-4"}),e[40]||(e[40]=r("span",null,"View",-1))]),_:1})]),_:2},1032,["href"])):v("",!0),h.value.includes("drivers.update")?(o(),g(t(w),{key:1,onClick:u=>_e(a),variant:"warning",size:"sm"},{default:s(()=>[l(b,{name:"pencil",class:"mr-1 h-4 w-4"}),e[41]||(e[41]=d(" Edit "))]),_:2},1032,["onClick"])):v("",!0),h.value.includes("drivers.delete")?(o(),g(t(w),{key:2,onClick:u=>be(a.id),variant:"destructive",size:"sm"},{default:s(()=>[l(b,{name:"trash",class:"mr-1 h-4 w-4"}),e[42]||(e[42]=d(" Delete "))]),_:2},1032,["onClick"])):v("",!0)])]),_:2},1024)):v("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),k.entries.links?(o(),m("div",Dt,[r("div",$t,[r("div",Ft,[r("span",null,"Showing "+p(ie.value.length)+" of "+p(k.entries.data.length)+" entries",1),r("div",At,[e[44]||(e[44]=r("span",{class:"text-sm"},"Show:",-1)),me(r("select",{id:"perPage","onUpdate:modelValue":e[6]||(e[6]=a=>Y.value=a),onChange:He,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[43]||(e[43]=[r("option",{value:"10"},"10",-1),r("option",{value:"25"},"25",-1),r("option",{value:"50"},"50",-1),r("option",{value:"100"},"100",-1)]),544),[[De,Y.value]])])]),r("div",Et,[(o(!0),m(C,null,$(k.entries.links,a=>(o(),g(t(w),{key:a.label,onClick:u=>Be(a.url),disabled:!a.url,variant:"ghost",size:"sm",class:$e(["mx-1",{"border-primary bg-primary/10 text-primary":a.active}])},{default:s(()=>[r("span",{innerHTML:a.label},null,8,Nt)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):v("",!0)]),_:1})]),_:1}),l(t(Z),{open:z.value,"onUpdate:open":e[16]||(e[16]=a=>z.value=a)},{default:s(()=>[l(t(ee),{class:"sm:max-w-4xl max-w-[95vw] mx-auto p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(le),{class:"space-y-1 md:space-y-2"},{default:s(()=>[l(t(se),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>[d(p(ne.value),1)]),_:1}),l(t(te),{class:"text-sm md:text-base"},{default:s(()=>[d(" Fill in the details to "+p(L.value.toLowerCase())+" a driver. ",1)]),_:1})]),_:1}),r("div",Ut,[r("form",{onSubmit:Ve(Ie,["prevent"]),class:"grid grid-cols-1 gap-2 md:gap-4 sm:grid-cols-2 mt-2 md:mt-4"},[k.SuperAdmin?(o(),m("div",Tt,[l(t(D),{for:"tenant",class:"text-sm md:text-base"},{default:s(()=>e[45]||(e[45]=[d("Company")])),_:1}),me(r("select",{id:"tenant","onUpdate:modelValue":e[7]||(e[7]=a=>t(i).tenant_id=a),class:"flex h-8 md:h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-2 md:px-3 py-1 md:py-2 text-xs md:text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[46]||(e[46]=r("option",{value:""},"Select Company",-1)),(o(!0),m(C,null,$(k.tenants,a=>(o(),m("option",{key:a.id,value:a.id},p(a.name),9,Mt))),128))],512),[[De,t(i).tenant_id]])])):v("",!0),r("div",null,[l(t(D),{for:"first_name",class:"text-sm md:text-base"},{default:s(()=>e[47]||(e[47]=[d("First Name")])),_:1}),l(t(F),{id:"first_name",modelValue:t(i).first_name,"onUpdate:modelValue":e[8]||(e[8]=a=>t(i).first_name=a),type:"text",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),r("div",null,[l(t(D),{for:"last_name",class:"text-sm md:text-base"},{default:s(()=>e[48]||(e[48]=[d("Last Name")])),_:1}),l(t(F),{id:"last_name",modelValue:t(i).last_name,"onUpdate:modelValue":e[9]||(e[9]=a=>t(i).last_name=a),type:"text",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),r("div",Pt,[l(t(D),{for:"email",class:"text-sm md:text-base"},{default:s(()=>e[49]||(e[49]=[d("Email Address")])),_:1}),l(t(F),{id:"email",modelValue:t(i).email,"onUpdate:modelValue":e[10]||(e[10]=a=>t(i).email=a),type:"email",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),r("div",It,[l(t(D),{for:"password",class:"flex items-center"},{default:s(()=>[e[50]||(e[50]=r("span",null,"Password",-1)),L.value==="Create"?(o(),m("span",jt,"*")):v("",!0)]),_:1}),r("div",Lt,[l(t(F),{id:"password",modelValue:t(i).password,"onUpdate:modelValue":e[11]||(e[11]=a=>t(i).password=a),type:Q.value?"text":"password",placeholder:"Enter password",class:$e(["w-full pr-10",{"border-destructive":t(i).errors.password}])},null,8,["modelValue","type","class"]),r("button",{type:"button",onClick:e[12]||(e[12]=a=>Q.value=!Q.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[Q.value?(o(),g(t(dt),{key:1,class:"h-5 w-5"})):(o(),g(t(Fe),{key:0,class:"h-5 w-5"}))])])]),r("div",Bt,[l(t(D),{for:"netradyne_user_name",class:"text-sm md:text-base"},{default:s(()=>e[51]||(e[51]=[d("Netradyne User Name")])),_:1}),l(t(F),{id:"netradyne_user_name",modelValue:t(i).netradyne_user_name,"onUpdate:modelValue":e[13]||(e[13]=a=>t(i).netradyne_user_name=a),type:"text",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),r("div",Rt,[l(t(D),{for:"mobile_phone",class:"text-sm md:text-base"},{default:s(()=>e[52]||(e[52]=[d("Mobile Phone Number")])),_:1}),l(t(F),{id:"mobile_phone",modelValue:t(i).mobile_phone,"onUpdate:modelValue":e[14]||(e[14]=a=>t(i).mobile_phone=a),type:"tel",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2",onInput:Re},null,8,["modelValue"])]),r("div",Ht,[l(t(D),{for:"hiring_date",class:"text-sm md:text-base"},{default:s(()=>e[53]||(e[53]=[d("Hiring Date")])),_:1}),l(t(F),{id:"hiring_date",modelValue:t(i).hiring_date,"onUpdate:modelValue":e[15]||(e[15]=a=>t(i).hiring_date=a),type:"date",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),r("div",zt,[l(t(D),{for:"image",class:"text-sm md:text-base"},{default:s(()=>e[54]||(e[54]=[d("Driver Image")])),_:1}),l(t(F),{id:"image",type:"file",accept:"image/*",onChange:Ge,class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"}),I.value?(o(),m("div",Ot,[r("img",{src:I.value,alt:"Image Preview",class:"h-24 w-24 object-cover rounded-md"},null,8,Kt)])):v("",!0)]),l(t(ce),{class:"col-span-2 mt-4 flex flex-col sm:flex-row gap-2 sm:gap-4 justify-end"},{default:s(()=>[l(t(w),{type:"button",onClick:we,variant:"outline",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[55]||(e[55]=[d("Cancel")])),_:1}),l(t(w),{type:"submit",variant:"default",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>[d(p(L.value),1)]),_:1})]),_:1})],32)])]),_:1})]),_:1},8,["open"]),l(t(Z),{open:O.value,"onUpdate:open":e[18]||(e[18]=a=>O.value=a)},{default:s(()=>[l(t(ee),{class:"max-w-[95vw] sm:max-w-md mx-auto p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(le),{class:"space-y-1 md:space-y-2"},{default:s(()=>[l(t(se),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[56]||(e[56]=[d("Confirm Deletion")])),_:1}),l(t(te),{class:"text-sm md:text-base"},{default:s(()=>e[57]||(e[57]=[d(" Are you sure you want to delete this driver? This action cannot be undone. ")])),_:1})]),_:1}),l(t(ce),{class:"mt-2 md:mt-4 flex flex-col sm:flex-row gap-2 sm:gap-4 justify-end"},{default:s(()=>[l(t(w),{type:"button",onClick:e[17]||(e[17]=a=>O.value=!1),variant:"outline",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[58]||(e[58]=[d(" Cancel ")])),_:1}),l(t(w),{type:"button",onClick:je,variant:"destructive",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[59]||(e[59]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(t(Z),{open:H.value,"onUpdate:open":e[21]||(e[21]=a=>H.value=a)},{default:s(()=>[l(t(ee),{class:"max-w-[95vw] sm:max-w-md mx-auto p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(le),{class:"space-y-1 md:space-y-2"},{default:s(()=>[l(t(se),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[60]||(e[60]=[d("Confirm Bulk Deletion")])),_:1}),l(t(te),{class:"text-sm md:text-base"},{default:s(()=>[d(" Are you sure you want to delete "+p(V.value.length)+" driver records? This action cannot be undone. ",1)]),_:1})]),_:1}),l(t(ce),{class:"mt-2 md:mt-4 flex flex-col sm:flex-row gap-2 sm:gap-4 justify-end"},{default:s(()=>[l(t(w),{type:"button",onClick:e[19]||(e[19]=a=>H.value=!1),variant:"outline",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[61]||(e[61]=[d(" Cancel ")])),_:1}),l(t(w),{type:"button",onClick:e[20]||(e[20]=a=>qe()),variant:"destructive",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[62]||(e[62]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),r("form",{ref_key:"exportForm",ref:oe,method:"GET",class:"hidden"},null,512)]),l(t(Z),{open:q.value,"onUpdate:open":e[22]||(e[22]=a=>q.value=a)},{default:s(()=>[l(t(ee),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:s(()=>{var a,u,x;return[l(t(le),{class:"px-4 sm:px-6 border-b pb-3"},{default:s(()=>[r("div",qt,[l(b,{name:"upload",class:"h-5 w-5 text-primary"}),l(t(se),{class:"text-lg sm:text-xl font-semibold"},{default:s(()=>e[63]||(e[63]=[d(" Import Drivers ")])),_:1})]),l(t(te),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:s(()=>e[64]||(e[64]=[d(" Upload a CSV file to import drivers. The file will be validated before import. ")])),_:1})]),_:1}),r("div",Wt,[c.value?(o(),m("div",ll,[(a=c.value.headers)!=null&&a.length?(o(),m("div",sl,[r("div",al,[e[68]||(e[68]=r("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),r("div",rl,p(c.value.headers.length)+" columns ",1)]),r("div",nl,[(o(!0),m(C,null,$(c.value.headers,y=>(o(),m("span",{key:y,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},p(y),1))),128))])])):v("",!0),r("div",ol,[l(t(G),{class:"border-2"},{default:s(()=>[l(t(X),{class:"p-4 text-center"},{default:s(()=>[r("div",dl,p(c.value.summary.total),1),e[69]||(e[69]=r("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),l(t(G),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:s(()=>[l(t(X),{class:"p-4 text-center"},{default:s(()=>[r("div",il,p(c.value.summary.valid),1),e[70]||(e[70]=r("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),l(t(G),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:s(()=>[l(t(X),{class:"p-4 text-center"},{default:s(()=>[r("div",ul,p(c.value.summary.invalid),1),e[71]||(e[71]=r("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),c.value.header_error?(o(),g(t(xe),{key:1,variant:"destructive"},{default:s(()=>[l(t(ge),{class:"flex items-center gap-2"},{default:s(()=>[l(b,{name:"alert_circle",class:"h-5 w-5"}),e[72]||(e[72]=d(" Header Error "))]),_:1}),l(t(ye),null,{default:s(()=>[d(p(c.value.header_error),1)]),_:1})]),_:1})):v("",!0),(u=c.value.invalid)!=null&&u.length?(o(),m("div",ml,[r("div",fl,[r("h3",pl,[l(b,{name:"alert-triangle",class:"h-5 w-5"}),d(" Validation Errors ("+p(c.value.invalid.length)+") ",1)]),l(t(w),{onClick:Je,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:s(()=>[l(b,{name:"download",class:"h-4 w-4"}),e[73]||(e[73]=d(" Download Error Report "))]),_:1})]),r("div",vl,[r("div",cl,[l(t(fe),null,{default:s(()=>[l(t(pe),{class:"sticky top-0 bg-background"},{default:s(()=>[l(t(j),null,{default:s(()=>[l(t(U),{class:"w-20"},{default:s(()=>e[74]||(e[74]=[d("Row #")])),_:1}),l(t(U),null,{default:s(()=>e[75]||(e[75]=[d("Preview")])),_:1}),l(t(U),null,{default:s(()=>e[76]||(e[76]=[d("Errors")])),_:1})]),_:1})]),_:1}),l(t(ve),null,{default:s(()=>[(o(!0),m(C,null,$(c.value.invalid,y=>(o(),g(t(j),{key:y.rowNumber,class:"hover:bg-muted/50"},{default:s(()=>[l(t(A),{class:"font-medium"},{default:s(()=>[d(p(y.rowNumber),1)]),_:2},1024),l(t(A),{class:"text-sm text-muted-foreground"},{default:s(()=>{var P;return[r("div",xl,[(o(!0),m(C,null,$(y.preview||[],N=>(o(),m("span",{key:N.key,class:"whitespace-nowrap"},[r("span",gl,p(N.label)+":",1),d(" "+p(N.value),1)]))),128)),(P=y.preview)!=null&&P.length?v("",!0):(o(),m("span",yl,"—"))])]}),_:2},1024),l(t(A),null,{default:s(()=>{var P;return[r("div",_l,[(o(!0),m(C,null,$(y.errors||[],(N,Qe)=>(o(),m("div",{key:Qe,class:"text-xs text-red-600 flex items-start gap-1"},[l(b,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),r("span",null,p(N),1)]))),128)),(P=y.errors)!=null&&P.length?v("",!0):(o(),m("div",wl," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):v("",!0),(x=c.value.valid)!=null&&x.length?(o(),m("div",bl,[r("h3",hl,[l(b,{name:"check-circle",class:"h-5 w-5"}),d(" Valid Rows ("+p(c.value.valid.length)+") ",1)]),e[79]||(e[79]=r("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),r("div",kl,[l(t(fe),null,{default:s(()=>[l(t(pe),null,{default:s(()=>[l(t(j),null,{default:s(()=>[l(t(U),null,{default:s(()=>e[77]||(e[77]=[d("Row #")])),_:1}),l(t(U),null,{default:s(()=>e[78]||(e[78]=[d("Preview")])),_:1})]),_:1})]),_:1}),l(t(ve),null,{default:s(()=>[(o(!0),m(C,null,$(c.value.valid.slice(0,5),y=>(o(),g(t(j),{key:y.rowNumber},{default:s(()=>[l(t(A),{class:"font-medium"},{default:s(()=>[d(p(y.rowNumber),1)]),_:2},1024),l(t(A),{class:"text-sm"},{default:s(()=>{var P;return[r("div",Sl,[(o(!0),m(C,null,$(y.preview||[],N=>(o(),m("span",{key:N.key,class:"whitespace-nowrap"},[r("span",Cl,p(N.label)+":",1),d(" "+p(N.value),1)]))),128)),(P=y.preview)!=null&&P.length?v("",!0):(o(),m("span",Vl,"—"))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):v("",!0)])):(o(),m("div",Gt,[r("div",Xt,[r("div",Yt,[l(b,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),r("label",Jt,[e[65]||(e[65]=r("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),r("input",{type:"file",class:"hidden",onChange:Xe,accept:".csv,.txt",disabled:R.value},null,40,Qt)]),e[66]||(e[66]=r("p",{class:"text-xs text-muted-foreground mt-2"},"or drag and drop",-1))]),r("div",Zt,[l(b,{name:"info",class:"h-4 w-4"}),r("a",{href:We.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,el)]),R.value?(o(),m("div",tl,e[67]||(e[67]=[r("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),r("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):v("",!0)])]))]),r("div",Dl,[l(t(w),{onClick:Se,variant:"outline",disabled:M.value},{default:s(()=>e[80]||(e[80]=[d(" Close ")])),_:1},8,["disabled"]),c.value&&c.value.summary.valid>0?(o(),g(t(w),{key:0,onClick:Ye,variant:"default",disabled:M.value||c.value.summary.invalid>0||!!c.value.header_error,class:"flex items-center gap-2"},{default:s(()=>[M.value?(o(),m("div",$l)):(o(),g(b,{key:1,name:"check",class:"h-4 w-4"})),d(" "+p(M.value?"Importing...":`Import ${c.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):v("",!0)])]}),_:1})]),_:1},8,["open"])]),_:1},8,["tenantSlug","permissions"]))}};export{Zl as default};
