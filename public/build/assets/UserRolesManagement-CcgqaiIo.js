import{d as Y,r,c as C,F as U,e as c,z as e,u as s,f as n,X as t,b as A,E as x,ah as w,H as Z}from"./vendor-Bl7QtHDZ.js";import{g as ee}from"./vendor-vue-CegDyOO_.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-B3VuTBxW.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-DqmS51Fd.js";import{_ as M}from"./Button.vue_vue_type_script_setup_true_lang-CmY1RpaM.js";import{_ as te,a as le,b as ne,c as oe,d as re,e as de,f as ie}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BSDx9TXJ.js";import{_ as R}from"./Card.vue_vue_type_script_setup_true_lang-1bmPyW_M.js";import{_ as z}from"./CardContent.vue_vue_type_script_setup_true_lang-OyO0HbpV.js";import{_ as j}from"./CardHeader.vue_vue_type_script_setup_true_lang-ClIdJ-mv.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-XdmNMyNj.js";import{_ as ue}from"./Separator.vue_vue_type_script_setup_true_lang-xzyxXuy0.js";import{k as me,U as ce,h as B,d as fe,B as pe}from"./vendor-icons-coAGW0bc.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-DnnPsXYS.js";import"./vendor-ui-B_LrUle4.js";import"./Icon.vue_vue_type_script_setup_true_lang-BJi62zlW.js";import"./useInitials-DzeGKvtI.js";import"./app-CPpeenTW.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BGaPs1OX.js";import"./Badge.vue_vue_type_script_setup_true_lang-DAxI-zSb.js";import"./Label.vue_vue_type_script_setup_true_lang-B8UEvjKs.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-C-_iCp7E.js";import"./InputError.vue_vue_type_script_setup_true_lang-Ci2qZJu3.js";const _e={class:"container w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},xe={class:"relative max-w-md"},ge={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},be={class:"flex items-center space-x-2"},ye={class:"flex items-center space-x-2"},we={class:"flex items-center space-x-2"},he={class:"fixed inset-0 z-[100]"},ke={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Se={key:0,class:"fixed inset-0 z-[100]"},$e={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Ce={key:0,class:"fixed inset-0 z-[100]"},Ue={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Ae=Y({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(f){const d=f,{tenantSlug:o}=d,E=[{title:o?"Dashboard":"Admin Dashboard",href:o?`/${o}/dashboard`:"/dashboard"},{title:"User Management",href:o?`/${o}/admin/user-management`:"/admin/user-management"}],g=r(d.search||""),p=r(!1),v=r(!1),_=r(!1),h=r(null),k=r(null),S=r(null),u=d.SuperAdmin,i=r(!1),b=r(""),y=r(""),L=C(()=>{if(!g.value.trim())return d.users;const l=g.value.toLowerCase(),a=d.users.data.filter(m=>m.name.toLowerCase().includes(l)||m.email.toLowerCase().includes(l));return{...d.users,data:a}}),N=()=>{h.value=null,p.value=!0},O=()=>{p.value=!1},F=()=>{S.value=null,_.value=!0},T=()=>{_.value=!1},H=()=>{k.value=null,v.value=!0},V=()=>{v.value=!1},I=l=>{h.value=l,p.value=!0},P=l=>{S.value=l,_.value=!0},X=l=>{k.value=l,v.value=!0},q=l=>{b.value=u?route("admin.users.destroy",l):route("users.destroy",[o,l]),y.value=`Are you sure you want to delete user ${l.name}?`,i.value=!0},G=l=>{b.value=u?route("admin.roles.destroy",l):route("roles.destroy",[o,l]),y.value=`Are you sure you want to delete role ${l.name}?`,i.value=!0},J=l=>{b.value=route("admin.tenants.destroy",l),y.value=`Are you sure you want to delete tenant ${l.name}?`,i.value=!0},K=()=>{i.value=!1},$=()=>{v.value=!1,p.value=!1,_.value=!1},Q=C(()=>d.roles.data),W=C(()=>d.tenants.data);return(l,a)=>(c(),U(Z,null,[e(s(ee),{title:"Users Management"}),e(se,{breadcrumbs:E,tenantSlug:s(o),permissions:d.permissions},{default:n(()=>[t("div",_e,[a[9]||(a[9]=t("div",{class:"space-y-2"},[t("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100"}," User and Role Management "),t("p",{class:"text-gray-500 dark:text-gray-400"}," Manage users, roles, and permissions for your application. ")],-1)),e(s(ue)),t("div",xe,[t("div",ge,[e(s(me),{class:"h-5 w-5 text-gray-400"})]),e(ae,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=m=>g.value=m),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])]),e(s(R),null,{default:n(()=>[e(s(j),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:n(()=>[e(s(D),{class:"text-xl font-semibold"},{default:n(()=>[t("div",be,[e(s(ce),{class:"h-5 w-5"}),a[3]||(a[3]=t("span",null,"Users",-1))])]),_:1}),e(M,{onClick:N,variant:"default",size:"sm",class:"gap-1"},{default:n(()=>[e(s(B),{class:"h-4 w-4"}),a[4]||(a[4]=t("span",null,"Add User",-1))]),_:1})]),_:1}),e(s(z),{class:"p-2 md:p-4 lg:p-6"},{default:n(()=>[e(te,{users:L.value,isSuperAdmin:s(u),onEdit:I,onDelete:q},null,8,["users","isSuperAdmin"])]),_:1})]),_:1}),e(s(R),null,{default:n(()=>[e(s(j),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:n(()=>[e(s(D),{class:"text-xl font-semibold"},{default:n(()=>[t("div",ye,[e(s(fe),{class:"h-5 w-5"}),a[5]||(a[5]=t("span",null,"Roles",-1))])]),_:1}),e(M,{onClick:H,variant:"default",size:"sm",class:"gap-1"},{default:n(()=>[e(s(B),{class:"h-4 w-4"}),a[6]||(a[6]=t("span",null,"Add Role",-1))]),_:1})]),_:1}),e(s(z),{class:"p-2 md:p-4 lg:p-6"},{default:n(()=>[e(le,{roles:f.roles,onEdit:X,onDelete:G},null,8,["roles"])]),_:1})]),_:1}),s(u)?(c(),A(s(R),{key:0},{default:n(()=>[e(s(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:n(()=>[e(s(D),{class:"text-xl font-semibold"},{default:n(()=>[t("div",we,[e(s(pe),{class:"h-5 w-5"}),a[7]||(a[7]=t("span",null,"Companies",-1))])]),_:1}),e(M,{onClick:F,variant:"default",size:"sm",class:"gap-1"},{default:n(()=>[e(s(B),{class:"h-4 w-4"}),a[8]||(a[8]=t("span",null,"Add Company",-1))]),_:1})]),_:1}),e(s(z),null,{default:n(()=>[e(ne,{tenants:f.tenants,onEdit:P,onDelete:J},null,8,["tenants"])]),_:1})]),_:1})):x("",!0),e(w,{name:"fade"},{default:n(()=>[p.value?(c(),A(oe,{key:0,user:h.value,roles:Q.value,permissions:f.permissions,tenants:W.value,isSuperAdmin:s(u),tenantSlug:s(o),onClose:O,onSaved:$},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])):x("",!0)]),_:1}),_.value?(c(),A(w,{key:1,name:"fade"},{default:n(()=>[t("div",he,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:T}),t("div",ke,[e(re,{tenant:S.value,onClose:T,onSaved:$,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-lg md:max-w-xl overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["tenant"])])])]),_:1})):x("",!0),e(w,{name:"fade"},{default:n(()=>[v.value?(c(),U("div",Se,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:V}),t("div",$e,[e(de,{role:k.value,permissions:f.permissions,isSuperAdmin:s(u),tenantSlug:s(o),onClose:V,onSaved:$,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-lg md:max-w-xl overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["role","permissions","isSuperAdmin","tenantSlug"])])])):x("",!0)]),_:1}),e(w,{name:"fade"},{default:n(()=>[i.value?(c(),U("div",Ce,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:a[1]||(a[1]=m=>i.value=!1)}),t("div",Ue,[e(ie,{deleteUrl:b.value,message:y.value,tenantSlug:s(o),onCancel:a[2]||(a[2]=m=>i.value=!1),onConfirmed:K,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-md overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["deleteUrl","message","tenantSlug"])])])):x("",!0)]),_:1})])]),_:1},8,["tenantSlug","permissions"])],64))}}),Ze=ve(Ae,[["__scopeId","data-v-eedeece1"]]);export{Ze as default};
