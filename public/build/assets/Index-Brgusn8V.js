import{e as tt,w as ce,H as m,i,X as t,G as k,B as a,j as o,O as d,E as z,Y as L,u as s,J as D,K as P,P as y,I as Se,a as M,a3 as lt,r as C,A as $e,aj as at,f as N,W as ot,ak as Z,al as nt}from"./vendor-DQlNQ5gH.js";import{x as ee,g as st,W as R}from"./vendor-vue-CQn6KzTb.js";import{_ as rt}from"./AppLayout.vue_vue_type_script_setup_true_lang-D9csWvt1.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-B-8911bK.js";import{_ as ne,a as se,b as re,c as de,d as ie}from"./DialogTitle.vue_vue_type_script_setup_true_lang-8PZA7eJT.js";import{_ as me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CJ4mwW2I.js";import{_ as $,a as H}from"./Label.vue_vue_type_script_setup_true_lang-BRq5T-WA.js";import{_ as dt}from"./Checkbox.vue_vue_type_script_setup_true_lang-BXBwirKi.js";import{_ as A}from"./Icon.vue_vue_type_script_setup_true_lang-D_7hXODg.js";import{_ as it,a as ut,b as pe,c as ve,d as ft,e as ue}from"./TableRow.vue_vue_type_script_setup_true_lang-tbX_6Hnu.js";import{_ as ye}from"./Card.vue_vue_type_script_setup_true_lang-yOexdr0W.js";import{_ as mt}from"./CardHeader.vue_vue_type_script_setup_true_lang-BXftwvVe.js";import{_ as vt}from"./CardTitle.vue_vue_type_script_setup_true_lang-OH7QXspQ.js";import{_ as ge}from"./CardContent.vue_vue_type_script_setup_true_lang-Dh-7LYTR.js";import{_ as Ce,a as we,b as De}from"./AlertDescription.vue_vue_type_script_setup_true_lang-DGF9dqnu.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-D2wO_Ovf.js";import"./vendor-ui-CGEGZLyF.js";import"./app-DDaNJLMX.js";import"./vendor-icons-pKobgiP0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BpTGIYrD.js";const ct={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},pt={key:0,class:"col-span-full"},yt={class:"relative"},gt=["value"],bt={class:"col-span-full"},_t={class:"relative"},xt={class:"relative"},kt={class:"relative"},Ct=["value"],wt={class:"relative"},Dt={class:"flex items-center space-x-2"},St={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},$t=tt({__name:"DelayForm",props:{delay:{type:Object,default:null},delayCodes:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(p,{emit:r}){var T,w,F,j,W,h,E;const b=p,V=r,c=ee({id:(T=b.delay)==null?void 0:T.id,tenant_id:b.isSuperAdmin?(w=b.delay)==null?void 0:w.tenant_id:null,date:((F=b.delay)==null?void 0:F.date)||"",driver_name:((j=b.delay)==null?void 0:j.driver_name)||"",delay_type:((W=b.delay)==null?void 0:W.delay_type)||"origin",delay_category:((h=b.delay)==null?void 0:h.delay_category)||"1_120",delay_code_id:((E=b.delay)==null?void 0:E.delay_code_id)||null,disputed:b.delay&&b.delay.disputed!==null?parseInt(b.delay.disputed)===1:!1,driver_controllable:b.delay&&b.delay.driver_controllable!==null?parseInt(b.delay.driver_controllable)===1:null});ce(()=>b.delay,x=>{x?(c.id=x.id,c.tenant_id=x.tenant_id,c.date=x.date,c.driver_name=x.driver_name,c.delay_type=x.delay_type,c.delay_category=x.delay_category,c.delay_code_id=x.delay_code_id,c.disputed=x.disputed!==null?parseInt(x.disputed)===1:!1,c.driver_controllable=x.driver_controllable!==null?parseInt(x.driver_controllable)===1:null):c.reset()},{immediate:!0});const O=()=>{const x=!!c.id,u=b.isSuperAdmin?x?"ontime.update.admin":"ontime.store.admin":x?"ontime.update":"ontime.store",g=b.isSuperAdmin?x?{delay:c.id}:{}:x?{tenantSlug:b.tenantSlug,delay:c.id}:{tenantSlug:b.tenantSlug};c[x?"put":"post"](route(u,g),{onSuccess:()=>V("close")})};return(x,u)=>(i(),m("form",{onSubmit:Se(O,["prevent"]),class:"space-y-6"},[t("div",ct,[p.isSuperAdmin?(i(),m("div",pt,[a($,null,{default:o(()=>u[9]||(u[9]=[d("Company Name")])),_:1}),t("div",yt,[z(t("select",{"onUpdate:modelValue":u[0]||(u[0]=g=>s(c).tenant_id=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[u[10]||(u[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),m(D,null,P(p.tenants,g=>(i(),m("option",{key:g.id,value:g.id},y(g.name),9,gt))),128))],512),[[L,s(c).tenant_id]]),u[11]||(u[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):k("",!0),t("div",bt,[a($,null,{default:o(()=>u[12]||(u[12]=[d("Date")])),_:1}),a(H,{type:"date",modelValue:s(c).date,"onUpdate:modelValue":u[1]||(u[1]=g=>s(c).date=g),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a($,null,{default:o(()=>u[13]||(u[13]=[d("Driver Name")])),_:1}),a(H,{modelValue:s(c).driver_name,"onUpdate:modelValue":u[2]||(u[2]=g=>s(c).driver_name=g),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a($,null,{default:o(()=>u[14]||(u[14]=[d("Delay Type")])),_:1}),t("div",_t,[z(t("select",{"onUpdate:modelValue":u[3]||(u[3]=g=>s(c).delay_type=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[15]||(u[15]=[t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),512),[[L,s(c).delay_type]]),u[16]||(u[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a($,null,{default:o(()=>u[17]||(u[17]=[d("Delay Category")])),_:1}),t("div",xt,[z(t("select",{"onUpdate:modelValue":u[4]||(u[4]=g=>s(c).delay_category=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[18]||(u[18]=[t("option",{value:"1_120"},"1–120 min",-1),t("option",{value:"121_600"},"121–600 min",-1),t("option",{value:"601_plus"},"601+ min",-1)]),512),[[L,s(c).delay_category]]),u[19]||(u[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a($,null,{default:o(()=>u[20]||(u[20]=[d("Delay Code")])),_:1}),t("div",kt,[z(t("select",{"onUpdate:modelValue":u[5]||(u[5]=g=>s(c).delay_code_id=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),m(D,null,P(p.delayCodes,g=>(i(),m("option",{key:g.id,value:g.id},y(g.code),9,Ct))),128))],512),[[L,s(c).delay_code_id]]),u[21]||(u[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a($,null,{default:o(()=>u[22]||(u[22]=[d("Driver Controllable")])),_:1}),t("div",wt,[z(t("select",{"onUpdate:modelValue":u[6]||(u[6]=g=>s(c).driver_controllable=g),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},u[23]||(u[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[L,s(c).driver_controllable]]),u[24]||(u[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",Dt,[a(dt,{checked:s(c).disputed,"onUpdate:checked":u[7]||(u[7]=g=>s(c).disputed=g),id:"disputed"},null,8,["checked"]),a($,{for:"disputed"},{default:o(()=>u[25]||(u[25]=[d("Disputed")])),_:1})])]),t("div",St,[a(_,{type:"button",onClick:u[8]||(u[8]=g=>V("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>u[26]||(u[26]=[d(" Cancel ")])),_:1}),a(_,{type:"submit",disabled:s(c).processing,class:"w-full sm:w-auto"},{default:o(()=>[d(y(s(c).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),ht={class:"bg-background rounded-lg border shadow-sm p-4 flex flex-col items-center justify-center"},Tt={class:"text-base font-semibold mb-2 text-foreground"},At={class:"text-2xl font-bold text-primary"},Nt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(p){const r=p,b=M(()=>r.value===null||r.value===void 0||r.value===""?"No Data":r.value);return(V,c)=>(i(),m("div",ht,[t("h3",Tt,y(p.title),1),t("p",At,y(b.value),1)]))}},Ft={class:"bg-background rounded-lg border shadow-sm p-4"},Mt={class:"text-base font-semibold mb-4"},Vt={class:"space-y-3"},Ot={class:"text-sm"},Ut={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]}},setup(p){const r=b=>["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"][b]||"#6b7280";return(b,V)=>(i(),m("div",Ft,[t("h3",Mt,y(p.title),1),t("div",Vt,[(i(!0),m(D,null,P(p.drivers,(c,O)=>(i(),m("div",{key:O,class:"flex justify-between items-center"},[t("span",Ot,y(c.driver_name),1),t("span",{class:"text-sm font-medium",style:lt({color:r(O)})},y(c.total_penalty),5)]))),128))])]))}},zt={class:"bg-background rounded-lg border shadow-sm p-4"},jt={class:"text-base font-semibold mb-4"},Bt={class:"h-64"},Lt={__name:"LineChart",props:{title:{type:String,default:"On-Time Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageOntime:{type:Number,default:null}},setup(p){const r=p,b=C(null);let V=null;const c=()=>{if(V&&V.destroy(),!b.value)return;const O=b.value.getContext("2d"),T=[];r.chartData.datasets.forEach(x=>{x.data&&x.data.length&&T.push(...x.data)});const w=T.length>0?Math.min(...T):0,F=T.length>0?Math.max(...T):100,j=F-w,W=j*.1,h=Math.max(0,w-W),E=F+W;V=new at(O,{type:"line",data:r.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(x){const u=x.raw||0,g=r.averageOntime||0,B=r.chartData.dateRangeLabel||"selected period",q=Number(g).toFixed(2);return[`On-Time Score: ${u}`,`Average Score Over ${B}: ${q}`]}}}},scales:{y:{beginAtZero:!(w>10),min:Math.max(Math.floor(h-2.5),0),max:Math.min(Math.ceil(E+2.5),100),ticks:{stepSize:Math.ceil(j/5)}}}}})};return $e(()=>{c()}),ce(()=>r.chartData,()=>{c()},{deep:!0}),(O,T)=>(i(),m("div",zt,[t("h3",jt,y(p.title),1),t("div",Bt,[t("canvas",{ref_key:"chartCanvas",ref:b},null,512)])]))}},Et={class:"space-y-6"},Pt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Rt={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},Wt={__name:"OnTimeDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageOntime:{type:Number,default:null}},setup(p){const r=p,b=M(()=>r.metricsData&&r.metricsData.by_category?[{title:"Total Delayed Stops",value:r.metricsData.totalDelays},{title:"Delayed for +601 Minutes",value:r.metricsData.moreThan601Count},{title:"Delayed for 121-600 Minutes",value:r.metricsData.between121_600Count},{title:"Delayed for 1-120 Minutes",value:r.metricsData.between1_120Count}]:[]),V=M(()=>r.driversData&&r.driversData.length?r.driversData:[]),c=M(()=>r.chartData&&Object.keys(r.chartData).length?r.chartData:{});return(O,T)=>(i(),m("div",Et,[t("div",Pt,[(i(!0),m(D,null,P(b.value,(w,F)=>(i(),N(Nt,{key:F,title:w.title,value:w.value},null,8,["title","value"]))),128))]),t("div",Rt,[a(Ut,{title:"Bottom 5 Drivers",drivers:V.value,class:"lg:col-span-1"},null,8,["drivers"]),a(Lt,{title:"On-Time Score",chartData:c.value,averageOntime:p.averageOntime,class:"lg:col-span-3"},null,8,["chartData","averageOntime"])])]))}},It={class:"max-w-7xl mx-auto p-6 space-y-8"},Yt={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},qt={class:"flex flex-wrap gap-3"},Ht={class:"relative"},Gt={key:0,class:"absolute right-0 mt-1 w-48 bg-background rounded-md shadow-lg border z-10"},Jt={class:"py-1"},Kt={class:"cursor-pointer block px-4 py-2 text-sm hover:bg-muted"},Qt=["href"],Xt=["action"],Zt={class:"flex flex-col gap-2"},el={class:"flex flex-wrap gap-2"},tl={key:0,class:"text-sm text-muted-foreground"},ll={key:0},al={key:1},ol={key:2},nl={key:3,class:"ml-1"},sl={class:"flex justify-between items-center"},rl={class:"flex items-center gap-2"},dl={key:0,class:"flex flex-wrap gap-2 ml-4"},il={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ul={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},fl={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ml={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},vl={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cl={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},pl={key:6,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},yl={key:7,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},gl={class:"flex flex-col justify-between gap-4"},bl={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full"},_l=["value"],xl={class:"flex justify-end"},kl={class:"overflow-x-auto"},Cl={class:"flex items-center justify-center"},wl=["checked"],Dl={class:"flex items-center"},Sl={key:2,class:"ml-2"},$l={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},hl={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Tl={key:3,class:"ml-2 opacity-50"},Al=["value"],Nl={key:0,class:"ml-1 text-xs text-red-500"},Fl={class:"flex space-x-2"},Ml={key:0,class:"bg-muted/20 px-4 py-3 border-t"},Vl={class:"flex justify-between items-center"},Ol={class:"text-sm text-muted-foreground"},Ul={class:"flex items-center gap-4"},zl={class:"flex items-center gap-2"},jl={class:"flex"},Bl=["innerHTML"],Ll={class:"mt-4 space-y-4"},El={class:"flex items-center justify-between"},Pl={class:"max-h-[400px] overflow-y-auto"},Rl={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},Wl={key:1,class:"space-y-2"},Il=["onClick"],Yl={class:"font-medium"},ql={key:0,class:"ml-2 text-xs text-red-500"},Hl={key:0,class:"text-sm text-muted-foreground mt-1"},Gl={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Jl={key:0,class:"border rounded-md p-4 space-y-4"},Kl={class:"text-sm font-medium"},Ql={class:"space-y-3"},Xl={class:"flex justify-end space-x-2"},xa={__name:"Index",props:{delays:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},delay_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},delay_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_ontime:{type:Number}},setup(p){const r=p,b=M(()=>(U.value==="yesterday"||U.value==="current-week")&&r.weekNumber&&r.year?`Week ${r.weekNumber}, ${r.year}`:(U.value==="6w"||U.value==="quarterly")&&r.startWeekNumber&&r.endWeekNumber&&r.year?`Weeks ${r.startWeekNumber}-${r.endWeekNumber}, ${r.year}`:""),V=[{title:r.tenantSlug?"Dashboard":"Admin Dashboard",href:r.tenantSlug?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")},{title:"On-Time",href:r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin")}],c=C(!1),O=C(!1),T=C(null),w=C(""),F=C(""),j=C(!1),W=C(null),h=C([]),E=C(!1),x=C(null),u=C(!1),g=C(null),B=C({code:"",description:""}),q=C(!1),be=C(null),G=C("date"),J=C("desc"),f=C({search:"",dateFrom:"",dateTo:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",controllable:""}),fe=["date","delay_type","driver_name","delay_category","delay_code","disputed","driver_controllable"],K=M(()=>{let n=[...r.delays.data];if(f.value.search){const e=f.value.search.toLowerCase();n=n.filter(l=>{var v,S,Y,oe;return((v=l.driver_name)==null?void 0:v.toLowerCase().includes(e))||((S=l.delay_type)==null?void 0:S.toLowerCase().includes(e))||((oe=(Y=l.delay_code)==null?void 0:Y.code)==null?void 0:oe.toLowerCase().includes(e))})}if(f.value.dateFrom&&(n=n.filter(e=>e.date&&e.date>=f.value.dateFrom)),f.value.dateTo&&(n=n.filter(e=>e.date&&e.date<=f.value.dateTo)),f.value.delayCode&&(n=n.filter(e=>{var l;return((l=e.delay_code)==null?void 0:l.id)===parseInt(f.value.delayCode)})),f.value.delayType&&(n=n.filter(e=>e.delay_type===f.value.delayType)),f.value.delayCategory&&(n=n.filter(e=>e.delay_category===f.value.delayCategory)),f.value.disputed!==""){const e=f.value.disputed==="true";n=n.filter(l=>l.disputed===e)}if(f.value.controllable!=="")if(f.value.controllable==="null")n=n.filter(e=>e.driver_controllable===null);else{const e=f.value.controllable==="true";n=n.filter(l=>l.driver_controllable===e)}return n.sort((e,l)=>{var Y,oe;let v,S;return G.value==="delay_code"?(v=((Y=e.delay_code)==null?void 0:Y.code)||"",S=((oe=l.delay_code)==null?void 0:oe.code)||""):(v=e[G.value],S=l[G.value]),v===null?1:S===null?-1:(typeof v=="string"&&(v=v.toLowerCase(),S=S.toLowerCase()),v<S?J.value==="asc"?-1:1:v>S?J.value==="asc"?1:-1:0)}),n}),he=M(()=>r.delay_codes.filter(n=>!n.deleted_at));function Te(n){G.value===n?J.value=J.value==="asc"?"desc":"asc":(G.value=n,J.value="asc")}function I(){}function Ae(){f.value={search:"",dateFrom:"",dateTo:"",delayCode:"",delayCategory:"",delayType:"",disputed:"",controllable:""}}const te=C(r.delays.per_page||10),U=C(r.dateFilter||"full");function Ne(){const n=r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin");R.get(n,{dateFilter:U.value,perPage:te.value},{preserveState:!0})}function le(n){U.value=n;const e=r.tenantSlug?route("ontime.index",{tenantSlug:r.tenantSlug}):route("ontime.index.admin");R.get(e,{dateFilter:n,perPage:te.value},{preserveState:!0})}function Fe(n){if(n){const e=new URL(n);e.searchParams.set("perPage",te.value),R.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["delays"]})}}function Q(n){if(!n)return"";const e=n.split("-");if(e.length!==3)return n;const[l,v,S]=e;return`${Number(v)}/${Number(S)}/${l}`}const _e=(n=null)=>{T.value=n,c.value=!0},Me=n=>{W.value=n,j.value=!0},Ve=()=>{O.value=!0,u.value=!1,g.value=null},Oe=()=>{B.value={code:"",description:""},g.value=null,u.value=!0},Ue=n=>{B.value={code:n.code,description:n.description||""},g.value=n.id,u.value=!0},ze=()=>{u.value=!1,g.value=null},xe=n=>{be.value=n,q.value=!0},X=C(!1),je=M(()=>f.value.search||f.value.dateFrom||f.value.dateTo||f.value.delayCode||f.value.delayCategory||f.value.disputed||f.value.delayType||f.value.controllable),Be=n=>{if(!n)return"";const e=r.delay_codes.find(l=>l.id===parseInt(n));return e?e.code:""},Le=async n=>{try{await R.delete(route("delay_codes.destroy.admin",n),{onSuccess:()=>{q.value=!1,w.value="Delay code deleted successfully"}})}catch(e){console.error("Error deleting delay code:",e)}};function ke(n){if(!n)return"—";switch(n){case"1_120":return"1-120 mins";case"121_600":return"121-600 mins";case"601_plus":return"601+ mins";default:return n}}const Ee=()=>{const n=ee({code:B.value.code,description:B.value.description}),e=g.value?r.isSuperAdmin?"delay_codes.update.admin":"delay_codes.update":r.isSuperAdmin?"delay_codes.store.admin":"delay_codes.store",l=g.value?r.isSuperAdmin?{id:g.value}:{tenantSlug:r.tenantSlug,id:g.value}:r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};(g.value?n.put:n.post).call(n,route(e,l),{onSuccess:()=>{w.value=g.value?"Delay code updated successfully.":"Delay code created successfully.",u.value=!1,g.value=null,R.reload({only:["delay_codes"]})},onError:S=>{console.error(S)}})},Pe=n=>{ee({}).post(route(r.isSuperAdmin?"delay_codes.restore.admin":"delay_codes.restore",{id:n}),{onSuccess:()=>{w.value="Delay code restored successfully.",R.reload({only:["delay_codes"]})},onError:l=>{console.error(l)}})},Re=n=>{ee({}).delete(route(r.isSuperAdmin?"delay_codes.forceDelete.admin":"delay_codes.forceDelete",{id:n}),{onSuccess:()=>{w.value="Delay code permanently deleted successfully.",R.reload({only:["delay_codes"]})},onError:l=>{console.error(l)}})},We=n=>{const e=ee({}),l=r.isSuperAdmin?"ontime.destroy.admin":"ontime.destroy",v=r.isSuperAdmin?{delay:n}:{tenantSlug:r.tenantSlug,delay:n};e.delete(route(l,v),{preserveScroll:!0,onSuccess:()=>{w.value="Delay record deleted successfully.",j.value=!1}})};ce(w,n=>{n&&setTimeout(()=>{w.value=""},5e3)}),r.flash&&r.flash.error&&(F.value=r.flash.error),ce(F,n=>{n&&setTimeout(()=>{F.value=""},5e3)});const Ie=M(()=>{var l;if(!((l=r.delay_breakdown)!=null&&l.by_category))return null;const n=r.delay_breakdown.by_category,e=f.value.delayType;return e?{between1_120Count:n[`category_1_120_${e}_count`]||"0",between121_600Count:n[`category_121_600_${e}_count`]||"0",moreThan601Count:n[`category_601_plus_${e}_count`]||"0",totalDelays:n[`total_${e}_delays`]||"0",by_category:!0}:{between1_120Count:n.category_1_120_count||"0",between121_600Count:n.category_121_600_count||"0",moreThan601Count:n.category_601_plus_count||"0",totalDelays:n.total_delays||"0",by_category:!0}}),Ye=M(()=>{var n;return((n=r.delay_breakdown)==null?void 0:n.bottom_five_drivers)||[]}),qe=M(()=>!r.line_chart_data||r.line_chart_data.length===0?{labels:[],datasets:[{label:"On-Time Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}:{labels:r.line_chart_data.map(n=>n.date),datasets:[{label:"On-Time Performance",data:r.line_chart_data.map(n=>n.onTimePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!1}]}),He=M(()=>K.value.length>0&&h.value.length===K.value.length);function Ge(n){n.target.checked?h.value=K.value.map(e=>e.id):h.value=[]}function Je(){h.value.length>0&&(E.value=!0)}function Ke(){const n=ee({ids:h.value}),e=r.isSuperAdmin?"ontime.destroyBulk.admin":"ontime.destroyBulk",l=r.isSuperAdmin?{}:{tenantSlug:r.tenantSlug};n.delete(route(e,l),{preserveScroll:!0,onSuccess:()=>{w.value=`${h.value.length} delay records deleted successfully.`,h.value=[],E.value=!1,R.reload()},onError:v=>{console.error(v)}})}function Qe(n){const e=n.target.files[0];if(!e)return;const l=new FormData;l.append("csv_file",e);const v=r.isSuperAdmin?route("ontime.import.admin"):route("ontime.import",{tenantSlug:r.tenantSlug});R.post(v,l,{onSuccess:()=>{w.value="Delays imported successfully",n.target.value=""},onError:S=>{console.error(S),n.target.value=""}})}function Xe(){if(r.delays.data.length===0){F.value="No delay data found to export.";return}x.value&&x.value.submit()}const Ze=M(()=>r.tenantSlug?route("ontime.export",{tenantSlug:r.tenantSlug}):route("ontime.export.admin")),ae=C(!1),et=M(()=>"/storage/upload-data-temps/Delays Template.csv");return $e(()=>{const n=e=>{ae.value&&!e.target.closest(".relative")&&(ae.value=!1)};document.addEventListener("click",n),ot(()=>{document.removeEventListener("click",n)})}),(n,e)=>(i(),N(rt,{breadcrumbs:V,tenantSlug:p.tenantSlug},{default:o(()=>[a(s(st),{title:"On-Time"}),t("div",It,[w.value?(i(),N(s(Ce),{key:0,variant:"success"},{default:o(()=>[a(s(we),null,{default:o(()=>e[35]||(e[35]=[d("Success")])),_:1}),a(s(De),null,{default:o(()=>[d(y(w.value),1)]),_:1})]),_:1})):k("",!0),F.value?(i(),N(s(Ce),{key:1,variant:"destructive"},{default:o(()=>[a(s(we),null,{default:o(()=>e[36]||(e[36]=[d("Error")])),_:1}),a(s(De),null,{default:o(()=>[d(y(F.value),1)]),_:1})]),_:1})):k("",!0),t("div",Yt,[e[42]||(e[42]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"On-Time Management",-1)),t("div",qt,[a(_,{onClick:e[0]||(e[0]=l=>_e()),variant:"default"},{default:o(()=>[a(A,{name:"plus",class:"mr-2 h-4 w-4"}),e[37]||(e[37]=d(" Add Delay "))]),_:1}),h.value.length>0?(i(),N(_,{key:0,onClick:e[1]||(e[1]=l=>Je()),variant:"destructive"},{default:o(()=>[a(A,{name:"trash",class:"mr-2 h-4 w-4"}),d(" Delete Selected ("+y(h.value.length)+") ",1)]),_:1})):k("",!0),t("div",Ht,[a(_,{onClick:e[2]||(e[2]=l=>ae.value=!ae.value),variant:"secondary"},{default:o(()=>[a(A,{name:"upload",class:"mr-2 h-4 w-4"}),e[38]||(e[38]=d(" Upload CSV ")),a(A,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),ae.value?(i(),m("div",Gt,[t("div",Jt,[t("label",Kt,[e[39]||(e[39]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:Qe,accept:".csv"},null,32)]),t("a",{href:et.value,download:"Delays Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Qt)])])):k("",!0)]),a(_,{onClick:Se(Xe,["prevent"]),variant:"outline"},{default:o(()=>[a(A,{name:"download",class:"mr-2 h-4 w-4"}),e[40]||(e[40]=d(" Download CSV "))]),_:1}),p.isSuperAdmin?(i(),N(_,{key:1,onClick:e[3]||(e[3]=l=>Ve()),variant:"outline"},{default:o(()=>[a(A,{name:"settings",class:"mr-2 h-4 w-4"}),e[41]||(e[41]=d(" Manage Delay Codes "))]),_:1})):k("",!0)])]),t("form",{ref_key:"exportForm",ref:x,action:Ze.value,method:"GET",class:"hidden"},null,8,Xt),a(s(ye),null,{default:o(()=>[a(s(ge),{class:"p-4"},{default:o(()=>[t("div",Zt,[t("div",el,[a(_,{onClick:e[4]||(e[4]=l=>le("yesterday")),variant:"outline",size:"sm",class:Z({"bg-primary/10 text-primary border-primary":U.value==="yesterday"})},{default:o(()=>e[43]||(e[43]=[d(" Yesterday ")])),_:1},8,["class"]),a(_,{onClick:e[5]||(e[5]=l=>le("current-week")),variant:"outline",size:"sm",class:Z({"bg-primary/10 text-primary border-primary":U.value==="current-week"})},{default:o(()=>e[44]||(e[44]=[d(" WTD ")])),_:1},8,["class"]),a(_,{onClick:e[6]||(e[6]=l=>le("6w")),variant:"outline",size:"sm",class:Z({"bg-primary/10 text-primary border-primary":U.value==="6w"})},{default:o(()=>e[45]||(e[45]=[d(" T6W ")])),_:1},8,["class"]),a(_,{onClick:e[7]||(e[7]=l=>le("quarterly")),variant:"outline",size:"sm",class:Z({"bg-primary/10 text-primary border-primary":U.value==="quarterly"})},{default:o(()=>e[46]||(e[46]=[d(" Quarterly ")])),_:1},8,["class"]),a(_,{onClick:e[8]||(e[8]=l=>le("full")),variant:"outline",size:"sm",class:Z({"bg-primary/10 text-primary border-primary":U.value==="full"})},{default:o(()=>e[47]||(e[47]=[d(" Full ")])),_:1},8,["class"])]),p.dateRange?(i(),m("div",tl,[U.value==="yesterday"&&p.dateRange.start?(i(),m("span",ll," Showing data from "+y(Q(p.dateRange.start)),1)):p.dateRange.start&&p.dateRange.end?(i(),m("span",al," Showing data from "+y(Q(p.dateRange.start))+" to "+y(Q(p.dateRange.end)),1)):(i(),m("span",ol,y(p.dateRange.label),1)),b.value?(i(),m("span",nl,"("+y(b.value)+")",1)):k("",!0)])):k("",!0)])]),_:1})]),_:1}),a(s(ye),null,{default:o(()=>[a(s(mt),{class:"pb-2"},{default:o(()=>[t("div",sl,[t("div",rl,[a(s(vt),null,{default:o(()=>e[48]||(e[48]=[d("Filters")])),_:1}),!X.value&&je.value?(i(),m("div",dl,[f.value.search?(i(),m("div",il," Search: "+y(f.value.search),1)):k("",!0),f.value.dateFrom?(i(),m("div",ul," From: "+y(Q(f.value.dateFrom)),1)):k("",!0),f.value.dateTo?(i(),m("div",fl," To: "+y(Q(f.value.dateTo)),1)):k("",!0),f.value.delayCode?(i(),m("div",ml," Code: "+y(Be(f.value.delayCode)),1)):k("",!0),f.value.delayCategory?(i(),m("div",vl," Category: "+y(ke(f.value.delayCategory)),1)):k("",!0),f.value.delayType?(i(),m("div",cl," Type: "+y(f.value.delayType==="origin"?"Origin":"Destination"),1)):k("",!0),f.value.disputed?(i(),m("div",pl," Disputed: "+y(f.value.disputed==="true"?"Yes":"No"),1)):k("",!0),f.value.controllable?(i(),m("div",yl," Driver Controllable: "+y(f.value.controllable==="true"?"Yes":f.value.controllable==="false"?"No":"N/A"),1)):k("",!0)])):k("",!0)]),a(_,{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=l=>X.value=!X.value)},{default:o(()=>[d(y(X.value?"Hide Filters":"Show Filters")+" ",1),a(A,{name:X.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),X.value?(i(),N(s(ge),{key:0,class:"pt-2"},{default:o(()=>[t("div",gl,[t("div",bl,[t("div",null,[a(s($),{for:"search"},{default:o(()=>e[49]||(e[49]=[d("Search")])),_:1}),a(s(H),{id:"search",modelValue:f.value.search,"onUpdate:modelValue":e[10]||(e[10]=l=>f.value.search=l),type:"text",placeholder:"Search by driver or type...",onInput:I},null,8,["modelValue"])]),t("div",null,[a(s($),{for:"dateFrom"},{default:o(()=>e[50]||(e[50]=[d("Date From")])),_:1}),a(s(H),{id:"dateFrom",modelValue:f.value.dateFrom,"onUpdate:modelValue":e[11]||(e[11]=l=>f.value.dateFrom=l),type:"date",onChange:I},null,8,["modelValue"])]),t("div",null,[a(s($),{for:"dateTo"},{default:o(()=>e[51]||(e[51]=[d("Date To")])),_:1}),a(s(H),{id:"dateTo",modelValue:f.value.dateTo,"onUpdate:modelValue":e[12]||(e[12]=l=>f.value.dateTo=l),type:"date",onChange:I},null,8,["modelValue"])]),t("div",null,[a(s($),{for:"delayCode"},{default:o(()=>e[52]||(e[52]=[d("Delay Code")])),_:1}),z(t("select",{id:"delayCode","onUpdate:modelValue":e[13]||(e[13]=l=>f.value.delayCode=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[53]||(e[53]=t("option",{value:""},"All Codes",-1)),(i(!0),m(D,null,P(p.delay_codes,l=>(i(),m("option",{key:l.id,value:l.id},y(l.code),9,_l))),128))],544),[[L,f.value.delayCode]])]),t("div",null,[a(s($),{for:"delayCategory"},{default:o(()=>e[54]||(e[54]=[d("Delay Category")])),_:1}),z(t("select",{id:"delayCategory","onUpdate:modelValue":e[14]||(e[14]=l=>f.value.delayCategory=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[55]||(e[55]=[t("option",{value:""},"All Categories",-1),t("option",{value:"1_120"},"1-120 mins",-1),t("option",{value:"121_600"},"121-600 mins",-1),t("option",{value:"601_plus"},"601+ mins",-1)]),544),[[L,f.value.delayCategory]])]),t("div",null,[a(s($),{for:"delayType"},{default:o(()=>e[56]||(e[56]=[d("Delay Type")])),_:1}),z(t("select",{id:"delayType","onUpdate:modelValue":e[15]||(e[15]=l=>f.value.delayType=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[57]||(e[57]=[t("option",{value:""},"All Types",-1),t("option",{value:"origin"},"Origin",-1),t("option",{value:"destination"},"Destination",-1)]),544),[[L,f.value.delayType]])]),t("div",null,[a(s($),{for:"disputed"},{default:o(()=>e[58]||(e[58]=[d("Disputed Status")])),_:1}),z(t("select",{id:"disputed","onUpdate:modelValue":e[16]||(e[16]=l=>f.value.disputed=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[59]||(e[59]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Disputed",-1),t("option",{value:"false"},"Not Disputed",-1)]),544),[[L,f.value.disputed]])]),t("div",null,[a(s($),{for:"controllable"},{default:o(()=>e[60]||(e[60]=[d("Driver Controllable")])),_:1}),z(t("select",{id:"controllable","onUpdate:modelValue":e[17]||(e[17]=l=>f.value.controllable=l),onChange:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[61]||(e[61]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"null"},"N/A",-1)]),544),[[L,f.value.controllable]])])]),t("div",xl,[a(_,{onClick:Ae,variant:"ghost",size:"sm"},{default:o(()=>[a(A,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[62]||(e[62]=d(" Reset Filters "))]),_:1})])])]),_:1})):k("",!0)]),_:1}),p.isSuperAdmin?k("",!0):(i(),N(Wt,{key:2,metricsData:Ie.value,driversData:Ye.value,chartData:qe.value,averageOntime:p.average_ontime},null,8,["metricsData","driversData","chartData","averageOntime"])),a(s(ye),null,{default:o(()=>[a(s(ge),{class:"p-0"},{default:o(()=>[t("div",kl,[a(s(it),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[a(s(ut),null,{default:o(()=>[a(s(pe),{class:"sticky top-0 bg-background border-b z-10 hover:bg-background"},{default:o(()=>[a(s(ve),{class:"w-[50px]"},{default:o(()=>[t("div",Cl,[t("input",{type:"checkbox",onChange:Ge,checked:He.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,wl)])]),_:1}),p.isSuperAdmin?(i(),N(s(ve),{key:0},{default:o(()=>e[63]||(e[63]=[d("Company Name")])),_:1})):k("",!0),(i(),m(D,null,P(fe,l=>a(s(ve),{key:l,class:"cursor-pointer",onClick:v=>Te(l)},{default:o(()=>[t("div",Dl,[l==="delay_category"?(i(),m(D,{key:0},[d(" Delay ")],64)):(i(),m(D,{key:1},[d(y(l.replace(/_/g," ").split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" ")),1)],64)),G.value===l?(i(),m("div",Sl,[J.value==="asc"?(i(),m("svg",$l,e[64]||(e[64]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),m("svg",hl,e[65]||(e[65]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),m("div",Tl,e[66]||(e[66]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),a(s(ve),null,{default:o(()=>e[67]||(e[67]=[d("Actions")])),_:1})]),_:1})]),_:1}),a(s(ft),null,{default:o(()=>[K.value.length===0?(i(),N(s(pe),{key:0},{default:o(()=>[a(s(ue),{colspan:p.isSuperAdmin?fe.length+2:fe.length+1,class:"text-center py-8"},{default:o(()=>e[68]||(e[68]=[d(" No delays found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):k("",!0),(i(!0),m(D,null,P(K.value,l=>(i(),N(s(pe),{key:l.id,class:"hover:bg-muted/50"},{default:o(()=>[a(s(ue),{class:"text-center"},{default:o(()=>[z(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[18]||(e[18]=v=>h.value=v),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Al),[[nt,h.value]])]),_:2},1024),p.isSuperAdmin?(i(),N(s(ue),{key:0},{default:o(()=>{var v;return[d(y(((v=l.tenant)==null?void 0:v.name)||"—"),1)]}),_:2},1024)):k("",!0),(i(),m(D,null,P(fe,v=>a(s(ue),{key:v,class:"whitespace-nowrap"},{default:o(()=>{var S,Y;return[v==="date"?(i(),m(D,{key:0},[d(y(Q(l[v])),1)],64)):v==="disputed"?(i(),m(D,{key:1},[d(y(l[v]?"Yes":"No"),1)],64)):v==="driver_controllable"?(i(),m(D,{key:2},[d(y(l[v]===null?"N/A":l[v]?"Yes":"No"),1)],64)):v==="delay_code"?(i(),m(D,{key:3},[d(y(((S=l.delay_code)==null?void 0:S.code)||"—")+" ",1),(Y=l.delay_code)!=null&&Y.deleted_at?(i(),m("span",Nl,"(Deleted Code)")):k("",!0)],64)):v==="delay_category"?(i(),m(D,{key:4},[d(y(ke(l.delay_category)),1)],64)):(i(),m(D,{key:5},[d(y(l[v]),1)],64))]}),_:2},1024)),64)),a(s(ue),null,{default:o(()=>[t("div",Fl,[a(_,{onClick:v=>_e(l),variant:"warning",size:"sm"},{default:o(()=>[a(A,{name:"pencil",class:"mr-1 h-4 w-4"}),e[69]||(e[69]=d(" Edit "))]),_:2},1032,["onClick"]),a(_,{onClick:v=>Me(l.id),variant:"destructive",size:"sm"},{default:o(()=>[a(A,{name:"trash",class:"mr-1 h-4 w-4"}),e[70]||(e[70]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),p.delays.links?(i(),m("div",Ml,[t("div",Vl,[t("div",Ol," Showing "+y(K.value.length)+" of "+y(p.delays.data.length)+" entries ",1),t("div",Ul,[t("div",zl,[a(s($),{for:"perPage",class:"text-sm"},{default:o(()=>e[71]||(e[71]=[d("Per page:")])),_:1}),z(t("select",{id:"perPage","onUpdate:modelValue":e[19]||(e[19]=l=>te.value=l),onChange:Ne,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[72]||(e[72]=[t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),544),[[L,te.value]])]),t("div",jl,[(i(!0),m(D,null,P(p.delays.links,l=>(i(),N(_,{key:l.label,onClick:v=>Fe(l.url),disabled:!l.url,variant:"ghost",size:"sm",class:Z(["mx-1",{"bg-primary/10 text-primary border-primary":l.active}])},{default:o(()=>[t("span",{innerHTML:l.label},null,8,Bl)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):k("",!0)]),_:1})]),_:1}),a(s(ne),{open:c.value,"onUpdate:open":e[21]||(e[21]=l=>c.value=l)},{default:o(()=>[a(s(se),{class:"sm:max-w-2xl"},{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(de),null,{default:o(()=>[d(y(T.value?"Edit":"Add")+" Delay",1)]),_:1}),a(s(ie),null,{default:o(()=>[d(" Fill in the details to "+y(T.value?"update":"create")+" a delay record. ",1)]),_:1})]),_:1}),a($t,{delay:T.value,"delay-codes":he.value,tenants:p.tenants,"is-super-admin":p.isSuperAdmin,"tenant-slug":p.tenantSlug,onClose:e[20]||(e[20]=l=>c.value=!1)},null,8,["delay","delay-codes","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),a(s(ne),{open:O.value,"onUpdate:open":e[25]||(e[25]=l=>O.value=l)},{default:o(()=>[a(s(se),{class:"sm:max-w-lg"},{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(de),null,{default:o(()=>e[73]||(e[73]=[d("Manage Delay Codes")])),_:1}),a(s(ie),null,{default:o(()=>e[74]||(e[74]=[d(" Create and manage delay codes for your organization. ")])),_:1})]),_:1}),t("div",Ll,[t("div",El,[e[76]||(e[76]=t("h3",{class:"text-sm font-medium"},"Current Delay Codes",-1)),a(_,{onClick:Oe,size:"sm",variant:"outline"},{default:o(()=>[a(A,{name:"plus",class:"mr-2 h-4 w-4"}),e[75]||(e[75]=d(" Add New Code "))]),_:1})]),t("div",Pl,[!p.delay_codes||p.delay_codes.length===0?(i(),m("div",Rl," No delay codes found ")):(i(),m("div",Wl,[(i(!0),m(D,null,P(p.delay_codes,l=>(i(),m("div",{key:l.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[t("div",{class:"flex-1 cursor-pointer",onClick:v=>Ue(l)},[t("div",Yl,[d(y(l.code)+" ",1),l.deleted_at?(i(),m("span",ql,"(Deleted)")):k("",!0)]),l.description?(i(),m("div",Hl,y(l.description),1)):k("",!0)],8,Il),t("div",Gl,[p.isSuperAdmin?(i(),m(D,{key:0},[l.deleted_at?(i(),m(D,{key:0},[a(_,{onClick:v=>Pe(l.id),size:"sm",variant:"outline"},{default:o(()=>[a(A,{name:"refresh",class:"mr-2 h-4 w-4"}),e[77]||(e[77]=d(" Restore "))]),_:2},1032,["onClick"]),a(_,{onClick:v=>Re(l.id),size:"sm",variant:"destructive"},{default:o(()=>[a(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[78]||(e[78]=d(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(i(),N(_,{key:1,onClick:v=>xe(l.id),size:"sm",variant:"destructive"},{default:o(()=>[a(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[79]||(e[79]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):(i(),N(_,{key:1,onClick:v=>xe(l.id),size:"sm",variant:"destructive"},{default:o(()=>[a(A,{name:"trash",class:"mr-2 h-4 w-4"}),e[80]||(e[80]=d(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))]),u.value?(i(),m("div",Jl,[t("h3",Kl,y(g.value?"Edit":"Add")+" Delay Code",1),t("div",Ql,[t("div",null,[a(s($),{for:"code"},{default:o(()=>e[81]||(e[81]=[d("Code")])),_:1}),a(s(H),{id:"code",modelValue:B.value.code,"onUpdate:modelValue":e[22]||(e[22]=l=>B.value.code=l),placeholder:"Enter code"},null,8,["modelValue"])]),t("div",null,[a(s($),{for:"description"},{default:o(()=>e[82]||(e[82]=[d("Description")])),_:1}),a(s(H),{id:"description",modelValue:B.value.description,"onUpdate:modelValue":e[23]||(e[23]=l=>B.value.description=l),placeholder:"Enter description"},null,8,["modelValue"])]),t("div",Xl,[a(_,{onClick:ze,variant:"ghost",size:"sm"},{default:o(()=>e[83]||(e[83]=[d("Cancel")])),_:1}),a(_,{onClick:Ee,variant:"default",size:"sm"},{default:o(()=>e[84]||(e[84]=[d("Save")])),_:1})])])])):k("",!0)]),a(s(me),{class:"mt-6"},{default:o(()=>[a(_,{onClick:e[24]||(e[24]=l=>O.value=!1),variant:"outline"},{default:o(()=>e[85]||(e[85]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(s(ne),{open:q.value,"onUpdate:open":e[28]||(e[28]=l=>q.value=l)},{default:o(()=>[a(s(se),null,{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(de),null,{default:o(()=>e[86]||(e[86]=[d("Confirm Deletion")])),_:1}),a(s(ie),null,{default:o(()=>e[87]||(e[87]=[d(" Are you sure you want to delete this delay code? This action cannot be undone. ")])),_:1})]),_:1}),a(s(me),{class:"mt-4"},{default:o(()=>[a(_,{type:"button",onClick:e[26]||(e[26]=l=>q.value=!1),variant:"outline"},{default:o(()=>e[88]||(e[88]=[d(" Cancel ")])),_:1}),a(_,{type:"button",onClick:e[27]||(e[27]=l=>Le(be.value)),variant:"destructive"},{default:o(()=>e[89]||(e[89]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(s(ne),{open:j.value,"onUpdate:open":e[31]||(e[31]=l=>j.value=l)},{default:o(()=>[a(s(se),null,{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(de),null,{default:o(()=>e[90]||(e[90]=[d("Confirm Deletion")])),_:1}),a(s(ie),null,{default:o(()=>e[91]||(e[91]=[d(" Are you sure you want to delete this delay record? This action cannot be undone. ")])),_:1})]),_:1}),a(s(me),{class:"mt-4"},{default:o(()=>[a(_,{type:"button",onClick:e[29]||(e[29]=l=>j.value=!1),variant:"outline"},{default:o(()=>e[92]||(e[92]=[d(" Cancel ")])),_:1}),a(_,{type:"button",onClick:e[30]||(e[30]=l=>We(W.value)),variant:"destructive"},{default:o(()=>e[93]||(e[93]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(s(ne),{open:E.value,"onUpdate:open":e[34]||(e[34]=l=>E.value=l)},{default:o(()=>[a(s(se),null,{default:o(()=>[a(s(re),null,{default:o(()=>[a(s(de),null,{default:o(()=>e[94]||(e[94]=[d("Confirm Bulk Deletion")])),_:1}),a(s(ie),null,{default:o(()=>[d(" Are you sure you want to delete "+y(h.value.length)+" delay records? This action cannot be undone. ",1)]),_:1})]),_:1}),a(s(me),{class:"mt-4"},{default:o(()=>[a(_,{type:"button",onClick:e[32]||(e[32]=l=>E.value=!1),variant:"outline"},{default:o(()=>e[95]||(e[95]=[d(" Cancel ")])),_:1}),a(_,{type:"button",onClick:e[33]||(e[33]=l=>Ke()),variant:"destructive"},{default:o(()=>e[96]||(e[96]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{xa as default};
