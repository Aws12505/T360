import{d as se,k as C,l as h,o as m,w as o,e as n,b as t,u as r,m as ne,i as c,t as l,a as f,F as g,r as b,g as _}from"./app-B__ptHTF.js";import{_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-BsTG-YEC.js";import{_ as k}from"./Icon.vue_vue_type_script_setup_true_lang-CUAESyc2.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-5rTN_W9z.js";import{_ as oe}from"./Card.vue_vue_type_script_setup_true_lang-p8XobHwK.js";import{_ as re,a as ie}from"./CardTitle.vue_vue_type_script_setup_true_lang-RYz03wRI.js";import{_ as le}from"./CardContent.vue_vue_type_script_setup_true_lang-C_o1U9fc.js";import{_ as N,a as R,b as V,c as O,d as T,e as z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-uSHG0f7o.js";import{_ as x}from"./Badge.vue_vue_type_script_setup_true_lang-Cm0WPWVw.js";import"./index-qfrlGLqJ.js";import"./createLucideIcon-Ce1UDWWH.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DU55FZBO.js";import"./shield-DQVFrbX_.js";import"./check-gLnbaKCt.js";import"./loader-circle-BYMtkHnq.js";import"./sun-Bc9qbBBx.js";const de={class:"container mx-auto p-6"},ue={class:"flex items-center justify-between mb-6"},me={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6"},ce={class:"space-y-4"},fe={class:"flex justify-between text-sm"},ve={class:"capitalize text-muted-foreground"},_e={class:"font-medium"},xe={class:"space-y-2 mb-4"},ye={class:"capitalize text-muted-foreground"},ge={class:"font-medium"},be={key:0,class:"space-y-3 mt-4"},ke={class:"grid grid-cols-2 gap-2"},we={class:"text-xs text-muted-foreground"},pe={class:"flex items-center justify-between mt-1"},he={class:"text-xs font-medium"},Be={key:1,class:"mt-4 flex flex-wrap gap-2"},je={class:"overflow-y-auto h-[50vh] pr-1"},Se={key:0,class:"space-y-4 p-1"},$e={class:"font-medium flex items-center"},Ce={class:"grid grid-cols-3 text-xs text-muted-foreground mt-2 gap-2"},De={class:"overflow-y-auto h-[50vh] pr-1"},Me={key:0,class:"space-y-4 p-1"},Ne={class:"font-medium flex items-center"},Re={class:"grid grid-cols-3 text-xs text-muted-foreground mt-2 gap-2"},Ve={class:"overflow-y-auto h-[50vh] pr-1"},Oe={key:0,class:"space-y-4 p-1"},Te={class:"space-y-4"},ze={class:"p-3 border rounded-md"},Ae={class:"grid grid-cols-2 gap-3"},Fe={class:"text-sm"},Pe={class:"font-medium mt-1"},qe={class:"p-3 border rounded-md"},Le={class:"grid grid-cols-1 gap-3"},Qe={class:"text-sm"},Ue={class:"font-medium mt-1"},Ie={class:"text-sm"},Ke={class:"font-medium mt-1"},We={class:"p-3 border rounded-md"},Ye={class:"grid grid-cols-1 gap-3"},Ee={class:"text-sm"},Ge={class:"font-medium mt-1"},He={class:"text-sm"},Je={class:"font-medium mt-1"},Xe={class:"text-sm"},Ze={class:"font-medium mt-1"},et={class:"text-sm"},tt={class:"font-medium mt-1"},st={key:0,class:"p-3 border rounded-md"},nt={class:"space-y-3"},at={class:"text-xs text-muted-foreground capitalize"},ot={key:0,class:"text-xs text-muted-foreground text-center py-2"},rt={key:1,class:"p-3 border rounded-md"},it={class:"space-y-3"},lt={class:"text-xs text-muted-foreground"},dt={key:0,class:"text-xs text-muted-foreground text-center py-2"},St=se({__name:"Summarywithoutui",props:{summaries:Object,rejectionBreakdowns:Object,delayBreakdowns:Object,maintenanceBreakdowns:Object,tenantSlug:String,SuperAdmin:Boolean,tenants:Array},setup(u){const D=u,B=C(!1),j=C(!1),S=C(!1),i=C(null),K=a=>{i.value=a,B.value=!0},W=a=>{i.value=a,j.value=!0},Y=a=>{i.value=a,S.value=!0},E=[{title:D.tenantSlug?"Dashboard":"Admin Dashboard",href:D.tenantSlug?route("dashboard",{tenantSlug:D.tenantSlug}):route("admin.dashboard")}],p=a=>a==null?"0.00":Number(a).toFixed(2),G=a=>a==null?"0":Number(a).toLocaleString(),H=(a,e)=>{if(!a)return"0.00";const d=te(e),s=a[d];return s==null||s===0?"0.00":s.toFixed(2)},$=a=>({yesterday:"Yesterday",current_week:"Current Week",rolling_6_weeks:"Rolling 6 Weeks",quarterly:"Quarterly"})[a]??a,J=a=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(a),M=a=>a.replace(/_/g," "),A=a=>a==="sum_vcr_preventable"?"vcr_preventable":a==="sum_open_boc"?"open_boc":a,F=(a,e)=>{if(a==="meets_safety_bonus_criteria")return e==1?"Yes":"No";const d=Number(e);if(!isNaN(d)){const s=d.toFixed(2);return a==="average_maintenance_variance_to_spend"?`${s}%`:s}return e},X=a=>{switch(a){case"fantastic_plus":return"success";case"fantastic":return"success";case"good":return"secondary";case"fair":return"warning";case"poor":return"destructive";default:return"outline"}},Z=a=>{switch(a){case"gold":return"success";case"silver":return"secondary";case"not_eligible":return"destructive";default:return"outline"}},ee=a=>{if(!a)return{};const e={};for(const[d,s]of Object.entries(a))d!=="rates"&&d!=="ratings"&&(e[d]=s);return e},te=a=>a;return(a,e)=>(m(),h(ae,{breadcrumbs:E,tenantSlug:u.tenantSlug},{default:o(()=>[n(r(ne),{title:"Summary"}),t("div",de,[t("div",ue,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold"},"Performance Summaries",-1)),n(r(x),{variant:"outline",class:"text-sm"},{default:o(()=>[n(k,{name:"calendar",class:"mr-1 h-4 w-4"}),c(" Last updated: "+l(J(new Date)),1)]),_:1})]),t("div",me,[(m(!0),f(g,null,b(u.summaries,(d,s)=>(m(),h(r(oe),{key:s,class:"overflow-hidden"},{default:o(()=>[n(r(re),null,{default:o(()=>[n(r(ie),null,{default:o(()=>[c(l($(s)),1)]),_:2},1024),e[7]||(e[7]=t("div",{class:"text-sm text-muted-foreground"},"Performance & Safety Summary",-1))]),_:2},1024),n(r(le),null,{default:o(()=>{var P,q,L,Q,U,I;return[t("div",ce,[(m(!0),f(g,null,b(d.performance.data,(y,v)=>(m(),f("div",{key:v,class:"space-y-1"},[t("div",fe,[t("span",ve,l(M(v)),1),t("span",_e,l(F(v,y)),1)]),t("div",null,[n(r(x),{variant:X(d.performance.ratings[A(v)])},{default:o(()=>[c(l(d.performance.ratings[A(v)]||"N/A"),1)]),_:2},1032,["variant"])])]))),128))]),e[12]||(e[12]=t("div",{class:"my-4 h-px bg-border"},null,-1)),e[13]||(e[13]=t("h3",{class:"text-sm font-semibold mb-3"},"Safety Summary",-1)),t("div",xe,[(m(!0),f(g,null,b(ee(d.safety),(y,v)=>(m(),f("div",{key:"safety-"+v,class:"flex justify-between text-sm"},[t("span",ye,l(M(v)),1),t("span",ge,l(F(v,y)),1)]))),128))]),d.safety.ratings?(m(),f("div",be,[e[8]||(e[8]=t("h4",{class:"text-xs font-medium text-muted-foreground"},"Violation Ratings",-1)),t("div",ke,[(m(!0),f(g,null,b(d.safety.ratings,(y,v)=>(m(),f("div",{key:v,class:"border rounded p-2"},[t("div",we,l(M(v)),1),t("div",pe,[n(r(x),{variant:Z(y)},{default:o(()=>[c(l(y),1)]),_:2},1032,["variant"]),t("span",he,l(H(d.safety.rates,v)),1)])]))),128))])])):_("",!0),(P=u.rejectionBreakdowns)!=null&&P[s]||(q=u.delayBreakdowns)!=null&&q[s]||(L=u.maintenanceBreakdowns)!=null&&L[s]?(m(),f("div",Be,[(Q=u.rejectionBreakdowns)!=null&&Q[s]?(m(),h(r(w),{key:0,variant:"outline",size:"sm",onClick:y=>K(s)},{default:o(()=>[n(k,{name:"x-circle",class:"mr-1 h-3 w-3"}),e[9]||(e[9]=c(" Rejections "))]),_:2},1032,["onClick"])):_("",!0),(U=u.delayBreakdowns)!=null&&U[s]?(m(),h(r(w),{key:1,variant:"outline",size:"sm",onClick:y=>W(s)},{default:o(()=>[n(k,{name:"clock",class:"mr-1 h-3 w-3"}),e[10]||(e[10]=c(" Delays "))]),_:2},1032,["onClick"])):_("",!0),(I=u.maintenanceBreakdowns)!=null&&I[s]?(m(),h(r(w),{key:2,variant:"outline",size:"sm",onClick:y=>Y(s)},{default:o(()=>[n(k,{name:"wrench",class:"mr-1 h-3 w-3"}),e[11]||(e[11]=c(" Maintenance "))]),_:2},1032,["onClick"])):_("",!0)])):_("",!0)]}),_:2},1024)]),_:2},1024))),128))])]),n(r(N),{open:B.value,"onUpdate:open":e[1]||(e[1]=d=>B.value=d)},{default:o(()=>[n(r(R),{class:"max-w-md max-h-[80vh]"},{default:o(()=>{var d;return[n(r(V),null,{default:o(()=>[n(r(O),null,{default:o(()=>[c(l(i.value?$(i.value):"")+" Rejection Breakdown",1)]),_:1}),n(r(T),null,{default:o(()=>e[14]||(e[14]=[c(" Detailed breakdown of rejections by driver ")])),_:1})]),_:1}),t("div",je,[i.value&&((d=u.rejectionBreakdowns)!=null&&d[i.value])?(m(),f("div",Se,[t("div",null,[e[15]||(e[15]=t("h3",{class:"text-sm font-semibold mb-2"},"By Driver",-1)),(m(!0),f(g,null,b(u.rejectionBreakdowns[i.value].by_driver,s=>(m(),f("div",{key:s.driver_name,class:"text-sm mb-3 p-3 border rounded-md hover:bg-muted/50 transition-colors"},[t("div",$e,[n(k,{name:"user",class:"mr-2 h-4 w-4 text-muted-foreground"}),c(" "+l(s.driver_name),1)]),t("div",Ce,[n(r(x),{variant:"outline",class:"flex items-center justify-center"},{default:o(()=>[c(" Total: "+l(s.total_rejections),1)]),_:2},1024),n(r(x),{variant:"outline",class:"flex items-center justify-center"},{default:o(()=>[c(" Block: "+l(s.total_block_rejections),1)]),_:2},1024),n(r(x),{variant:"outline",class:"flex items-center justify-center"},{default:o(()=>[c(" Load: "+l(s.total_load_rejections),1)]),_:2},1024)])]))),128))])])):_("",!0)]),n(r(z),null,{default:o(()=>[n(r(w),{onClick:e[0]||(e[0]=s=>B.value=!1),variant:"outline"},{default:o(()=>e[16]||(e[16]=[c("Close")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"]),n(r(N),{open:j.value,"onUpdate:open":e[3]||(e[3]=d=>j.value=d)},{default:o(()=>[n(r(R),{class:"max-w-md max-h-[80vh]"},{default:o(()=>{var d;return[n(r(V),null,{default:o(()=>[n(r(O),null,{default:o(()=>[c(l(i.value?$(i.value):"")+" Delay Breakdown",1)]),_:1}),n(r(T),null,{default:o(()=>e[17]||(e[17]=[c(" Detailed breakdown of delays by driver ")])),_:1})]),_:1}),t("div",De,[i.value&&((d=u.delayBreakdowns)!=null&&d[i.value])?(m(),f("div",Me,[t("div",null,[e[18]||(e[18]=t("h3",{class:"text-sm font-semibold mb-2"},"By Driver",-1)),(m(!0),f(g,null,b(u.delayBreakdowns[i.value].by_driver,s=>(m(),f("div",{key:s.driver_name,class:"text-sm mb-3 p-3 border rounded-md hover:bg-muted/50 transition-colors"},[t("div",Ne,[n(k,{name:"user",class:"mr-2 h-4 w-4 text-muted-foreground"}),c(" "+l(s.driver_name),1)]),t("div",Re,[n(r(x),{variant:"outline",class:"flex items-center justify-center"},{default:o(()=>[c(" Total: "+l(s.total_delays),1)]),_:2},1024),n(r(x),{variant:"outline",class:"flex items-center justify-center"},{default:o(()=>[c(" Origin: "+l(s.total_origin_delays),1)]),_:2},1024),n(r(x),{variant:"outline",class:"flex items-center justify-center"},{default:o(()=>[c(" Dest: "+l(s.total_destination_delays),1)]),_:2},1024)])]))),128))])])):_("",!0)]),n(r(z),null,{default:o(()=>[n(r(w),{onClick:e[2]||(e[2]=s=>j.value=!1),variant:"outline"},{default:o(()=>e[19]||(e[19]=[c("Close")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"]),n(r(N),{open:S.value,"onUpdate:open":e[5]||(e[5]=d=>S.value=d)},{default:o(()=>[n(r(R),{class:"max-w-md max-h-[80vh]"},{default:o(()=>{var d;return[n(r(V),null,{default:o(()=>[n(r(O),null,{default:o(()=>[c(l(i.value?$(i.value):"")+" Maintenance Breakdown",1)]),_:1}),n(r(T),null,{default:o(()=>e[20]||(e[20]=[c(" Detailed breakdown of maintenance metrics ")])),_:1})]),_:1}),t("div",Ve,[i.value&&((d=u.maintenanceBreakdowns)!=null&&d[i.value])?(m(),f("div",Oe,[t("div",Te,[t("div",ze,[e[22]||(e[22]=t("h3",{class:"text-sm font-semibold mb-3"},"Repair Orders",-1)),t("div",Ae,[t("div",Fe,[e[21]||(e[21]=t("div",{class:"text-xs text-muted-foreground"},"Total Repair Orders",-1)),t("div",Pe,l(u.maintenanceBreakdowns[i.value].total_repair_orders),1)])])]),t("div",qe,[e[25]||(e[25]=t("h3",{class:"text-sm font-semibold mb-3"},"Financial Metrics",-1)),t("div",Le,[t("div",Qe,[e[23]||(e[23]=t("div",{class:"text-xs text-muted-foreground"},"Total Invoice Amount",-1)),t("div",Ue,"$"+l(p(u.maintenanceBreakdowns[i.value].total_invoice_amount)),1)]),t("div",Ie,[e[24]||(e[24]=t("div",{class:"text-xs text-muted-foreground"},"QS Invoice Amount",-1)),t("div",Ke,"$"+l(p(u.maintenanceBreakdowns[i.value].qs_invoice_amount)),1)])])]),t("div",We,[e[30]||(e[30]=t("h3",{class:"text-sm font-semibold mb-3"},"Cost Per Mile (CPM) Metrics",-1)),t("div",Ye,[t("div",Ee,[e[26]||(e[26]=t("div",{class:"text-xs text-muted-foreground"},"Total Miles",-1)),t("div",Ge,l(G(u.maintenanceBreakdowns[i.value].total_miles)),1)]),t("div",He,[e[27]||(e[27]=t("div",{class:"text-xs text-muted-foreground"},"Overall CPM",-1)),t("div",Je,"$"+l(p(u.maintenanceBreakdowns[i.value].cpm)),1)]),t("div",Xe,[e[28]||(e[28]=t("div",{class:"text-xs text-muted-foreground"},"QS CPM",-1)),t("div",Ze,"$"+l(p(u.maintenanceBreakdowns[i.value].qs_cpm)),1)]),t("div",et,[e[29]||(e[29]=t("div",{class:"text-xs text-muted-foreground"},"QS MVtS",-1)),t("div",tt,"$"+l(p(u.maintenanceBreakdowns[i.value].qs_MVtS)),1)])])]),u.maintenanceBreakdowns[i.value].areas_of_concern&&u.maintenanceBreakdowns[i.value].areas_of_concern.length>0?(m(),f("div",st,[e[31]||(e[31]=t("h3",{class:"text-sm font-semibold mb-3"},"Areas of Concern",-1)),t("div",nt,[(m(!0),f(g,null,b(u.maintenanceBreakdowns[i.value].areas_of_concern,s=>(m(),f("div",{key:s.id,class:"flex justify-between items-center text-sm"},[t("div",at,l(s.concern),1),n(r(x),{variant:"outline"},{default:o(()=>[c(l(s.count),1)]),_:2},1024)]))),128)),u.maintenanceBreakdowns[i.value].areas_of_concern.length===0?(m(),f("div",ot," No areas of concern recorded for this period ")):_("",!0)])])):_("",!0),u.maintenanceBreakdowns[i.value].work_orders_by_truck&&u.maintenanceBreakdowns[i.value].work_orders_by_truck.length>0?(m(),f("div",rt,[e[32]||(e[32]=t("h3",{class:"text-sm font-semibold mb-3"},"Work Orders by Truck",-1)),t("div",it,[(m(!0),f(g,null,b(u.maintenanceBreakdowns[i.value].work_orders_by_truck,s=>(m(),f("div",{key:s.truckid,class:"flex justify-between items-center text-sm"},[t("div",lt,"Truck #"+l(s.truckid),1),n(r(x),{variant:"outline"},{default:o(()=>[c(l(s.work_order_count),1)]),_:2},1024)]))),128)),u.maintenanceBreakdowns[i.value].work_orders_by_truck.length===0?(m(),f("div",dt," No work orders recorded for this period ")):_("",!0)])])):_("",!0)])])):_("",!0)]),n(r(z),null,{default:o(()=>[n(r(w),{onClick:e[4]||(e[4]=s=>S.value=!1),variant:"outline"},{default:o(()=>e[33]||(e[33]=[c("Close")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]),_:1},8,["tenantSlug"]))}});export{St as default};
