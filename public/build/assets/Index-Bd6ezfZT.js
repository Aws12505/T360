import{F as u,e as i,X as t,U as v,c as N,H as C,S as d,O as P,a3 as Ze,r as S,y as we,w as fe,am as Je,b as T,z as a,E as k,aj as I,d as Ke,f as o,C as B,Y as L,u as n,G as he,N as et,ai as tt}from"./vendor-DrR5RGOb.js";import{x as K,g as st,W as O}from"./vendor-vue-BInP8APy.js";import{_ as M}from"./Icon.vue_vue_type_script_setup_true_lang-C19RfzLR.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as at}from"./Checkbox.vue_vue_type_script_setup_true_lang-DYsZx5V7.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{_ as ot,a as lt,b as ue,c as oe,d as nt,e as J}from"./TableRow.vue_vue_type_script_setup_true_lang-Ch0lDg94.js";import{_ as ce}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as rt}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as it}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";import{_ as me}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{d as le,_ as ne,a as re,b as ie,c as de}from"./DialogDescription.vue_vue_type_script_setup_true_lang-5xvj-rV5.js";import{_ as pe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-NVpKV1tK.js";import{b as be,_ as _e,a as ke}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BGsFFXsR.js";import{_ as dt}from"./AppLayout.vue_vue_type_script_setup_true_lang-B8lustj2.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-icons-CZvmGlJ0.js";import"./vendor-ui-iQj4qE_J.js";import"./app-DPORu6Cw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ut={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4 flex flex-col items-center justify-center"},ct={class:"text-sm font-semibold mb-2 text-foreground"},mt={class:"text-2xl font-bold text-primary"},pt={__name:"TotalLateStops",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0}},setup(m){return(l,y)=>(i(),u("div",ut,[t("h3",ct,v(m.title),1),t("p",mt,v(m.value),1)]))}},ft={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},vt={class:"text-base text-center font-semibold mb-4"},gt={key:0,class:"text-center text-sm py-4 text-primary font-medium"},xt={class:"space-y-3"},yt={class:"text-sm"},bt={__name:"BottomDrivers",props:{title:{type:String,default:"Bottom 5 Drivers"},drivers:{type:Array,default:()=>[]},totalRejections:{type:Number,default:0},rejectionType:{type:String,default:""}},setup(m){const l=m;N(()=>l.rejectionType==="load"?"No load rejections recorded. You're on track for Fantastic+ !":l.rejectionType==="block"?"No block rejections recorded. You're on track for Fantastic+ !":"No rejections recorded. You're on track for Fantastic+ !");const y=z=>{const p=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981"],$=[...l.drivers].sort((A,h)=>h.total_penalty-A.total_penalty).map(A=>A.total_penalty).indexOf(z);return p[$]||"#6b7280"};return(z,p)=>(i(),u("div",ft,[t("h3",vt,v(m.title),1),m.drivers.length===0?(i(),u("div",gt,[m.totalRejections===0?(i(),u(C,{key:0},[m.rejectionType==="block"?(i(),u(C,{key:0},[d(" No block rejections recorded. You're on track for Fantastic+ ! ")],64)):m.rejectionType==="load"?(i(),u(C,{key:1},[d(" No load rejections recorded. You're on track for Fantastic+ ! ")],64)):(i(),u(C,{key:2},[d(" No rejections recorded. You're on track for Fantastic+ ! ")],64))],64)):(i(),u(C,{key:1},[d(" No delays recorded. You're on track for Fantastic+ ! ")],64))])):(i(),u(C,{key:1},[p[0]||(p[0]=t("div",{class:"flex justify-between items-center mb-2"},[t("span",{class:"text-base mb-2 font-medium"},"Driver Name"),t("span",{class:"text-base mb-2 font-medium"},"Total Penalty")],-1)),t("div",xt,[(i(!0),u(C,null,P(m.drivers,(R,$)=>(i(),u("div",{key:$,class:"flex justify-between items-center"},[t("span",yt,v(R.driver_name),1),t("span",{class:"text-sm font-medium",style:Ze({color:y(R.total_penalty)})},v(R.total_penalty),5)]))),128))])],64))]))}},_t={class:"bg-background rounded-lg border shadow-sm p-2 md:p-4"},kt={class:"text-base text-center font-semibold mb-4"},wt={class:"h-64"},ht={__name:"LineChart",props:{title:{type:String,default:"Acceptance Score"},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},averageAcceptance:{type:Number,default:null}},setup(m){const l=m,y=S(null);let z=null;const p=()=>{if(z&&z.destroy(),!y.value)return;const R=y.value.getContext("2d"),$=[];l.chartData.datasets.forEach(b=>{b.data&&b.data.length&&$.push(...b.data)});const A=$.length>0?Math.min(...$):0,h=$.length>0?Math.max(...$):100;z=new Je(R,{type:"line",data:l.chartData,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:15,right:15,top:10,bottom:10}},plugins:{legend:{position:!1},tooltip:{callbacks:{label:function(b){const U=b.raw||0,D=l.averageAcceptance||0,E=l.chartData.dateRangeLabel||"selected period",j=Number(D).toFixed(2);return[`Acceptance Score: ${U}`,`Average Score Over ${E}: ${j}`]}}}},scales:{y:{beginAtZero:!(A>10),min:Math.max(Math.floor(A-5),0),max:Math.min(102.5,Math.ceil(h+5)),ticks:{stepSize:2.5,padding:10,font:{size:11},callback:function(b){return b<=100?b:""}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}},x:{ticks:{padding:10,font:{size:11}},grid:{drawBorder:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})};return we(()=>{p()}),fe(()=>l.chartData,()=>{p()},{deep:!0}),(R,$)=>(i(),u("div",_t,[t("h3",kt,v(m.title),1),t("div",wt,[t("canvas",{ref_key:"chartCanvas",ref:y},null,512)])]))}},jt={class:"space-y-2 md:space-y-4 lg:space-y-6 mb-2 md:mb-4 lg:mb-6"},Ct={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4"},St={class:"grid grid-cols-1 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-6"},$t={__name:"AcceptanceDashboard",props:{metricsData:{type:Object,default:()=>({})},driversData:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({})},averageAcceptance:{type:Number,default:null},currentDateFilter:{type:String,default:null},currentFilters:{type:Object,default:()=>({})}},setup(m){const l=m,y=N(()=>l.metricsData?[{title:"Total Rejected Stops",value:l.metricsData.totalRejections||0},{title:"Rejected +6 Hours Before Start Time",value:l.metricsData.moreThan6Count||0},{title:"Rejected 0-6 Hours Before Start Time",value:l.metricsData.within6Count||0},{title:"Rejected After Start Time",value:l.metricsData.afterStartCount||0}]:[]),z=N(()=>l.driversData&&l.driversData.length?l.driversData:[]),p=N(()=>l.chartData&&Object.keys(l.chartData).length?l.chartData:{}),R=N(()=>{var h;return((h=l.metricsData)==null?void 0:h.totalRejections)||0}),$=N(()=>{var h;return((h=l.currentFilters)==null?void 0:h.rejectionType)||null}),A=N(()=>!l.chartData||!l.chartData.labels?!1:l.chartData.labels.length>1);return(h,b)=>(i(),u("div",jt,[t("div",Ct,[(i(!0),u(C,null,P(y.value,(U,D)=>(i(),T(pt,{key:D,title:U.title,value:U.value},null,8,["title","value"]))),128))]),t("div",St,[a(bt,{title:"Bottom 5 Drivers",drivers:z.value,"total-rejections":R.value,"rejection-type":$.value,class:I({"lg:col-span-1":A.value,"lg:col-span-4":!A.value})},null,8,["drivers","total-rejections","rejection-type","class"]),l.currentDateFilter!="Yesterday"&&A.value?(i(),T(ht,{key:0,title:"Acceptance Score",chartData:p.value,averageAcceptance:m.averageAcceptance,class:"lg:col-span-3"},null,8,["chartData","averageAcceptance"])):k("",!0)])]))}},Dt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},At={key:0,class:"col-span-full"},Nt={class:"relative"},Rt=["value"],Tt={class:"col-span-full"},Ft={class:"relative"},Mt={class:"relative"},Ut={class:"relative"},zt=["value"],Vt={class:"relative"},Bt={class:"flex items-center space-x-2"},Pt={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},Lt=Ke({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(m,{emit:l}){var $,A,h,b,U,D,E;const y=m,z=l,p=K({id:($=y.rejection)==null?void 0:$.id,tenant_id:y.isSuperAdmin?(A=y.rejection)==null?void 0:A.tenant_id:null,date:((h=y.rejection)==null?void 0:h.date)||"",driver_name:((b=y.rejection)==null?void 0:b.driver_name)||"",rejection_type:((U=y.rejection)==null?void 0:U.rejection_type)||"block",rejection_category:((D=y.rejection)==null?void 0:D.rejection_category)||"more_than_6",reason_code_id:((E=y.rejection)==null?void 0:E.reason_code_id)||null,disputed:y.rejection&&y.rejection.disputed!==null?parseInt(y.rejection.disputed)===1:!1,driver_controllable:y.rejection&&y.rejection.driver_controllable!==null?parseInt(y.rejection.driver_controllable)===1:null});fe(()=>y.rejection,j=>{j?(p.id=j.id,p.tenant_id=j.tenant_id,p.date=j.date,p.driver_name=j.driver_name,p.rejection_type=j.rejection_type,p.rejection_category=j.rejection_category,p.reason_code_id=j.reason_code_id,p.disputed=j.disputed!==null?parseInt(j.disputed)===1:!1,p.driver_controllable=j.driver_controllable!==null?parseInt(j.driver_controllable)===1:null):p.reset()},{immediate:!0});const R=()=>{const j=!!p.id,c=y.isSuperAdmin?j?"acceptance.update.admin":"acceptance.store.admin":j?"acceptance.update":"acceptance.store",x=y.isSuperAdmin?j?{rejection:p.id}:{}:j?{tenantSlug:y.tenantSlug,rejection:p.id}:{tenantSlug:y.tenantSlug};p[j?"put":"post"](route(c,x),{onSuccess:()=>z("close")})};return(j,c)=>(i(),u("form",{onSubmit:he(R,["prevent"]),class:"space-y-6"},[t("div",Dt,[m.isSuperAdmin?(i(),u("div",At,[a(F,null,{default:o(()=>c[9]||(c[9]=[d("Company Name")])),_:1}),t("div",Nt,[B(t("select",{"onUpdate:modelValue":c[0]||(c[0]=x=>n(p).tenant_id=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[c[10]||(c[10]=t("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),u(C,null,P(m.tenants,x=>(i(),u("option",{key:x.id,value:x.id},v(x.name),9,Rt))),128))],512),[[L,n(p).tenant_id]]),c[11]||(c[11]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):k("",!0),t("div",Tt,[a(F,null,{default:o(()=>c[12]||(c[12]=[d("Date")])),_:1}),a(ee,{type:"date",modelValue:n(p).date,"onUpdate:modelValue":c[1]||(c[1]=x=>n(p).date=x),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(F,null,{default:o(()=>c[13]||(c[13]=[d("Driver Name")])),_:1}),a(ee,{modelValue:n(p).driver_name,"onUpdate:modelValue":c[2]||(c[2]=x=>n(p).driver_name=x),class:"w-full"},null,8,["modelValue"])]),t("div",null,[a(F,null,{default:o(()=>c[14]||(c[14]=[d("Rejection Type")])),_:1}),t("div",Ft,[B(t("select",{"onUpdate:modelValue":c[3]||(c[3]=x=>n(p).rejection_type=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},c[15]||(c[15]=[t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[L,n(p).rejection_type]]),c[16]||(c[16]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(F,null,{default:o(()=>c[17]||(c[17]=[d("Rejection Category")])),_:1}),t("div",Mt,[B(t("select",{"onUpdate:modelValue":c[4]||(c[4]=x=>n(p).rejection_category=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},c[18]||(c[18]=[t("option",{value:"more_than_6"},"More than 6 hrs",-1),t("option",{value:"within_6"},"Within 6 hrs",-1),t("option",{value:"after_start"},"After start",-1)]),512),[[L,n(p).rejection_category]]),c[19]||(c[19]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(F,null,{default:o(()=>c[20]||(c[20]=[d("Reason Code")])),_:1}),t("div",Ut,[B(t("select",{"onUpdate:modelValue":c[5]||(c[5]=x=>n(p).reason_code_id=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),u(C,null,P(m.reasons,x=>(i(),u("option",{key:x.id,value:x.id},v(x.reason_code),9,zt))),128))],512),[[L,n(p).reason_code_id]]),c[21]||(c[21]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",null,[a(F,null,{default:o(()=>c[22]||(c[22]=[d("Driver Controllable")])),_:1}),t("div",Vt,[B(t("select",{"onUpdate:modelValue":c[6]||(c[6]=x=>n(p).driver_controllable=x),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},c[23]||(c[23]=[t("option",{value:null},"N/A",-1),t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[L,n(p).driver_controllable]]),c[24]||(c[24]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),t("div",Bt,[a(at,{checked:n(p).disputed,"onUpdate:checked":c[7]||(c[7]=x=>n(p).disputed=x),id:"disputed"},null,8,["checked"]),a(F,{for:"disputed"},{default:o(()=>c[25]||(c[25]=[d("Disputed")])),_:1})])]),t("div",Pt,[a(w,{type:"button",onClick:c[8]||(c[8]=x=>z("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>c[26]||(c[26]=[d(" Cancel ")])),_:1}),a(w,{type:"submit",disabled:n(p).processing,class:"w-full sm:w-auto"},{default:o(()=>[d(v(n(p).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),Et={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Ot={class:"mb-2 flex flex-col items-center justify-between px-2 sm:flex-row md:mb-4 lg:mb-6"},Yt={class:"flex flex-wrap gap-3 ml-3"},Wt={class:"relative"},qt={key:0,class:"absolute right-0 z-10 mt-1 w-48 rounded-md border bg-background shadow-lg"},Ht={class:"py-1"},It={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},Gt=["href"],Qt=["action"],Xt={class:"flex flex-col items-center gap-2 md:items-start"},Zt={class:"flex flex-wrap gap-1 md:gap-2"},Jt={key:0,class:"text-sm text-muted-foreground"},Kt={key:0},es={key:1},ts={key:2},ss={key:3,class:"ml-1"},as={class:"flex items-center justify-between"},os={class:"flex items-center gap-2"},ls={key:0,class:"ml-4 flex flex-wrap gap-2"},ns={key:0,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},rs={key:1,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},is={class:"capitalize"},ds={key:2,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},us={key:3,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},cs={key:4,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ms={key:5,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},ps={class:"flex flex-col gap-1 md:gap-4"},fs={class:"grid w-full grid-cols-1 gap-1 sm:grid-cols-3 md:gap-4"},vs={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-3"},gs=["value"],xs={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},ys={class:"flex justify-end space-x-2"},bs={class:"overflow-x-auto"},_s={class:"flex items-center justify-center"},ks=["checked"],ws={class:"flex items-center"},hs={key:0},js={key:1},Cs={key:2,class:"ml-2"},Ss={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$s={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ds={key:3,class:"ml-2 opacity-50"},As=["value"],Ns={key:1,class:"capitalize"},Rs={key:0,class:"ml-1 text-xs text-red-500"},Ts={class:"flex space-x-2"},Fs={key:0,class:"border-t bg-muted/20 px-4 py-3"},Ms={class:"flex flex-col items-center justify-between gap-2 sm:flex-row"},Us={class:"flex items-center gap-4 text-sm text-muted-foreground"},zs={class:"flex w-full flex-col items-center gap-2 sm:w-auto sm:flex-row sm:gap-4"},Vs=["value"],Bs={class:"flex flex-wrap"},Ps=["innerHTML"],Ls={class:"max-h-[75vh] space-y-4 overflow-y-auto p-4 sm:p-6"},Es={class:"flex items-center justify-between"},Os={class:"max-h-[400px] overflow-y-auto rounded-md border"},Ys={key:0,class:"rounded-md border py-8 text-center text-xs text-muted-foreground sm:text-sm"},Ws={key:1,class:"divide-y"},qs=["onClick"],Hs={class:"text-xs font-medium sm:text-sm"},Is={key:0,class:"ml-2 text-[0.65rem] text-red-500 sm:text-xs"},Gs={key:0,class:"mt-1 text-xs text-muted-foreground sm:text-sm"},Qs={class:"flex space-x-1 opacity-0 transition-opacity group-hover:opacity-100"},Xs={key:0,class:"space-y-4 rounded-md border p-4"},Zs={class:"text-sm font-medium sm:text-base"},Js={class:"space-y-3"},Ks={class:"flex justify-end space-x-2"},ha={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"yesterday"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},rejection_breakdown:{type:Object,default:null},line_chart_data:{type:Object,default:null},average_acceptance:{type:Number},filters:{type:Object,default:()=>({search:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""})}},setup(m){const l=m,y=N(()=>(b.value==="yesterday"||b.value==="current-week")&&l.weekNumber&&l.year?`Week ${l.weekNumber}, ${l.year}`:(b.value==="6w"||b.value==="quarterly")&&l.startWeekNumber&&l.endWeekNumber&&l.year?`Weeks ${l.startWeekNumber}-${l.endWeekNumber}, ${l.year}`:""),z=[{title:l.tenantSlug?"Dashboard":"Admin Dashboard",href:l.tenantSlug?route("dashboard",{tenantSlug:l.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:l.tenantSlug?route("acceptance.index",{tenantSlug:l.tenantSlug}):route("acceptance.index.admin")}],p=S(!1),R=S(!1),$=S(null),A=S(""),h=S(""),b=S(l.dateFilter||"full"),U=S(l.perPage||10),D=S([]),E=S(!1),j=S(null),c=S(!1),x=S(!1),V=S(null),Y=S({reason_code:"",description:""}),G=S(!1),ve=S(null),te=["date","driver_name","rejection_type","reason_code","rejection_category","disputed","driver_controllable"],q=S("date"),H=S("desc"),g=S({...l.filters}),W=N(()=>{let r=[...l.rejections.data];return r.sort((e,_)=>{var X,Z;let s=e[q.value],f=_[q.value];return q.value==="reason_code"&&(s=((X=e.reason_code)==null?void 0:X.reason_code)||"",f=((Z=_.reason_code)==null?void 0:Z.reason_code)||""),s===null?1:f===null?-1:(typeof s=="string"&&(s=s.toLowerCase(),f=f.toLowerCase()),s<f?H.value==="asc"?-1:1:s>f?H.value==="asc"?1:-1:0)}),r});function je(r){q.value===r?H.value=H.value==="asc"?"desc":"asc":(q.value=r,H.value="asc")}function ge(){const r=l.tenantSlug?route("acceptance.index",{tenantSlug:l.tenantSlug}):route("acceptance.index.admin");O.get(r,{...g.value,perPage:U.value,dateFilter:b.value})}function Ce(){g.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",rejectionCategory:"",disputed:"",driverControllable:""},ge()}const xe=(r=null)=>{$.value=r,p.value=!0},Se=()=>{R.value=!0,x.value=!1,V.value=null},$e=()=>{Y.value={reason_code:"",description:""},V.value=null,x.value=!0},De=r=>{Y.value={reason_code:r.reason_code,description:r.description||""},V.value=r.id,x.value=!0},Ae=()=>{x.value=!1,V.value=null},Ne=r=>{ve.value=r,G.value=!0},Re=()=>{const r=K({reason_code:Y.value.reason_code,description:Y.value.description}),e=V.value?l.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":l.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",_=V.value?l.isSuperAdmin?{code:V.value}:{tenantSlug:l.tenantSlug,code:V.value}:l.isSuperAdmin?{}:{tenantSlug:l.tenantSlug};(V.value?r.put:r.post).call(r,route(e,_),{onSuccess:()=>{h.value=V.value?"Reason code updated successfully.":"Reason code created successfully.",x.value=!1,V.value=null,O.reload({only:["rejection_reason_codes"]})},onError:f=>{console.error(f)}})},Te=r=>{const e=K({}),_=l.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",s=l.isSuperAdmin?{id:r}:{tenantSlug:l.tenantSlug,code:r};e.delete(route(_,s),{onSuccess:()=>{h.value="Reason code deleted successfully.",G.value=!1,O.reload({only:["rejection_reason_codes"]})}})},Fe=r=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=K({}),_=l.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",s=l.isSuperAdmin?{rejection:r}:{tenantSlug:l.tenantSlug,rejection:r};e.delete(route(_,s),{preserveScroll:!0,onSuccess:()=>{h.value="Rejection deleted successfully."}})},Me=r=>{if(r){const e=new URL(r),_=e.origin+e.pathname;O.get(_,{...g.value,perPage:U.value,dateFilter:b.value,page:e.searchParams.get("page")||1})}};function se(r){b.value=r;const e=l.tenantSlug?route("acceptance.index",{tenantSlug:l.tenantSlug}):route("acceptance.index.admin");O.get(e,{...g.value,perPage:U.value,dateFilter:r})}function Ue(){const r=l.tenantSlug?route("acceptance.index",{tenantSlug:l.tenantSlug}):route("acceptance.index.admin");O.get(r,{...g.value,perPage:U.value,dateFilter:b.value})}function ae(r){if(!r)return"";const e=r.split("-");if(e.length!==3)return r;const[_,s,f]=e;return`${Number(s)}/${Number(f)}/${_}`}fe(h,r=>{r&&setTimeout(()=>{h.value=""},5e3)});const ze=N(()=>{var _,s;if(!((_=l.rejection_breakdown)!=null&&_.by_category)||!((s=l.rejection_breakdown)!=null&&s.by_category.total_rejections))return null;const r=l.rejection_breakdown.by_category,e=l.filters.rejectionType;return e?{totalRejections:r[`total_${e}_rejections`]||0,moreThan6Count:r[`more_than_6_${e}_count`]||0,within6Count:r[`within_6_${e}_count`]||0,afterStartCount:r[`after_start_${e}_count`]||0,by_category:!0}:{totalRejections:r.total_rejections||0,moreThan6Count:r.more_than_6_count||0,within6Count:r.within_6_count||0,afterStartCount:r.after_start_count||0,by_category:!0}}),Ve=N(()=>{var r,e,_;return l.filters.rejectionType=="load"?((r=l.rejection_breakdown)==null?void 0:r.bottom_five_drivers.load)||[]:l.filters.rejectionType=="block"?((e=l.rejection_breakdown)==null?void 0:e.bottom_five_drivers.block)||[]:((_=l.rejection_breakdown)==null?void 0:_.bottom_five_drivers.total)||[]}),Be=N(()=>!l.line_chart_data||l.line_chart_data.length===0?{labels:[],datasets:[{label:"Acceptance Performance",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]}:{labels:l.line_chart_data.map(r=>r.date),datasets:[{label:"Acceptance Performance",data:l.line_chart_data.map(r=>r.acceptancePerformance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3}]});function Pe(r){O.post(route("rejection_reason_codes.restore.admin",{id:r}),{},{onSuccess:()=>{h.value="Reason code restored successfully",setTimeout(()=>h.value="",3e3)}})}function Le(r){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&O.delete(route("rejection_reason_codes.forceDelete.admin",{id:r}),{onSuccess:()=>{h.value="Reason code permanently deleted",setTimeout(()=>h.value="",3e3)}})}N(()=>l.rejection_reason_codes.filter(r=>!r.deleted_at));const Ee=N(()=>W.value.length>0&&D.value.length===W.value.length);function Oe(r){r.target.checked?D.value=W.value.map(e=>e.id):D.value=[]}function Ye(){D.value.length>0&&(E.value=!0)}function We(){const r=K({ids:D.value}),e=l.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",_=l.isSuperAdmin?{}:{tenantSlug:l.tenantSlug};r.delete(route(e,_),{preserveScroll:!0,onSuccess:()=>{h.value=`${D.value.length} rejection records deleted successfully.`,D.value=[],E.value=!1},onError:s=>{console.error(s)}})}function qe(r){const e=r.target.files[0];if(!e)return;const _=new FormData;_.append("csv_file",e);const s=l.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:l.tenantSlug});O.post(s,_,{onSuccess:()=>{h.value="Rejections imported successfully",r.target.value=""},onError:f=>{console.error(f),r.target.value=""}})}function He(){if(W.value.length===0){A.value="No data available to export",setTimeout(()=>{A.value=""},3e3);return}j.value&&j.value.submit()}const Ie=N(()=>l.tenantSlug?route("acceptance.export",{tenantSlug:l.tenantSlug}):route("acceptance.export.admin"));N(()=>b.value==="yesterday"||b.value==="current-week"||b.value==="6w"||b.value==="quarterly"?l.rejections&&l.rejections.data&&l.rejections.data.length>0:!0);const Q=S(!1),Ge=N(()=>"/storage/upload-data-temps/Rejections Template.csv");we(()=>{const r=e=>{Q.value&&!e.target.closest(".relative")&&(Q.value=!1)};document.addEventListener("click",r),et(()=>{document.removeEventListener("click",r)})});const Qe=N(()=>g.value.search||g.value.dateFrom||g.value.dateTo||g.value.rejectionType||g.value.reasonCode||g.value.rejectionCategory||g.value.disputed||g.value.driverControllable);function Xe(r){if(!r)return"";const e=l.rejection_reason_codes.find(_=>_.id==r);return e?e.reason_code:""}function ye(r){return r?{more_than_6:"More than 6 hrs",within_6:"Within 6 hrs",after_start:"After start"}[r]||r:"—"}return(r,e)=>(i(),T(dt,{breadcrumbs:z,tenantSlug:m.tenantSlug},{default:o(()=>{var _;return[a(n(st),{title:"Acceptance"}),t("div",Et,[h.value?(i(),T(n(be),{key:0,variant:"success"},{default:o(()=>[a(n(_e),null,{default:o(()=>e[29]||(e[29]=[d("Success")])),_:1}),a(n(ke),null,{default:o(()=>[d(v(h.value),1)]),_:1})]),_:1})):k("",!0),A.value?(i(),T(n(be),{key:1,variant:"destructive"},{default:o(()=>[a(n(_e),null,{default:o(()=>e[30]||(e[30]=[d("Error")])),_:1}),a(n(ke),null,{default:o(()=>[d(v(A.value),1)]),_:1})]),_:1})):k("",!0),t("div",Ot,[e[36]||(e[36]=t("h1",{class:"text-lg font-bold text-gray-800 dark:text-gray-200 md:text-xl lg:text-2xl"},"Acceptance",-1)),t("div",Yt,[a(w,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=s=>xe()),variant:"default"},{default:o(()=>[a(M,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[31]||(e[31]=d(" Add Rejection "))]),_:1}),D.value.length>0?(i(),T(w,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[1]||(e[1]=s=>Ye()),variant:"destructive"},{default:o(()=>[a(M,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+v(D.value.length)+") ",1)]),_:1})):k("",!0),t("div",Wt,[a(w,{class:"px-2 py-0 md:px-4 md:py-2",onClick:e[2]||(e[2]=s=>Q.value=!Q.value),variant:"secondary"},{default:o(()=>[a(M,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[32]||(e[32]=d(" Upload CSV ")),a(M,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),Q.value?(i(),u("div",qt,[t("div",Ht,[t("label",It,[e[33]||(e[33]=t("span",null,"Upload CSV File",-1)),t("input",{type:"file",class:"hidden",onChange:qe,accept:".csv"},null,32)]),t("a",{href:Ge.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,Gt)])])):k("",!0)]),a(w,{class:"px-2 py-0 md:px-4 md:py-2",onClick:he(He,["prevent"]),variant:"outline"},{default:o(()=>[a(M,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[34]||(e[34]=d(" Download CSV "))]),_:1}),m.isSuperAdmin?(i(),T(w,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[3]||(e[3]=s=>Se()),variant:"outline"},{default:o(()=>[a(M,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),e[35]||(e[35]=d(" Manage Reason Codes "))]),_:1})):k("",!0)])]),t("form",{ref_key:"exportForm",ref:j,action:Ie.value,method:"GET",class:"hidden"},null,8,Qt),a(n(ce),null,{default:o(()=>[a(n(me),{class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",Xt,[t("div",Zt,[a(w,{onClick:e[4]||(e[4]=s=>se("yesterday")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":b.value==="yesterday"})},{default:o(()=>e[37]||(e[37]=[d(" Yesterday ")])),_:1},8,["class"]),a(w,{onClick:e[5]||(e[5]=s=>se("current-week")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":b.value==="current-week"})},{default:o(()=>e[38]||(e[38]=[d(" WTD ")])),_:1},8,["class"]),a(w,{onClick:e[6]||(e[6]=s=>se("6w")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":b.value==="6w"})},{default:o(()=>e[39]||(e[39]=[d(" T6W ")])),_:1},8,["class"]),a(w,{onClick:e[7]||(e[7]=s=>se("quarterly")),variant:"outline",size:"sm",class:I({"border-primary bg-primary/10 text-primary":b.value==="quarterly"})},{default:o(()=>e[40]||(e[40]=[d(" Quarterly ")])),_:1},8,["class"])]),m.dateRange?(i(),u("div",Jt,[b.value==="yesterday"&&m.dateRange.start?(i(),u("span",Kt," Showing data from "+v(ae(m.dateRange.start)),1)):m.dateRange.start&&m.dateRange.end?(i(),u("span",es," Showing data from "+v(ae(m.dateRange.start))+" to "+v(ae(m.dateRange.end)),1)):(i(),u("span",ts,v(m.dateRange.label),1)),y.value?(i(),u("span",ss,"("+v(y.value)+")",1)):k("",!0)])):k("",!0)])]),_:1})]),_:1}),a(n(ce),{class:"mb-6"},{default:o(()=>[a(n(rt),{class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",as,[t("div",os,[a(n(it),{class:"text-lg md:text-xl lg:text-2xl"},{default:o(()=>e[41]||(e[41]=[d("Filters")])),_:1}),!c.value&&Qe.value?(i(),u("div",ls,[g.value.search?(i(),u("div",ns," Search: "+v(g.value.search),1)):k("",!0),g.value.rejectionType?(i(),u("div",rs,[e[42]||(e[42]=d(" Type: ")),t("span",is,v(g.value.rejectionType),1)])):k("",!0),g.value.reasonCode?(i(),u("div",ds," Reason: "+v(Xe(g.value.reasonCode)),1)):k("",!0),g.value.rejectionCategory?(i(),u("div",us," Category: "+v(ye(g.value.rejectionCategory)),1)):k("",!0),g.value.disputed?(i(),u("div",cs," Disputed: "+v(g.value.disputed==="true"?"Yes":"No"),1)):k("",!0),g.value.driverControllable?(i(),u("div",ms," Driver Controllable: "+v(g.value.driverControllable==="true"?"Yes":g.value.driverControllable==="false"?"No":"N/A"),1)):k("",!0)])):k("",!0)]),a(w,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=s=>c.value=!c.value)},{default:o(()=>[d(v(c.value?"Hide Filters":"Show Filters")+" ",1),a(M,{name:c.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),c.value?(i(),T(n(me),{key:0,class:"p-2 md:p-4 lg:p-6"},{default:o(()=>[t("div",ps,[t("div",fs,[t("div",null,[a(n(F),{for:"search"},{default:o(()=>e[43]||(e[43]=[d("Search")])),_:1}),a(n(ee),{class:"h-9 w-full px-1 py-1 md:px-2 md:py-1 lg:h-10 lg:px-3 lg:py-2",id:"search",modelValue:g.value.search,"onUpdate:modelValue":e[9]||(e[9]=s=>g.value.search=s),type:"text",placeholder:"Search by driver name..."},null,8,["modelValue"])])]),t("div",vs,[t("div",null,[a(n(F),{for:"rejectionType"},{default:o(()=>e[44]||(e[44]=[d("Rejection Type")])),_:1}),B(t("select",{id:"rejectionType","onUpdate:modelValue":e[10]||(e[10]=s=>g.value.rejectionType=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[45]||(e[45]=[t("option",{value:""},"All Types",-1),t("option",{value:"block"},"Block",-1),t("option",{value:"load"},"Load",-1)]),512),[[L,g.value.rejectionType]])]),t("div",null,[a(n(F),{for:"reasonCode"},{default:o(()=>e[46]||(e[46]=[d("Reason Code")])),_:1}),B(t("select",{id:"reasonCode","onUpdate:modelValue":e[11]||(e[11]=s=>g.value.reasonCode=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[47]||(e[47]=t("option",{value:""},"All Reason Codes",-1)),(i(!0),u(C,null,P(m.rejection_reason_codes,s=>(i(),u("option",{key:s.id,value:s.id},v(s.reason_code),9,gs))),128))],512),[[L,g.value.reasonCode]])]),t("div",null,[a(n(F),{for:"rejectionCategory"},{default:o(()=>e[48]||(e[48]=[d("Rejection From Start Time")])),_:1}),B(t("select",{id:"rejectionCategory","onUpdate:modelValue":e[12]||(e[12]=s=>g.value.rejectionCategory=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[49]||(e[49]=[t("option",{value:""},"All Categories",-1),t("option",{value:"more_than_6"},"More than 6 hours",-1),t("option",{value:"within_6"},"Within 6 hours",-1),t("option",{value:"after_start"},"After start time",-1)]),512),[[L,g.value.rejectionCategory]])])]),t("div",xs,[t("div",null,[a(n(F),{for:"disputed"},{default:o(()=>e[50]||(e[50]=[d("Disputed")])),_:1}),B(t("select",{id:"disputed","onUpdate:modelValue":e[13]||(e[13]=s=>g.value.disputed=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[51]||(e[51]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1)]),512),[[L,g.value.disputed]])]),t("div",null,[a(n(F),{for:"driverControllable"},{default:o(()=>e[52]||(e[52]=[d("Driver Controllable")])),_:1}),B(t("select",{id:"driverControllable","onUpdate:modelValue":e[14]||(e[14]=s=>g.value.driverControllable=s),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[53]||(e[53]=[t("option",{value:""},"All",-1),t("option",{value:"true"},"Yes",-1),t("option",{value:"false"},"No",-1),t("option",{value:"NA"},"N/A",-1)]),512),[[L,g.value.driverControllable]])])]),t("div",ys,[a(w,{onClick:Ce,variant:"ghost",size:"sm"},{default:o(()=>[a(M,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[54]||(e[54]=d(" Reset Filters "))]),_:1}),a(w,{onClick:ge,variant:"default",size:"sm"},{default:o(()=>[a(M,{name:"filter",class:"mr-2 h-4 w-4"}),e[55]||(e[55]=d(" Apply Filters "))]),_:1})])])]),_:1})):k("",!0)]),_:1}),m.isSuperAdmin?k("",!0):(i(),T($t,{key:2,metricsData:ze.value||{},driversData:Ve.value||[],chartData:Be.value||{},averageAcceptance:m.average_acceptance||null,currentDateFilter:((_=l.dateRange)==null?void 0:_.label)||"",currentFilters:g.value||{}},null,8,["metricsData","driversData","chartData","averageAcceptance","currentDateFilter","currentFilters"])),a(n(ce),{class:"mx-auto max-w-[95vw] overflow-x-auto md:max-w-[64vw] lg:max-w-full"},{default:o(()=>[a(n(me),{class:"p-0"},{default:o(()=>[t("div",bs,[a(n(ot),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[a(n(lt),null,{default:o(()=>[a(n(ue),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:o(()=>[a(n(oe),{class:"w-[50px]"},{default:o(()=>[t("div",_s,[t("input",{type:"checkbox",onChange:Oe,checked:Ee.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ks)])]),_:1}),m.isSuperAdmin?(i(),T(n(oe),{key:0},{default:o(()=>e[56]||(e[56]=[d("Company Name")])),_:1})):k("",!0),(i(),u(C,null,P(te,s=>a(n(oe),{key:s,class:"cursor-pointer",onClick:f=>je(s)},{default:o(()=>[t("div",ws,[s=="rejection_category"?(i(),u("div",hs,"Rejection From Start")):(i(),u("div",js,v(s.replace(/_/g," ").split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")),1)),q.value===s?(i(),u("div",Cs,[H.value==="asc"?(i(),u("svg",Ss,e[57]||(e[57]=[t("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),u("svg",$s,e[58]||(e[58]=[t("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),u("div",Ds,e[59]||(e[59]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 10l4-4 4 4"}),t("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),a(n(oe),null,{default:o(()=>e[60]||(e[60]=[d("Actions")])),_:1})]),_:1})]),_:1}),a(n(nt),null,{default:o(()=>[W.value.length===0?(i(),T(n(ue),{key:0},{default:o(()=>[a(n(J),{colspan:m.isSuperAdmin?te.length+3:te.length+2,class:"py-8 text-center"},{default:o(()=>e[61]||(e[61]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):k("",!0),(i(!0),u(C,null,P(W.value,s=>(i(),T(n(ue),{key:s.id,class:"hover:bg-muted/50"},{default:o(()=>[a(n(J),{class:"text-center"},{default:o(()=>[B(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[15]||(e[15]=f=>D.value=f),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,As),[[tt,D.value]])]),_:2},1024),m.isSuperAdmin?(i(),T(n(J),{key:0},{default:o(()=>{var f;return[d(v(((f=s.tenant)==null?void 0:f.name)||"—"),1)]}),_:2},1024)):k("",!0),(i(),u(C,null,P(te,f=>a(n(J),{key:f,class:"whitespace-nowrap"},{default:o(()=>{var X,Z;return[f==="date"?(i(),u(C,{key:0},[d(v(ae(s[f])),1)],64)):f==="rejection_type"?(i(),u("span",Ns,v(s[f]),1)):f==="reason_code"?(i(),u(C,{key:2},[d(v(((X=s.reason_code)==null?void 0:X.reason_code)||"—")+" ",1),(Z=s.reason_code)!=null&&Z.deleted_at?(i(),u("span",Rs,"(Deleted)")):k("",!0)],64)):f==="disputed"?(i(),u(C,{key:3},[d(v(s[f]?"Yes":"No"),1)],64)):f==="driver_controllable"?(i(),u(C,{key:4},[d(v(s[f]===null?"N/A":s[f]?"Yes":"No"),1)],64)):f==="rejection_category"?(i(),u(C,{key:5},[d(v(ye(s[f])),1)],64)):(i(),u(C,{key:6},[d(v(s[f]),1)],64))]}),_:2},1024)),64)),a(n(J),null,{default:o(()=>[t("div",Ts,[a(w,{size:"sm",onClick:f=>xe(s),variant:"warning"},{default:o(()=>[a(M,{name:"pencil",class:"mr-1 h-4 w-4"}),e[62]||(e[62]=d(" Edit "))]),_:2},1032,["onClick"]),a(w,{size:"sm",variant:"destructive",onClick:f=>Fe(s.id)},{default:o(()=>[a(M,{name:"trash",class:"mr-1 h-4 w-4"}),e[63]||(e[63]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),m.rejections.links?(i(),u("div",Fs,[t("div",Ms,[t("div",Us,[t("span",null,"Showing "+v(W.value.length)+" of "+v(m.rejections.data.length)+" entries",1),t("div",zs,[e[64]||(e[64]=t("span",{class:"text-sm"},"Show:",-1)),B(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>U.value=s),onChange:Ue,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(i(),u(C,null,P([10,25,50,100],s=>t("option",{key:s,value:s},v(s),9,Vs)),64))],544),[[L,U.value]])])]),t("div",Bs,[(i(!0),u(C,null,P(m.rejections.links,s=>(i(),T(w,{key:s.label,onClick:f=>Me(s.url),disabled:!s.url,variant:"ghost",size:"sm",class:I(["mx-1",{"border-primary bg-primary/10 text-primary":s.active}])},{default:o(()=>[t("span",{innerHTML:s.label},null,8,Ps)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):k("",!0)]),_:1})]),_:1}),a(n(le),{open:p.value,"onUpdate:open":e[18]||(e[18]=s=>p.value=s)},{default:o(()=>[a(n(ne),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:o(()=>[a(n(re),{class:"px-4 sm:px-6"},{default:o(()=>[a(n(ie),{class:"text-lg sm:text-xl"},{default:o(()=>[d(v($.value?"Edit":"Add")+" Rejection",1)]),_:1}),a(n(de),{class:"text-xs sm:text-sm"},{default:o(()=>[d(" Fill in the details to "+v($.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),a(Lt,{rejection:$.value,reasons:m.rejection_reason_codes,tenants:m.tenants,"is-super-admin":m.isSuperAdmin,"tenant-slug":m.tenantSlug,onClose:e[17]||(e[17]=s=>p.value=!1),class:"max-h-[75vh] overflow-y-auto p-4 sm:p-6"},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),m.isSuperAdmin?(i(),T(n(le),{key:3,open:R.value,"onUpdate:open":e[22]||(e[22]=s=>R.value=s)},{default:o(()=>[a(n(ne),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-2xl"},{default:o(()=>[a(n(re),{class:"px-4 sm:px-6"},{default:o(()=>[a(n(ie),{class:"text-lg sm:text-xl"},{default:o(()=>e[65]||(e[65]=[d("Manage Reason Codes")])),_:1}),a(n(de),{class:"text-xs sm:text-sm"},{default:o(()=>e[66]||(e[66]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),t("div",Ls,[t("div",Es,[e[68]||(e[68]=t("h3",{class:"text-sm font-medium sm:text-base"},"Current Reason Codes",-1)),a(w,{onClick:$e,size:"sm",variant:"outline",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>[a(M,{name:"plus",class:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e[67]||(e[67]=d(" Add New Code "))]),_:1})]),t("div",Os,[!m.rejection_reason_codes||m.rejection_reason_codes.length===0?(i(),u("div",Ys," No reason codes found ")):(i(),u("div",Ws,[(i(!0),u(C,null,P(m.rejection_reason_codes,s=>(i(),u("div",{key:s.id,class:"group flex items-center justify-between p-3 hover:bg-muted/50"},[t("div",{class:"flex-1 cursor-pointer",onClick:f=>De(s)},[t("div",Hs,[d(v(s.reason_code)+" ",1),s.deleted_at?(i(),u("span",Is,"(Deleted)")):k("",!0)]),s.description?(i(),u("div",Gs,v(s.description),1)):k("",!0)],8,qs),t("div",Qs,[m.isSuperAdmin?(i(),u(C,{key:0},[s.deleted_at?(i(),u(C,{key:0},[a(w,{onClick:f=>Pe(s.id),size:"sm",variant:"outline",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[a(M,{name:"refresh",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[69]||(e[69]=d(" Restore "))]),_:2},1032,["onClick"]),a(w,{onClick:f=>Le(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[a(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[70]||(e[70]=d(" Delete "))]),_:2},1032,["onClick"])],64)):(i(),T(w,{key:1,onClick:f=>Ne(s.id),size:"sm",variant:"destructive",class:"h-8 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm"},{default:o(()=>[a(M,{name:"trash",class:"mr-1 h-3 w-3 sm:h-3 sm:w-3"}),e[71]||(e[71]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):k("",!0)])]))),128))]))]),x.value?(i(),u("div",Xs,[t("h3",Zs,v(V.value?"Edit":"Add")+" Reason Code",1),t("div",Js,[t("div",null,[a(n(F),{for:"reason_code",class:"text-xs sm:text-sm"},{default:o(()=>e[72]||(e[72]=[d("Code")])),_:1}),a(n(ee),{id:"reason_code",modelValue:Y.value.reason_code,"onUpdate:modelValue":e[19]||(e[19]=s=>Y.value.reason_code=s),placeholder:"Enter reason code",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",null,[a(n(F),{for:"description",class:"text-xs sm:text-sm"},{default:o(()=>e[73]||(e[73]=[d("Description")])),_:1}),a(n(ee),{id:"description",modelValue:Y.value.description,"onUpdate:modelValue":e[20]||(e[20]=s=>Y.value.description=s),placeholder:"Enter description",class:"h-9 text-xs sm:h-10 sm:text-sm"},null,8,["modelValue"])]),t("div",Ks,[a(w,{onClick:Ae,variant:"ghost",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>e[74]||(e[74]=[d("Cancel")])),_:1}),a(w,{onClick:Re,variant:"default",size:"sm",class:"h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm"},{default:o(()=>e[75]||(e[75]=[d("Save")])),_:1})])])])):k("",!0)]),a(n(pe),{class:"px-4 sm:px-6"},{default:o(()=>[a(w,{onClick:e[21]||(e[21]=s=>R.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[76]||(e[76]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):k("",!0),a(n(le),{open:G.value,"onUpdate:open":e[25]||(e[25]=s=>G.value=s)},{default:o(()=>[a(n(ne),{class:"max-w-[95vw] sm:max-w-md"},{default:o(()=>[a(n(re),{class:"px-4 sm:px-6"},{default:o(()=>[a(n(ie),{class:"text-lg sm:text-xl"},{default:o(()=>e[77]||(e[77]=[d("Confirm Deletion")])),_:1}),a(n(de),{class:"text-xs sm:text-sm"},{default:o(()=>e[78]||(e[78]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),a(n(pe),{class:"px-4 sm:px-6"},{default:o(()=>[a(w,{type:"button",onClick:e[23]||(e[23]=s=>G.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[79]||(e[79]=[d(" Cancel ")])),_:1}),a(w,{type:"button",onClick:e[24]||(e[24]=s=>Te(ve.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[80]||(e[80]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(n(le),{open:E.value,"onUpdate:open":e[28]||(e[28]=s=>E.value=s)},{default:o(()=>[a(n(ne),{class:"max-w-[95vw] sm:max-w-md"},{default:o(()=>[a(n(re),{class:"px-4 sm:px-6"},{default:o(()=>[a(n(ie),{class:"text-lg sm:text-xl"},{default:o(()=>e[81]||(e[81]=[d("Confirm Bulk Deletion")])),_:1}),a(n(de),{class:"text-xs sm:text-sm"},{default:o(()=>[d(" Are you sure you want to delete "+v(D.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),a(n(pe),{class:"px-4 sm:px-6"},{default:o(()=>[a(w,{type:"button",onClick:e[26]||(e[26]=s=>E.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[82]||(e[82]=[d(" Cancel ")])),_:1}),a(w,{type:"button",onClick:e[27]||(e[27]=s=>We()),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:o(()=>e[83]||(e[83]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1},8,["tenantSlug"]))}};export{ha as default};
