import{x as ve,W as ie,g as Ct}from"./vendor-vue-BInP8APy.js";import{_ as St}from"./AppLayout.vue_vue_type_script_setup_true_lang-B8lustj2.js";import{d as Be,r as $,c as P,w as ot,y as dt,N as ut,F as c,e as d,b as k,E as h,X as a,z as t,f as l,u as e,S as n,U as f,G as ye,ah as it,C as W,Y as X,H as F,O as z,ai as ze,aj as ke,ak as $t,al as tt,P as Vt,n as At,j as Dt}from"./vendor-DrR5RGOb.js";import{_ as u}from"./Icon.vue_vue_type_script_setup_true_lang-C19RfzLR.js";import{_ as xe,a as ge,b as L,c as N,d as we,e as S}from"./TableRow.vue_vue_type_script_setup_true_lang-Ch0lDg94.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-B9WZ-5fZ.js";import{_ as Se}from"./Card.vue_vue_type_script_setup_true_lang-BDqXYs3O.js";import{_ as mt}from"./CardHeader.vue_vue_type_script_setup_true_lang-CWEBEWo7.js";import{_ as ft}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPLWcS8i.js";import{_ as $e}from"./CardContent.vue_vue_type_script_setup_true_lang-B7wYZRrP.js";import{_ as ne,a as oe,b as re,c as de,d as ue}from"./DialogDescription.vue_vue_type_script_setup_true_lang-5xvj-rV5.js";import{_ as me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-NVpKV1tK.js";import{_ as A}from"./Label.vue_vue_type_script_setup_true_lang-G5SND9_d.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-CfJsKr1D.js";import{_ as Ve,a as Ae,b as De}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BGsFFXsR.js";import{_ as et}from"./SortIndicator-Bw_PG_BZ.js";import{_ as Ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as rt}from"./app-DPORu6Cw.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-u708RIqT.js";import"./vendor-ui-iQj4qE_J.js";import"./vendor-icons-CZvmGlJ0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DZucapxj.js";const Ut={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},Mt={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},Nt={class:"flex items-center gap-3"},Tt={class:"flex flex-wrap gap-3"},It={class:"relative"},Ft={key:0,class:"absolute right-0 mt-1 w-48 rounded-md border bg-background shadow-lg z-10"},zt={class:"py-1"},Bt={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted"},Pt=["href"],Et={class:"flex justify-between items-center"},qt={class:"text-sm hidden sm:inline"},Wt={class:"flex flex-col gap-6"},Lt={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},Rt={class:"relative"},jt={class:"relative"},Qt={class:"overflow-x-auto"},Yt={class:"flex items-center justify-center"},Ht=["checked"],Gt={class:"flex items-center space-x-1"},Kt={key:4,class:"ml-2"},Xt={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Jt={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Zt={key:5,class:"ml-2 opacity-50"},es={class:"flex flex-col items-center justify-center text-muted-foreground"},ts=["value"],ss={class:"flex space-x-2"},ls={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},as={class:"flex items-center gap-4 text-sm text-muted-foreground"},ns={class:"flex items-center gap-1"},os={class:"flex items-center gap-1"},rs={class:"relative"},ds=["value"],us={class:"flex space-x-1"},is={class:"flex items-center gap-2"},ms={key:0,class:"col-span-2 sm:col-span-1"},fs={class:"relative"},ps=["value"],cs={class:"col-span-2 sm:col-span-1"},vs={class:"col-span-2 sm:col-span-1"},xs={class:"relative"},gs={class:"col-span-2 sm:col-span-1"},ws={class:"relative"},ys={class:"col-span-2 sm:col-span-1"},bs={class:"relative"},ks={class:"col-span-2 sm:col-span-1"},_s={class:"col-span-2 sm:col-span-1"},hs={class:"col-span-2 sm:col-span-1"},Cs={class:"relative"},Ss={class:"col-span-2 mt-4 flex justify-end gap-3"},$s=Be({__name:"TrucksComponent",props:{entries:{},tenantSlug:{},SuperAdmin:{type:Boolean},tenants:{},perPage:{}},emits:["update:perPage"],setup(U,{emit:M}){const x=U,V=$({search:"",type:"",make:""}),E=$("truckid"),T=$("asc"),q=$(1),C=$(10),Z=$(10),I=$([]),Y=$(!1),D=$(""),H=$(""),J=$(!1),ee=$(!1),te=$(!1),K=$(null),g=$(!1),se=$(!1),b=ve({id:null,truckid:null,type:"daycab",make:"international",fuel:"diesel",license:null,vin:"",tenant_id:x.SuperAdmin?"":null,status:"active",inspection_status:"good",inspection_expiry_date:new Date().toISOString().split("T")[0]}),le=ve({csv_file:null}),ae=$(null),be=P(()=>x.entries.filter(v=>{var r,m;return!(V.value.search&&!String(v.truckid).includes(V.value.search)&&!(v.vin||"").toLowerCase().includes(V.value.search.toLowerCase())||V.value.type&&((r=v.type)==null?void 0:r.toLowerCase())!=V.value.type||V.value.make&&((m=v.make)==null?void 0:m.toLowerCase())!=V.value.make)})),_=P(()=>[...be.value].sort((v,r)=>{let m=v[E.value],B=r[E.value];return m==null?1:B==null?-1:(typeof m=="string"&&(m=m.toLowerCase(),B=B.toLowerCase()),m<B?T.value==="asc"?-1:1:m>B?T.value==="asc"?1:-1:0)})),i=P(()=>Math.ceil(_.value.length/C.value)),w=P(()=>{const v=(q.value-1)*C.value,r=v+C.value;return _.value.slice(v,r)}),R=P(()=>w.value.length>0&&w.value.every(v=>I.value.includes(v.id))),j=["truckid","type","make","fuel","license","vin","inspection_status","inspection_expiry_date","status"];ot(D,v=>v&&setTimeout(()=>D.value="",5e3)),ot(C,v=>{Z.value=v});function fe(v){return v.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase())}function Pe(v){return v?new Date(v+"T00:00:00").toLocaleDateString():"—"}function pe(v,r){if(r==="status")return v.status;if(r==="inspection_status")return v.inspection_status==="good"?"Good":"Expired";if(r==="inspection_expiry_date")return Pe(v[r]);const m=v[r];return typeof m=="string"?m.charAt(0).toUpperCase()+m.slice(1):m}const ce=()=>{q.value=1};function Ee(){V.value={search:"",type:"",make:""},ce()}function Oe(v){E.value===v?T.value=T.value==="asc"?"desc":"asc":(E.value=v,T.value="asc")}const qe=()=>{C.value=Z.value,ce()},Ue=v=>{v>=1&&v<=i.value&&(q.value=v)};function We(v){v.target.checked?w.value.forEach(m=>{I.value.includes(m.id)||I.value.push(m.id)}):I.value=I.value.filter(m=>!w.value.some(B=>B.id===m))}function Le(){b.reset(),b.clearErrors(),b.id=null,J.value=!0}function Re(v){b.reset(),b.clearErrors(),b.id=v.id,b.truckid=v.truckid,b.type=v.type?v.type.toLowerCase():"",b.make=v.make?v.make.toLowerCase():"",b.fuel=v.fuel,b.license=v.license,b.vin=v.vin,b.status=v.status,b.tenant_id=v.tenant_id,b.inspection_status=v.inspection_status||"good",b.inspection_expiry_date=v.inspection_expiry_date||new Date().toISOString().split("T")[0],J.value=!0}function je(){J.value=!1}function Me(){const v={...b.data(),truckid:Number(b.truckid),license:Number(b.license)},r=b.id?"put":"post",m=b.id?x.SuperAdmin?route("truck.update.admin",[b.id]):route("truck.update",[x.tenantSlug,b.id]):route(x.SuperAdmin?"truck.store.admin":"truck.store",{tenantSlug:x.tenantSlug});g.value=!0,b[r](m,{data:v,onSuccess:()=>{D.value=b.id?"Truck updated.":"Truck created.",je()},onError:()=>H.value="Save failed",onFinish:()=>g.value=!1})}function _e(v){K.value=v,ee.value=!0}function Qe(){if(!K.value)return;const v=x.SuperAdmin?route("truck.destroy.admin",[K.value.id]):route("truck.destroy",[x.tenantSlug,K.value.id]);b.delete(v,{onSuccess:()=>{D.value="Deleted successfully",ee.value=!1}})}function Ye(){I.value.length&&(te.value=!0)}function He(){const v=route(x.SuperAdmin?"truck.destroyBulk.admin":"truck.destroyBulk",{tenantSlug:x.tenantSlug});ve({ids:I.value}).delete(v,{onSuccess:()=>{D.value=`${I.value.length} deleted`,I.value=[],te.value=!1}})}function Ge(v){var m;const r=(m=v.target.files)==null?void 0:m[0];r&&(le.csv_file=r,le.post(route(x.SuperAdmin?"truck.import.admin":"truck.import",{tenantSlug:x.tenantSlug}),{forceFormData:!0,onSuccess:()=>D.value="Imported",onError:()=>H.value="Import failed"}))}function Ke(){var v,r;if(!w.value.length){H.value="No data to export";return}(v=ae.value)==null||v.setAttribute("action",route(x.SuperAdmin?"truck.export.admin":"truck.export",{tenantSlug:x.tenantSlug})),(r=ae.value)==null||r.submit()}const Xe=P(()=>"/storage/upload-data-temps/Trucks Template.csv");dt(()=>{const v=r=>{Y.value&&!r.target.closest(".relative")&&(Y.value=!1)};document.addEventListener("click",v),ut(()=>document.removeEventListener("click",v))});const Je=P(()=>{if(i.value<=7)return Array.from({length:i.value},(B,Ze)=>Ze+1);const v=[];v.push(1),q.value>3&&v.push("...");const r=Math.max(2,q.value-1),m=Math.min(i.value-1,q.value+1);for(let B=r;B<=m;B++)v.push(B);return q.value<i.value-2&&v.push("..."),i.value>1&&v.push(i.value),v});return(v,r)=>(d(),c("div",Ut,[D.value?(d(),k(e(De),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:l(()=>[t(e(Ve),{class:"flex items-center gap-2"},{default:l(()=>[t(u,{name:"check_circle",class:"h-5 w-5 text-green-500"}),r[23]||(r[23]=n(" Success "))]),_:1}),t(e(Ae),null,{default:l(()=>[n(f(D.value),1)]),_:1})]),_:1})):h("",!0),H.value?(d(),k(e(De),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:l(()=>[t(e(Ve),{class:"flex items-center gap-2"},{default:l(()=>[t(u,{name:"alert_circle",class:"h-5 w-5"}),r[24]||(r[24]=n(" Error "))]),_:1}),t(e(Ae),null,{default:l(()=>[n(f(H.value),1)]),_:1})]),_:1})):h("",!0),a("div",Mt,[a("div",Nt,[t(u,{name:"truck",class:"h-6 w-6 text-primary hidden sm:block"}),r[25]||(r[25]=a("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"},"Truck Management",-1))]),a("div",Tt,[t(e(y),{onClick:Le,variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),r[26]||(r[26]=n(" Create New Truck "))]),_:1}),I.value.length?(d(),k(e(y),{key:0,onClick:Ye,variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),n(" Delete Selected ("+f(I.value.length)+") ",1)]),_:1})):h("",!0),a("div",It,[t(e(y),{onClick:r[0]||(r[0]=m=>Y.value=!Y.value),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),r[27]||(r[27]=n(" Upload CSV ")),t(u,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),Y.value?(d(),c("div",Ft,[a("div",zt,[a("label",Bt,[r[28]||(r[28]=a("span",null,"Upload CSV File",-1)),a("input",{type:"file",class:"hidden",onChange:Ge,accept:".csv,.txt"},null,32)]),a("a",{href:Xe.value,download:"",class:"block px-4 py-2 text-sm hover:bg-muted"},"Download Template",8,Pt)])])):h("",!0)]),t(e(y),{onClick:ye(Ke,["prevent"]),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),r[29]||(r[29]=n(" Download CSV "))]),_:1})])]),t(e(Se),{class:"shadow-sm border"},{default:l(()=>[t(e(mt),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:l(()=>[a("div",Et,[t(e(ft),{class:"text-lg md:text-xl lg:text-2xl flex items-center gap-2"},{default:l(()=>[t(u,{name:"filter",class:"h-5 w-5 text-muted-foreground"}),r[30]||(r[30]=n(" Filters "))]),_:1}),t(e(y),{variant:"ghost",size:"sm",onClick:r[1]||(r[1]=m=>se.value=!se.value),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:l(()=>[a("span",qt,f(se.value?"Hide Filters":"Show Filters"),1),t(u,{name:se.value?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),t(it,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:l(()=>[se.value?(d(),k(e($e),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:l(()=>[a("div",Wt,[a("div",Lt,[a("div",null,[t(e(A),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[t(u,{name:"search",class:"h-4 w-4 text-muted-foreground"}),r[31]||(r[31]=n(" Search "))]),_:1}),t(e(Q),{id:"search",type:"text",modelValue:V.value.search,"onUpdate:modelValue":r[2]||(r[2]=m=>V.value.search=m),placeholder:"Search by truck ID or VIN...",onInput:ce,class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),a("div",null,[t(e(A),{for:"type",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[t(u,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),r[32]||(r[32]=n(" Type "))]),_:1}),a("div",Rt,[W(a("select",{id:"type","onUpdate:modelValue":r[3]||(r[3]=m=>V.value.type=m),onChange:ce,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},r[33]||(r[33]=[a("option",{value:""},"All Types",-1),a("option",{value:"daycab"},"Daycab",-1),a("option",{value:"sleepercab"},"Sleepercab",-1)]),544),[[X,V.value.type]]),r[34]||(r[34]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",null,[t(e(A),{for:"make",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[t(u,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),r[35]||(r[35]=n(" Make "))]),_:1}),a("div",jt,[W(a("select",{id:"make","onUpdate:modelValue":r[4]||(r[4]=m=>V.value.make=m),onChange:ce,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},r[36]||(r[36]=[a("option",{value:""},"All Makes",-1),a("option",{value:"international"},"International",-1),a("option",{value:"kenworth"},"Kenworth",-1),a("option",{value:"peterbilt"},"Peterbilt",-1),a("option",{value:"volvo"},"Volvo",-1),a("option",{value:"freightliner"},"Freightliner",-1)]),544),[[X,V.value.make]]),r[37]||(r[37]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),t(e(y),{onClick:Ee,variant:"ghost",size:"sm",class:"self-start"},{default:l(()=>[t(u,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),r[38]||(r[38]=n(" Reset Filters "))]),_:1})])]),_:1})):h("",!0)]),_:1})]),_:1}),t(e(Se),{class:"mx-auto max-w-[90vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:l(()=>[t(e($e),{class:"p-0"},{default:l(()=>[a("div",Qt,[t(e(xe),{class:"relative h-[500px] overflow-auto"},{default:l(()=>[t(e(ge),null,{default:l(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:l(()=>[t(e(N),{class:"w-12"},{default:l(()=>[a("div",Yt,[a("input",{type:"checkbox",checked:R.value,onChange:We,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ht)])]),_:1}),v.SuperAdmin?(d(),k(e(N),{key:0,class:"font-semibold"},{default:l(()=>r[39]||(r[39]=[n("Company")])),_:1})):h("",!0),(d(),c(F,null,z(j,m=>t(e(N),{key:m,onClick:B=>Oe(m),class:"cursor-pointer font-semibold"},{default:l(()=>[a("div",Gt,[m==="inspection_status"?(d(),c(F,{key:0},[n("Annual Inspection Status")],64)):m==="inspection_expiry_date"?(d(),c(F,{key:1},[n("Annual Inspection Expiration Date")],64)):m==="status"?(d(),c(F,{key:2},[n("Status")],64)):(d(),c(F,{key:3},[n(f(fe(m)),1)],64)),E.value===m?(d(),c("div",Kt,[T.value==="asc"?(d(),c("svg",Xt,r[40]||(r[40]=[a("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(d(),c("svg",Jt,r[41]||(r[41]=[a("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(d(),c("div",Zt,r[42]||(r[42]=[a("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M8 10l4-4 4 4"}),a("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),t(e(N),{class:"font-semibold"},{default:l(()=>r[43]||(r[43]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[w.value.length?h("",!0):(d(),k(e(L),{key:0},{default:l(()=>[t(e(S),{colspan:v.SuperAdmin?j.length+3:j.length+2,class:"py-8 text-center"},{default:l(()=>[a("div",es,[t(u,{name:"search_x",class:"h-12 w-12 mb-2 opacity-30"}),r[44]||(r[44]=a("p",null,"No trucks found matching your criteria.",-1))])]),_:1},8,["colspan"])]),_:1})),(d(!0),c(F,null,z(w.value,m=>(d(),k(e(L),{key:m.id,class:"hover:bg-muted/50"},{default:l(()=>[t(e(S),{class:"text-center"},{default:l(()=>[W(a("input",{type:"checkbox",value:m.id,"onUpdate:modelValue":r[5]||(r[5]=B=>I.value=B),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,ts),[[ze,I.value]])]),_:2},1024),v.SuperAdmin?(d(),k(e(S),{key:0},{default:l(()=>{var B;return[n(f(((B=m.tenant)==null?void 0:B.name)||"—"),1)]}),_:2},1024)):h("",!0),(d(),c(F,null,z(j,B=>t(e(S),{key:B,class:"whitespace-nowrap"},{default:l(()=>[n(f(pe(m,B)),1)]),_:2},1024)),64)),t(e(S),null,{default:l(()=>[a("div",ss,[t(e(y),{variant:"warning",size:"sm",onClick:B=>Re(m),class:"shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"pencil",class:"mr-1 h-4 w-4"}),r[45]||(r[45]=n(" Edit "))]),_:2},1032,["onClick"]),t(e(y),{variant:"destructive",size:"sm",onClick:B=>_e(m),class:"shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"trash",class:"mr-1 h-4 w-4"}),r[46]||(r[46]=n(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),a("div",ls,[a("div",as,[a("span",ns,[t(u,{name:"list",class:"h-4 w-4"}),n(" Showing "+f(w.value.length)+" of "+f(_.value.length)+" entries ",1)]),a("span",os,[t(u,{name:"layout-grid",class:"h-4 w-4"}),r[47]||(r[47]=n(" Per page: "))]),a("div",rs,[W(a("select",{"onUpdate:modelValue":r[6]||(r[6]=m=>Z.value=m),onChange:qe,class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(d(),c(F,null,z([10,25,50,100],m=>a("option",{key:m,value:m},f(m),9,ds)),64))],544),[[X,Z.value,void 0,{number:!0}]]),r[48]||(r[48]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",us,[t(e(y),{size:"sm",variant:"ghost",onClick:r[7]||(r[7]=m=>Ue(q.value-1)),disabled:q.value===1,class:"flex items-center gap-1"},{default:l(()=>[t(u,{name:"chevron-left",class:"h-4 w-4"}),r[49]||(r[49]=n(" Prev "))]),_:1},8,["disabled"]),(d(!0),c(F,null,z(Je.value,m=>(d(),k(e(y),{key:m,size:"sm",variant:"ghost",onClick:B=>Ue(m),class:ke({"border-primary bg-primary/10 text-primary font-medium":m===q.value})},{default:l(()=>[n(f(m),1)]),_:2},1032,["onClick","class"]))),128)),t(e(y),{size:"sm",variant:"ghost",onClick:r[8]||(r[8]=m=>Ue(q.value+1)),disabled:q.value===i.value,class:"flex items-center gap-1"},{default:l(()=>[r[50]||(r[50]=n(" Next ")),t(u,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})]),_:1}),t(e(ue),{open:J.value,"onUpdate:open":r[18]||(r[18]=m=>J.value=m)},{default:l(()=>[t(e(ne),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:l(()=>[t(e(oe),{class:"px-4 sm:px-6 border-b pb-4"},{default:l(()=>[a("div",is,[t(u,{name:e(b).id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),t(e(re),{class:"text-lg sm:text-xl"},{default:l(()=>[n(f(e(b).id?"Edit Truck":"Create Truck"),1)]),_:1})]),t(e(de),{class:"text-xs sm:text-sm mt-1"},{default:l(()=>[n("Fill in the details to "+f(e(b).id?"update":"create")+" a truck.",1)]),_:1})]),_:1}),a("form",{onSubmit:ye(Me,["prevent"]),class:"grid max-h-[75vh] grid-cols-1 gap-4 overflow-y-auto p-4 sm:grid-cols-2 sm:gap-5 sm:p-6"},[r[70]||(r[70]=a("div",{class:"col-span-2 mb-2 border-b pb-2"},[a("h3",{class:"text-sm font-medium text-muted-foreground"},"Basic Information")],-1)),v.SuperAdmin?(d(),c("div",ms,[t(e(A),{for:"tenant",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"building",class:"h-4 w-4 text-muted-foreground"}),r[51]||(r[51]=n(" Company Name "))]),_:1}),a("div",fs,[W(a("select",{id:"tenant","onUpdate:modelValue":r[9]||(r[9]=m=>e(b).tenant_id=m),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[r[52]||(r[52]=a("option",{value:""},"Select Company",-1)),(d(!0),c(F,null,z(v.tenants,m=>(d(),c("option",{key:m.id,value:m.id},f(m.name),9,ps))),128))],512),[[X,e(b).tenant_id]]),r[53]||(r[53]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):h("",!0),a("div",cs,[t(e(A),{for:"truckid",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),r[54]||(r[54]=n(" Truck ID "))]),_:1}),t(e(Q),{id:"truckid",modelValue:e(b).truckid,"onUpdate:modelValue":r[10]||(r[10]=m=>e(b).truckid=m),modelModifiers:{number:!0},type:"number",required:"",placeholder:"Enter truck ID number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),a("div",vs,[t(e(A),{for:"type",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),r[55]||(r[55]=n(" Type "))]),_:1}),a("div",xs,[W(a("select",{id:"type","onUpdate:modelValue":r[11]||(r[11]=m=>e(b).type=m),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[56]||(r[56]=[a("option",{value:"daycab"},"Daycab",-1),a("option",{value:"sleepercab"},"Sleepercab",-1)]),512),[[X,e(b).type]]),r[57]||(r[57]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",gs,[t(e(A),{for:"make",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),r[58]||(r[58]=n(" Make "))]),_:1}),a("div",ws,[W(a("select",{id:"make","onUpdate:modelValue":r[12]||(r[12]=m=>e(b).make=m),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[59]||(r[59]=[a("option",{value:"international"},"International",-1),a("option",{value:"kenworth"},"Kenworth",-1),a("option",{value:"peterbilt"},"Peterbilt",-1),a("option",{value:"volvo"},"Volvo",-1),a("option",{value:"freightliner"},"Freightliner",-1)]),512),[[X,e(b).make]]),r[60]||(r[60]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),r[71]||(r[71]=a("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[a("h3",{class:"text-sm font-medium text-muted-foreground"},"Additional Information")],-1)),a("div",ys,[t(e(A),{for:"fuel",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"fuel",class:"h-4 w-4 text-muted-foreground"}),r[61]||(r[61]=n(" Fuel "))]),_:1}),a("div",bs,[W(a("select",{id:"fuel","onUpdate:modelValue":r[13]||(r[13]=m=>e(b).fuel=m),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[62]||(r[62]=[a("option",{value:"diesel"},"Diesel",-1),a("option",{value:"cng"},"CNG",-1)]),512),[[X,e(b).fuel]]),r[63]||(r[63]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",ks,[t(e(A),{for:"license",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"id_card",class:"h-4 w-4 text-muted-foreground"}),r[64]||(r[64]=n(" License "))]),_:1}),t(e(Q),{id:"license",modelValue:e(b).license,"onUpdate:modelValue":r[14]||(r[14]=m=>e(b).license=m),modelModifiers:{number:!0},type:"number",min:"0",required:"",placeholder:"Enter license number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),a("div",_s,[t(e(A),{for:"vin",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"fingerprint",class:"h-4 w-4 text-muted-foreground"}),r[65]||(r[65]=n(" VIN "))]),_:1}),t(e(Q),{id:"vin",modelValue:e(b).vin,"onUpdate:modelValue":r[15]||(r[15]=m=>e(b).vin=m),type:"text",required:"",placeholder:"Enter vehicle identification number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),r[72]||(r[72]=a("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[a("h3",{class:"text-sm font-medium text-muted-foreground"},"Inspection Details")],-1)),a("div",hs,[t(e(A),{for:"inspection_status",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[t(u,{name:"clipboard_check",class:"h-4 w-4 text-muted-foreground"}),r[66]||(r[66]=n(" Annual Inspection Status "))]),_:1}),a("div",Cs,[W(a("select",{id:"inspection_status","onUpdate:modelValue":r[16]||(r[16]=m=>e(b).inspection_status=m),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},r[67]||(r[67]=[a("option",{value:"good"},"Good",-1),a("option",{value:"expired"},"Expired",-1)]),512),[[X,e(b).inspection_status]]),r[68]||(r[68]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",Ss,[t(e(y),{type:"button",variant:"outline",onClick:r[17]||(r[17]=m=>J.value=!1),class:"transition-all hover:shadow-sm"},{default:l(()=>[t(u,{name:"x",class:"mr-2 h-4 w-4"}),r[69]||(r[69]=n(" Cancel "))]),_:1}),t(e(y),{type:"submit",variant:"default",class:"transition-all hover:shadow-sm"},{default:l(()=>[t(u,{name:e(b).id?"pencil":"plus",class:"mr-2 h-4 w-4"},null,8,["name"]),n(" "+f(e(b).id?"Update":"Create"),1)]),_:1})])],32)]),_:1})]),_:1},8,["open"]),t(e(ue),{open:ee.value,"onUpdate:open":r[20]||(r[20]=m=>ee.value=m)},{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(oe),null,{default:l(()=>[t(e(re),null,{default:l(()=>r[73]||(r[73]=[n("Confirm Deletion")])),_:1}),t(e(de),null,{default:l(()=>r[74]||(r[74]=[n("Are you sure you want to delete this truck? This action cannot be undone.")])),_:1})]),_:1}),t(e(me),{class:"mt-4"},{default:l(()=>[t(e(y),{variant:"outline",onClick:r[19]||(r[19]=m=>ee.value=!1)},{default:l(()=>r[75]||(r[75]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:Qe},{default:l(()=>r[76]||(r[76]=[n("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ue),{open:te.value,"onUpdate:open":r[22]||(r[22]=m=>te.value=m)},{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(oe),null,{default:l(()=>[t(e(re),null,{default:l(()=>r[77]||(r[77]=[n("Confirm Bulk Deletion")])),_:1}),t(e(de),null,{default:l(()=>[n("Are you sure you want to delete "+f(I.value.length)+" trucks? This action cannot be undone.",1)]),_:1})]),_:1}),t(e(me),{class:"mt-4"},{default:l(()=>[t(e(y),{variant:"outline",onClick:r[21]||(r[21]=m=>te.value=!1)},{default:l(()=>r[78]||(r[78]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:He},{default:l(()=>r[79]||(r[79]=[n("Delete Selected")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a("form",{ref_key:"exportForm",ref:ae,method:"GET",class:"hidden"},null,512)]))}}),Vs={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},As={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},Ds={class:"flex items-center gap-3"},Os={class:"flex flex-wrap gap-3"},Us={class:"relative"},Ms={key:0,class:"absolute right-0 mt-1 w-48 rounded-md border bg-background shadow-md z-10 animate-in fade-in duration-200"},Ns={class:"block cursor-pointer px-4 py-2 text-sm hover:bg-muted transition-colors"},Ts={key:2,class:"mb-6"},Is={class:"rounded-md border-l-4 border-red-500 bg-red-50 p-4 shadow-sm dark:border-red-400 dark:bg-red-900/30"},Fs={class:"flex items-center"},zs={class:"flex-shrink-0"},Bs={class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100 dark:bg-red-800"},Ps={class:"ml-3"},Es={class:"mt-1 text-sm text-red-700 dark:text-red-200"},qs={class:"mt-2"},Ws={class:"flex flex-wrap gap-2"},Ls={key:0,class:"text-sm text-muted-foreground mt-2"},Rs={key:0},js={key:1},Qs={key:2},Ys={key:3,class:"ml-1"},Hs={key:3,class:"mx-auto mb-6 grid max-w-[95vw] grid-cols-1 gap-4 md:max-w-[64vw] md:grid-cols-2 lg:max-w-full"},Gs={class:"rounded-lg border bg-card shadow-sm"},Ks={class:"p-4"},Xs={class:"space-y-3"},Js={class:"text-sm"},Zs={key:0,class:"text-center text-muted-foreground"},el={class:"rounded-lg border bg-card shadow-sm"},tl={class:"p-4"},sl={class:"space-y-3"},ll={class:"text-sm"},al={key:0,class:"text-center text-muted-foreground"},nl={key:4,class:"mx-auto mb-6 max-w-[90vw] overflow-x-auto rounded-lg border bg-card p-4 shadow-sm md:max-w-[64vw] lg:max-w-full"},ol={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},rl={key:5,class:"mx-auto mb-6 max-w-[95vw] overflow-x-auto rounded-lg border bg-card shadow-sm md:max-w-[64vw] lg:max-w-full"},dl={class:"flex items-center justify-between border-b p-4"},ul={class:"flex items-start justify-between"},il={class:"flex flex-col items-center space-y-1"},ml={key:0,class:"mb-6 rounded-lg border bg-card shadow-sm"},fl={class:"overflow-x-auto"},pl={class:"max-h-60 overflow-y-auto sm:max-h-80 md:max-h-96"},cl={key:6,class:"mb-6 rounded-lg border bg-card shadow-sm"},vl={class:"flex justify-between items-center"},xl={class:"text-sm hidden sm:inline"},gl={class:"flex flex-col gap-6"},wl={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},yl={class:"relative"},bl=["value"],kl={class:"relative"},_l=["value"],hl={class:"overflow-x-auto"},Cl={class:"flex items-center justify-center"},Sl=["checked"],$l={class:"flex items-center space-x-1"},Vl={class:"flex items-center space-x-1"},Al={class:"flex items-center space-x-1"},Dl={class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Ol=["value"],Ul={key:0},Ml={key:0},Nl={key:1},Tl={class:"flex space-x-2"},Il={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},Fl={class:"flex items-center gap-4 text-sm text-muted-foreground"},zl={class:"flex items-center gap-1"},Bl={class:"flex items-center gap-1"},Pl={class:"relative"},El=["value"],ql={class:"flex space-x-1"},Wl=["innerHTML"],Ll={key:8,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Rl={class:"flex items-center gap-2"},jl={class:"max-h-[70vh] overflow-y-auto px-4 sm:px-6"},Ql={key:0,class:"col-span-2 mb-1"},Yl={class:"relative"},Hl=["value"],Gl={class:"col-span-2 border-b pb-1 mb-2 flex items-center gap-2"},Kl={class:"grid grid-cols-2 gap-3 col-span-2"},Xl={class:"relative"},Jl=["value"],Zl={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},ea={class:"col-span-2"},ta={class:"flex flex-wrap gap-1 mb-2 bg-muted/30 p-2 rounded-md min-h-[40px]"},sa=["onClick"],la={key:0,class:"text-muted-foreground text-sm italic"},aa={class:"relative"},na=["value"],oa={class:"col-span-2"},ra={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},da={class:"grid grid-cols-2 gap-3 col-span-2"},ua={class:"relative"},ia=["value"],ma={class:"relative"},fa=["value"],pa={class:"relative"},ca={class:"grid grid-cols-2 gap-3 col-span-2"},va={class:"relative"},xa={class:"flex items-center space-x-2"},ga={key:1,class:"col-span-2"},wa={class:"border-b pb-1 mb-2 mt-1 flex items-center gap-2"},ya={class:"flex items-center space-x-2"},ba={key:0,class:"mt-2"},ka={class:"space-y-4 sm:space-y-6"},_a={class:"space-y-1 sm:space-y-2"},ha={class:"rounded-md border"},Ca={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Sa={key:0,class:"ml-1 text-xs text-red-500"},$a={class:"flex space-x-1 sm:space-x-2"},Va={class:"space-y-4 sm:space-y-6"},Aa={class:"space-y-1 sm:space-y-2"},Da={class:"overflow-hidden rounded-md border"},Oa={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Ua={key:0,class:"ml-1 text-xs text-red-500"},Ma={class:"flex space-x-1 sm:space-x-2"},Na={class:"space-y-4 sm:space-y-6"},Ta={class:"space-y-1 sm:space-y-2"},Ia={class:"overflow-hidden rounded-md border"},Fa={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},za={key:0,class:"ml-1 text-xs text-red-500"},Ba={class:"flex space-x-1 sm:space-x-2"},Pa={class:"max-h-[60vh] overflow-x-auto overflow-y-auto"},Ea={class:"flex items-center gap-2"},qa={key:1,class:"py-8 text-center text-muted-foreground"},Wa="/storage/upload-data-temps/Repair Orders Template.csv",La=Be({__name:"RepairOrdersComponent",props:{repairOrders:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},SuperAdmin:{type:Boolean,default:!1},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({search:"",vendor_id:"",status_id:""})},perPage:{type:Number,default:10},openedComponent:{type:String,default:"trucks"}},emits:["update:perPage"],setup(U,{emit:M}){const x=U,V=$({...x.filters,dateFilter:x.dateFilter}),E=$(x.perPage),T=$([]),q=$(!1),C=$(""),Z=$(""),I=$(!1),Y=$(!1),D=$(!1),H=$(!1),J=$(!1),ee=$(!1),te=$(!1),K=$("Create"),g=ve({id:null,tenant_id:x.SuperAdmin?"":null,ro_number:"",ro_open_date:"",ro_close_date:"",truck_id:null,vendor_id:null,wo_number:"",wo_status_id:null,invoice:"",invoice_amount:"",invoice_received:!1,on_qs:"no",qs_invoice_date:"",disputed:!1,dispute_outcome:"",repairs_made:"",area_of_concerns:[]}),se=ve({concern:""}),b=ve({vendor_name:""}),le=ve({name:""}),ae=P(()=>x.SuperAdmin),be=P(()=>x.repairOrders.data.length>0),_=P(()=>be.value&&x.repairOrders.data.every(p=>T.value.includes(p.id))),i=[{label:"Yesterday",value:"yesterday"},{label:"WTD",value:"current-week"},{label:"T6W",value:"6w"},{label:"Quarterly",value:"quarterly"}],w=p=>{if(!p)return"";const s=p.split("-");if(s.length!==3)return p;const[G,Ce,o]=s;return`${Number(Ce)}/${Number(o)}/${G}`};function R(p){return p?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p):"$0.00"}function j(p){V.value.dateFilter=p,fe()}function fe(){const p=x.SuperAdmin?"repair_orders.index.admin":"repair_orders.index",s={...x.SuperAdmin?{}:{tenantSlug:x.tenantSlug},...V.value,perPage:E.value,dateFilter:V.value.dateFilter,openedComponent:"repairOrders"};ie.visit(route(p,s),{only:["repairOrders","filters","perPage","dateFilter","weekNumber","startWeekNumber","endWeekNumber","year","workOrdersByTruck","workOrderByAreasOfConcern","openedComponent"]})}function Pe(){V.value={...V.value,search:"",vendor_id:"",status_id:""},fe()}const pe=$({column:"ro_number",direction:"asc"});function ce(p){pe.value.column===p?pe.value.direction=pe.value.direction==="asc"?"desc":"asc":pe.value={column:p,direction:"asc"},fe()}function Ee(){fe()}function Oe(p){if(p){const s=new URL(p),G=s.origin+s.pathname;ie.get(G,{...V.value,perPage:E.value,dateFilter:V.value.dateFilter,openedComponent:"repairOrders",page:s.searchParams.get("page")||1},{preserveScroll:!0})}}function qe(p){const s=p.target.checked;T.value=s?x.repairOrders.data.map(G=>G.id):[]}function Ue(p){const s=p.target.files[0];if(!s)return;const G=new FormData;G.append("file",s);const Ce=x.tenantSlug?route("repair_orders.import",{tenantSlug:x.tenantSlug}):route("repair_orders.import.admin");ie.post(Ce,G,{onSuccess:()=>{C.value="Imported",p.target.value=null}})}function We(){if(!be.value){Z.value="No data";return}window.location.href=x.tenantSlug?route("repair_orders.export",{tenantSlug:x.tenantSlug}):route("repair_orders.export.admin")}function Le(){g.reset(),K.value="Create",Y.value=!0}function Re(p){g.reset(),g.reset(),g.id=p.id,g.tenant_id=p.tenant_id,g.ro_number=p.ro_number,g.ro_open_date=p.ro_open_date,g.ro_close_date=p.ro_close_date||"",g.truck_id=p.truck_id,g.vendor_id=p.vendor_id,g.wo_number=p.wo_number,g.wo_status_id=p.wo_status_id,g.invoice=p.invoice||"",g.invoice_amount=p.invoice_amount||"",g.invoice_received=!!p.invoice_received,g.on_qs=p.on_qs||"no",g.qs_invoice_date=p.qs_invoice_date||"",g.disputed=!!p.disputed,g.dispute_outcome=p.dispute_outcome||"",g.repairs_made=p.repairs_made||"",g.area_of_concerns=[],p.areas_of_concern&&Array.isArray(p.areas_of_concern)&&(g.area_of_concerns=p.areas_of_concern.map(s=>s.id)),K.value="Update",Y.value=!0}function je(){g.reset(),Y.value=!1}function Me(){const p=K.value==="Update"?x.tenantSlug?route("repair_orders.update",[x.tenantSlug,g.id]):route("repair_orders.update.admin",g.id):x.tenantSlug?route("repair_orders.store",{tenantSlug:x.tenantSlug}):route("repair_orders.store.admin");g[K.value==="Update"?"put":"post"](p,{onSuccess:()=>{C.value=`${K.value}d!`,Y.value=!1}})}let _e=null;function Qe(p){_e=p,D.value=!0}function Ye(){if(_e===null)return;const p=x.tenantSlug?route("repair_orders.destroy",[x.tenantSlug,_e]):route("repair_orders.destroy.admin",_e);ie.delete(p,{onSuccess:()=>{C.value="Deleted",D.value=!1}})}function He(){H.value=!0}function Ge(){const p=x.tenantSlug?route("repair_orders.destroyBulk",{tenantSlug:x.tenantSlug}):route("repair_orders.destroyBulk.admin");ve({ids:T.value}).delete(p,{onSuccess:()=>{C.value=`${T.value.length} deleted`,T.value=[],H.value=!1}})}function Ke(){se.reset(),J.value=!0}function Xe(){se.post(route("area_of_concerns.store.admin"),{onSuccess:()=>se.reset()})}function Je(p){ie.delete(route("area_of_concerns.destroy.admin",p))}function v(p){ie.post(route("area_of_concerns.restore.admin",p))}function r(){b.reset(),ee.value=!0}function m(){b.post(route("vendors.store.admin"),{onSuccess:()=>b.reset()})}function B(p){ie.delete(route("vendors.destroy.admin",p))}function Ze(p){ie.post(route("vendors.restore.admin",p))}function pt(){le.reset(),te.value=!0}function ct(){le.post(route("wo_statuses.store.admin"),{onSuccess:()=>le.reset()})}function vt(p){ie.delete(route("wo_statuses.destroy.admin",p))}function xt(p){ie.post(route("wo_statuses.restore.admin",p))}const gt=P(()=>x.canceledQSInvoices.length>0),Ne=$(!1),wt=P(()=>Object.fromEntries(x.areasOfConcern.map(p=>[p.id,p.concern]))),yt=P(()=>x.areasOfConcern.filter(p=>!g.area_of_concerns.includes(p.id)));function bt(p){const s=Number(p.target.value);s&&!g.area_of_concerns.includes(s)&&g.area_of_concerns.push(s),p.target.value=""}function kt(p){g.area_of_concerns=g.area_of_concerns.filter(s=>s!==p)}const st=P(()=>(x.dateFilter==="yesterday"||x.dateFilter==="current-week")&&x.weekNumber&&x.year?`Week ${x.weekNumber}, ${x.year}`:(x.dateFilter==="6w"||x.dateFilter==="quarterly")&&x.startWeekNumber&&x.endWeekNumber&&x.year?`Weeks ${x.startWeekNumber}-${x.endWeekNumber}, ${x.year}`:"");dt(()=>{const p=s=>{I.value&&!s.target.closest(".relative")&&(I.value=!1)};document.addEventListener("click",p),ut(()=>document.removeEventListener("click",p))}),setTimeout(()=>C.value="",5e3);const lt=P(()=>(x.workOrderByAreasOfConcern||[]).slice(0,5));P(()=>x.outstandingInvoices.reduce((p,s)=>{const G=Number(s.invoice_amount)||0;return p+G},0));const at=P(()=>(x.workOrdersByTruck||[]).slice(0,5)),Te=$(null),Ie=$(null),he=$(!1),Fe=P(()=>x.outstandingInvoices.filter(p=>{const s=Te.value!=null?Number(p.invoice_amount)>=Te.value:!0,G=Ie.value?new Date(p.qs_invoice_date)>new Date(Ie.value):!0;return s&&G})),_t=P(()=>Fe.value.reduce((p,s)=>p+Number(s.invoice_amount||0),0));return(p,s)=>{var Ce;const G=$t("Badge");return d(),c("div",Vs,[C.value?(d(),k(e(De),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:l(()=>[t(e(Ve),{class:"flex items-center gap-2"},{default:l(()=>[t(u,{name:"check_circle",class:"h-5 w-5 text-green-500"}),s[49]||(s[49]=n(" Success "))]),_:1}),t(e(Ae),null,{default:l(()=>[n(f(C.value),1)]),_:1})]),_:1})):h("",!0),Z.value?(d(),k(e(De),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:l(()=>[t(e(Ve),{class:"flex items-center gap-2"},{default:l(()=>[t(u,{name:"alert_circle",class:"h-5 w-5"}),s[50]||(s[50]=n(" Error "))]),_:1}),t(e(Ae),null,{default:l(()=>[n(f(Z.value),1)]),_:1})]),_:1})):h("",!0),a("div",As,[a("div",Ds,[t(u,{name:"clipboard-list",class:"h-6 w-6 text-primary hidden sm:block"}),s[51]||(s[51]=a("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"},"Repair Orders",-1))]),a("div",Os,[t(e(y),{onClick:Le,variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),s[52]||(s[52]=n(" Create New "))]),_:1}),T.value.length?(d(),k(e(y),{key:0,onClick:He,variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),n(" Delete Selected ("+f(T.value.length)+") ",1)]),_:1})):h("",!0),ae.value?(d(),k(e(y),{key:1,onClick:Ke,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),s[53]||(s[53]=n(" Areas "))]),_:1})):h("",!0),ae.value?(d(),k(e(y),{key:2,onClick:r,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),s[54]||(s[54]=n(" Vendors "))]),_:1})):h("",!0),ae.value?(d(),k(e(y),{key:3,onClick:pt,variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),s[55]||(s[55]=n(" Statuses "))]),_:1})):h("",!0),a("div",Us,[t(e(y),{onClick:s[0]||(s[0]=o=>I.value=!I.value),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),s[56]||(s[56]=n(" Upload CSV ")),t(u,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),I.value?(d(),c("div",Ms,[a("label",Ns,[s[57]||(s[57]=a("span",null,"Upload CSV",-1)),a("input",{type:"file",class:"hidden",onChange:Ue,accept:".csv"},null,32)]),a("a",{href:Wa,download:"",class:"block px-4 py-2 text-sm hover:bg-muted transition-colors"},"Download Template")])):h("",!0)]),t(e(y),{onClick:ye(We,["prevent"]),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[t(u,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),s[58]||(s[58]=n(" Download CSV "))]),_:1})])]),gt.value&&!U.SuperAdmin?(d(),c("div",Ts,[a("div",Is,[a("div",Fs,[a("div",zs,[a("div",Bs,[t(u,{name:"triangleAlert",class:"h-6 w-6 text-red-600 dark:text-red-300"})])]),a("div",Ps,[s[60]||(s[60]=a("h3",{class:"text-lg font-medium text-red-800 dark:text-red-300"},"Attention Required",-1)),a("div",Es,f(((Ce=x.canceledQSInvoices)==null?void 0:Ce.length)||0)+" invoices found with canceled WO status but still on QS. These need immediate attention. ",1),a("div",qs,[t(e(y),{onClick:s[1]||(s[1]=o=>Ne.value=!0),variant:"destructive",size:"sm"},{default:l(()=>s[59]||(s[59]=[n(" View Details ")])),_:1})])])])])])):h("",!0),t(e(Se),{class:"shadow-sm border bg-card"},{default:l(()=>[t(e($e),{class:"p-3 md:p-4"},{default:l(()=>[a("div",Ws,[(d(),c(F,null,z(i,o=>t(e(y),{key:o.value,size:"sm",variant:"outline",class:ke({"border-primary bg-primary/10 text-primary":V.value.dateFilter===o.value}),onClick:O=>j(o.value)},{default:l(()=>[n(f(o.label),1)]),_:2},1032,["class","onClick"])),64))]),U.dateRange?(d(),c("div",Ls,[U.dateFilter==="yesterday"&&U.dateRange.start?(d(),c("span",Rs," Showing data from "+f(w(U.dateRange.start)),1)):U.dateRange.start&&U.dateRange.end?(d(),c("span",js," Showing data from "+f(w(U.dateRange.start))+" to "+f(w(U.dateRange.end)),1)):(d(),c("span",Qs,f(U.dateRange.label),1)),st.value?(d(),c("span",Ys,"("+f(st.value)+")",1)):h("",!0)])):h("",!0)]),_:1})]),_:1}),(U.dateFilter==="quarterly"||U.dateFilter==="6w")&&!U.SuperAdmin?(d(),c("div",Hs,[a("div",Gs,[s[62]||(s[62]=a("div",{class:"border-b p-4"},[a("h3",{class:"text-lg font-semibold"},"Top 5 Frequent Repairs")],-1)),a("div",Ks,[a("ul",Xs,[s[61]||(s[61]=a("div",{class:"flex items-center justify-between"},[a("span",{class:"text-sm"},"Parts:"),a("span",{class:"text-sm"},"Work Orders:")],-1)),(d(!0),c(F,null,z(lt.value,(o,O)=>(d(),c("li",{key:O,class:"flex items-center justify-between pr-4"},[a("span",Js,f(o.concern),1),t(G,{variant:"outline"},{default:l(()=>[n(f(o.count),1)]),_:2},1024)]))),128)),lt.value.length===0?(d(),c("li",Zs,"No data available")):h("",!0)])])]),a("div",el,[s[64]||(s[64]=a("div",{class:"border-b p-4"},[a("h3",{class:"text-lg font-semibold"},"Top 5 Frequently Repaired Tractors")],-1)),a("div",tl,[a("ul",sl,[s[63]||(s[63]=a("div",{class:"flex items-center justify-between"},[a("span",{class:"text-sm"},"Asset ID:"),a("span",{class:"text-sm"},"Work Orders:")],-1)),(d(!0),c(F,null,z(at.value,(o,O)=>(d(),c("li",{key:O,class:"flex items-center justify-between pr-4"},[a("span",ll,f(o.truckid),1),t(G,{variant:"outline"},{default:l(()=>[n(f(o.work_order_count),1)]),_:2},1024)]))),128)),at.value.length===0?(d(),c("li",al,"No data available")):h("",!0)])])])])):h("",!0),U.SuperAdmin?h("",!0):(d(),c("div",nl,[s[67]||(s[67]=a("h3",{class:"mb-4 text-lg font-semibold"},"Outstanding Invoices Filter",-1)),a("div",ol,[a("div",null,[t(e(A),{for:"min-invoice-amount"},{default:l(()=>s[65]||(s[65]=[n("Minimum Invoice Amount ($)")])),_:1}),t(e(Q),{id:"min-invoice-amount",modelValue:Te.value,"onUpdate:modelValue":s[2]||(s[2]=o=>Te.value=o),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"Enter minimum amount",class:"mt-1"},null,8,["modelValue"])]),a("div",null,[t(e(A),{for:"outstanding-since"},{default:l(()=>s[66]||(s[66]=[n("Outstanding Since")])),_:1}),t(e(Q),{id:"outstanding-since",modelValue:Ie.value,"onUpdate:modelValue":s[3]||(s[3]=o=>Ie.value=o),type:"date",class:"mt-1"},null,8,["modelValue"])])])])),Fe.value.length>0?(d(),c("div",rl,[a("div",dl,[s[68]||(s[68]=a("h3",{class:"text-lg font-semibold"},"Outstanding Invoices",-1)),a("div",ul,[a("div",il,[t(G,{variant:"outline",class:"text-sm"},{default:l(()=>[n(f(Fe.value.length)+" invoices ",1)]),_:1}),t(G,{variant:"outline",class:"text-sm"},{default:l(()=>[n(" total: $"+f(_t.value.toFixed(2)),1)]),_:1})]),t(e(y),{variant:"ghost",size:"sm",onClick:s[4]||(s[4]=o=>he.value=!he.value),class:"ml-4 mt-1"},{default:l(()=>[n(f(he.value?"Hide Invoices":"Show Invoices")+" ",1),t(u,{name:he.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),he.value?(d(),c("div",ml,[a("div",fl,[a("div",pl,[t(e(xe),{class:"min-w-full"},{default:l(()=>[t(e(ge),null,{default:l(()=>[t(e(L),null,{default:l(()=>[t(e(N),null,{default:l(()=>s[69]||(s[69]=[n("RO Number")])),_:1}),t(e(N),null,{default:l(()=>s[70]||(s[70]=[n("Vendor")])),_:1}),t(e(N),null,{default:l(()=>s[71]||(s[71]=[n("Week")])),_:1}),t(e(N),{class:"text-right"},{default:l(()=>s[72]||(s[72]=[n("Amount")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[(d(!0),c(F,null,z(Fe.value,o=>(d(),k(e(L),{key:o.ro_number},{default:l(()=>[t(e(S),null,{default:l(()=>[n(f(o.ro_number),1)]),_:2},1024),t(e(S),null,{default:l(()=>[n(f(o.vendor_name),1)]),_:2},1024),t(e(S),null,{default:l(()=>[n("W"+f(o.week_number)+"/"+f(o.year),1)]),_:2},1024),t(e(S),{class:"text-right"},{default:l(()=>[n(f(R(o.invoice_amount)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):h("",!0)])):he.value?(d(),c("div",cl,s[73]||(s[73]=[a("div",{class:"border-b p-4"},[a("h3",{class:"text-lg font-semibold"},"Outstanding Invoices")],-1),a("div",{class:"p-4 text-center text-muted-foreground"},"No outstanding invoices match the current criteria",-1)]))):h("",!0),t(e(Se),{class:"shadow-sm border"},{default:l(()=>[t(e(mt),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:l(()=>[a("div",vl,[t(e(ft),{class:"text-lg md:text-xl lg:text-2xl flex items-center gap-2"},{default:l(()=>[t(u,{name:"filter",class:"h-5 w-5 text-muted-foreground"}),s[74]||(s[74]=n(" Filters "))]),_:1}),t(e(y),{variant:"ghost",size:"sm",onClick:s[5]||(s[5]=o=>q.value=!q.value),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:l(()=>[a("span",xl,f(q.value?"Hide Filters":"Show Filters"),1),t(u,{name:q.value?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),t(it,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:l(()=>[q.value?(d(),k(e($e),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:l(()=>[a("div",gl,[a("div",wl,[a("div",null,[t(e(A),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[t(u,{name:"search",class:"h-4 w-4 text-muted-foreground"}),s[75]||(s[75]=n(" Search "))]),_:1}),t(e(Q),{id:"search",type:"text",modelValue:V.value.search,"onUpdate:modelValue":s[6]||(s[6]=o=>V.value.search=o),placeholder:"RO#, Invoice...",class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),a("div",null,[t(e(A),{for:"vendor",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[t(u,{name:"building",class:"h-4 w-4 text-muted-foreground"}),s[76]||(s[76]=n(" Vendor "))]),_:1}),a("div",yl,[W(a("select",{id:"vendor","onUpdate:modelValue":s[7]||(s[7]=o=>V.value.vendor_id=o),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s[77]||(s[77]=a("option",{value:""},"All Vendors",-1)),(d(!0),c(F,null,z(U.vendors,o=>(d(),c("option",{key:o.id,value:o.id},f(o.vendor_name),9,bl))),128))],512),[[X,V.value.vendor_id]]),s[78]||(s[78]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",null,[t(e(A),{for:"status",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[t(u,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),s[79]||(s[79]=n(" Status "))]),_:1}),a("div",kl,[W(a("select",{id:"status","onUpdate:modelValue":s[8]||(s[8]=o=>V.value.status_id=o),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s[80]||(s[80]=a("option",{value:""},"All Statuses",-1)),(d(!0),c(F,null,z(U.woStatuses,o=>(d(),c("option",{key:o.id,value:o.id},f(o.name),9,_l))),128))],512),[[X,V.value.status_id]]),s[81]||(s[81]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),t(e(y),{onClick:Pe,variant:"ghost",size:"sm",class:"self-start"},{default:l(()=>[t(u,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),s[82]||(s[82]=n(" Reset Filters "))]),_:1})])]),_:1})):h("",!0)]),_:1})]),_:1}),be.value?(d(),k(e(Se),{key:7,class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:l(()=>[t(e($e),{class:"p-0"},{default:l(()=>[a("div",hl,[t(e(xe),{class:"relative h-[500px] overflow-auto"},{default:l(()=>[t(e(ge),null,{default:l(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:l(()=>[t(e(N),{class:"w-12"},{default:l(()=>[a("div",Cl,[a("input",{type:"checkbox",checked:_.value,onChange:qe,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Sl)])]),_:1}),t(e(N),{onClick:s[9]||(s[9]=o=>ce("ro_number")),class:"cursor-pointer font-semibold"},{default:l(()=>[a("div",$l,[s[83]||(s[83]=n(" RO# ")),t(et,{column:"ro_number",sortState:pe.value},null,8,["sortState"])])]),_:1}),ae.value?(d(),k(e(N),{key:0,class:"font-semibold"},{default:l(()=>s[84]||(s[84]=[n("Company")])),_:1})):h("",!0),t(e(N),{onClick:s[10]||(s[10]=o=>ce("ro_open_date")),class:"cursor-pointer font-semibold"},{default:l(()=>[a("div",Vl,[s[85]||(s[85]=n(" Open Date ")),t(et,{column:"ro_open_date",sortState:pe.value},null,8,["sortState"])])]),_:1}),t(e(N),{onClick:s[11]||(s[11]=o=>ce("ro_close_date")),class:"cursor-pointer font-semibold"},{default:l(()=>[a("div",Al,[s[86]||(s[86]=n(" Close Date ")),t(et,{column:"ro_close_date",sortState:pe.value},null,8,["sortState"])])]),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[87]||(s[87]=[n("Truck")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[88]||(s[88]=[n("Vendor")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[89]||(s[89]=[n("Areas of Concern")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[90]||(s[90]=[n("WO#")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[91]||(s[91]=[n("WO Status")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[92]||(s[92]=[n("Invoice")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[93]||(s[93]=[n("Amount")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[94]||(s[94]=[n("Invoice Received")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[95]||(s[95]=[n("On QS")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[96]||(s[96]=[n("QS Invoice Date")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[97]||(s[97]=[n("Disputed")])),_:1}),t(e(N),{class:"font-semibold"},{default:l(()=>s[98]||(s[98]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[U.repairOrders.data.length?h("",!0):(d(),k(e(L),{key:0},{default:l(()=>[t(e(S),{colspan:ae.value?16:15,class:"py-8 text-center"},{default:l(()=>[a("div",Dl,[t(u,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),s[99]||(s[99]=a("h2",{class:"text-lg font-medium"},"No repair orders found.",-1)),s[100]||(s[100]=a("p",{class:"text-muted-foreground mt-2"},"There is no data to display at this time.",-1))])]),_:1},8,["colspan"])]),_:1})),(d(!0),c(F,null,z(U.repairOrders.data,o=>(d(),k(e(L),{key:o.id,class:"hover:bg-muted/50 transition-colors"},{default:l(()=>[t(e(S),null,{default:l(()=>[W(a("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":s[12]||(s[12]=O=>T.value=O),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,8,Ol),[[ze,T.value]])]),_:2},1024),t(e(S),{class:"whitespace-nowrap font-medium"},{default:l(()=>[n(f(o.ro_number),1)]),_:2},1024),ae.value?(d(),k(e(S),{key:0,class:"whitespace-nowrap"},{default:l(()=>{var O;return[n(f(((O=o.tenant)==null?void 0:O.name)||"—"),1)]}),_:2},1024)):h("",!0),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(w(o.ro_open_date)),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(o.ro_close_date?w(o.ro_close_date):"N/A"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>{var O;return[n(f(((O=o.truck)==null?void 0:O.truckid)||"—"),1)]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>{var O;return[n(f(((O=o.vendor)==null?void 0:O.vendor_name)||"—"),1)]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>{var O;return[(O=o.areas_of_concern)!=null&&O.length?(d(),c("span",Ul,[(d(!0),c(F,null,z(o.areas_of_concern,(nt,ht)=>(d(),c("span",{key:nt.id},[n(f(nt.concern),1),ht<o.areas_of_concern.length-1?(d(),c("span",Ml,", ")):h("",!0)]))),128))])):(d(),c("span",Nl,"—"))]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(o.wo_number||"—"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>{var O;return[n(f(((O=o.wo_status)==null?void 0:O.name)||"—"),1)]}),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(o.invoice||"—"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(R(o.invoice_amount)),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(o.invoice_received?"Yes":"No"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(o.on_qs?o.on_qs.charAt(0).toUpperCase()+o.on_qs.slice(1):"No"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(o.qs_invoice_date?w(o.qs_invoice_date):"N/A"),1)]),_:2},1024),t(e(S),{class:"whitespace-nowrap"},{default:l(()=>[n(f(o.disputed?"Yes":"No"),1)]),_:2},1024),t(e(S),null,{default:l(()=>[a("div",Tl,[t(e(y),{size:"sm",variant:"warning",onClick:O=>Re(o),class:"h-8 px-2"},{default:l(()=>[t(u,{name:"pencil",class:"h-4 w-4"})]),_:2},1032,["onClick"]),t(e(y),{size:"sm",variant:"destructive",onClick:O=>Qe(o.id),class:"h-8 px-2"},{default:l(()=>[t(u,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),a("div",Il,[a("div",Fl,[a("span",zl,[t(u,{name:"list",class:"h-4 w-4"}),n(" Showing "+f(U.repairOrders.data.length)+" of "+f(U.repairOrders.total)+" entries ",1)]),a("span",Bl,[t(u,{name:"layout-grid",class:"h-4 w-4"}),s[101]||(s[101]=n(" Per page: "))]),a("div",Pl,[W(a("select",{"onUpdate:modelValue":s[13]||(s[13]=o=>E.value=o),onChange:Ee,class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(d(),c(F,null,z([10,25,50,100],o=>a("option",{key:o,value:o},f(o),9,El)),64))],544),[[X,E.value,void 0,{number:!0}]]),s[102]||(s[102]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",ql,[t(e(y),{size:"sm",variant:"ghost",onClick:s[14]||(s[14]=o=>Oe(U.repairOrders.prev_page_url)),disabled:!U.repairOrders.prev_page_url,class:"flex items-center gap-1"},{default:l(()=>[t(u,{name:"chevron-left",class:"h-4 w-4"}),s[103]||(s[103]=n(" Prev "))]),_:1},8,["disabled"]),(d(!0),c(F,null,z(U.repairOrders.links.slice(1,-1),o=>(d(),k(e(y),{key:o.label,size:"sm",variant:"ghost",onClick:O=>Oe(o.url),disabled:!o.url,class:ke({"border-primary bg-primary/10 text-primary font-medium":o.active})},{default:l(()=>[a("span",{innerHTML:o.label},null,8,Wl)]),_:2},1032,["onClick","disabled","class"]))),128)),t(e(y),{size:"sm",variant:"ghost",onClick:s[15]||(s[15]=o=>Oe(U.repairOrders.next_page_url)),disabled:!U.repairOrders.next_page_url,class:"flex items-center gap-1"},{default:l(()=>[s[104]||(s[104]=n(" Next ")),t(u,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})):(d(),c("div",Ll,[t(u,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),s[105]||(s[105]=a("h2",{class:"text-lg font-medium"},"There is No Data to give Information about.",-1))])),t(e(ue),{open:Y.value,"onUpdate:open":s[33]||(s[33]=o=>Y.value=o)},{default:l(()=>[t(e(ne),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:l(()=>[t(e(oe),{class:"px-4 sm:px-6 border-b pb-3"},{default:l(()=>[a("div",Rl,[t(u,{name:e(g).id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),t(e(re),{class:"text-lg sm:text-xl font-semibold"},{default:l(()=>[n(f(K.value)+" Repair Order",1)]),_:1})]),t(e(de),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:l(()=>[n("Fill in the details to "+f(K.value.toLowerCase())+" a repair order.",1)]),_:1})]),_:1}),a("div",jl,[a("form",{onSubmit:ye(Me,["prevent"]),class:"grid grid-cols-1 gap-3 p-3 sm:grid-cols-2 sm:gap-4 sm:p-4"},[ae.value?(d(),c("div",Ql,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"building",class:"h-4 w-4 text-muted-foreground"}),s[106]||(s[106]=n(" Company "))]),_:1}),a("div",Yl,[W(a("select",{"onUpdate:modelValue":s[16]||(s[16]=o=>e(g).tenant_id=o),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm ring-offset-background focus-visible:ring-2"},[s[107]||(s[107]=a("option",{disabled:"",value:""},"Select",-1)),(d(!0),c(F,null,z(U.tenants,o=>(d(),c("option",{key:o.id,value:o.id},f(o.name),9,Hl))),128))],512),[[X,e(g).tenant_id]]),s[108]||(s[108]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):h("",!0),a("div",Gl,[t(u,{name:"info",class:"h-4 w-4 text-primary"}),s[109]||(s[109]=a("h3",{class:"text-md font-semibold text-primary"},"Basic Information",-1))]),a("div",Kl,[a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),s[110]||(s[110]=n(" RO# "))]),_:1}),t(e(Q),{modelValue:e(g).ro_number,"onUpdate:modelValue":s[17]||(s[17]=o=>e(g).ro_number=o),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),s[111]||(s[111]=n(" Truck "))]),_:1}),a("div",Xl,[W(a("select",{"onUpdate:modelValue":s[18]||(s[18]=o=>e(g).truck_id=o),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[112]||(s[112]=a("option",{disabled:"",value:""},"Select",-1)),(d(!0),c(F,null,z(U.trucks,o=>(d(),c("option",{key:o.id,value:o.id},f(o.truckid),9,Jl))),128))],512),[[X,e(g).truck_id]]),s[113]||(s[113]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"calendar",class:"h-4 w-4 text-muted-foreground"}),s[114]||(s[114]=n(" Open Date "))]),_:1}),t(e(Q),{type:"date",modelValue:e(g).ro_open_date,"onUpdate:modelValue":s[19]||(s[19]=o=>e(g).ro_open_date=o),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"calendar-check",class:"h-4 w-4 text-muted-foreground"}),s[115]||(s[115]=n(" Close Date "))]),_:1}),t(e(Q),{type:"date",modelValue:e(g).ro_close_date,"onUpdate:modelValue":s[20]||(s[20]=o=>e(g).ro_close_date=o),class:"h-9 w-full"},null,8,["modelValue"])])]),a("div",Zl,[t(u,{name:"wrench",class:"h-4 w-4 text-primary"}),s[116]||(s[116]=a("h3",{class:"text-md font-semibold text-primary"},"Repair Details",-1))]),a("div",ea,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"alert-triangle",class:"h-4 w-4 text-muted-foreground"}),s[117]||(s[117]=n(" Areas of Concern "))]),_:1}),a("div",ta,[(d(!0),c(F,null,z(e(g).area_of_concerns,o=>(d(),c("span",{key:o,class:"badge bg-primary/10 text-primary px-2 py-1 rounded-md flex items-center"},[n(f(wt.value[o]),1),a("button",{onClick:O=>kt(o),class:"ml-1 hover:text-red-500 focus:outline-none"},"×",8,sa)]))),128)),e(g).area_of_concerns.length?h("",!0):(d(),c("span",la,"No areas selected"))]),a("div",aa,[a("select",{onChange:s[21]||(s[21]=o=>bt(o)),class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[118]||(s[118]=a("option",{value:""},"Select an area to add",-1)),(d(!0),c(F,null,z(yt.value,o=>(d(),c("option",{key:o.id,value:o.id},f(o.concern),9,na))),128))],32),s[119]||(s[119]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",oa,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"clipboard-check",class:"h-4 w-4 text-muted-foreground"}),s[120]||(s[120]=n(" Repairs Made "))]),_:1}),W(a("textarea",{"onUpdate:modelValue":s[22]||(s[22]=o=>e(g).repairs_made=o),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[tt,e(g).repairs_made]])]),a("div",ra,[t(u,{name:"receipt",class:"h-4 w-4 text-primary"}),s[121]||(s[121]=a("h3",{class:"text-md font-semibold text-primary"},"Vendor & Invoice Information",-1))]),a("div",da,[a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"building-2",class:"h-4 w-4 text-muted-foreground"}),s[122]||(s[122]=n(" Vendor "))]),_:1}),a("div",ua,[W(a("select",{"onUpdate:modelValue":s[23]||(s[23]=o=>e(g).vendor_id=o),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[123]||(s[123]=a("option",{disabled:"",value:""},"Select",-1)),(d(!0),c(F,null,z(U.vendors,o=>(d(),c("option",{key:o.id,value:o.id},f(o.vendor_name),9,ia))),128))],512),[[X,e(g).vendor_id]]),s[124]||(s[124]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"file-text",class:"h-4 w-4 text-muted-foreground"}),s[125]||(s[125]=n(" WO# "))]),_:1}),t(e(Q),{modelValue:e(g).wo_number,"onUpdate:modelValue":s[24]||(s[24]=o=>e(g).wo_number=o),class:"h-9 w-full"},null,8,["modelValue"])]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),s[126]||(s[126]=n(" WO Status "))]),_:1}),a("div",ma,[W(a("select",{"onUpdate:modelValue":s[25]||(s[25]=o=>e(g).wo_status_id=o),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[s[127]||(s[127]=a("option",{disabled:"",value:""},"Select",-1)),(d(!0),c(F,null,z(U.woStatuses,o=>(d(),c("option",{key:o.id,value:o.id},f(o.name),9,fa))),128))],512),[[X,e(g).wo_status_id]]),s[128]||(s[128]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"check-square",class:"h-4 w-4 text-muted-foreground"}),s[129]||(s[129]=n(" On QS "))]),_:1}),a("div",pa,[W(a("select",{"onUpdate:modelValue":s[26]||(s[26]=o=>e(g).on_qs=o),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},s[130]||(s[130]=[a("option",{value:"yes"},"Yes",-1),a("option",{value:"no"},"No",-1),a("option",{value:"not expected"},"Not Expected",-1)]),512),[[X,e(g).on_qs]]),s[131]||(s[131]=a("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),a("div",ca,[a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"file-invoice",class:"h-4 w-4 text-muted-foreground"}),s[132]||(s[132]=n(" Invoice "))]),_:1}),t(e(Q),{modelValue:e(g).invoice,"onUpdate:modelValue":s[27]||(s[27]=o=>e(g).invoice=o),class:"h-9 w-full"},null,8,["modelValue"])]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"dollar-sign",class:"h-4 w-4 text-muted-foreground"}),s[133]||(s[133]=n(" Amount "))]),_:1}),a("div",va,[s[134]||(s[134]=a("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground"},"$",-1)),t(e(Q),{type:"number",step:"0.01",modelValue:e(g).invoice_amount,"onUpdate:modelValue":s[28]||(s[28]=o=>e(g).invoice_amount=o),class:"pl-7 h-9 w-full"},null,8,["modelValue"])])]),a("div",xa,[W(a("input",{type:"checkbox","onUpdate:modelValue":s[29]||(s[29]=o=>e(g).invoice_received=o),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[ze,e(g).invoice_received]]),t(e(A),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:l(()=>[t(u,{name:"inbox",class:"h-4 w-4 text-muted-foreground"}),s[135]||(s[135]=n(" Invoice Received "))]),_:1})]),a("div",null,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"calendar-days",class:"h-4 w-4 text-muted-foreground"}),s[136]||(s[136]=n(" QS Invoice Date "))]),_:1}),t(e(Q),{type:"date",modelValue:e(g).qs_invoice_date,"onUpdate:modelValue":s[30]||(s[30]=o=>e(g).qs_invoice_date=o),class:"h-9 w-full"},null,8,["modelValue"])])]),K.value==="Update"?(d(),c("div",ga,[a("div",wa,[t(u,{name:"alert-octagon",class:"h-4 w-4 text-primary"}),s[137]||(s[137]=a("h3",{class:"text-md font-semibold text-primary"},"Dispute Information",-1))]),a("div",ya,[W(a("input",{type:"checkbox","onUpdate:modelValue":s[31]||(s[31]=o=>e(g).disputed=o),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[ze,e(g).disputed]]),t(e(A),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:l(()=>[t(u,{name:"alert-circle",class:"h-4 w-4 text-muted-foreground"}),s[138]||(s[138]=n(" Disputed? "))]),_:1})]),e(g).disputed?(d(),c("div",ba,[t(e(A),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[t(u,{name:"message-square",class:"h-4 w-4 text-muted-foreground"}),s[139]||(s[139]=n(" Dispute Outcome "))]),_:1}),W(a("textarea",{"onUpdate:modelValue":s[32]||(s[32]=o=>e(g).dispute_outcome=o),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[tt,e(g).dispute_outcome]])])):h("",!0)])):h("",!0)],32)]),t(e(me),{class:"px-4 sm:px-6 flex justify-end gap-2 mt-2 pt-3 border-t"},{default:l(()=>[t(e(y),{variant:"outline",onClick:je,class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:l(()=>s[140]||(s[140]=[n("Cancel")])),_:1}),t(e(y),{type:"submit",onClick:Me,class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:l(()=>[n(f(K.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ue),{open:D.value,"onUpdate:open":s[35]||(s[35]=o=>D.value=o)},{default:l(()=>[t(e(ne),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[t(e(oe),{class:"px-4 sm:px-6"},{default:l(()=>[t(e(re),{class:"text-lg sm:text-xl"},{default:l(()=>s[141]||(s[141]=[n("Confirm Deletion")])),_:1}),t(e(de),{class:"text-xs sm:text-sm"},{default:l(()=>s[142]||(s[142]=[n("This action cannot be undone.")])),_:1})]),_:1}),t(e(me),{class:"px-4 sm:px-6 flex gap-2"},{default:l(()=>[t(e(y),{variant:"outline",onClick:s[34]||(s[34]=o=>D.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>s[143]||(s[143]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:Ye,class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>s[144]||(s[144]=[n("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ue),{open:H.value,"onUpdate:open":s[37]||(s[37]=o=>H.value=o)},{default:l(()=>[t(e(ne),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[t(e(oe),{class:"px-4 sm:px-6"},{default:l(()=>[t(e(re),{class:"text-lg sm:text-xl"},{default:l(()=>[n("Delete "+f(T.value.length)+" Orders?",1)]),_:1}),t(e(de),{class:"text-xs sm:text-sm"},{default:l(()=>s[145]||(s[145]=[n("This action cannot be undone.")])),_:1})]),_:1}),t(e(me),{class:"px-4 sm:px-6 flex gap-2"},{default:l(()=>[t(e(y),{variant:"outline",onClick:s[36]||(s[36]=o=>H.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>s[146]||(s[146]=[n("Cancel")])),_:1}),t(e(y),{variant:"destructive",onClick:Ge,class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>s[147]||(s[147]=[n("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ue),{open:J.value,"onUpdate:open":s[40]||(s[40]=o=>J.value=o)},{default:l(()=>[t(e(ne),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:l(()=>[t(e(oe),null,{default:l(()=>[t(e(re),null,{default:l(()=>s[148]||(s[148]=[n("Manage Areas of Concern")])),_:1}),t(e(de),{class:"text-sm sm:text-base"},{default:l(()=>s[149]||(s[149]=[n("Add or remove areas of concern for repair orders.")])),_:1})]),_:1}),a("div",ka,[a("form",{onSubmit:ye(Xe,["prevent"]),class:"space-y-3 sm:space-y-4"},[a("div",_a,[t(e(A),{for:"concern"},{default:l(()=>s[150]||(s[150]=[n("Area of Concern")])),_:1}),t(e(Q),{id:"concern",modelValue:e(se).concern,"onUpdate:modelValue":s[38]||(s[38]=o=>e(se).concern=o),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(y),{type:"submit",class:"w-full"},{default:l(()=>s[151]||(s[151]=[n("Add Area of Concern")])),_:1})],32),a("div",ha,[a("div",Ca,[t(e(xe),null,{default:l(()=>[t(e(ge),{class:"sticky top-0 z-10 bg-background"},{default:l(()=>[t(e(L),null,{default:l(()=>[t(e(N),{class:"text-xs sm:text-sm"},{default:l(()=>s[152]||(s[152]=[n("Area of Concern")])),_:1}),t(e(N),{class:"w-20 text-xs sm:text-sm"},{default:l(()=>s[153]||(s[153]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[x.areasOfConcern.length?h("",!0):(d(),k(e(L),{key:0},{default:l(()=>[t(e(S),{colspan:"2",class:"py-4 text-center text-sm"},{default:l(()=>s[154]||(s[154]=[n("No areas of concern found.")])),_:1})]),_:1})),(d(!0),c(F,null,z(U.areasOfConcern,o=>(d(),k(e(L),{key:o.id},{default:l(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:l(()=>[n(f(o.concern)+" ",1),o.deleted_at?(d(),c("span",Sa,"(Deleted)")):h("",!0)]),_:2},1024),t(e(S),null,{default:l(()=>[a("div",$a,[o.deleted_at?(d(),k(e(y),{key:0,onClick:O=>v(o.id),variant:"outline",size:"sm"},{default:l(()=>[t(u,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):h("",!0),o.deleted_at?h("",!0):(d(),k(e(y),{key:1,onClick:O=>Je(o.id),variant:"destructive",size:"sm"},{default:l(()=>[t(u,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(me),null,{default:l(()=>[t(e(y),{onClick:s[39]||(s[39]=o=>J.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>s[155]||(s[155]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ue),{open:ee.value,"onUpdate:open":s[43]||(s[43]=o=>ee.value=o)},{default:l(()=>[t(e(ne),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:l(()=>[t(e(oe),null,{default:l(()=>[t(e(re),null,{default:l(()=>s[156]||(s[156]=[n("Manage Vendors")])),_:1}),t(e(de),{class:"text-sm sm:text-base"},{default:l(()=>s[157]||(s[157]=[n("Add or remove vendors for repair orders.")])),_:1})]),_:1}),a("div",Va,[a("form",{onSubmit:ye(m,["prevent"]),class:"space-y-3 sm:space-y-4"},[a("div",Aa,[t(e(A),{for:"vendor_name"},{default:l(()=>s[158]||(s[158]=[n("Vendor Name")])),_:1}),t(e(Q),{id:"vendor_name",modelValue:e(b).vendor_name,"onUpdate:modelValue":s[41]||(s[41]=o=>e(b).vendor_name=o),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(y),{type:"submit",class:"w-full"},{default:l(()=>s[159]||(s[159]=[n("Add Vendor")])),_:1})],32),a("div",Da,[a("div",Oa,[t(e(xe),null,{default:l(()=>[t(e(ge),{class:"sticky top-0 z-10 bg-background"},{default:l(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background"},{default:l(()=>[t(e(N),{class:"text-xs sm:text-sm"},{default:l(()=>s[160]||(s[160]=[n("Vendor Name")])),_:1}),t(e(N),{class:"text-xs sm:text-sm"},{default:l(()=>s[161]||(s[161]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[U.vendors.length===0?(d(),k(e(L),{key:0},{default:l(()=>[t(e(S),{colspan:"2",class:"py-4 text-center text-sm"},{default:l(()=>s[162]||(s[162]=[n("No vendors found.")])),_:1})]),_:1})):h("",!0),(d(!0),c(F,null,z(U.vendors,o=>(d(),k(e(L),{key:o.id},{default:l(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:l(()=>[n(f(o.vendor_name)+" ",1),o.deleted_at?(d(),c("span",Ua,"(Deleted)")):h("",!0)]),_:2},1024),t(e(S),null,{default:l(()=>[a("div",Ma,[o.deleted_at?(d(),k(e(y),{key:0,onClick:O=>Ze(o.id),variant:"outline",size:"sm"},{default:l(()=>[t(u,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):h("",!0),o.deleted_at?h("",!0):(d(),k(e(y),{key:1,onClick:O=>B(o.id),variant:"destructive",size:"sm"},{default:l(()=>[t(u,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),o.deleted_at?(d(),k(e(y),{key:2,onClick:O=>p.forceDeleteVendor(o.id),variant:"destructive",size:"sm"},{default:l(()=>[t(u,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):h("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(me),null,{default:l(()=>[t(e(y),{onClick:s[42]||(s[42]=o=>ee.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>s[163]||(s[163]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ue),{open:te.value,"onUpdate:open":s[46]||(s[46]=o=>te.value=o)},{default:l(()=>[t(e(ne),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:l(()=>[t(e(oe),null,{default:l(()=>[t(e(re),null,{default:l(()=>s[164]||(s[164]=[n("Manage Work Order Statuses")])),_:1}),t(e(de),{class:"text-sm sm:text-base"},{default:l(()=>s[165]||(s[165]=[n(" Add or remove work order statuses for repair orders. ")])),_:1})]),_:1}),a("div",Na,[a("form",{onSubmit:ye(ct,["prevent"]),class:"space-y-3 sm:space-y-4"},[a("div",Ta,[t(e(A),{for:"status_name"},{default:l(()=>s[166]||(s[166]=[n("Status Name")])),_:1}),t(e(Q),{id:"status_name",modelValue:e(le).name,"onUpdate:modelValue":s[44]||(s[44]=o=>e(le).name=o),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),t(e(y),{type:"submit",class:"w-full"},{default:l(()=>s[167]||(s[167]=[n("Add Work Order Status")])),_:1})],32),a("div",Ia,[a("div",Fa,[t(e(xe),null,{default:l(()=>[t(e(ge),{class:"sticky top-0 z-10 bg-background"},{default:l(()=>[t(e(L),{class:"sticky top-0 z-10 border-b bg-background"},{default:l(()=>[t(e(N),{class:"text-xs sm:text-sm"},{default:l(()=>s[168]||(s[168]=[n("Status Name")])),_:1}),t(e(N),{class:"text-xs sm:text-sm"},{default:l(()=>s[169]||(s[169]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[x.woStatuses.length?h("",!0):(d(),k(e(L),{key:0},{default:l(()=>[t(e(S),{colspan:"2",class:"py-4 text-center text-sm"},{default:l(()=>s[170]||(s[170]=[n("No work order statuses found.")])),_:1})]),_:1})),(d(!0),c(F,null,z(x.woStatuses,o=>(d(),k(e(L),{key:o.id},{default:l(()=>[t(e(S),{class:"text-xs sm:text-sm"},{default:l(()=>[n(f(o.name)+" ",1),o.deleted_at?(d(),c("span",za,"(Deleted)")):h("",!0)]),_:2},1024),t(e(S),null,{default:l(()=>[a("div",Ba,[o.deleted_at?(d(),k(e(y),{key:0,onClick:O=>xt(o.id),variant:"outline",size:"sm"},{default:l(()=>[t(u,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):h("",!0),o.deleted_at?h("",!0):(d(),k(e(y),{key:1,onClick:O=>vt(o.id),variant:"destructive",size:"sm"},{default:l(()=>[t(u,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),o.deleted_at?(d(),k(e(y),{key:2,onClick:O=>p.forceDeleteStatus(o.id),variant:"destructive",size:"sm"},{default:l(()=>[t(u,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):h("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t(e(me),null,{default:l(()=>[t(e(y),{onClick:s[45]||(s[45]=o=>te.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>s[171]||(s[171]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(ue),{open:Ne.value,"onUpdate:open":s[48]||(s[48]=o=>Ne.value=o)},{default:l(()=>[t(e(ne),{class:"max-h-[90vh] max-w-[95vw] overflow-y-auto md:max-w-[80vw] lg:max-w-4xl"},{default:l(()=>{var o;return[t(e(oe),null,{default:l(()=>[t(e(re),{class:"flex items-center gap-2 text-lg md:text-xl"},{default:l(()=>[t(u,{name:"alert-triangle",class:"h-5 w-5 text-red-600"}),s[172]||(s[172]=n(" Canceled Invoices on QS "))]),_:1}),t(e(de),null,{default:l(()=>s[173]||(s[173]=[n(" These invoices have a canceled WO status but are still marked as on QS. Please review and take appropriate action. ")])),_:1})]),_:1}),a("div",Pa,[(o=x.canceledQSInvoices)!=null&&o.length?(d(),k(e(xe),{key:0},{default:l(()=>[t(e(ge),null,{default:l(()=>[t(e(L),null,{default:l(()=>[t(e(N),{class:"whitespace-nowrap"},{default:l(()=>s[174]||(s[174]=[n("RO Number")])),_:1}),t(e(N),{class:"whitespace-nowrap"},{default:l(()=>s[175]||(s[175]=[n("Vendor")])),_:1}),t(e(N),{class:"whitespace-nowrap text-right"},{default:l(()=>s[176]||(s[176]=[n("Amount")])),_:1}),t(e(N),{class:"whitespace-nowrap"},{default:l(()=>s[177]||(s[177]=[n("Week")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[(d(!0),c(F,null,z(x.canceledQSInvoices,O=>(d(),k(e(L),{key:O.ro_number,class:"hover:bg-red-50 dark:hover:bg-red-900/30"},{default:l(()=>[t(e(S),{class:"font-medium"},{default:l(()=>[a("div",Ea,[t(u,{name:"alert-triangle",class:"h-4 w-4 text-red-600 dark:text-red-400"}),n(" "+f(O.ro_number),1)])]),_:2},1024),t(e(S),null,{default:l(()=>[n(f(O.vendor_name),1)]),_:2},1024),t(e(S),{class:"text-right"},{default:l(()=>[n(f(R(O.invoice_amount)),1)]),_:2},1024),t(e(S),null,{default:l(()=>[n("W"+f(O.week_number)+"/"+f(O.year),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(d(),c("div",qa,"No canceled QS invoices found."))]),t(e(me),{class:"mt-4 flex flex-col gap-2 sm:flex-row"},{default:l(()=>[t(e(y),{onClick:s[47]||(s[47]=O=>Ne.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>s[178]||(s[178]=[n("Close")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])])}}}),Ra=Ot(La,[["__scopeId","data-v-f520ec60"]]),ja={class:"bg-card rounded-lg border shadow-sm p-4 md:p-6 mb-6"},Qa={class:"flex justify-between items-center mb-4"},Ya={class:"overflow-x-auto max-h-80"},Ha={class:"flex space-x-2"},Ga={key:0,class:"border-t mt-4 px-4 py-3 bg-muted/20"},Ka={class:"flex flex-col sm:flex-row items-center justify-between gap-2"},Xa={class:"text-sm text-muted-foreground"},Ja={class:"flex flex-wrap gap-2"},Za={class:"grid grid-cols-2 gap-4"},en={key:0,class:"grid grid-cols-2 gap-4"},tn={class:"mt-1"},sn={class:"mt-1"},ln=Be({__name:"MilesDrivenTable",props:{milesEntries:{},tenantSlug:{}},setup(U){const M=U,x=$(!1),V=$("week_start_date"),E=$("desc"),T=$(1),q=$(10),C=ve({id:null,year:"",week_number:"",week_start_date:"",week_end_date:"",miles:"",notes:""}),Z=P(()=>{const _=[...M.milesEntries];return _.sort((i,w)=>{let R=i[V.value],j=w[V.value];return R>j?E.value==="asc"?1:-1:R<j?E.value==="asc"?-1:1:0}),_}),I=P(()=>Math.ceil(Z.value.length/q.value)),Y=P(()=>{const _=(T.value-1)*q.value,i=_+q.value;return Z.value.slice(_,i)}),D=P(()=>{const _=[];if(I.value<=5)for(let w=1;w<=I.value;w++)_.push(w);else{let w=Math.max(1,T.value-Math.floor(2.5)),R=Math.min(I.value,w+5-1);R===I.value&&(w=Math.max(1,R-5+1));for(let j=w;j<=R;j++)_.push(j)}return _});function H(_){_<1||_>I.value||(T.value=_)}function J(_){V.value===_?E.value=E.value==="asc"?"desc":"asc":(V.value=_,E.value="asc"),T.value=1}function ee(_=null){if(C.reset(),C.clearErrors(),_){C.id=_.id,C.week_start_date=_.week_start_date,C.week_end_date=_.week_end_date,C.miles=_.miles,C.notes=_.notes;const i=new Date(_.week_start_date),w=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()));w.setUTCDate(w.getUTCDate()+4-(w.getUTCDay()||7));const R=w.getUTCFullYear(),j=Math.ceil(((w-Date.UTC(R,0,1))/864e5+1)/7)+1;C.year=R,C.week_number=j}x.value=!0}function te(){const _=+C.year,i=+C.week_number;if(!_||!i){C.week_start_date="",C.week_end_date="";return}const w=new Date(Date.UTC(_,0,4)),R=w.getUTCDay()||7;w.setUTCDate(w.getUTCDate()+(i-1)*7+(1-R));const j=new Date(w);j.setUTCDate(w.getUTCDate()-1);const fe=new Date(j);fe.setUTCDate(j.getUTCDate()+6),C.week_start_date=j.toISOString().slice(0,10),C.week_end_date=fe.toISOString().slice(0,10)}function K(){const _=C.id?"miles_driven.update":"miles_driven.store",i=C.id?{tenantSlug:M.tenantSlug,milesDriven:C.id}:{tenantSlug:M.tenantSlug};C[C.id?"put":"post"](rt(_,i),{preserveScroll:!0,onSuccess:()=>{x.value=!1}})}const g=$(null);function se(_){g.value=_,confirm("Really delete this record?")&&b()}function b(){const _="miles_driven.destroy",i={tenantSlug:M.tenantSlug,milesDriven:g.value.id};C.delete(rt(_,i),{preserveScroll:!0,onSuccess:()=>{}})}function le(_){if(!_)return"";const i=new Date(_);return new Date(i.getTime()+i.getTimezoneOffset()*6e4).toLocaleDateString()}function ae(_){return Number(_).toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4})}function be(_,i){return(_==null?void 0:_.length)>i?_.slice(0,i)+"…":_||""}return(_,i)=>(d(),c("div",ja,[a("div",Qa,[i[13]||(i[13]=a("h3",{class:"text-base md:text-xl font-semibold"}," Miles Driven ",-1)),t(e(y),{onClick:i[0]||(i[0]=w=>ee()),variant:"default"},{default:l(()=>[t(u,{name:"plus",class:"mr-2 h-4 w-4"}),i[12]||(i[12]=a("span",null,"Add Miles Driven",-1))]),_:1})]),a("div",Ya,[t(e(xe),{class:"w-full"},{default:l(()=>[t(e(ge),null,{default:l(()=>[t(e(L),{class:"sticky top-0 z-10 border-b"},{default:l(()=>[t(e(N),{class:"cursor-pointer",onClick:i[1]||(i[1]=w=>J("week_start_date"))},{default:l(()=>[i[14]||(i[14]=n(" Week Start ")),a("span",null,[V.value==="week_start_date"&&E.value==="asc"?(d(),k(u,{key:0,name:"chevron-up"})):V.value==="week_start_date"&&E.value==="desc"?(d(),k(u,{key:1,name:"chevron-down"})):(d(),k(u,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),t(e(N),{class:"cursor-pointer",onClick:i[2]||(i[2]=w=>J("week_end_date"))},{default:l(()=>[i[15]||(i[15]=n(" Week End ")),a("span",null,[V.value==="week_end_date"&&E.value==="asc"?(d(),k(u,{key:0,name:"chevron-up"})):V.value==="week_end_date"&&E.value==="desc"?(d(),k(u,{key:1,name:"chevron-down"})):(d(),k(u,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),t(e(N),{class:"cursor-pointer",onClick:i[3]||(i[3]=w=>J("miles"))},{default:l(()=>[i[16]||(i[16]=n(" Miles ")),a("span",null,[V.value==="miles"&&E.value==="asc"?(d(),k(u,{key:0,name:"chevron-up"})):V.value==="miles"&&E.value==="desc"?(d(),k(u,{key:1,name:"chevron-down"})):(d(),k(u,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),t(e(N),null,{default:l(()=>i[17]||(i[17]=[n("Notes")])),_:1}),t(e(N),null,{default:l(()=>i[18]||(i[18]=[n("Actions")])),_:1})]),_:1})]),_:1}),t(e(we),null,{default:l(()=>[(d(!0),c(F,null,z(Y.value,w=>(d(),k(e(L),{key:w.id},{default:l(()=>[t(e(S),null,{default:l(()=>[n(f(le(w.week_start_date)),1)]),_:2},1024),t(e(S),null,{default:l(()=>[n(f(le(w.week_end_date)),1)]),_:2},1024),t(e(S),null,{default:l(()=>[n(f(ae(w.miles)),1)]),_:2},1024),t(e(S),null,{default:l(()=>[n(f(be(w.notes,30)),1)]),_:2},1024),t(e(S),null,{default:l(()=>[a("div",Ha,[t(e(y),{variant:"outline",size:"sm",onClick:R=>ee(w)},{default:l(()=>[t(u,{name:"pencil",class:"mr-1 h-4 w-4"}),i[19]||(i[19]=a("span",null,"Edit",-1))]),_:2},1032,["onClick"]),t(e(y),{variant:"destructive",size:"sm",onClick:R=>se(w)},{default:l(()=>[t(u,{name:"trash",class:"mr-1 h-4 w-4"}),i[20]||(i[20]=a("span",null,"Delete",-1))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),_.milesEntries.length?h("",!0):(d(),k(e(L),{key:0},{default:l(()=>[t(e(S),{colspan:5,class:"py-4 text-center text-muted-foreground"},{default:l(()=>i[21]||(i[21]=[n(" No miles driven records found ")])),_:1})]),_:1}))]),_:1})]),_:1})]),I.value>1?(d(),c("div",Ga,[a("div",Ka,[a("div",Xa," Showing "+f(Y.value.length)+" of "+f(_.milesEntries.length)+" entries ",1),a("div",Ja,[t(e(y),{onClick:i[4]||(i[4]=w=>H(T.value-1)),disabled:T.value===1,variant:"ghost",size:"sm"},{default:l(()=>i[22]||(i[22]=[n(" Previous ")])),_:1},8,["disabled"]),(d(!0),c(F,null,z(D.value,w=>(d(),k(e(y),{key:w,onClick:R=>H(w),variant:"ghost",size:"sm",class:ke({"border-primary bg-primary/10 text-primary":T.value===w})},{default:l(()=>[n(f(w),1)]),_:2},1032,["onClick","class"]))),128)),t(e(y),{onClick:i[5]||(i[5]=w=>H(T.value+1)),disabled:T.value===I.value,variant:"ghost",size:"sm"},{default:l(()=>i[23]||(i[23]=[n(" Next ")])),_:1},8,["disabled"])])])])):h("",!0),t(e(ue),{open:x.value,"onUpdate:open":i[11]||(i[11]=w=>x.value=w)},{default:l(()=>[t(e(ne),{class:"sm:max-w-md w-full max-h-[90vh] overflow-auto"},{default:l(()=>[t(e(oe),null,{default:l(()=>[t(e(re),null,{default:l(()=>[n(f(e(C).id?"Edit Miles Driven":"Add Miles Driven"),1)]),_:1}),t(e(de),{class:"text-muted-foreground"},{default:l(()=>[n(f(e(C).id?"Update this record.":"Fill in the new miles driven record."),1)]),_:1})]),_:1}),a("form",{onSubmit:ye(K,["prevent"]),class:"grid gap-4 py-4"},[a("div",Za,[a("div",null,[t(e(A),{for:"year"},{default:l(()=>i[24]||(i[24]=[n("Year")])),_:1}),t(e(Q),{id:"year",type:"number",modelValue:e(C).year,"onUpdate:modelValue":i[6]||(i[6]=w=>e(C).year=w),modelModifiers:{number:!0},min:"2000",max:"2100",onInput:te},null,8,["modelValue"])]),a("div",null,[t(e(A),{for:"week_number"},{default:l(()=>i[25]||(i[25]=[n("Week #")])),_:1}),t(e(Q),{id:"week_number",type:"number",modelValue:e(C).week_number,"onUpdate:modelValue":i[7]||(i[7]=w=>e(C).week_number=w),modelModifiers:{number:!0},min:"1",max:"53",onInput:te},null,8,["modelValue"])])]),e(C).week_start_date?(d(),c("div",en,[a("div",null,[t(e(A),null,{default:l(()=>i[26]||(i[26]=[n("Start (Sun)")])),_:1}),a("p",tn,f(le(e(C).week_start_date)),1)]),a("div",null,[t(e(A),null,{default:l(()=>i[27]||(i[27]=[n("End (Sat)")])),_:1}),a("p",sn,f(le(e(C).week_end_date)),1)])])):h("",!0),a("div",null,[t(e(A),{for:"miles"},{default:l(()=>i[28]||(i[28]=[n("Miles")])),_:1}),t(e(Q),{id:"miles",modelValue:e(C).miles,"onUpdate:modelValue":i[8]||(i[8]=w=>e(C).miles=w),type:"number",step:"0.0001",min:"0",max:"999999.9999"},null,8,["modelValue"])]),a("div",null,[t(e(A),{for:"notes"},{default:l(()=>i[29]||(i[29]=[n("Notes")])),_:1}),W(a("textarea",{id:"notes","onUpdate:modelValue":i[9]||(i[9]=w=>e(C).notes=w),class:"w-full h-24 resize-none rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[tt,e(C).notes]])]),t(e(me),{class:"mt-4"},{default:l(()=>[t(e(y),{variant:"outline",type:"button",onClick:i[10]||(i[10]=w=>x.value=!1)},{default:l(()=>i[30]||(i[30]=[n(" Cancel ")])),_:1}),t(e(y),{type:"submit",disabled:e(C).processing},{default:l(()=>i[31]||(i[31]=[n("Submit")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]))}}),an={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},nn={class:"border-b"},on={class:"flex justify-center space-x-8 px-0 pt-4"},rn={key:0,class:"flex justify-center items-center p-12"},dn={key:1,class:"p-0"},Nn=Be({__name:"AssetMaintenance",props:{entries:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},repairOrders:{type:Object,default:()=>({data:[],links:[]})},dateRange:{type:Object,default:null},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},dateFilter:{type:String,default:"yesterday"},tenantSlug:String,SuperAdmin:Boolean,perPage:{type:Number,default:10},openedComponent:{type:String,default:"trucks"},milesEntries:Array},setup(U){const M=U,x=$(!1),V=$(""),E=$(""),T=$(M.openedComponent||"trucks"),q=P(()=>[{title:M.tenantSlug?"Dashboard":"Admin Dashboard",href:M.tenantSlug?route("dashboard",{tenantSlug:M.tenantSlug}):route("admin.dashboard")},{title:"Asset Maintenance",href:"#"}]),C=P(()=>T.value==="trucks"?$s:T.value==="milesDriven"?ln:Ra),Z=P(()=>T.value==="trucks"?{entries:M.entries,tenantSlug:M.tenantSlug,SuperAdmin:M.SuperAdmin,tenants:M.tenants,trucks:M.trucks,vendors:M.vendors,areasOfConcern:M.areasOfConcern}:T.value==="milesDriven"?{milesEntries:M.milesEntries,tenantSlug:M.tenantSlug}:{repairOrders:M.repairOrders,tenantSlug:M.tenantSlug,SuperAdmin:M.SuperAdmin,tenants:M.tenants,trucks:M.trucks,vendors:M.vendors,areasOfConcern:M.areasOfConcern,dateRange:M.dateRange,woStatuses:M.woStatuses,weekNumber:M.weekNumber,startWeekNumber:M.startWeekNumber,endWeekNumber:M.endWeekNumber,year:M.year,canceledQSInvoices:M.canceledQSInvoices,outstandingInvoices:M.outstandingInvoices,workOrdersByTruck:M.workOrdersByTruck,workOrderByAreasOfConcern:M.workOrderByAreasOfConcern,filters:M.filters,dateFilter:M.dateFilter,perPage:M.perPage});function I(Y){x.value=!0,T.value=Y;const D=new URL(window.location.href);D.search="",D.searchParams.set("openedComponent",Y),window.history.replaceState({},"",D.href),setTimeout(()=>{x.value=!1},300)}return(Y,D)=>(d(),k(St,{breadcrumbs:q.value,tenantSlug:U.tenantSlug},{default:l(()=>[t(e(Ct),{title:"Asset Maintenance"}),a("div",an,[V.value?(d(),k(e(De),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:l(()=>[t(e(Ve),null,{default:l(()=>D[3]||(D[3]=[n("Success")])),_:1}),t(e(Ae),null,{default:l(()=>[n(f(V.value),1)]),_:1})]),_:1})):h("",!0),E.value?(d(),k(e(De),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:l(()=>[t(e(Ve),null,{default:l(()=>D[4]||(D[4]=[n("Error")])),_:1}),t(e(Ae),null,{default:l(()=>[n(f(E.value),1)]),_:1})]),_:1})):h("",!0),D[9]||(D[9]=a("div",{class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},[a("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Asset Maintenance "),a("div",{class:"flex flex-wrap gap-3 mt-2 sm:mt-0"})],-1)),t(e(Se),{class:"shadow-sm border bg-card"},{default:l(()=>[t(e($e),{class:"p-0"},{default:l(()=>[a("div",nn,[a("div",on,[t(e(y),{onClick:D[0]||(D[0]=H=>I("trucks")),variant:"ghost",class:ke([[T.value==="trucks"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:l(()=>[t(u,{name:"truck",class:"mr-2 h-4 w-4"}),D[5]||(D[5]=a("span",null,"Trucks",-1))]),_:1},8,["class"]),t(e(y),{onClick:D[1]||(D[1]=H=>I("repairOrders")),variant:"ghost",class:ke([[T.value==="repairOrders"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-0 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:l(()=>[t(u,{name:"clipboardList",class:"mr-2 h-4 w-4"}),D[6]||(D[6]=a("span",null,"Repair Orders",-1))]),_:1},8,["class"]),t(e(y),{onClick:D[2]||(D[2]=H=>I("milesDriven")),variant:"ghost",class:ke([[T.value==="milesDriven"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:l(()=>[t(u,{name:"gauge",class:"mr-2 h-4 w-4"}),D[7]||(D[7]=a("span",null,"Miles Driven",-1))]),_:1},8,["class"])])]),x.value?(d(),c("div",rn,D[8]||(D[8]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):(d(),c("div",dn,[(d(),k(Vt(C.value),At(Dt(Z.value)),null,16))]))]),_:1})]),_:1})])]),_:1},8,["breadcrumbs","tenantSlug"]))}});export{Nn as default};
