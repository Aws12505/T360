import{J as Le,E as ge,a7 as c,N as i,an as l,a6 as j,a1 as n,O as o,ae as d,a4 as F,ao as U,I as s,a9 as $,aa as N,af as b,a8 as ye,B as k,A as X,a0 as Pe,am as Ee,L as R,aM as J,aN as Ie}from"./vendor-xy97mY0-.js";import{C as ee,m as Oe,W as L}from"./vendor-vue-BRPOKWly.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-BW5qRT-D.js";import{_ as ne,a as oe,b as se,c as ae,d as re,e as ie}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CL_BLXsN.js";import{_ as C,a as P}from"./Label.vue_vue_type_script_setup_true_lang-BAsbsLwI.js";import{_ as Ye}from"./Checkbox.vue_vue_type_script_setup_true_lang-D9r_l7BE.js";import{_ as We}from"./AppLayout.vue_vue_type_script_setup_true_lang-lePqyPZ7.js";import{_ as D}from"./Icon.vue_vue_type_script_setup_true_lang-ChfPiT8z.js";import{_ as qe,a as He,b as ue,c as de,d as Ge,e as Z}from"./TableRow.vue_vue_type_script_setup_true_lang-B3yArJuB.js";import{_ as ce}from"./Card.vue_vue_type_script_setup_true_lang-DYwS7A8-.js";import{_ as Je,a as Qe}from"./CardTitle.vue_vue_type_script_setup_true_lang-Wjlz8bZz.js";import{_ as fe}from"./CardContent.vue_vue_type_script_setup_true_lang-DuDvULMo.js";import{_ as Ke,a as Xe,b as Ze}from"./AlertDescription.vue_vue_type_script_setup_true_lang-D3Lka1oR.js";import"./vendor-d3-DpcuoaSC.js";import"./vendor-axios-t--hEgTQ.js";import"./vendor-lodash-DCUXXPMP.js";import"./utils-OMMm8ro2.js";import"./vendor-ui-CqtnUFeu.js";import"./vendor-icons-CrF1H9yF.js";import"./app-CwY2Lith.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-evYd1tA8.js";const et={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},tt={key:0,class:"col-span-full"},lt={class:"relative"},nt=["value"],ot={class:"col-span-full"},st={class:"relative"},at={class:"relative"},rt={class:"relative"},dt=["value"],it={class:"relative"},ut={class:"flex items-center space-x-2"},ct={class:"flex-col space-y-2 sm:space-y-0 sm:flex-row sm:justify-end sm:space-x-2 pt-4 border-t flex"},ft=Le({__name:"RejectionForm",props:{rejection:{type:Object,default:null},reasons:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},tenantSlug:{type:String,default:null}},emits:["close"],setup(g,{emit:m}){var S,T,V,A,z,O,M;const _=g,E=m,f=ee({id:(S=_.rejection)==null?void 0:S.id,tenant_id:_.isSuperAdmin?(T=_.rejection)==null?void 0:T.tenant_id:null,date:((V=_.rejection)==null?void 0:V.date)||"",driver_name:((A=_.rejection)==null?void 0:A.driver_name)||"",rejection_type:((z=_.rejection)==null?void 0:z.rejection_type)||"block",rejection_category:((O=_.rejection)==null?void 0:O.rejection_category)||"more_than_6",reason_code_id:((M=_.rejection)==null?void 0:M.reason_code_id)||null,disputed:_.rejection&&_.rejection.disputed!==null?parseInt(_.rejection.disputed)===1:!1,driver_controllable:_.rejection&&_.rejection.driver_controllable!==null?parseInt(_.rejection.driver_controllable)===1:null});ge(()=>_.rejection,x=>{x?(f.id=x.id,f.tenant_id=x.tenant_id,f.date=x.date,f.driver_name=x.driver_name,f.rejection_type=x.rejection_type,f.rejection_category=x.rejection_category,f.reason_code_id=x.reason_code_id,f.disputed=x.disputed!==null?parseInt(x.disputed)===1:!1,f.driver_controllable=x.driver_controllable!==null?parseInt(x.driver_controllable)===1:null):f.reset()},{immediate:!0});const I=()=>{const x=!!f.id,r=_.isSuperAdmin?x?"acceptance.update.admin":"acceptance.store.admin":x?"acceptance.update":"acceptance.store",p=_.isSuperAdmin?x?{rejection:f.id}:{}:x?{tenantSlug:_.tenantSlug,rejection:f.id}:{tenantSlug:_.tenantSlug};f[x?"put":"post"](route(r,p),{onSuccess:()=>E("close")})};return(x,r)=>(i(),c("form",{onSubmit:ye(I,["prevent"]),class:"space-y-6"},[l("div",et,[g.isSuperAdmin?(i(),c("div",tt,[n(C,null,{default:o(()=>r[9]||(r[9]=[d("Company Name")])),_:1}),l("div",lt,[F(l("select",{"onUpdate:modelValue":r[0]||(r[0]=p=>s(f).tenant_id=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[r[10]||(r[10]=l("option",{value:null,disabled:""},"Select Company",-1)),(i(!0),c($,null,N(g.tenants,p=>(i(),c("option",{key:p.id,value:p.id},b(p.name),9,nt))),128))],512),[[U,s(f).tenant_id]]),r[11]||(r[11]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):j("",!0),l("div",ot,[n(C,null,{default:o(()=>r[12]||(r[12]=[d("Date")])),_:1}),n(P,{type:"date",modelValue:s(f).date,"onUpdate:modelValue":r[1]||(r[1]=p=>s(f).date=p),class:"w-full"},null,8,["modelValue"])]),l("div",null,[n(C,null,{default:o(()=>r[13]||(r[13]=[d("Driver Name")])),_:1}),n(P,{modelValue:s(f).driver_name,"onUpdate:modelValue":r[2]||(r[2]=p=>s(f).driver_name=p),class:"w-full"},null,8,["modelValue"])]),l("div",null,[n(C,null,{default:o(()=>r[14]||(r[14]=[d("Rejection Type")])),_:1}),l("div",st,[F(l("select",{"onUpdate:modelValue":r[3]||(r[3]=p=>s(f).rejection_type=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},r[15]||(r[15]=[l("option",{value:"block"},"Block",-1),l("option",{value:"load"},"Load",-1)]),512),[[U,s(f).rejection_type]]),r[16]||(r[16]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[n(C,null,{default:o(()=>r[17]||(r[17]=[d("Rejection Category")])),_:1}),l("div",at,[F(l("select",{"onUpdate:modelValue":r[4]||(r[4]=p=>s(f).rejection_category=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},r[18]||(r[18]=[l("option",{value:"more_than_6"},"More than 6 hrs",-1),l("option",{value:"within_6"},"Within 6 hrs",-1),l("option",{value:"after_start"},"After start",-1)]),512),[[U,s(f).rejection_category]]),r[19]||(r[19]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[n(C,null,{default:o(()=>r[20]||(r[20]=[d("Reason Code")])),_:1}),l("div",rt,[F(l("select",{"onUpdate:modelValue":r[5]||(r[5]=p=>s(f).reason_code_id=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},[(i(!0),c($,null,N(g.reasons,p=>(i(),c("option",{key:p.id,value:p.id},b(p.reason_code),9,dt))),128))],512),[[U,s(f).reason_code_id]]),r[21]||(r[21]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",null,[n(C,null,{default:o(()=>r[22]||(r[22]=[d("Driver Controllable")])),_:1}),l("div",it,[F(l("select",{"onUpdate:modelValue":r[6]||(r[6]=p=>s(f).driver_controllable=p),class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none"},r[23]||(r[23]=[l("option",{value:null},"N/A",-1),l("option",{value:!0},"Yes",-1),l("option",{value:!1},"No",-1)]),512),[[U,s(f).driver_controllable]]),r[24]||(r[24]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",ut,[n(Ye,{checked:s(f).disputed,"onUpdate:checked":r[7]||(r[7]=p=>s(f).disputed=p),id:"disputed"},null,8,["checked"]),n(C,{for:"disputed"},{default:o(()=>r[25]||(r[25]=[d("Disputed")])),_:1})])]),l("div",ct,[n(y,{type:"button",onClick:r[8]||(r[8]=p=>E("close")),variant:"outline",class:"w-full sm:w-auto"},{default:o(()=>r[26]||(r[26]=[d(" Cancel ")])),_:1}),n(y,{type:"submit",disabled:s(f).processing,class:"w-full sm:w-auto"},{default:o(()=>[d(b(s(f).id?"Update":"Create"),1)]),_:1},8,["disabled"])])],32))}}),pt={class:"max-w-7xl mx-auto p-6 space-y-8"},mt={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},vt={class:"flex flex-wrap gap-3"},gt={class:"relative"},yt={key:0,class:"absolute right-0 mt-1 w-48 bg-background rounded-md shadow-lg border z-10"},bt={class:"py-1"},xt={class:"cursor-pointer block px-4 py-2 text-sm hover:bg-muted"},_t=["href"],kt=["action"],wt={class:"flex flex-col gap-2"},Ct={class:"flex flex-wrap gap-2"},St={key:0,class:"text-sm text-muted-foreground"},jt={key:0},$t={key:1},At={key:2},Dt={class:"flex justify-between items-center"},Rt={class:"flex flex-col gap-4"},Tt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},Ft={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full"},Ut=["value"],Nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full"},Vt={class:"flex justify-end"},zt={class:"overflow-x-auto"},Mt={class:"flex items-center justify-center"},ht=["checked"],Bt={class:"flex items-center"},Lt={key:0,class:"ml-2"},Pt={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Et={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},It={key:1,class:"ml-2 opacity-50"},Ot=["value"],Yt={key:1,class:"capitalize"},Wt={key:0,class:"ml-1 text-xs text-red-500"},qt={class:"flex space-x-2"},Ht={key:0,class:"bg-muted/20 px-4 py-3 border-t"},Gt={class:"flex justify-between items-center"},Jt={class:"text-sm text-muted-foreground flex items-center gap-4"},Qt={class:"flex items-center gap-2"},Kt=["value"],Xt={class:"flex"},Zt=["innerHTML"],el={class:"mt-4 space-y-4"},tl={class:"flex items-center justify-between"},ll={class:"max-h-[400px] overflow-y-auto"},nl={key:0,class:"text-center py-8 text-muted-foreground border rounded-md"},ol={key:1,class:"space-y-2"},sl=["onClick"],al={class:"font-medium"},rl={key:0,class:"ml-2 text-xs text-red-500"},dl={key:0,class:"text-sm text-muted-foreground mt-1"},il={class:"opacity-0 group-hover:opacity-100 transition-opacity"},ul={key:0,class:"border rounded-md p-4 space-y-4"},cl={class:"text-sm font-medium"},fl={class:"space-y-3"},pl={class:"flex justify-end space-x-2"},zl={__name:"Index",props:{rejections:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},rejection_reason_codes:Array,tenants:{type:Array,default:()=>[]},isSuperAdmin:{type:Boolean,default:!1},dateFilter:{type:String,default:"full"},dateRange:{type:Object,default:()=>({label:"All Time"})},perPage:{type:Number,default:10}},setup(g){const m=g,_=[{title:m.tenantSlug?"Dashboard":"Admin Dashboard",href:m.tenantSlug?route("dashboard",{tenantSlug:m.tenantSlug}):route("admin.dashboard")},{title:"Acceptance",href:m.tenantSlug?route("acceptance.index",{tenantSlug:m.tenantSlug}):route("acceptance.index.admin")}],E=k(!1),f=k(!1),I=k(null),S=k(""),T=k(m.dateFilter||"full"),V=k(m.perPage),A=k([]),z=k(!1),O=k(null),M=k(!1),x=k(!1),r=k(null),p=k({reason_code:"",description:""}),Y=k(!1),pe=k(null),te=["date","rejection_type","driver_name","penalty","reason_code","disputed","driver_controllable"],W=k("date"),q=k("desc"),v=k({search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""}),H=X(()=>{let a=[...m.rejections.data];if(v.value.search){const e=v.value.search.toLowerCase();a=a.filter(t=>{var u,w,B,K;return((u=t.driver_name)==null?void 0:u.toLowerCase().includes(e))||((w=t.rejection_type)==null?void 0:w.toLowerCase().includes(e))||((K=(B=t.reason_code)==null?void 0:B.reason_code)==null?void 0:K.toLowerCase().includes(e))})}if(v.value.dateFrom&&(a=a.filter(e=>e.date&&e.date>=v.value.dateFrom)),v.value.dateTo&&(a=a.filter(e=>e.date&&e.date<=v.value.dateTo)),v.value.rejectionType&&(a=a.filter(e=>e.rejection_type===v.value.rejectionType)),v.value.reasonCode&&(a=a.filter(e=>e.reason_code&&e.reason_code.id===parseInt(v.value.reasonCode))),v.value.penalty){const e=v.value.penalty.toLowerCase();a=a.filter(t=>t.penalty&&t.penalty.toString().toLowerCase().includes(e))}if(v.value.disputed!==""){const e=v.value.disputed==="true";a=a.filter(t=>t.disputed===e)}if(v.value.driverControllable!=="")if(v.value.driverControllable==="null")a=a.filter(e=>e.driver_controllable===null);else{const e=v.value.driverControllable==="true";a=a.filter(t=>t.driver_controllable===e)}return a.sort((e,t)=>{var B,K;let u=e[W.value],w=t[W.value];return W.value==="reason_code"&&(u=((B=e.reason_code)==null?void 0:B.reason_code)||"",w=((K=t.reason_code)==null?void 0:K.reason_code)||""),u===null?1:w===null?-1:(typeof u=="string"&&(u=u.toLowerCase(),w=w.toLowerCase()),u<w?q.value==="asc"?-1:1:u>w?q.value==="asc"?1:-1:0)}),a});function be(a){W.value===a?q.value=q.value==="asc"?"desc":"asc":(W.value=a,q.value="asc")}function h(){}function xe(){v.value={search:"",dateFrom:"",dateTo:"",rejectionType:"",reasonCode:"",penalty:"",disputed:"",driverControllable:""},G("full")}const me=(a=null)=>{I.value=a,E.value=!0},_e=()=>{f.value=!0,x.value=!1,r.value=null},ke=()=>{p.value={reason_code:"",description:""},r.value=null,x.value=!0},we=a=>{p.value={reason_code:a.reason_code,description:a.description||""},r.value=a.id,x.value=!0},Ce=()=>{x.value=!1,r.value=null},ve=a=>{pe.value=a,Y.value=!0},Se=()=>{const a=ee({reason_code:p.value.reason_code,description:p.value.description}),e=r.value?m.isSuperAdmin?"rejection_reason_codes.update.admin":"rejection_reason_codes.update":m.isSuperAdmin?"rejection_reason_codes.store.admin":"rejection_reason_codes.store",t=r.value?m.isSuperAdmin?{code:r.value}:{tenantSlug:m.tenantSlug,code:r.value}:m.isSuperAdmin?{}:{tenantSlug:m.tenantSlug};(r.value?a.put:a.post).call(a,route(e,t),{onSuccess:()=>{S.value=r.value?"Reason code updated successfully.":"Reason code created successfully.",x.value=!1,r.value=null,L.reload({only:["rejection_reason_codes"]})},onError:w=>{console.error(w)}})},je=a=>{const e=ee({}),t=m.isSuperAdmin?"rejection_reason_codes.destroy.admin":"rejection_reason_codes.destroy",u=m.isSuperAdmin?{id:a}:{tenantSlug:m.tenantSlug,code:a};e.delete(route(t,u),{onSuccess:()=>{S.value="Reason code deleted successfully.",Y.value=!1,L.reload({only:["rejection_reason_codes"]})}})},$e=a=>{if(!confirm("Are you sure you want to delete this rejection?"))return;const e=ee({}),t=m.isSuperAdmin?"acceptance.destroy.admin":"acceptance.destroy",u=m.isSuperAdmin?{rejection:a}:{tenantSlug:m.tenantSlug,rejection:a};e.delete(route(t,u),{preserveScroll:!0,onSuccess:()=>{S.value="Rejection deleted successfully."}})},Ae=a=>{if(a){const e=new URL(a);e.searchParams.set("perPage",V.value),L.get(e.href,{},{preserveScroll:!0,preserveState:!0,only:["rejections"]})}};function G(a){T.value=a;const e=m.tenantSlug?route("acceptance.index",{tenantSlug:m.tenantSlug}):route("acceptance.index.admin");L.get(e,{dateFilter:a,perPage:V.value},{preserveState:!0})}function De(){const a=m.tenantSlug?route("acceptance.index",{tenantSlug:m.tenantSlug}):route("acceptance.index.admin");L.get(a,{dateFilter:T.value,perPage:V.value},{preserveState:!0})}function le(a){if(!a)return"";const e=a.split("-");if(e.length!==3)return a;const[t,u,w]=e;return`${Number(u)}/${Number(w)}/${t}`}ge(S,a=>{a&&setTimeout(()=>{S.value=""},5e3)});function Re(a){L.post(route("rejection_reason_codes.restore.admin",{id:a}),{},{onSuccess:()=>{S.value="Reason code restored successfully",setTimeout(()=>S.value="",3e3)}})}function Te(a){confirm("Are you sure you want to permanently delete this reason code? This action cannot be undone.")&&L.delete(route("rejection_reason_codes.forceDelete.admin",{id:a}),{onSuccess:()=>{S.value="Reason code permanently deleted",setTimeout(()=>S.value="",3e3)}})}X(()=>m.rejection_reason_codes.filter(a=>!a.deleted_at));const Fe=X(()=>H.value.length>0&&A.value.length===H.value.length);function Ue(a){a.target.checked?A.value=H.value.map(e=>e.id):A.value=[]}function Ne(){A.value.length>0&&(z.value=!0)}function Ve(){const a=ee({ids:A.value}),e=m.isSuperAdmin?"acceptance.destroyBulk.admin":"acceptance.destroyBulk",t=m.isSuperAdmin?{}:{tenantSlug:m.tenantSlug};a.delete(route(e,t),{preserveScroll:!0,onSuccess:()=>{S.value=`${A.value.length} rejection records deleted successfully.`,A.value=[],z.value=!1},onError:u=>{console.error(u)}})}function ze(a){const e=a.target.files[0];if(!e)return;const t=new FormData;t.append("csv_file",e);const u=m.isSuperAdmin?route("acceptance.import.admin"):route("acceptance.import",{tenantSlug:m.tenantSlug});L.post(u,t,{onSuccess:()=>{S.value="Delays imported successfully",a.target.value=""},onError:w=>{console.error(w),a.target.value=""}})}function Me(){O.value&&O.value.submit()}const he=X(()=>m.tenantSlug?route("acceptance.export",{tenantSlug:m.tenantSlug}):route("acceptance.export.admin")),Q=k(!1),Be=X(()=>"/storage/upload-data-temps/Rejections Template.csv");return Pe(()=>{const a=e=>{Q.value&&!e.target.closest(".relative")&&(Q.value=!1)};document.addEventListener("click",a),Ee(()=>{document.removeEventListener("click",a)})}),(a,e)=>(i(),R(We,{breadcrumbs:_,tenantSlug:g.tenantSlug},{default:o(()=>[n(s(Oe),{title:"Acceptance"}),l("div",pt,[S.value?(i(),R(s(Ke),{key:0,variant:"success"},{default:o(()=>[n(s(Xe),null,{default:o(()=>e[32]||(e[32]=[d("Success")])),_:1}),n(s(Ze),null,{default:o(()=>[d(b(S.value),1)]),_:1})]),_:1})):j("",!0),l("div",mt,[e[38]||(e[38]=l("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Acceptance",-1)),l("div",vt,[n(y,{onClick:e[0]||(e[0]=t=>me()),variant:"default"},{default:o(()=>[n(D,{name:"plus",class:"mr-2 h-4 w-4"}),e[33]||(e[33]=d(" Add Rejection "))]),_:1}),A.value.length>0?(i(),R(y,{key:0,onClick:e[1]||(e[1]=t=>Ne()),variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),d(" Delete Selected ("+b(A.value.length)+") ",1)]),_:1})):j("",!0),l("div",gt,[n(y,{onClick:e[2]||(e[2]=t=>Q.value=!Q.value),variant:"secondary"},{default:o(()=>[n(D,{name:"upload",class:"mr-2 h-4 w-4"}),e[34]||(e[34]=d(" Upload CSV ")),n(D,{name:"chevron-down",class:"ml-2 h-4 w-4"})]),_:1}),Q.value?(i(),c("div",yt,[l("div",bt,[l("label",xt,[e[35]||(e[35]=l("span",null,"Upload CSV File",-1)),l("input",{type:"file",class:"hidden",onChange:ze,accept:".csv"},null,32)]),l("a",{href:Be.value,download:"Rejections Template.csv",class:"block px-4 py-2 text-sm hover:bg-muted"}," Download Template ",8,_t)])])):j("",!0)]),n(y,{onClick:ye(Me,["prevent"]),variant:"outline"},{default:o(()=>[n(D,{name:"download",class:"mr-2 h-4 w-4"}),e[36]||(e[36]=d(" Download CSV "))]),_:1}),g.isSuperAdmin?(i(),R(y,{key:1,onClick:e[3]||(e[3]=t=>_e()),variant:"outline"},{default:o(()=>[n(D,{name:"settings",class:"mr-2 h-4 w-4"}),e[37]||(e[37]=d(" Manage Reason Codes "))]),_:1})):j("",!0)])]),l("form",{ref_key:"exportForm",ref:O,action:he.value,method:"GET",class:"hidden"},null,8,kt),n(s(ce),null,{default:o(()=>[n(s(fe),{class:"p-4"},{default:o(()=>[l("div",wt,[l("div",Ct,[n(y,{onClick:e[4]||(e[4]=t=>G("yesterday")),variant:"outline",size:"sm",class:J({"bg-primary/10 text-primary border-primary":T.value==="yesterday"})},{default:o(()=>e[39]||(e[39]=[d(" Yesterday ")])),_:1},8,["class"]),n(y,{onClick:e[5]||(e[5]=t=>G("current-week")),variant:"outline",size:"sm",class:J({"bg-primary/10 text-primary border-primary":T.value==="current-week"})},{default:o(()=>e[40]||(e[40]=[d(" Current Week ")])),_:1},8,["class"]),n(y,{onClick:e[6]||(e[6]=t=>G("6w")),variant:"outline",size:"sm",class:J({"bg-primary/10 text-primary border-primary":T.value==="6w"})},{default:o(()=>e[41]||(e[41]=[d(" 6 Weeks ")])),_:1},8,["class"]),n(y,{onClick:e[7]||(e[7]=t=>G("quarterly")),variant:"outline",size:"sm",class:J({"bg-primary/10 text-primary border-primary":T.value==="quarterly"})},{default:o(()=>e[42]||(e[42]=[d(" Quarterly ")])),_:1},8,["class"]),n(y,{onClick:e[8]||(e[8]=t=>G("full")),variant:"outline",size:"sm",class:J({"bg-primary/10 text-primary border-primary":T.value==="full"})},{default:o(()=>e[43]||(e[43]=[d(" Full ")])),_:1},8,["class"])]),g.dateRange?(i(),c("div",St,[T.value==="yesterday"&&g.dateRange.start?(i(),c("span",jt," Showing data from "+b(le(g.dateRange.start)),1)):g.dateRange.start&&g.dateRange.end?(i(),c("span",$t," Showing data from "+b(le(g.dateRange.start))+" to "+b(le(g.dateRange.end)),1)):(i(),c("span",At,b(g.dateRange.label),1))])):j("",!0)])]),_:1})]),_:1}),n(s(ce),null,{default:o(()=>[n(s(Je),{class:"pb-2"},{default:o(()=>[l("div",Dt,[n(s(Qe),null,{default:o(()=>e[44]||(e[44]=[d("Filters")])),_:1}),n(y,{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=t=>M.value=!M.value)},{default:o(()=>[d(b(M.value?"Hide Filters":"Show Filters")+" ",1),n(D,{name:M.value?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),M.value?(i(),R(s(fe),{key:0,class:"pt-2"},{default:o(()=>[l("div",Rt,[l("div",Tt,[l("div",null,[n(s(C),{for:"search"},{default:o(()=>e[45]||(e[45]=[d("Search")])),_:1}),n(s(P),{id:"search",modelValue:v.value.search,"onUpdate:modelValue":e[10]||(e[10]=t=>v.value.search=t),type:"text",placeholder:"Search by driver name...",onInput:h,class:"w-full"},null,8,["modelValue"])]),l("div",null,[n(s(C),{for:"dateFrom"},{default:o(()=>e[46]||(e[46]=[d("Date From")])),_:1}),n(s(P),{id:"dateFrom",modelValue:v.value.dateFrom,"onUpdate:modelValue":e[11]||(e[11]=t=>v.value.dateFrom=t),type:"date",onChange:h,class:"w-full"},null,8,["modelValue"])]),l("div",null,[n(s(C),{for:"dateTo"},{default:o(()=>e[47]||(e[47]=[d("Date To")])),_:1}),n(s(P),{id:"dateTo",modelValue:v.value.dateTo,"onUpdate:modelValue":e[12]||(e[12]=t=>v.value.dateTo=t),type:"date",onChange:h,class:"w-full"},null,8,["modelValue"])])]),l("div",Ft,[l("div",null,[n(s(C),{for:"rejectionType"},{default:o(()=>e[48]||(e[48]=[d("Rejection Type")])),_:1}),F(l("select",{id:"rejectionType","onUpdate:modelValue":e[13]||(e[13]=t=>v.value.rejectionType=t),onChange:h,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[49]||(e[49]=[l("option",{value:""},"All Types",-1),l("option",{value:"pickup"},"Pickup",-1),l("option",{value:"delivery"},"Delivery",-1)]),544),[[U,v.value.rejectionType]])]),l("div",null,[n(s(C),{for:"reasonCode"},{default:o(()=>e[50]||(e[50]=[d("Reason Code")])),_:1}),F(l("select",{id:"reasonCode","onUpdate:modelValue":e[14]||(e[14]=t=>v.value.reasonCode=t),onChange:h,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[51]||(e[51]=l("option",{value:""},"All Reason Codes",-1)),(i(!0),c($,null,N(g.rejection_reason_codes,t=>(i(),c("option",{key:t.id,value:t.id},b(t.reason_code),9,Ut))),128))],544),[[U,v.value.reasonCode]])]),l("div",null,[n(s(C),{for:"penalty"},{default:o(()=>e[52]||(e[52]=[d("Penalty")])),_:1}),n(s(P),{id:"penalty",modelValue:v.value.penalty,"onUpdate:modelValue":e[15]||(e[15]=t=>v.value.penalty=t),type:"text",placeholder:"Filter by penalty...",onInput:h,class:"w-full"},null,8,["modelValue"])])]),l("div",Nt,[l("div",null,[n(s(C),{for:"disputed"},{default:o(()=>e[53]||(e[53]=[d("Disputed")])),_:1}),F(l("select",{id:"disputed","onUpdate:modelValue":e[16]||(e[16]=t=>v.value.disputed=t),onChange:h,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[54]||(e[54]=[l("option",{value:""},"All",-1),l("option",{value:"true"},"Yes",-1),l("option",{value:"false"},"No",-1)]),544),[[U,v.value.disputed]])]),l("div",null,[n(s(C),{for:"driverControllable"},{default:o(()=>e[55]||(e[55]=[d("Driver Controllable")])),_:1}),F(l("select",{id:"driverControllable","onUpdate:modelValue":e[17]||(e[17]=t=>v.value.driverControllable=t),onChange:h,class:"flex h-10 w-full items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[56]||(e[56]=[l("option",{value:""},"All",-1),l("option",{value:"true"},"Yes",-1),l("option",{value:"false"},"No",-1),l("option",{value:"null"},"N/A",-1)]),544),[[U,v.value.driverControllable]])])]),l("div",Vt,[n(y,{onClick:xe,variant:"ghost",size:"sm"},{default:o(()=>[n(D,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[57]||(e[57]=d(" Reset Filters "))]),_:1})])])]),_:1})):j("",!0)]),_:1}),n(s(ce),null,{default:o(()=>[n(s(fe),{class:"p-0"},{default:o(()=>[l("div",zt,[n(s(qe),{class:"relative h-[500px] overflow-auto"},{default:o(()=>[n(s(He),null,{default:o(()=>[n(s(ue),{class:"sticky top-0 bg-background border-b z-10 hover:bg-background"},{default:o(()=>[n(s(de),{class:"w-[50px]"},{default:o(()=>[l("div",Mt,[l("input",{type:"checkbox",onChange:Ue,checked:Fe.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ht)])]),_:1}),g.isSuperAdmin?(i(),R(s(de),{key:0},{default:o(()=>e[58]||(e[58]=[d("Company Name")])),_:1})):j("",!0),(i(),c($,null,N(te,t=>n(s(de),{key:t,class:"cursor-pointer",onClick:u=>be(t)},{default:o(()=>[l("div",Bt,[d(b(t.replace(/_/g," ").replace(/^./,u=>u.toUpperCase()))+" ",1),W.value===t?(i(),c("div",Lt,[q.value==="asc"?(i(),c("svg",Pt,e[59]||(e[59]=[l("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(i(),c("svg",Et,e[60]||(e[60]=[l("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(i(),c("div",It,e[61]||(e[61]=[l("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M8 10l4-4 4 4"}),l("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),n(s(de),null,{default:o(()=>e[62]||(e[62]=[d("Actions")])),_:1})]),_:1})]),_:1}),n(s(Ge),null,{default:o(()=>[H.value.length===0?(i(),R(s(ue),{key:0},{default:o(()=>[n(s(Z),{colspan:g.isSuperAdmin?te.length+3:te.length+2,class:"text-center py-8"},{default:o(()=>e[63]||(e[63]=[d(" No rejections found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):j("",!0),(i(!0),c($,null,N(H.value,t=>(i(),R(s(ue),{key:t.id,class:"hover:bg-muted/50"},{default:o(()=>[n(s(Z),{class:"text-center"},{default:o(()=>[F(l("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[18]||(e[18]=u=>A.value=u),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,Ot),[[Ie,A.value]])]),_:2},1024),g.isSuperAdmin?(i(),R(s(Z),{key:0},{default:o(()=>{var u;return[d(b(((u=t.tenant)==null?void 0:u.name)||"—"),1)]}),_:2},1024)):j("",!0),(i(),c($,null,N(te,u=>n(s(Z),{key:u,class:"whitespace-nowrap"},{default:o(()=>{var w,B;return[u==="date"?(i(),c($,{key:0},[d(b(le(t[u])),1)],64)):u==="rejection_type"?(i(),c("span",Yt,b(t[u]),1)):u==="reason_code"?(i(),c($,{key:2},[d(b(((w=t.reason_code)==null?void 0:w.reason_code)||"—")+" ",1),(B=t.reason_code)!=null&&B.deleted_at?(i(),c("span",Wt,"(Deleted)")):j("",!0)],64)):u==="disputed"?(i(),c($,{key:3},[d(b(t[u]?"Yes":"No"),1)],64)):u==="driver_controllable"?(i(),c($,{key:4},[d(b(t[u]===null?"N/A":t[u]?"Yes":"No"),1)],64)):(i(),c($,{key:5},[d(b(t[u]),1)],64))]}),_:2},1024)),64)),n(s(Z),null,{default:o(()=>[l("div",qt,[n(y,{size:"sm",onClick:u=>me(t),variant:"warning"},{default:o(()=>[n(D,{name:"pencil",class:"mr-1 h-4 w-4"}),e[64]||(e[64]=d(" Edit "))]),_:2},1032,["onClick"]),n(y,{size:"sm",variant:"destructive",onClick:u=>$e(t.id)},{default:o(()=>[n(D,{name:"trash",class:"mr-1 h-4 w-4"}),e[65]||(e[65]=d(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),g.rejections.links?(i(),c("div",Ht,[l("div",Gt,[l("div",Jt,[l("span",null,"Showing "+b(H.value.length)+" of "+b(g.rejections.data.length)+" entries",1),l("div",Qt,[e[66]||(e[66]=l("span",{class:"text-sm"},"Show:",-1)),F(l("select",{"onUpdate:modelValue":e[19]||(e[19]=t=>V.value=t),onChange:De,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(i(),c($,null,N([10,25,50,100],t=>l("option",{key:t,value:t},b(t),9,Kt)),64))],544),[[U,V.value]])])]),l("div",Xt,[(i(!0),c($,null,N(g.rejections.links,t=>(i(),R(y,{key:t.label,onClick:u=>Ae(t.url),disabled:!t.url,variant:"ghost",size:"sm",class:J(["mx-1",{"bg-primary/10 text-primary border-primary":t.active}])},{default:o(()=>[l("span",{innerHTML:t.label},null,8,Zt)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):j("",!0)]),_:1})]),_:1}),n(s(ne),{open:E.value,"onUpdate:open":e[21]||(e[21]=t=>E.value=t)},{default:o(()=>[n(s(oe),{class:"sm:max-w-2xl"},{default:o(()=>[n(s(se),null,{default:o(()=>[n(s(ae),null,{default:o(()=>[d(b(I.value?"Edit":"Add")+" Rejection",1)]),_:1}),n(s(re),null,{default:o(()=>[d(" Fill in the details to "+b(I.value?"update":"add")+" a rejection. ",1)]),_:1})]),_:1}),n(ft,{rejection:I.value,reasons:g.rejection_reason_codes,tenants:g.tenants,"is-super-admin":g.isSuperAdmin,"tenant-slug":g.tenantSlug,onClose:e[20]||(e[20]=t=>E.value=!1)},null,8,["rejection","reasons","tenants","is-super-admin","tenant-slug"])]),_:1})]),_:1},8,["open"]),g.isSuperAdmin?(i(),R(s(ne),{key:1,open:f.value,"onUpdate:open":e[25]||(e[25]=t=>f.value=t)},{default:o(()=>[n(s(oe),{class:"sm:max-w-lg"},{default:o(()=>[n(s(se),null,{default:o(()=>[n(s(ae),null,{default:o(()=>e[67]||(e[67]=[d("Manage Reason Codes")])),_:1}),n(s(re),null,{default:o(()=>e[68]||(e[68]=[d(" Create and manage reason codes for rejections. ")])),_:1})]),_:1}),l("div",el,[l("div",tl,[e[70]||(e[70]=l("h3",{class:"text-sm font-medium"},"Current Reason Codes",-1)),n(y,{onClick:ke,size:"sm",variant:"outline"},{default:o(()=>[n(D,{name:"plus",class:"mr-2 h-4 w-4"}),e[69]||(e[69]=d(" Add New Code "))]),_:1})]),l("div",ll,[!g.rejection_reason_codes||g.rejection_reason_codes.length===0?(i(),c("div",nl," No reason codes found ")):(i(),c("div",ol,[(i(!0),c($,null,N(g.rejection_reason_codes,t=>(i(),c("div",{key:t.id,class:"flex items-center justify-between p-3 border rounded-md hover:bg-muted/50 group"},[l("div",{class:"flex-1 cursor-pointer",onClick:u=>we(t)},[l("div",al,[d(b(t.reason_code)+" ",1),t.deleted_at?(i(),c("span",rl,"(Deleted)")):j("",!0)]),t.description?(i(),c("div",dl,b(t.description),1)):j("",!0)],8,sl),l("div",il,[g.isSuperAdmin?(i(),c($,{key:0},[t.deleted_at?(i(),c($,{key:0},[n(y,{onClick:u=>Re(t.id),size:"sm",variant:"outline"},{default:o(()=>[n(D,{name:"refresh",class:"mr-2 h-4 w-4"}),e[71]||(e[71]=d(" Restore "))]),_:2},1032,["onClick"]),n(y,{onClick:u=>Te(t.id),size:"sm",variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),e[72]||(e[72]=d(" Permanently Delete "))]),_:2},1032,["onClick"])],64)):(i(),R(y,{key:1,onClick:u=>ve(t.id),size:"sm",variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),e[73]||(e[73]=d(" Delete "))]),_:2},1032,["onClick"]))],64)):(i(),R(y,{key:1,onClick:u=>ve(t.id),size:"sm",variant:"destructive"},{default:o(()=>[n(D,{name:"trash",class:"mr-2 h-4 w-4"}),e[74]||(e[74]=d(" Delete "))]),_:2},1032,["onClick"]))])]))),128))]))])]),x.value?(i(),c("div",ul,[l("h3",cl,b(r.value?"Edit":"Add")+" Reason Code",1),l("div",fl,[l("div",null,[n(s(C),{for:"reason_code"},{default:o(()=>e[75]||(e[75]=[d("Code")])),_:1}),n(s(P),{id:"reason_code",modelValue:p.value.reason_code,"onUpdate:modelValue":e[22]||(e[22]=t=>p.value.reason_code=t),placeholder:"Enter reason code"},null,8,["modelValue"])]),l("div",null,[n(s(C),{for:"description"},{default:o(()=>e[76]||(e[76]=[d("Description")])),_:1}),n(s(P),{id:"description",modelValue:p.value.description,"onUpdate:modelValue":e[23]||(e[23]=t=>p.value.description=t),placeholder:"Enter description"},null,8,["modelValue"])]),l("div",pl,[n(y,{onClick:Ce,variant:"ghost",size:"sm"},{default:o(()=>e[77]||(e[77]=[d("Cancel")])),_:1}),n(y,{onClick:Se,variant:"default",size:"sm"},{default:o(()=>e[78]||(e[78]=[d("Save")])),_:1})])])])):j("",!0),n(s(ie),{class:"mt-6"},{default:o(()=>[n(y,{onClick:e[24]||(e[24]=t=>f.value=!1),variant:"outline"},{default:o(()=>e[79]||(e[79]=[d("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):j("",!0),n(s(ne),{open:Y.value,"onUpdate:open":e[28]||(e[28]=t=>Y.value=t)},{default:o(()=>[n(s(oe),null,{default:o(()=>[n(s(se),null,{default:o(()=>[n(s(ae),null,{default:o(()=>e[80]||(e[80]=[d("Confirm Deletion")])),_:1}),n(s(re),null,{default:o(()=>e[81]||(e[81]=[d(" Are you sure you want to delete this reason code? This action cannot be undone. ")])),_:1})]),_:1}),n(s(ie),{class:"mt-4"},{default:o(()=>[n(y,{type:"button",onClick:e[26]||(e[26]=t=>Y.value=!1),variant:"outline"},{default:o(()=>e[82]||(e[82]=[d(" Cancel ")])),_:1}),n(y,{type:"button",onClick:e[27]||(e[27]=t=>je(pe.value)),variant:"destructive"},{default:o(()=>e[83]||(e[83]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n(s(ne),{open:z.value,"onUpdate:open":e[31]||(e[31]=t=>z.value=t)},{default:o(()=>[n(s(oe),null,{default:o(()=>[n(s(se),null,{default:o(()=>[n(s(ae),null,{default:o(()=>e[84]||(e[84]=[d("Confirm Bulk Deletion")])),_:1}),n(s(re),null,{default:o(()=>[d(" Are you sure you want to delete "+b(A.value.length)+" rejection records? This action cannot be undone. ",1)]),_:1})]),_:1}),n(s(ie),{class:"mt-4"},{default:o(()=>[n(y,{type:"button",onClick:e[29]||(e[29]=t=>z.value=!1),variant:"outline"},{default:o(()=>e[85]||(e[85]=[d(" Cancel ")])),_:1}),n(y,{type:"button",onClick:e[30]||(e[30]=t=>Ve()),variant:"destructive"},{default:o(()=>e[86]||(e[86]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1},8,["tenantSlug"]))}};export{zl as default};
