import{d as Y,c as w,r as o,b as E,e as f,f as t,l as e,u as s,V as n,z as b,ah as S,v as h}from"./vendor-Bo5HMgp9.js";import{g as Z}from"./vendor-vue-U3hygByY.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-DEia2gkO.js";import{_ as se,a as te}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-BR8R7YKq.js";import{a as ae}from"./Label.vue_vue_type_script_setup_true_lang-snO2soGp.js";import{_ as U}from"./Button.vue_vue_type_script_setup_true_lang-aefVT2rO.js";import{_ as le,a as ne,b as oe,c as re,d as ie,e as ue,f as de}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BVY8QM9j.js";import{_ as M}from"./Card.vue_vue_type_script_setup_true_lang-BiSo-lfq.js";import{_ as z}from"./CardContent.vue_vue_type_script_setup_true_lang-OH4fMdUO.js";import{_ as R}from"./CardHeader.vue_vue_type_script_setup_true_lang-DnXa1Q0v.js";import{_ as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-Db1edUY4.js";import{_ as ce}from"./Separator.vue_vue_type_script_setup_true_lang-CJcACWIn.js";import{S as me,U as fe,P as D,a as pe,B as ve}from"./vendor-icons-CLnRj7LD.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-olDi9ANG.js";import"./vendor-ui-CdWqhd_O.js";import"./Icon.vue_vue_type_script_setup_true_lang-B-9SXevG.js";import"./app-VbjDVpCc.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dx7kowKY.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-DirIqsNT.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Dd2IWbNm.js";import"./InputError.vue_vue_type_script_setup_true_lang-DX3LQSP2.js";const be={class:"flex flex-col space-y-6 w-full"},ge={class:"relative w-full max-w-lg"},ye={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},xe={class:"flex items-center space-x-2"},we={class:"flex items-center space-x-2"},Se={class:"flex items-center space-x-2"},he={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},ke={class:"relative z-10"},Ce={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},$e={class:"relative z-10"},Ae={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Ue={class:"relative z-10"},Me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},ze={class:"relative z-10"},Re=Y({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(d){const r=d,{tenantSlug:i}=r,L=w(()=>[{title:i?"Dashboard":"Admin Dashboard",href:i?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")}]),g=o(r.search||""),p=o(!1),v=o(!1),_=o(!1),k=o(null),C=o(null),$=o(null),c=r.SuperAdmin,u=o(!1),y=o(""),x=o(""),N=w(()=>{if(!g.value.trim())return r.users;const a=g.value.toLowerCase(),l=r.users.data.filter(m=>m.name.toLowerCase().includes(a)||m.email.toLowerCase().includes(a));return{...r.users,data:l}}),O=()=>{k.value=null,p.value=!0},B=()=>{p.value=!1},P=()=>{$.value=null,_.value=!0},T=()=>{_.value=!1},I=()=>{C.value=null,v.value=!0},V=()=>{v.value=!1},q=a=>{k.value=a,p.value=!0},F=a=>{$.value=a,_.value=!0},G=a=>{C.value=a,v.value=!0},H=a=>{y.value=c?route("admin.users.destroy",a):route("users.destroy",[i,a]),x.value=`Are you sure you want to delete user ${a.name}?`,u.value=!0},J=a=>{y.value=c?route("admin.roles.destroy",a):route("roles.destroy",[i,a]),x.value=`Are you sure you want to delete role ${a.name}?`,u.value=!0},K=a=>{y.value=route("admin.tenants.destroy",a),x.value=`Are you sure you want to delete tenant ${a.name}?`,u.value=!0},Q=()=>{u.value=!1},A=()=>{v.value=!1,p.value=!1,_.value=!1},W=w(()=>r.roles.data),X=w(()=>r.tenants.data);return(a,l)=>(f(),E(ee,{breadcrumbs:L.value,tenantSlug:s(i)},{default:t(()=>[e(s(Z),{title:"Users Management"}),e(se,null,{default:t(()=>[n("div",be,[e(te,{title:"User and Role Management",description:"Manage users, roles, and permissions for your application"}),e(s(ce)),n("div",ge,[n("div",ye,[e(s(me),{class:"h-5 w-5 text-gray-400"})]),e(ae,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=m=>g.value=m),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])]),e(s(M),{class:"w-full"},{default:t(()=>[e(s(R),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[e(s(j),{class:"text-xl font-semibold"},{default:t(()=>[n("div",xe,[e(s(fe),{class:"h-5 w-5"}),l[3]||(l[3]=n("span",null,"Users",-1))])]),_:1}),e(U,{onClick:O,variant:"default",size:"sm",class:"gap-1"},{default:t(()=>[e(s(D),{class:"h-4 w-4"}),l[4]||(l[4]=n("span",null,"Add User",-1))]),_:1})]),_:1}),e(s(z),{class:"p-2 md:p-4 lg:p-6"},{default:t(()=>[e(le,{users:N.value,isSuperAdmin:s(c),onEdit:q,onDelete:H},null,8,["users","isSuperAdmin"])]),_:1})]),_:1}),e(s(M),{class:"w-full"},{default:t(()=>[e(s(R),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[e(s(j),{class:"text-xl font-semibold"},{default:t(()=>[n("div",we,[e(s(pe),{class:"h-5 w-5"}),l[5]||(l[5]=n("span",null,"Roles",-1))])]),_:1}),e(U,{onClick:I,variant:"default",size:"sm",class:"gap-1"},{default:t(()=>[e(s(D),{class:"h-4 w-4"}),l[6]||(l[6]=n("span",null,"Add Role",-1))]),_:1})]),_:1}),e(s(z),{class:"p-2 md:p-4 lg:p-6"},{default:t(()=>[e(ne,{roles:d.roles,onEdit:G,onDelete:J},null,8,["roles"])]),_:1})]),_:1}),s(c)?(f(),E(s(M),{key:0,class:"w-full"},{default:t(()=>[e(s(R),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[e(s(j),{class:"text-xl font-semibold"},{default:t(()=>[n("div",Se,[e(s(ve),{class:"h-5 w-5"}),l[7]||(l[7]=n("span",null,"Companies",-1))])]),_:1}),e(U,{onClick:P,variant:"default",size:"sm",class:"gap-1"},{default:t(()=>[e(s(D),{class:"h-4 w-4"}),l[8]||(l[8]=n("span",null,"Add Company",-1))]),_:1})]),_:1}),e(s(z),null,{default:t(()=>[e(oe,{tenants:d.tenants,onEdit:F,onDelete:K},null,8,["tenants"])]),_:1})]),_:1})):b("",!0),e(S,{name:"fade"},{default:t(()=>[p.value?(f(),h("div",he,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:B}),n("div",ke,[e(re,{user:k.value,roles:W.value,permissions:d.permissions,tenants:X.value,isSuperAdmin:s(c),tenantSlug:s(i),onClose:B,onSaved:A},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])])])):b("",!0)]),_:1}),e(S,{name:"fade"},{default:t(()=>[_.value?(f(),h("div",Ce,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:T}),n("div",$e,[e(ie,{tenants:d.tenants,tenant:$.value,onClose:T,onSaved:A},null,8,["tenants","tenant"])])])):b("",!0)]),_:1}),e(S,{name:"fade"},{default:t(()=>[v.value?(f(),h("div",Ae,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:V}),n("div",Ue,[e(ue,{role:C.value,permissions:d.permissions,isSuperAdmin:s(c),tenantSlug:s(i),onClose:V,onSaved:A},null,8,["role","permissions","isSuperAdmin","tenantSlug"])])])):b("",!0)]),_:1}),e(S,{name:"fade"},{default:t(()=>[u.value?(f(),h("div",Me,[n("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:l[1]||(l[1]=m=>u.value=!1)}),n("div",ze,[e(de,{deleteUrl:y.value,message:x.value,tenantSlug:s(i),onCancel:l[2]||(l[2]=m=>u.value=!1),onConfirmed:Q},null,8,["deleteUrl","message","tenantSlug"])])])):b("",!0)]),_:1})])]),_:1})]),_:1},8,["breadcrumbs","tenantSlug"]))}}),ss=_e(Re,[["__scopeId","data-v-cb2ccedf"]]);export{ss as default};
