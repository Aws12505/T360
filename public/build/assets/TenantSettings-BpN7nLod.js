import{d as L,c as k,r as w,b as C,e as o,f as p,z as m,u as i,X as t,F as n,E as a,aj as A,G as P,S as y,U as r,C as T,H as U,O as E,Y as M,ah as j,D as G}from"./vendor-Bl7QtHDZ.js";import{x as F,g as H}from"./vendor-vue-CegDyOO_.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-CJwyM51M.js";import{_ as q}from"./Layout.vue_vue_type_script_setup_true_lang-ar4AaGNi.js";import{_ as O}from"./Button.vue_vue_type_script_setup_true_lang-CmY1RpaM.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-DqmS51Fd.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-B8UEvjKs.js";import{_}from"./Separator.vue_vue_type_script_setup_true_lang-xzyxXuy0.js";import{u as R}from"./use-toast-Dc_V-XEh.js";import{_ as J}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-DhueZ-Se.js";import"./vendor-axios-xsH4HHeE.js";import"./utils-DnnPsXYS.js";import"./vendor-ui-B_LrUle4.js";import"./Icon.vue_vue_type_script_setup_true_lang-BJi62zlW.js";import"./vendor-icons-coAGW0bc.js";import"./useInitials-DzeGKvtI.js";import"./app-Do9i6_Lx.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BGaPs1OX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"space-y-6"},W={class:"border-b"},X={class:"flex space-x-8"},Q={key:0,class:"space-y-6"},Z={key:0,class:"flex flex-col items-center space-y-3 p-4 border rounded-md bg-muted/50"},ee={class:"w-32 h-32 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},te=["src"],se={class:"grid gap-2"},ie={key:0,class:"text-sm text-destructive"},oe={class:"grid gap-2"},ne=["value"],re={key:0,class:"text-sm text-destructive"},ae={class:"grid gap-2"},de={class:"flex items-start space-x-4"},le={key:0,class:"w-24 h-24 rounded-md overflow-hidden border border-border flex items-center justify-center bg-white"},ce=["src"],me={class:"flex-1"},ue={key:0,class:"text-sm text-destructive"},ge={class:"flex items-center gap-4"},pe={key:0},be={key:1},fe={class:"text-sm text-neutral-600"},ve={key:1,class:"space-y-6"},ye={key:0,class:"bg-card rounded-lg border shadow-sm p-6"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"space-y-2"},he={class:"text-lg font-semibold"},Se={class:"text-sm text-muted-foreground"},ke={class:"space-y-2 md:text-right"},we={class:"text-2xl font-bold"},Ce={class:"space-y-3 col-span-1 md:col-span-2"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Te={class:"bg-muted/50 p-3 rounded-md"},ze={class:"font-medium"},Ne={class:"bg-muted/50 p-3 rounded-md"},De={class:"font-medium"},$e={class:"bg-muted/50 p-3 rounded-md"},Ve={class:"font-medium"},Be={class:"text-xs text-muted-foreground"},Ie={key:0,class:"space-y-3 col-span-1 md:col-span-2"},Le={class:"bg-muted/50 p-3 rounded-md"},Pe={key:0},Ue={key:1},Ee={key:0},Me={key:1},je={key:2},Ge={key:2},Fe={key:3,class:"mt-1 text-sm text-muted-foreground"},He={key:1,class:"bg-muted/50 p-6 rounded-lg border text-center"},lt=L({__name:"TenantSettings",props:{tenant:{type:Object,required:!0},tenantSlug:{type:String,required:!0},subscription:{type:Object,default:null},permissions:Array},setup(s){const c=s,h=k(()=>Array.isArray(c.permissions)?c.permissions.map(l=>l==null?void 0:l.name).filter(Boolean):[]),b=w("company");k(()=>[{title:c.tenantSlug?"Dashboard":"Admin Dashboard",href:c.tenantSlug?route("dashboard",{tenantSlug:c.tenantSlug}):route("admin.dashboard")}]);const{toast:N}=R(),v=w(null),d=F({name:c.tenant.name,slug:c.tenant.slug,timezone:c.tenant.timezone??"America/Indiana/Indianapolis",image:null}),D={"America/New_York":"Eastern Time (ET)","America/Chicago":"Central Time (CT)","America/Denver":"Mountain Time (MT)","America/Los_Angeles":"Pacific Time (PT)","America/Anchorage":"Alaska Time (AKT)","Pacific/Honolulu":"Hawaii Time (HAST)","America/Phoenix":"Arizona Time (no DST)","America/Indiana/Indianapolis":"Eastern Time (Indiana)"},$=l=>{const e=l.target;if(e.files&&e.files[0]){d.image=e.files[0];const g=new FileReader;g.onload=u=>{var f;v.value=(f=u.target)==null?void 0:f.result},g.readAsDataURL(e.files[0])}},V=()=>{d.post(route("tenant.settings.update",c.tenantSlug),{onSuccess:()=>{N({title:"Success",description:"Company settings updated successfully"})},preserveScroll:!0})},B=(l,e="USD")=>l?new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD"}).format(l):"$0.00",S=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",I=(l,e)=>{if(!l||!e)return"N/A";const g=l.toString().padStart(2,"0"),u=e.toString().length===4?e.toString().slice(-2):e.toString();return`${g}/${u}`};return(l,e)=>(o(),C(Y,{breadcrumbs:c.breadcrumbItems,tenantSlug:c.tenantSlug,permissions:c.permissions},{default:p(()=>[m(i(H),{title:"Company"}),m(q,{permissions:c.permissions},{default:p(()=>{var g;return[t("div",K,[m(J,{title:"Company",description:"Manage your company information and subscription"}),m(i(_)),t("div",W,[t("div",X,[t("button",{onClick:e[0]||(e[0]=u=>b.value="company"),class:A(["py-2 px-1 -mb-px font-medium text-sm",b.value==="company"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Company Settings ",2),t("button",{onClick:e[1]||(e[1]=u=>b.value="subscription"),class:A(["py-2 px-1 -mb-px font-medium text-sm",b.value==="subscription"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"])}," Subscription Details ",2)])]),b.value==="company"?(o(),n("div",Q,[(g=s.tenant)!=null&&g.image_path?(o(),n("div",Z,[e[4]||(e[4]=t("div",{class:"text-sm font-medium"},"Current Company Logo",-1)),t("div",ee,[t("img",{src:`/storage/${s.tenant.image_path}`,alt:"Company Logo",class:"max-w-full max-h-full object-contain"},null,8,te)]),e[5]||(e[5]=t("div",{class:"text-xs text-muted-foreground"}," Logo is optimized and converted to SVG for better quality ",-1))])):a("",!0),t("form",{onSubmit:P(V,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[t("div",se,[m(i(x),{for:"name"},{default:p(()=>e[6]||(e[6]=[y("Company Name")])),_:1}),m(i(z),{id:"name",modelValue:i(d).name,"onUpdate:modelValue":e[2]||(e[2]=u=>i(d).name=u),placeholder:"Enter company name",class:"mt-1 block w-full"},null,8,["modelValue"]),i(d).errors.name?(o(),n("p",ie,r(i(d).errors.name),1)):a("",!0)]),t("div",oe,[m(i(x),{for:"timezone"},{default:p(()=>e[7]||(e[7]=[y("Company Timezone")])),_:1}),T(t("select",{id:"timezone","onUpdate:modelValue":e[3]||(e[3]=u=>i(d).timezone=u),class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"},[(o(),n(U,null,E(D,(u,f)=>t("option",{key:f,value:f},r(u),9,ne)),64))],512),[[M,i(d).timezone]]),i(d).errors.timezone?(o(),n("p",re,r(i(d).errors.timezone),1)):a("",!0)]),t("div",ae,[m(i(x),{for:"image"},{default:p(()=>e[8]||(e[8]=[y("Update Company Logo")])),_:1}),t("div",de,[v.value?(o(),n("div",le,[t("img",{src:v.value,alt:"New Company Logo Preview",class:"max-w-full max-h-full object-contain"},null,8,ce)])):a("",!0),t("div",me,[m(i(z),{id:"image",type:"file",onChange:$,accept:"image/jpeg,image/png,image/gif,image/svg+xml",class:"mt-1 block w-full"}),e[9]||(e[9]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Accepted formats: JPEG, PNG, GIF, SVG. Max size: 2MB. Will be optimized and converted to SVG. ",-1)),i(d).errors.image?(o(),n("p",ue,r(i(d).errors.image),1)):a("",!0)])])]),t("div",ge,[h.value&&h.value.includes("tenant-settings.update")?(o(),C(i(O),{key:0,type:"submit",disabled:i(d).processing},{default:p(()=>[i(d).processing?(o(),n("span",pe,"Updating...")):(o(),n("span",be,"Save Changes"))]),_:1},8,["disabled"])):a("",!0),m(j,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:p(()=>[T(t("p",fe,"Saved.",512),[[G,i(d).recentlySuccessful]])]),_:1})])],32)])):a("",!0),b.value==="subscription"?(o(),n("div",ve,[s.subscription?(o(),n("div",ye,[t("div",xe,[t("div",_e,[t("h3",he,r(s.subscription.name),1),t("p",Se,r(s.subscription.description||"No description available"),1)]),t("div",ke,[t("div",we,r(B(s.subscription.price,s.subscription.currency_code)),1)]),t("div",Ce,[m(i(_)),e[13]||(e[13]=t("h4",{class:"font-medium"},"Billing Information",-1)),t("div",Ae,[t("div",Te,[e[10]||(e[10]=t("div",{class:"text-xs text-muted-foreground"},"Next Billing",-1)),t("div",ze,r(S(s.subscription.next_billing_at)),1)]),t("div",Ne,[e[11]||(e[11]=t("div",{class:"text-xs text-muted-foreground"},"Last Billing",-1)),t("div",De,r(S(s.subscription.last_billing_at)),1)]),t("div",$e,[e[12]||(e[12]=t("div",{class:"text-xs text-muted-foreground"},"Payment Method",-1)),t("div",Ve,r(s.subscription.card_type)+" •••• "+r(s.subscription.last_four_digits),1),t("div",Be,"Expires "+r(I(s.subscription.expiry_month,s.subscription.expiry_year)),1)])])]),s.subscription.billing_address?(o(),n("div",Ie,[m(i(_)),e[14]||(e[14]=t("h4",{class:"font-medium"},"Billing Address",-1)),t("div",Le,[s.subscription.billing_address.street?(o(),n("div",Pe,r(s.subscription.billing_address.street),1)):a("",!0),s.subscription.billing_address.street2?(o(),n("div",Ue,r(s.subscription.billing_address.street2),1)):a("",!0),t("div",null,[s.subscription.billing_address.city?(o(),n("span",Ee,r(s.subscription.billing_address.city)+", ",1)):a("",!0),s.subscription.billing_address.state?(o(),n("span",Me,r(s.subscription.billing_address.state),1)):a("",!0),s.subscription.billing_address.zip?(o(),n("span",je,r(s.subscription.billing_address.zip),1)):a("",!0)]),s.subscription.billing_address.country?(o(),n("div",Ge,r(s.subscription.billing_address.country),1)):a("",!0),s.subscription.billing_address.phone?(o(),n("div",Fe," Phone: "+r(s.subscription.billing_address.phone),1)):a("",!0)])])):a("",!0)])])):(o(),n("div",He,e[15]||(e[15]=[t("h3",{class:"text-lg font-medium mb-2"},"No Subscription Found",-1),t("p",{class:"text-muted-foreground"},"Your company doesn't have an active subscription.",-1)])))])):a("",!0)])]}),_:1},8,["permissions"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}});export{lt as default};
